if("undefined"==typeof OGX)var OGX=function(){};OGX.CalendarDataHelper=function(){},OGX.CalendarDataHelper.getDay=function(r,e){"use strict";var a,n,t,i,u,c={},d=r.weekday();for(t in e.calendar.recurring)if(a=t.split("_"),a[0]=moment(a[0]+" 00:00:00").unix(),a[1]=moment(a[1]+" 23:59:59").unix(),n=r.unix(),n>=a[0]&&n<=a[1]&&e.calendar.recurring[t].hasOwnProperty(d))for(i in e.calendar.recurring[t][d]){c.hasOwnProperty(i)||(c[i]=[]);for(var l=0;l<e.calendar.recurring[t][d][i].length;l++)u=e.calendar.recurring[t][d][i][l],u.calendar={type:"recurring",weekday:d},c[i].push(u)}var o=r.format("YYYY-MM-DD");if(e.calendar.unique.hasOwnProperty(o))for(i in e.calendar.unique[o]){c.hasOwnProperty(i)||(c[i]=[]);for(var l=0;l<e.calendar.unique[o][i].length;l++)u=e.calendar.unique[o][i][l],u.calendar={type:"unique",date:o},c[i].push(u)}return c},OGX.CalendarDataHelper.getAptTotal=function(r,e){"use strict";var a,n,t,i,u=[],c=r.weekday();for(t in e.calendar.recurring)if(a=t.split("_"),a[0]=moment(a[0]+" 00:00:00").unix(),a[1]=moment(a[1]+" 23:59:59").unix(),n=r.unix(),n>=a[0]&&n<=a[1]&&e.calendar.recurring[t].hasOwnProperty(c))for(i in e.calendar.recurring[t][c])u=u.concat(e.calendar.recurring[t][c][i]);var d=r.format("YYYY-MM-DD");if(e.calendar.unique.hasOwnProperty(d))for(i in e.calendar.unique[d])u=u.concat(e.calendar.unique[d][i]);return u.length},OGX.CalendarDataHelper.genId=function(){"use strict";for(var r=Math.floor((new Date).getTime()/1e3).toString(16);r.length<24;)r+=Math.floor(10*Math.random()).toString();return r},OGX.CalendarDataHelper.addUniqueApt=function(r,e){"use strict";return r.calenda.unique.hasOwnProperty(e.date)||(r.calenda.unique[e.date]={}),r.calenda.unique[e.date].hasOwnProperty(e.start)||(r.calenda.unique[e.date][e.start]=[]),e._id=OGX.CalendarDataHelper.genId(),r.calenda.unique[e.date][e.start].push(e),!0},OGX.CalendarDataHelper.removeUniqueApt=function(r,e){"use strict";return OGX.CalendarDataHelper.removeUniqueAptById(r,e._id)},OGX.CalendarDataHelper.removeUniqueAptById=function(r,e){"use strict";for(var a in r.calendar.unique)for(var n in r.calendar.recurring[a])for(var t=0;t<r.calendar.recurring[a][n].length;t++)if(r.calendar.recurring[a][n][t]._id===e)return r.calendar.recurring[a][n].splice(t,1),!0;return!1},OGX.CalendarDataHelper.updateUniqueApt=function(r,e){"use strict";var a=e._id;return!!OGX.CalendarDataHelper.removeUniqueAptById(r,a)&&OGX.CalendarDataHelper.addUniqueApt(r,e)},OGX.CalendarDataHelper.addRecurringApt=function(r,e){"use strict";for(var a in r.calendar.recurring)return r.calendar.recurring[a].hasOwnProperty(e.weekday)||(r.calendar.recurring[a][String(e.weekday)]={}),r.calendar.recurring[a][String(e.weekday)].hasOwnProperty(e.start)||(r.calendar.recurring[a][String(e.weekday)][e.start]=[]),r.calendar.recurring[a][String(e.weekday)][e.start].push(e),!0;return!1},OGX.CalendarDataHelper.updateRecurringApt=function(r,e){"use strict";var a=e._id;return!!OGX.CalendarDataHelper.removeRecurringAptById(r,a)&&OGX.CalendarDataHelper.addRecurringApt(r,e)},OGX.CalendarDataHelper.removeRecurringApt=function(r,e){"use strict";return OGX.CalendarDataHelper.removeRecurringAptById(r,e._id)},OGX.CalendarDataHelper.removeRecurringAptById=function(r,e){"use strict";for(var a in r.calendar.recurring)for(var n in r.calendar.recurring[a])for(var t in r.calendar.recurring[a][n])for(var i=0;i<r.calendar.recurring[a][n][t].length;i++)if(r.calendar.recurring[a][n][t][i]._id===e._id)return r.calendar.recurring[a][n][t].splice(i,1),!0;return!1};