if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.Window=function(n){"use strict";function i(){var n=c();$(y.container).append(n),A.el=g=$(y.container).find(".ogx_window:last");var i=g.find(".ogx_view:first"),o=g.height()-i.position().top;i.height(o)}function o(n,i){var o;return i.indexOf("%")!==-1?(o=i.split("%"),o=parseInt(o[0]),o=Math.round(o*$(window)[n]()/100)):(o=i.split("px"),o=parseInt(o[0])),o}function t(n){return n.hasOwnProperty("originalEvent")?n.originalEvent.changedTouches[0]:n}function e(n){n?g.on(h,function(n){n=t(n),M=n.pageX,T=n.pageY,X=0,W=0,D=0,g.css("transition","none"),x||(x=g.position().left,G=g.position().top),d(!0),$("body").on(f,function(n){n.preventDefault(),n.stopImmediatePropagation(),n=t(n),D||!X&&!W||(D=Math.abs(n.pageX-M)>Math.abs(n.pageY-T)?"x":"y"),X=n.pageX-M,W=n.pageY-T}),$("body").on(O,function(n){if(d(!1),$("body").off(f),$("body").off(O),n=t(n),I=Math.abs(x-X),E=Math.abs(G-W),A.anim===OGX.Window.ANIM_RIGHT||A.anim===OGX.Window.ANIM_LEFT){if(E<I)if(A.anim===OGX.Window.ANIM_RIGHT){if(Math.abs(X)>y.drag_min_x)return void y.core.hideWindow(y)}else if(A.anim===OGX.Window.ANIM_LEFT&&x>X)return void y.core.hideWindow(y);g.on("transitionend",function(){g.off("transitionend"),g.css("transition","none")}),I&&g.css("transition","all "+Math.round(X*y.win_anim_in_time/g.width())+"ms"),g.css({transform:"translate3D("+x+"px, 0px, 0px)"})}else if(A.anim===OGX.Window.ANIM_BOTTOM||A.anim===OGX.Window.ANIM_TOP){if(E>I)if(A.anim===OGX.Window.ANIM_BOTTOM){if(W>y.drag_min_y&&T<n.pageY)return void y.core.hideWindow(y)}else if(A.anim===OGX.Window.ANIM_TOP&&G>W&&Math.abs(W)>y.drag_min_y)return void y.core.hideWindow(y);g.on("transitionend",function(){g.off("transitionend"),g.css("transition","none")}),E&&g.css("transition","all "+Math.round(W*y.win_anim_in_time/g.height())+"ms"),g.css({transform:"translate3D(0px, "+G+"px, 0px)"})}x=!1})}):g.off(h)}function d(n){n?u||(u=setInterval(a,10)):u&&(clearInterval(u),u=!1)}function a(){"x"!==D||A.anim!==OGX.Window.ANIM_RIGHT&&A.anim!==OGX.Window.ANIM_LEFT?"y"!==D||A.anim!==OGX.Window.ANIM_BOTTOM&&A.anim!==OGX.Window.ANIM_TOP||A.anim&&(A.anim===OGX.Window.ANIM_BOTTOM?W>0&&g.css({transform:"translate3D(0px, "+(G+W)+"px, 0px)"}):A.anim===OGX.Window.ANIM_TOP&&W<0&&g.css({transform:"translate3D(0px, "+W+"px, 0px)"})):Math.abs(G-W)<Math.abs(x-X)&&A.anim&&(A.anim===OGX.Window.ANIM_RIGHT?x+X+A.el.outerWidth()>$(window).width()&&g.css({transform:"translate3D("+(x+X)+"px, 0px, 0px)"}):A.anim===OGX.Window.ANIM_LEFT&&x>X&&g.css({transform:"translate3D("+X+"px, 0px, 0px)"}))}function s(n){n?g.on("click",".ogx_window_main_icon",function(){y.core.hideWindow(y)}):g.off("click",".ogx_window_main_icon")}function r(n){n?g.on("click",".ogx_window_icon",function(){g.trigger(OGX.Window.HIT_ICON,{index:$(this).index()})}):g.off("click",".ogx_window_icon")}function w(n){n?window.addEventListener("resize",A.update):window.removeEventListener("resize",A.update)}function c(){var n={};n.w=o("width",y.width)+"px",n.h=o("height",y.height)+"px",n.style=y.style,n.title=y.title,n.css=y.css,n.icons=y.icons,n.html="",A.id=n.id=(new Date).getTime()+Math.round(1e3*Math.random()),y.zindex&&(n.zindex="z-index:"+y.zindex+";"),y.html&&(n.html=y.html),y.template&&(n.html=OGX.Templater.getTemplate(y.template));var i=OGX.Templater.templatize(n,y.win_html);return i}function l(){for(var n in N)y.hasOwnProperty(n)||(y[n]=N[n]);switch(y.mode){case OGX.Window.MODE_MOBILE:h="touchstart",O="touchend",f="touchmove";break;case OGX.Window.MODE_DESKTOP:h="mousedown",O="mouseup",f="mousemove"}}function _(){if(l(),i(),p=A.el.find(".ogx_view:first"),y.scroll){if("undefined"==typeof OGX.Scroller)return void console.log("%c CRITICAL ERROR - OGX.Scroller not found! ","background:#222; color: #FF0000");if("undefined"==typeof OGX.Templater)return void console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000");v=A.el.find(".ogx_view:first"),m=new OGX.Scroller({container:v[0],init_delay:100,nartual_scroll:y.nartual_scroll}),v.on(OGX.Scroller.READY,function(){v.off(OGX.Scroller.READY),A.el.trigger(OGX.Window.READY),A.ready=!0;var n=m.getOuter(),i=$(window).height();y.style!==OGX.Window.STYLE_NONE&&(i-=A.el.find(".ogx_window_head:first").height()),$(n).css("height",i+"px"),p=m.getContainer()})}else A.ready=!0;y.icons.length>0&&r(!0),y.drag&&e(!0),s(!0),w(!0)}var h,O,f,m,p,u,g,x,G,X,W,M,T,I,E,v,A=this,y=n,N={style:OGX.Window.STYLE_BACK,mode:OGX.Window.MODE_MOBILE,icons:[],css:"",scroll:!1,nartual_scroll:!0,drag:!0,drag_min_x:100,drag_max_y:30,drag_min_y:100,width:"100%",height:"100%",title:"",win_html:'<div class="ogx_window ogx_hw $css" style="width:$w; height:$h; $zindex" data-ogx="$id"><div class="ogx_window_head ogx_window_head_$style"><span class="ogx_window_main_$style ogx_window_main_icon"></span><span class="ogx_window_title">$title</span><span class="ogx_window_icons">{{loop $icons <span class="ogx_window_icon" style="background-image:url(\'$icons.$\')"></span>}}</span></div><div class="ogx_view">$html</div></div>',html:!1,template:!1,win_anim_in_time:350,win_anim_out_time:350,zindex:!1},D=0;this.snooze=!1,this.scroll=y.scroll,this.views={},this.anim=null,this.el=null,this.status=OGX.Window.CLOSED,this.zindex=y.zindex,this.ready=!1,this.update=function(){var n=o("width",y.width),i=o("height",y.height);g.css("width",n).css("height",i);var t=g.find(".ogx_view:first");i=g.height()-t.position().top,t.height(i),y.scroll&&m.update()},this.updateScroll=function(){return!!y.scroll&&(m.update(),!0)},this.getTiming=function(){return{in:y.win_anim_in_time,out:y.win_anim_out_time}},this.getContainer=function(){return p},this.swapIcon=function(n,i){y.icons[n]=i,A.el.find(".ogx_window_icons").find(".ogx_window_icon:eq("+String(n)+")").css("background-image",i)},this.destroy=function(){v&&v.off(OGX.Scroller.READY),y.scroll&&m.destroy(),y.icons.length&&r(!1),w(!1),y.drag&&e(!1),s(!1),d(!1)},_()},OGX.Window=function(n){"use strict";return new OGX.prototype.Window(n)},OGX.Window.READY="windowReady",OGX.Window.ANIM_LEFT="windowAnimLeft",OGX.Window.ANIM_RIGHT="windowAnimRight",OGX.Window.ANIM_TOP="windowAnimTop",OGX.Window.ANIM_BOTTOM="windowAnimBottom",OGX.Window.STYLE_BACK="icon_back",OGX.Window.STYLE_CLOSE="icon_close",OGX.Window.STYLE_NONE="none",OGX.Window.CLOSE="windowClose",OGX.Window.CLOSED="windowClosed",OGX.Window.OPEN="windowOpen",OGX.Window.OPENED="windowOpened",OGX.Window.HIT_ICON="windowHitIcon",OGX.Window.MODE_DESKTOP="modeDesktop",OGX.Window.MODE_MOBILE="modeMobile";