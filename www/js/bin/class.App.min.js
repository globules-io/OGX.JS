if("undefined"==typeof OGX){var OGX=function(){};OGX.View=function(){}}OGX.prototype.App=function(){"use strict";function e(e,o){$("body").append('<div class="ogx_stage ogx_hw"></div>'),o.container=$("body").find(".ogx_stage:last")[0];var n=function(){};n.prototype.BaseStage=OGX.prototype.BaseStage,n.prototype[e]=OGX.prototype[e];var t=new n;return t.BaseStage(o),t[e](),t}function o(e){a(!1,e);for(var o in I[W].windows[e].views)w(I[W].windows[e].views[o]);I[W].windows[e].views={},I[W].windows[e].el.remove(),I[W].windows[e].destroy(),delete I[W].windows[e]}function n(e){var o={opac:1,tX:0,tY:0},n=I[W].stage.el.width(),a=I[W].stage.el.height(),i=I[W].windows[e.name],s=i.el.outerWidth(),r=i.el.outerHeight(),p=i.el.find(".ogx_window_main_icon:first"),w=i.getTiming();switch(e.way&&(i.zindex||(i.el.css("z-index",M),M++),e.hasOwnProperty("fade")&&e.fade&&i.el.css("opacity",0)),e.way?(t(e.name,e.anim,!0),w=w.in,p.removeClass("ogx_window_main_icon_left ogx_window_main_icon_right ogx_window_main_icon_top")):(w=w.out,e.hasOwnProperty("fade")&&e.fade&&(o.opac=0)),e.anim){case OGX.Window.ANIM_NONE:break;case OGX.Window.ANIM_TOP:e.way?(o.tY=0,p.addClass("ogx_window_main_icon_top")):o.tY=-r;break;case OGX.Window.ANIM_BOTTOM:e.way?(o.tY=a-r,p.addClass("ogx_window_main_icon_bottom")):o.tY=a;break;case OGX.Window.ANIM_RIGHT:e.way?(o.tX=n-s,p.addClass("ogx_window_main_icon_right")):o.tX=n;break;case OGX.Window.ANIM_LEFT:e.way?(o.tX=0,p.addClass("ogx_window_main_icon_left")):o.tX=-s}"undefined"!=typeof e.anim_params&&(e.anim_params.hasOwnProperty("left")&&(o.tX=n-v("width",e.anim_params.left)),e.anim_params.hasOwnProperty("top")&&(o.tY=v("height",e.anim_params.top)),e.anim_params.hasOwnProperty("right")&&(o.tX=v("width",e.anim_params.right)));var l=100;e.way||(l=0),setTimeout(function(){i.el.on("transitionend",function(){i.el.off("transitionend"),e.way?i.el.removeClass("ogx_window_anim_in"):i.el.removeClass("ogx_window_anim_out"),e.hasOwnProperty("cb")&&e.cb&&(e.hasOwnProperty("params")&&e.params?e.cb.apply(E,[e.params]):e.cb()),e.way?(i.status=OGX.Window.OPENED,I[W].stage.el.trigger(OGX.Window.OPENED,e.name),E.focusWindow(e.name)):(i.status=OGX.Window.CLOSED,I[W].stage.el.trigger(OGX.Window.CLOSED,e.name),e.remove&&E.removeWindow(e.name))}),e.way?(i.status=OGX.Window.OPEN,I[W].stage.el.trigger(OGX.Window.OPEN,e.name)):(E.blurWindow(e.name),i.status=OGX.Window.CLOSE,I[W].stage.el.trigger(OGX.Window.CLOSE,e.name)),i.el.css({transform:"translate3D("+o.tX+"px, "+o.tY+"px, 0px)",opacity:o.opac,transition:"all "+w+"ms",visibility:"visible"})},l)}function t(e,o,n){var t=I[W].stage.el.width(),a=I[W].stage.el.height(),i=I[W].windows[e],s=i.el.outerHeight(),r=i.el.outerWidth();switch(i.el.css("transition","none"),o){case OGX.Window.ANIM_NONE:n&&i.el.css({transform:"translate3D(0px, 0px, 0px)"});break;case OGX.Window.ANIM_TOP:n&&i.el.css({transform:"translate3D(0px, -"+s+"px, 0px)"});break;case OGX.Window.ANIM_BOTTOM:n&&i.el.css({transform:"translate3D(0px, "+a+"px, 0px)"});break;case OGX.Window.ANIM_RIGHT:n&&i.el.css({transform:"translate3D("+t+"px, 0px, 0px)"});break;case OGX.Window.ANIM_LEFT:n&&(t=i.el.outerWidth(),i.el.css({transform:"translate3D("+-r+"px, 0px, 0px)"}))}n||i.el.css("visibility","hidden")}function a(e,o){e?I[W].windows[o].el.on("click",".ogx_window_back",function(){E.hideWindow({name:o})}):I[W].windows[o].el.off("click",".ogx_window_back")}function i(e,o){I[W].popups.hasOwnProperty(o)&&I[W].popups[o].el&&(e?I[W].popups[o].el.on("transitionend",function(){i(!1),s(o)}):I[W].popups[o].el.off("transitionend"))}function s(e){if(I[W].popups.hasOwnProperty(e)){for(var o in I[W].popups[e].views)I[W].popups[e].views[o].destroy(),delete I[W].popups[e].views[o];I[W].popups[e].popup.destroy(),I[W].popups[e].el.remove(),delete I[W].popups[e]}}function r(e){e?I[W].overlay.el.on("touchstart",function(e){e.preventDefault(),e.stopImmediatePropagation(),I[W].stage.el.trigger(OGX.App.OVERLAY_REMOVE),E.removeOverlay(),I[W].popup&&E.removePopup()}):I[W].overlay.el.off("touchstart")}function p(e,o){var n=function(){};n.prototype.BaseView=OGX.prototype.BaseView,n.prototype[e]=OGX.View.prototype[e];var t=new n;return o.hasOwnProperty("template")&&(o.html=OGX.Templater.getTemplate(o.template),o.hasOwnProperty("data")&&"{}"!==JSON.stringify(o.data)&&(o.html=OGX.Templater.templatize(o.data,o.html))),t.BaseView(o),t[e](),setTimeout(function(){t.constructor(o.data)},50),t}function w(e){e.destroyInternal(),e.hasOwnProperty("destroy")&&e.destroy()}function l(e,o,n,t){b=window.location.hash.substr(1);var a={};if("undefined"==typeof n&&(n=!1),"undefined"==typeof t&&(t=!1),t)for(var i in e.data)t[i]=e.data[i];else a.data=e.data;if(e.route.views[o].hasOwnProperty("controller")){var s=e.route.views[o].controller;I[W].controllers[s]=new OGX.Controllers.prototype[s]}if(n||t){if(n&&(a.html=n),t)for(var i in t)a[i]=t[i]}else e.route.views[o].hasOwnProperty("html")&&(a.html=e.route.views[o].html),e.route.views[o].hasOwnProperty("template")&&(a.template=e.route.views[o].template),e.route.views[o].hasOwnProperty("data")&&(a.data=e.route.views[o].data),e.route.views[o].hasOwnProperty("scroll")&&e.route.views[o].scroll&&(a.scroll=!0);a.container=o,a.view=e.route.views[o].view,E.addToStage(a)}function d(e){var o;for(var n in x.routing)if(o=e.match("^"+n+"$"),o&&o.length){o.shift();for(var t={},a=0;a<o.length;a++)t[x.routing[n].properties[a]]=o[a];return{route:x.routing[n],data:t}}return!1}function u(e){var o={url:e};history.pushState(o,"title"+1e3*Math.random(),"index.html#"+e)}function c(e){e?window.addEventListener("resize",f):window.removeEventListener("resize",f)}function f(){var e,o,n,t,a,i;for(var s in I)e=I[s].stage.el.width(),o=I[s].stage.el.height(),I[s].popup&&I[s].popup.hasOwnProperty("el")&&I[s].popup.el&&(a=I[s].popup.width,i=I[s].popup.height,"string"==typeof a&&a.indexOf("%")!==-1&&(a=Number(a.split("%")[0]),a=Math.round(a*e/100),I[s].popup.el.width(a)),"string"==typeof i&&i.indexOf("%")!==-1&&(i=Number(i.split("%")[0]),i=Math.round(i*o/100)),n=Math.round(e/2-a/2),t=Math.round(o/2-i/2),I[s].popup.el.css("top",t+"px"),I[s].popup.el.css("left",n+"px"))}function v(e,o){var n;return o.indexOf("%")!==-1?(n=o.split("%"),n=parseInt(n[0]),n=Math.round(n*I[W].stage.el[e]()/100)):(n=o.split("px"),n=parseInt(n[0])),n}function g(e){for(var o=0;o<e.length;o++)if(x.scopes.indexOf(e[o])!==-1)return!0;return!1}function m(){$(document).on("backbutton",function(e){e.preventDefault(),e.stopImmediatePropagation();var o=!1;for(var n in I[W].windows)E.hideWindow({name:n,remove:!0}),o=!0;o||($(document).trigger(OGX.App.NAV_BACK),navigator.app.backHistory())}),$(window).on("popstate",function(e){null!==e.originalEvent.state?E.goto(e.originalEvent.state.url,!1):b!==x.stages[W].home&&E.goto(x.stages[W].home,!1)})}function y(){var e;for(var o in x.stages)x.stages.hasOwnProperty(o)&&(e=!1,x.stages[o].hasOwnProperty("html")&&(e=x.stages[o].html),x.stages[o].hasOwnProperty("template")&&(e=OGX.Templater.getTemplate(x.stages[o].template)),E.addStage(o,x.stages[o].stage,{html:e,observe:x.stages[o].observe},x.stages[o].use))}function O(){var e,o=[];e=debug?"/html/templates/":"html/templates/";for(var n in x.templates)o.push({name:n,file:e+x.templates[n]});OGX.Templater.loadTemplates(o,h)}function h(){y(),E.goto(x.stages[W].home),$(document).trigger(OGX.App.READY)}function _(){for(var e in R)x.hasOwnProperty(e)||(x[e]=R[e]);E.el=$(document)}function X(){$.getJSON("app.json",function(e){x=e,P()})}function G(){return"undefined"==typeof OGX.Templater?(console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Scroller?(console.log("%c CRITICAL ERROR - OGX.Scroller not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.BaseView?(console.log("%c CRITICAL ERROR - OGX.BaseView not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Stage?(console.log("%c CRITICAL ERROR - OGX.BaseStage not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Window?(console.log("%c CRITICAL ERROR - OGX.Window not found! ","background:#222; color: #FF0000"),!1):"undefined"!=typeof OGX.Popup||(console.log("%c CRITICAL ERROR - OGX.Popup not found! ","background:#222; color: #FF0000"),!1)}function P(){_(),O(),m(),c(!0)}var x,A,b,E=this,R={scopes:["public"],overlay_delay:350,observe:!1,auto_exit:!1},W=!1,C=!1,I={},T=!1,N=new OGX.ResponsiveGraphics({bind:!1}),M=1e3,S={};this.el=null,this.trigger=function(e,o){E.el.trigger(e,o)},this.bindGfx=function(e,o){N.bind(e,o)},this.unbindGfx=function(e){N.unbind(e)},this.refreshGfx=function(e){N.resize(e)},this.showStageNav=function(){T||(T=new OGX.MobileStageNavigator({}))},this.addStage=function(o,n,t,a){if(I.hasOwnProperty(o))return!1;var i=e(n,t);I[o]={stage:i,windows:{},popups:{},views:{},controllers:{},overlay:null,snooze:!1},W=o,i.constructor(),i.ux(!0),"undefined"==typeof a&&(a=!0),a&&E.showStage(o)},this.removeStage=function(e){},this.useStage=function(e){W=e},this.snoozeStage=function(e){if(!I[e].snooze){I[e].snooze=!0;for(var o in I[e].stage.views)I[e].stage.views[o].blur();I[e].stage.el=I[e].stage.el.detach()}},this.wakeStage=function(e){if(I[e].snooze){I[e].snooze=!0;for(var o in I[e].stage.views)I[e].stage.views[o].focus();I[C].stage.el.appendTo("body"),I[e].stage.el=$("body").find(".ogx_stage:last")}},this.showStage=function(e,o){if("undefined"==typeof o&&(o=!1),o){var n=$(window).height();switch(o){case OGX.MobileStage.ANIM_SWAP:I[C].stage.el.on("transitionend",function(){I[C].stage.el.off("transitionend"),I[C].stage.el.css("top",-n+"px"),I[e].stage.el.css("top","0px"),I[e].stage.el.on("transitionend",function(){I[e].stage.el.off("transitionend"),I[e].stage.el.css("transform","scale(1)"),I[C].stage.el.removeClass("ogx_stage_anim"),I[C].stage.el.css("display","none"),C=e,E.el.trigger(OGX.MobileStage.STAGE_CHANGE,{old:C,new:e})})}),I[e].stage.el.addClass("ogx_stage_anim"),I[C].stage.el.addClass("ogx_stage_anim"),I[C].stage.el.css("transform","scale(0.9)"),I[e].stage.el.css("top",n+"px"),I[e].stage.el.css("display","block"),I[e].stage.el.css("transform","scale(0.9)"),I[e].stage.el.addClass("ogx_stage_anim");break;case OGX.MobileStage.ANIM_FLIP:I[e].stage.el.appendTo("body"),I[e].stage.el.addClass("ogx_stage_anim_swap"),I[C].stage.el.addClass("ogx_stage_anim"),I[C].stage.el.addClass("ogx_stage_anim_flip")}}else C&&I[C].stage.el.css("display","none"),I[e].stage.el.css("display","block"),C=e},this.addToStage=function(e){var o;if("undefined"==typeof e)return!1;if(!e.hasOwnProperty("view"))return!1;if(!e.hasOwnProperty("container"))return!1;if("string"!=typeof e.container)return console.log("%c CRITICAL ERROR - container must be a selector for view "+e.view+"! ","background:#222; color: #FF0000"),!1;if(!OGX.View.hasOwnProperty(e.view))return console.log("%c CRITICAL ERROR - OGX.View."+e.view+" not found! ","background:#222; color: #FF0000"),!1;e.hasOwnProperty("add_to_nav")||(e.add_to_nav=!0),OGX.View[e.view].hasOwnProperty("scopes")||(OGX.View[e.view].scopes=["public"]);var n=g(OGX.View[e.view].scopes);return n?(I[W].views.hasOwnProperty(e.container)&&E.removeFromStage(e.container),o=p(e.view,e),I[W].views[e.container]={view:o,name:e.view},!0):(console.log("%c ERROR  - Bad scope for view "+e.view),!1)},this.removeFromStage=function(e){I[W].views.hasOwnProperty(e)&&(w(I[W].views[e].view),delete I[W].views[e])},this.windowExists=function(e){return I[W].windows.hasOwnProperty(e)},this.getWindow=function(e){return!!E.windowExists(e)&&I[W].windows[e]},this.addWindow=function(e){if(!e.hasOwnProperty("name"))return!1;if(E.windowExists(e.name))return!1;e.container=I[W].stage.el[0],e.core=this;var o=new OGX.Window(e);return o.snooze=!1,I[W].windows[e.name]=o,e.hasOwnProperty("anim")&&e.anim&&E.showWindow(e),o},this.showWindow=function(e){if(I[W].windows.hasOwnProperty(e.name)){var o=I[W].windows[e.name];o.anim=e.anim,e.way=!0,setTimeout(function(){n(e)},0),a(!0,e.name)}},this.hideWindow=function(e){return!!E.windowExists(e.name)&&(e.hasOwnProperty("anim")&&e.anim?e.anim=OGX.Window.ANIM_NONE:I[W].windows[e.name].anim&&(e.anim=I[W].windows[e.name].anim),a(!1,e.name),e.way=0,setTimeout(function(){n(e)},0),I[W].stage.el.trigger(OGX.Window.CLOSE,e.name),void I[W].stage.el.trigger(OGX.Window.CLOSE+"_"+e.name,e.name))},this.snoozeWindow=function(e){I[W].windows[e].snooze||(I[W].windows[e].snooze=!0,E.blurWindow(e),I[W].windows[e].el=I[W].windows[e].el.detach())},this.wakeWindow=function(e){I[W].windows[e].snooze&&(I[W].windows[e].snooze=!1,E.focusWindow(e),I[W].windows[e].el=I[W].windows[e].el.detach(),I[W].windows[e].el.appendTo(I[W].stage.el),I[W].windows[e].el=I[W].stage.el.find(".ogx_window:last"))},this.blurWindow=function(e){for(var o in I[W].windows[e].views)I[W].windows[e].views[o].blur()},this.focusWindow=function(e){for(var o in I[W].windows[e].views)I[W].windows[e].views[o].focus()},this.removeWindow=function(e){return!!E.windowExists(e)&&(o(e),!0)},this.addToWindow=function(e){if(!e.hasOwnProperty("name"))return!1;e.hasOwnProperty("container")||(e.container='.ogx_window[data-ogx="'+I[W].windows[e.name].id+'"] .ogx_view'),I[W].windows[e.name].snooze&&E.wakeWindow(e.name),I[W].windows[e.name].views.hasOwnProperty(e.container)&&E.removeFromWindow(e.name,e.container),e.hasOwnProperty("data")||(e.data={});var o;I[W].windows[e.name].scroll&&!I[W].windows[e.name].ready?I[W].windows[e.name].el.on(OGX.Window.READY,function(){I[W].windows[e.name].el.off(OGX.Window.READY),o=p(e.view,e),I[W].windows[e.name].views[e.container]=o}):(o=p(e.view,e),I[W].windows[e.name].views[e.container]=o)},this.removeFromWindow=function(e,o){return!!I[W].windows[e].views.hasOwnProperty(o)&&(w(I[W].windows[e].views[o]),delete I[W].windows[e].views[o],!0)},this.getWindowView=function(e,o){return"undefined"==typeof o&&(o=".ogx_view:first"),!!I[W].windows[e].views.hasOwnProperty(o)&&I[W].windows[e].views[o]},this.addPopup=function(e){if(e.container=I[W].stage.el,!e.hasOwnProperty("name")&&I[W].popups.hasOwnProperty(e.name))return!1;var o=new OGX.Popup(e);if(e.hasOwnProperty("anim")||(e.anim=!1),I[W].popups[e.name]=o,e.hasOwnProperty("view")&&e.view){var n;e.view.hasOwnProperty("container")?(n=e.view.container,e.view.container=I[W].popups[e.name].el.find(".ogx_popup_body:first").find(n)[0]):(n=".ogx_popup_body:first",e.view.container=I[W].popups[e.name].el.find(n)[0]),I[W].popups[e.name].views[n]=p(e.view.view,e.view)}switch(e.anim){case OGX.Popup.ANIM_FADE:setTimeout(function(){I[W].popups[e.name].el.removeClass("ogx_popup_fade_out"),I[W].popups[e.name].el.addClass("ogx_popup_fade_in")},100);break;case OGX.Popup.NOANIM:I[W].popup.el.css("opacity",1)}return this.addOverlay(e.listen_overlay,OGX.App.OVERLAY_FADE),!0},this.removePopup=function(e,o){if(I[W].popups.hasOwnProperty(e)){I[W].popups[e].popup.blur();var n;switch(n="undefined"!=typeof o?o:I[W].popups[e].anim){case OGX.Popup.ANIM_FADE:i(!0,e),I[W].popups[e].el.removeClass("ogx_popup_fade_in"),I[W].popups[e].el.addClass("ogx_popup_fade_out");break;case OGX.Popup.NOANIM:s(e)}return!0}return!1},this.addToPopup=function(e){if(!e.hasOwnProperty("name"))return!1;!e.hasOwnProperty("container"),I[W].popups[e.name].snooze,I[W].popups[e.name].views.hasOwnProperty(e.container)&&E.removeFromPopup(e.name,e.container);var o;return I[W].popups[e.name].scroll&&!I[W].popups[e.name].ready?I[W].popups[e.name].el.on(OGX.Popup.READY,function(){I[W].popups[e.name].el.off(OGX.Popup.READY),o=p(e.view,e),I[W].popups[e.name].views[e.container]=o}):(o=p(e.view,e),I[W].popups[e.name].views[e.container]=o),!0},this.removeFromPopup=function(e,o){return!!I[W].popups.hasOwnProperty(e)&&(!!I[W].popups[e].views.hasOwnProperty(o)&&(w(I[W].popups[e].views[o]),delete I[W].popups[e].views[o],!0))},this.addOverlay=function(e,o,n){if("undefined"==typeof n&&(n=x.overlay_delay),I[W].overlay)I[W].stage.el.off("transitionend");else{var t='<div class="ogx_overlay"></div>';I[W].stage.el.prepend(t),I[W].overlay={el:I[W].stage.el.find(".ogx_overlay:first")},e&&r(!0)}switch(o){case OGX.App.OVERLAY_FADE:setTimeout(function(){I[W].overlay&&I[W].overlay.el&&(I[W].overlay.el.removeClass("ogx_overlay_fade_out"),I[W].overlay.el.addClass("ogx_overlay_fade_in"))},n);break;default:I[W].overlay&&I[W].overlay.el&&I[W].overlay.el.css("opacity",1)}},this.removeOverlay=function(e){if(I[W].overlay)if(r(!1),"undefined"!=typeof e)switch(e){case OGX.App.OVERLAY_FADE:I[W].overlay.el.removeClass("ogx_overlay_fade_in"),I[W].overlay.el.addClass("ogx_overlay_fade_out"),I[W].overlay.el.css("opacity")>0?I[W].overlay.el.on("transitionend",function(){I[W].overlay&&I[W].overlay.el&&(I[W].overlay.el.off("transitionend"),I[W].overlay.el.remove(),I[W].overlay=null)}):I[W].overlay&&I[W].overlay.el&&(I[W].overlay.el.removeClass("ogx_overlay_fade_in"),I[W].overlay.el.removeClass("ogx_overlay_fade_out"),I[W].overlay.el.off("transitionend"),I[W].overlay.el.remove(),I[W].overlay=null)}else I[W].overlay&&I[W].overlay.el&&(I[W].overlay.el.remove(),I[W].overlay=null)},this.getOverlay=function(){return!!I[W].overlay&&I[W].overlay.el},this.getView=function(e,o){return!!(I.hasOwnProperty(e)&&I[e].hasOwnProperty("views")&&I[e].views.hasOwnProperty(o)&&I[e].views[o])&&I[e].views[o].view},this.hasView=function(e,o){if(I.hasOwnProperty(e)&&I[e].hasOwnProperty("views"))for(var n in I[e].views)if(I[e].views[n].view.hasOwnProperty("name")&&I[e].views[n].view.name===o)return!0;return!1},this.getViewClass=function(e,o){var n=E.getView(e,o);if(n)for(var t in n.__proto__.constructor.prototype)if("constructor"!==t&&"BaseView"!==t)return t;return!1},this.goto=function(e,o){"undefined"==typeof o&&(o=!0);var n=d(e);if(n){A=n;A.hasOwnProperty("stage");for(var t in n.route.views)n.route.views[t].hasOwnProperty("waypoint")?(console.log("waypoint"),S.hasOwnProperty(n.route.views[t].waypoint)||(S[n.route.views[t].waypoint]=new OGX.Waypoint.prototype[n.route.waypoint](n.data,html),S[n.route.views[t].waypoint].__name=n.route.views[t].waypoint,S[n.route.views[t].waypoint].__view=t,S[n.route.views[t].waypoint].__url=e)):(l(n,t,null),o&&u(e))}},this.routed=function(e,o,n){if(S.hasOwnProperty(e.__name)){var t=d(e.__url);t&&(l(t,e.__view,o,n),delete S[e.__name])}},this.getRoute=function(){return A},this.readFile=function(e,o){},this.writeFile=function(e,o,n){},G()&&X()},OGX.App=function(e){"use strict";return new OGX.prototype.App(e)},OGX.App.READY="coreReady",OGX.App.OVERLAY_FADE="coreOverlayFade",OGX.App.OVERLAY_REMOVE="coreOverlayRemove",OGX.App.NAV_BACK="coreNavBack",OGX.App.APP_EXIT="coreAppExit",OGX.App.RESIZE="coreResize",OGX.App.MODE_MOBILE="coreModeMobile",OGX.App.MODE_DESKTOP="coreModeDesktop";