/* globules.io OGX.JS 1.0.0.479 */ 
if(void 0===OGX)var OGX={};if(OGX.List=function(){if("undefined"!=typeof moment){var filteringMode="and",filterCount=0,indexes=!1;1===arguments.length&&arguments[0]instanceof Array&&(arguments=arguments[0]);var array=Object.create(Array.prototype);for(var method in array=Array.apply(array,arguments)||array,OGX.List.prototype)OGX.List.prototype.hasOwnProperty(method)&&(array[method]=OGX.List.prototype[method]);return array.insert=function(t,r){return void 0===r?array.push(t):array.splice(r,0,t),indexes&&addToCache(t),!0},array.delete=function(t){var r=array.splice(t,1);return!!r.length&&(indexes&&removeFromCache(r[0]),r[0])},array.last=function(){if(this.length)return this[this.length-1]},array.findDelete=function(t,r,e){var i=0;void 0===e&&(e=0);for(var s=new OGX.List,a=0;a<this.length;a++)if(this[a][t]===r){if(s.push(this.splice(a,1)[0]),indexes&&removeFromCache(s.last()),i++,0<e&&e===i)return 1===e?s[0]:s;a--}return s},array.findReplace=function(t,r,e,i){var s=0;void 0===i&&(i=0);for(var a=new OGX.List,n=0;n<this.length;n++)if(this[n][t]===r&&(a.push(this[n]),s++,this[n]=e,0<i&&i===s))return 1===i?a[0]:a;return!!a.length&&a},array.findUpdate=function(t,r,e,i,s){var a=0;void 0===i&&(i=!1),void 0===s&&(s=0);for(var n,o=new OGX.List,h=0;h<this.length;h++)if(this[h][t]===r){for(var f in n=!1,e)i?this[h].hasOwnProperty(f)&&(this[h][f]=e[f],n=!0,a++):(this[h][f]=e[f],n=!0,a++);if(n&&(o.push(this[h]),0<s&&s===a))return 1===s?o[0]:o}return!!o.length&&o},array.findIndex=function(t,r){var e=!1;r instanceof RegExp&&(e=!0);for(var i=0;i<this.length;i++)if(e){if(this[i][t].match(r))return{index:i}}else if(this[i][t]===r)return{index:i};return!1},array.find=function(t,r,e){var i=0,s=new OGX.List,a=!1;r instanceof RegExp&&(a=!0),void 0===e&&(e=0);for(var n=0;n<this.length;n++)if(a?this[n][t].match(r)&&(s.push(this[n]),i++):this[n][t]===r&&(s.push(this[n]),i++),0<e&&i===e)return 1===e?s[0]:s;return!!s.length&&s},array.swap=function(t,r){var e=this[t];this[t]=this[r],this[r]=e},array.cache=function(t){indexes||(indexes={}),indexes[t]={};for(var r=0;r<this.length;r++)indexes[t][this[r][t]]=this[r]},array.uncache=function(t){if(!indexes)return!1;delete indexes[t]},array.read=function(t,r){return!!indexes&&(arguments.length?indexes[t][r]:indexes)},array.order=function(t,r){array.sort(dynamicSort(t,r))},array.group=function(t,r,e){if(Array.isArray(t))return array.groupm(t,r,e);for(var i,s={},a=0;a<this.length;a++)(i=extract(this[a],t,r,e))&&(s.hasOwnProperty(i)||(s[i]=new OGX.List),s[i].push(this[a]));return s},array.groupm=function(h,f,c){return function t(r,e){var i=new OGX.List(r),s=f,a=c;void 0!==f&&Array.isArray(f)&&(s=f[e]),void 0!==c&&Array.isArray(c)&&(a=c[e]);var n=i.group(h[e],s,a);if(e+1<=h.length-1)for(var o in n)n[o]=t(n[o],e+1);return n}(this,0)},array.filters={},array.addFilter=function(t,r,e){this.filters.hasOwnProperty(t)||(this.filters[t]=[]);var i={};return i[r]=e,this.filters[t].push(i),filterCount++,!0},array.removeFilter=function(t){return!!this.filters.hasOwnProperty(t)&&(filterCount-=this.filters[t].length,delete this.filters[t],!0)},array.getFilters=function(){return this.filters},array.resetFilters=function(){this.filters={},filterCount=0},array.setFilters=function(t){for(var r in this.resetFilters(),t)for(var e=0;e<t[r].length;e++)for(var i in t[r][e])array.addFilter(r,i,t[r][e][i])},array.setFilteringMode=function(t){filterMode=t},array.get=function(t,r,e,i){void 0===r&&(r=!1),void 0===e&&(e=!1),"number"==typeof e&&(i=e,e=!1),void 0===i&&(i=0);var s=this.getFilters();for(var a in this.resetFilters(),t)for(var n in t[a])this.addFilter(a,n,t[a][n]);var o=this.filter(i);if(this.resetFilters(),this.setFilters(s),r)for(var a in r){o.order(a,r[a]);break}return e?o.group.apply(null,e):o},array.filter=function(__limit){void 0===__limit&&(__limit=0);for(var ar=[],isDate,isString,isArray,fnc,hasFilters=!1,reg=/[0-9]{4}\-[0-9]{2}\-[0-9]{2}( [0-9]{2}\:[0-9]{2}\:[0-9]{2})?/g,isMatch=!1,matches=0,str,o,err,i=0;i<this.length;i++)for(var a in isMatch=!0,matches=0,this.filters){err=!1;try{o=null,str="this["+i+"]."+a,o=eval(str)}catch(t){err=!0}if(err||void 0===o)isMatch=!1;else{hasFilters=!0,isDate=!1,isString=!1,isArray=Array.isArray(o),isArray?"string"==typeof o[0]&&(isString=!0,o[0].match(reg)&&(isDate=!0)):"string"==typeof o&&(isString=!0,o.match(reg)&&(isDate=!0));for(var j=0;j<this.filters[a].length;j++)for(var b in this.filters[a][j]){if(String(this.filters[a][j][b]).length)if("function"===b)isMatch=this.filters[a][j][b](o),isMatch&&matches++;else switch(b){case"eq":isDate?moment(o).format("YYYY-MM-DD")!==moment(this.filters[a][j][b]).format("YYYY-MM-DD")?isMatch=!1:matches++:isString?o.toLowerCase()!==String(this.filters[a][j][b]).toLowerCase()?isMatch=!1:matches++:o!==this.filters[a][j][b]?isMatch=!1:matches++;break;case"eqjson":JSON.stringify(o)!==JSON.stringify(this.filters[a][j][b])?isMatch=!1:matches++;break;case"neq":isDate?moment(o).format("YYYY-MM-DD")===moment(this.filters[a][j][b]).format("YYYY-MM-DD")?isMatch=!1:matches++:isString?o.toLowerCase()===this.filters[a][j][b].toLowerCase()?isMatch=!1:matches++:o===this.filters[a][j][b]?isMatch=!1:matches++;break;case"in":if(Array.isArray(this.filters[a][j][b])){for(var k=0;k<this.filters[a][j][b].length;k++)if(-1===o.indexOf(this.filters[a][j][b][k])){isMatch=!1;break}isMatch&&matches++}else isString?isArray?-1===o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++:-1===o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())?isMatch=!1:matches++:-1===o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++;break;case"nin":if(Array.isArray(this.filters[a][j][b])){for(var k=0;k<this.filters[a][j][b].length;k++)if(-1!==o.indexOf(this.filters[a][j][b][k])){isMatch=!1;break}isMatch&&matches++}else isString?-1!==o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())?isMatch=!1:matches++:-1!==o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++;break;case"gt":isDate?moment(o).unix()<=moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o<=this.filters[a][j][b]?isMatch=!1:matches++;break;case"gte":isDate?moment(o).unix()<moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o<this.filters[a][j][b]?isMatch=!1:matches++;break;case"lt":isDate?moment(o).unix()>=moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o>=this.filters[a][j][b]?isMatch=!1:matches++;break;case"lte":isDate?moment(o).unix()>moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o>this.filters[a][j][b]?isMatch=!0:matches++;break;case"btw":isDate?moment(this.filters[a][j][b][0]).unix()>moment(o).unix()||moment(this.filters[a][j][b][1]).unix()<moment(o).unix()?isMatch=!1:matches++:this.filters[a][j][b][0]>o||this.filters[a][j][b][1]<o?isMatch=!1:matches++;break;case"substr":o.toLowerCase().substr(this.filters[a][j][b][0],this.filters[a][j][b][1]).toLowerCase()!==this.filters[a][j][b][2].toLowerCase()?isMatch=!1:matches++;break;case"regex":o.toString().match(this.filters[a][j][b])?matches++:isMatch=!1}else matches++;if(!isMatch)break}}if("or"===filteringMode?isMatch&&ar.push(this[i]):matches===filterCount&&ar.push(this[i]),__limit&&ar.length===__limit)return OGX.List.apply(null,ar)}return hasFilters?OGX.List.apply(null,ar):array},array}function addToCache(t){for(var r in indexes)indexes[r][t[r]]=t}function removeFromCache(t){for(var r in indexes)delete indexes[r][t[r]]}function dynamicSort(e,i){return function(t,r){return t[e]<r[e]?-1*i:t[e]>r[e]?i:0}}function extract(t,r,e,i){if(t.hasOwnProperty(r)){var s=t[r];switch(e){case"substr":return s=s.substr(i[0],i[1]);case"numrange":return s=Number(s),Array.isArray(i)?(s=Math.floor(s/i[0]),s="pre"===i[2]?i[1]+s*i[0]+" - "+i[1]+(s+1)*i[0]:s*i[0]+i[1]+" - "+(s+1)*i[0]+i[1]):s=(s=Math.floor(s/i))*i+" - "+(s+1)*i,s;case"date":if(!Array.isArray(i)){if("year"===i)return s=s.substr(0,4);if("month"===i)return s=s.substr(0,7);if("week"===i)return s=s.substr(0,4)+" week "+moment(s).week()}return s=moment(s).unix(),s=Math.floor(s/(60*i[0]*60*24)),s*=60*i[0]*60*24,s=moment(1e3*s).format(i[1])+" - "+moment(1e3*s+1e3*i[0]*60*60*24).format(i[1]);default:return s}}return!1}console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000")},void 0===OGX)var OGX={};OGX.Object=function(){"use strict";var n=new OGX.List;function o(t){for(var r=t.split("."),e=OGX,i=0;i<r.length;i++)void 0!==e[r[i]]&&(e=e[r[i]]);return e}this.isRegistered=function(t,r){return typeof("undefined"!==this.register[t][r])},this.getExtends=function(t){var r=[],e=n.get({main:{eq:t}},null,1);if(e.length){var i;r=r.concat(e[0].extends);for(var s=0;s<e[0].extends.length;s++)(i=this.getExtends(e[0].extends[s]))&&(r=r.concat(i))}var a=[];for(s=0;s<r.length;s++)-1===a.indexOf(r[s])&&a.push(r[s]);return a},this.register=function(){var t=Array.prototype.slice.call(arguments),r=t.shift();n.push({main:r,extends:t})},this.create=function(t,r){void 0===r&&(r={});var e=this.getExtends(t);if(e.length){var i=o(t);i.prototype=Object.create({});var s,a=[];a.push(i.prototype);for(var n=0;n<e.length;n++)void 0!==(s=o(e[n]))&&a.push(s.prototype);return Object.assign.apply(null,a),new(i.prototype.constructor=i)(r)}}},"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,r){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var s=arguments[i];if(null!=s)for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},writable:!0,configurable:!0});
function require(){OGX.Object.register.apply(null, arguments);}function construct(__that, __cls){var ext=OGX.Object.getExtends(__cls);for(var a in ext){eval('OGX.'+ext[a]).call(__that,arguments.callee.caller.arguments[0]);}}OGX.Object=new OGX.Object();
if(void 0===OGX)var OGX={};if(OGX.OML=function(){"use strict";function createRecursive(__that,__node,__data,__extra_data){var st=(new Date).getTime();function cycle(__node,__parent){var o,arr,type,selector,conf,focus;for(var a in __node)if(0<a.indexOf(":")&&-1===a.indexOf(":Route")){if("node:OML"===a){if(Array.isArray(__node[a]))for(var i=0;i<__node[a].length;i++)cycle(__node[a][i],__parent);else cycle(__node[a],__parent);break}if(arr=a.split(":"),type=arr[1],selector=arr[0],focus=!1,"HTML"===type){$(selector).html(__node[a]);break}if("Point"===type){conf=__node,conf.container=__parent.el[0],o=__parent.create(type,conf),o.resize(),cycle(__node[a],o);break}if(0===type.indexOf("Controllers.")){if(o={view:{},stage:{}},__node[a].hasOwnProperty("stages"))for(var i=0;i<__node[a].stages.length;i++)o.stage[__node[a].stages[i]]=!0;if(__node[a].hasOwnProperty("views"))for(var i=0;i<__node[a].views.length;i++)o.view[__node[a].views[i]]=!0;o.id=selector;var c=OGX.Object.create(type,o);c.construct(),c.focus(),app.add(c)}else conf=__node[a],conf.hasOwnProperty("data")||(conf.data={}),"string"==typeof conf.data&&0===conf.data.indexOf("#")&&(conf.data=eval(conf.data.substr(1))),OGX.Data.merge(conf.data,__data,!0),OGX.Data.merge(conf.data,__extra_data,!0),0===type.indexOf("Templates.")?(conf.id=type.split(".")[1],conf.container=selector,o=__parent.create("Template",conf),cycle(__node[a],o)):(-1!==[".","#"].indexOf(selector.substr(0,1))?conf.container=selector:(conf.id=selector,conf.container=__parent.el[0]),o=__parent.create(type,conf),cycle(__node[a],o),o.construct())}}cycle(__node,__that),console.log("%c OML RENDER TIME "+((new Date).getTime()-st)+"ms ","background:#DDD; color: #333")}this.make=function(e,t,o){var n={};return n[e+":"+t]=o,n},this.parse=function(e){return"string"==typeof e&&("{"!==e.substr(0,1)&&(e="{"+e+"}"),e=JSON.parse(e)),e},this.replaceDefaults=function(e,t){e["node:OML"];for(var o=0;o<e["node:OML"].length;o++)e["node:OML"][o]=this.replaceNodeName(e["node:OML"][o],t[o])},this.replaceNodeName=function(e,t){var o={};for(var n in e){var i=n;o[i=i.replace("default",t)]=e[n];break}return e=o},this.render=function(e,t,o,n){void 0===o&&(o={}),void 0===n&&(n={}),createRecursive(e,t,o,n),e.blured||e.focusNodes()}},OGX.OML=new OGX.OML,void 0===OGX)var OGX={};OGX.Stages={},OGX.Views={},OGX.Controllers={},require("Core","Uxi","Touch"),OGX.Core=function(){construct(this,"Core");var that=this,config,config_default={scope:["public"],routing:{routes:{},options:{history:!0,bookmark:!0},errors:{403:!1,404:!1}},stages:{blured:!0,use:!1,closeable:!1},overlays:{delay:200,anim:"OGX.Overlay.ANIM_FADE"},theater:!1,observe:!1,auto_exit:!1,chromeos:!1},stage=!1,shown=!1,isWebView=!1,isIos=/(iPhone|iPod|iPad)/i.test(navigator.userAgent),to_preload=0,preloaded=0,sounds={},jsons={},url=!1;function onPopupHidden(e){this.find("popup",e).clear()}function initTheater(){for(var e=app.gather("stage"),t=[],o=0;o<e.length;o++)e[o].theater&&t.push(e[o]);config.theater.stages=t,that.theater=that.create("Theater",config.theater)}function handleRoute(__route_obj,__data){var o={data:{}},render=!1,stg=!1;__route_obj.stage!==stage.id?(stg=that.find("stage",__route_obj.stage),stg.url!==__route_obj.url&&(render=!0)):__route_obj.url!==stage.url&&(render=!0),render?(stg||(stg=that.find("stage",__route_obj.stage)),stg.clear(),that.showStage(__route_obj.stage,!1),"string"==typeof __data&&(0===__data.indexOf("#")?__data=eval(__data.substr(1)):-1!==__data.indexOf(".json")&&(__data=jsons[__data])),OGX.OML.render(stg,__route_obj.route,__route_obj.data,__data),stg.url=__route_obj.url):that.showStage(__route_obj.stage,!1)}function listenResize(e){e?window.addEventListener("resize",onResize):window.removeEventListener("resize",onResize)}function onResize(){var e=stage.gather("");for(a in e)-1===["popup","window"].indexOf(e[a]._NAME_)?e[a].sleeping||e[a].resize():-1!=="popup".indexOf(e[a]._NAME_)?e[a].sleeping||(e[a].resize(),e[a].centered&&e[a].center(),e[a].resizeNodes()):-1!=="window".indexOf(e[a]._NAME_)&&(e[a].sleeping||(e[a].place(),e[a].resizeNodes()))}function initStages(){var e,t,o,n,i,a,s=!1;for(var r in config.vapps)t=(e=r.split(":"))[0],o=e[1],(i=OGX.Data.merge(config.vapps[r],config.stages,!1,!0)).id=t,!0===i.use&&(n=(s=t)+"/"+i.home),that.addStage(o,i);s&&(that.useStage(s),a=config.bookmark&&-1!==window.location.href.indexOf("#")?window.location.href.split("#").pop():n,setTimeout(function(){that.goto(a)},0),setTimeout(function(){$(document).trigger(OGX.App.READY)},100))}function initPreload(){config.hasOwnProperty("templates")&&(to_preload++,setTimeout(function(){preloadTemplates()},0)),config.hasOwnProperty("preload")&&(config.preload.hasOwnProperty("images")&&(to_preload++,setTimeout(function(){OGX.Net.loadImages(config.preload.images.path,config.preload.images.files,onPreloaded)},0)),config.preload.hasOwnProperty("sounds")&&(to_preload++,setTimeout(function(){OGX.Net.loadSounds(config.preload.sounds.path,config.preload.sounds.files,onPreloaded,"sounds")},0)),config.preload.hasOwnProperty("fonts")&&(to_preload++,setTimeout(function(){OGX.Net.loadFonts(config.preload.fonts,onPreloaded)},0)),config.preload.hasOwnProperty("json")&&(to_preload++,setTimeout(function(){OGX.Net.loadJSON(config.preload.json.path,config.preload.json.files,onPreloaded,"json")},0))),0===to_preload&&appReady()}function preloadTemplates(){var e=[],t=config.templates.path;for(var o in config.templates.files)e.push({name:o,file:t+config.templates.files[o]});OGX.Templater.loadTemplates(e,onPreloaded)}function onPreloaded(e,t){if(preloaded++,void 0!==t)switch(t){case"sounds":sounds=e;break;case"json":jsons=e}$(document).trigger(OGX.App.LOADING,{total:to_preload,loaded:preloaded}),preloaded===to_preload&&(config.routing&&(that.router=new OGX.Router(config.routing),that.router.start()),appReady())}function appReady(){initStages(),config.theater&&initTheater()}function initDefaults(){isWebView=void 0!==window.ontouchstart,config=OGX.Data.weld(config,config_default,!1,!1),"string"==typeof config.windows.style&&(config.windows.style=eval(config.windows.style)),"string"==typeof config.windows.anim&&(config.popups.anim=eval(config.popups.anim)),"string"==typeof config.overlays.anim&&(config.overlays.anim=eval(config.overlays.anim)),that.el=$(document)}function checkModules(){return!0}function init(e){config=e["app.json"],initDefaults(),initPreload(),listenResize(!0)}this._NAME_=OGX.App.NAME,this.router=!1,this.isWebView=function(){return isWebView},this.isTouch=function(){return this.touch.touchable()},this.addStage=function(e,t){OGX.Data.merge(t,config.stages);var o=OGX.Object.create(e,t);return this.add(o),setTimeout(function(){o.construct(t),t.use?(o.el.css("display","block"),o.focus()):o.sleep()},0),o},this.removeStage=function(e){var t=this.find(!1,e);t&&(t.destroy(),t._destroy_(),this.find(!1,e,"remove"))},this.useStage=function(e){var t=this.find(!1,e);t&&(stage=t)},this.getStage=function(e){if(void 0===e)return stage;var t=this.find(!1,e);return t||!1},this.showStage=function(e,t){void 0===t&&(t=!1);var o=this.find("stage",e);if(o){if(t){var n=$(window).height();switch(t){case OGX.App.ANIM_SWAP:shown&&(shown.el.on("transitionend",function(){shown.el.off("transitionend"),shown.el.css("top",-n+"px"),o.el.css("top","0px"),o.el.on("transitionend",function(){o.el.off("transitionend"),o.el.css("transform","scale(1)"),shown.el.removeClass("ogx_stage_anim"),shown.el.css("display","none"),that.el.trigger(OGX.App.STAGE_CHANGED,{old:shown,new:o}),shown=o})}),o.el.addClass("ogx_stage_anim"),shown.el.addClass("ogx_stage_anim"),shown.el.css("transform","scale(0.9)")),o.el.css("top",n+"px"),o.el.css("display","block"),o.el.css("transform","scale(0.9)"),o.el.addClass("ogx_stage_anim");break;case OGX.App.ANIM_FLIP:o.el.appendTo("body"),o.el.addClass("ogx_stage_anim_swap"),shown&&(shown.el.addClass("ogx_stage_anim"),shown.el.addClass("ogx_stage_anim_flip"))}}else shown&&shown.id!==o.id&&shown.sleep(),o.sleeping&&o.wake(),o.el.css("display","block"),shown=o;that.useStage(e)}},this.getWindow=function(e){return this.find("window",e)},this.getWindows=function(e){return this.gather("window")},this.windowExists=function(e){return!1!==this.find("window",e)},this.addWindow=function(e){return!!shown&&shown.create("Window",e)},this.showWindow=function(e,t){var o={anim:OGX.Window.ANIM_NONE,params:!1,fade:!1};t=void 0===t?OGX.Data.clone(o):OGX.Data.weld(o,t,!0);var n=this.find("window",e);n.sleeping&&attachWindow(e),n.blured&&n.focus(),n.show()},this.hideWindow=function(e,t){"string"!=typeof e&&(e=this.findWindow(e).id);var o={anim:!1,cb:!1};t=void 0===t?OGX.Data.clone(o):OGX.Data.merge(t,o,!1),this.find("window",e).hide()},this.swapWindows=function(e,t){var o,n,i,a;return!(!this.windowExists(e)||!this.windowExists(t))&&(o=this.getWindow(e),n=this.getWindow(t),i=o.el.css("z-index"),a=n.el.css("z-index"),o.el.css("z-index",a),n.el.css("z-index",i),!0)},this.sleepWindow=function(e){this.find("window",e).sleep()},this.blurWindow=function(e){this.find("window",e).blur()},this.focusWindow=function(e){this.find("window",e).focus()},this.removeWindow=function(e){var t=this.getWindow(e);return t&&t._destroy_(),!0},this.removeWindows=function(e){for(var t in e)this.removeWindow(t);return!0},this.removeAllWindows=function(e){void 0===e&&(e=[]);var t=this.gather("window");for(var o in t)-1!==e.indexOf(o.id)&&o._destroy_()},this.addToWindow=function(e,t){var o;return t.hasOwnProperty("container")||(t.container='.ogx_window[data-ogx-name="'+e+'"] .ogx_view:first'),t.hasOwnProperty("data")||(t.data={}),o=OGX.Object.createView(t),stage.add(o),o.id},this.findWindow=function(e){var t=e.el.parents(".ogx_window");if(t.length){var o=$(t[0]).data("ogx-id");return this.find("window",o)}return!1},this.addPopup=function(e,t){void 0===t&&(t=stage),e.container=t.el[0],e.chromeos=config.chromeos;var o=OGX.Object.createPopup(e,t);return setTimeout(function(){o.show()},0),o},this.addToPopup=function(e,t){this.find("popup",e).addView(t)},this.removePopup=function(e,t){this.find("popup",e).hide(t,__cb,e,onPopupHidden)},this.removeFromPopup=function(e,e){this.find("popup",e).find("view",e,"remove")},this.getPopup=function(e){return this.find("popup",e)},this.getVisiblePopups=function(){var e=this.gather("popup"),t=[];for(var o in e)"visible"===e[o].el.css("visibility")&&t.push(e[o]);return t},this.getPopupView=function(e,t){return this.find("popup",e).find("view",t)},this.getPopupViews=function(e){return this.find("popup",e).views},this.createView=function(e){return OGX.Object.createView(e)},this.destroyView=function(e){var t=this.find("view",e,"remove");t&&(t._destroy_(),t.el.empty(),t.el.removeAttr("data-ogx-id").removeAttr("data-ogx-cls"))},this.addOverlay=function(e){shown&&shown.addOverlay(e)},this.removeOverlay=function(e){shown&&shown.removeOverlay(e)},this.theater=!1,this.getJSON=function(e){return!!jsons.hasOwnProperty(e)&&jsons[e]},this.goto=function(e,t){void 0===t&&(t={}),t=OGX.Data.merge(t,{history:!0,data:!1},!1);var o=this.router.goto(e,t);return!!o&&(url=e,o.url=e,handleRoute(o,t.data),!0)},checkModules()&&OGX.Net.loadJSON("","app.json",init)},OGX.App=function(e){"use strict";return OGX.Object.create("Core",e)},OGX.App.NAME="OgxApp",OGX.App.LOADING="coreLoading",OGX.App.READY="coreReady";if(void 0===OGX)var OGX={};if(OGX.Audio=function(){var e={};this.setSounds=function(t){e=t},this.getSound=function(t){return!!e.hasOwnProperty(t)&&e[t]},this.playSound=function(t){var e=this.getSound(t);if(e)try{e.play()}catch(t){}}},OGX.Audio=new OGX.Audio,void 0===OGX)var OGX=function(){};if(OGX.Calendar=function(t){"use strict";var i,n,e,l,o=this,c=t,r={display_date:moment(),date:!1,format:"YYYY-MM-DD",layouts:[{layout:"MONTH_DAYS",engine:"DAY_NUMBER",config:!1}],layout:0,selectable:!0,swipable:!0,chromeos:!1},d=[],a={x:1,y:1};function s(t){t?n.on("click",".ogx_calendar_layout_item",_):n.off("click",".ogx_calendar_layout_item",_)}function _(t){var e=$(this);e.hasClass("ogx_calendar_selected_item")?(e.removeClass("ogx_calendar_selected_item"),o.el.trigger(OGX.Calendar.UNSELECT,c.date),c.date=null):(e.parent().find(".ogx_calendar_selected_item:first").removeClass("ogx_calendar_selected_item"),e.addClass("ogx_calendar_selected_item"),c.date=moment(e.data("ogx-date")),c.display_date=c.date.clone(),o.el.trigger(OGX.Calendar.SELECT,c.date),h()),setTimeout(u,0)}function u(){for(var t=i.getCells(),e=0;e<t.length;e++)0==t[e].offset.x&&0==t[e].offset.y||m(t[e].abs,t[e].rel,t[e].offset,$(t[e].element).children(0)[0])}function f(t){t?(n.on(OGX.GridSwiper.SWIPE_LEFT,function(t,e){var i=d[l].value();g(i.value,i.unit)}),n.on(OGX.GridSwiper.SWIPE_RIGHT,function(t,e){var i=d[l].value();g(-1*i.value,i.unit)}),n.on(OGX.GridSwiper.SWIPE_UP,function(t,e){l=e.cell.y-1,h(),p(d[l].labels())}),n.on(OGX.GridSwiper.SWIPE_DOWN,function(t,e){l=e.cell.y-1,h(),p(d[l].labels())})):(n.off(OGX.GridSwiper.SWIPE_LEFT),n.off(OGX.GridSwiper.SWIPE_RIGHT),n.off(OGX.GridSwiper.SWIPE_UP),n.off(OGX.GridSwiper.SWIPE_DOWN))}function g(t,e){c.display_date.add(t,e),h()}function h(){var t=d[l].format(),e='<span class="ogx_calendar_display_date">'+c.display_date.format(t)+"</span>";c.date&&(e+=' | <span class="ogx_calendar_selected_date">'+c.date.format(c.format)+"</span>"),n.children(".ogx_calendar_head:first").children(".ogx_calendar_head_date:first").html(e)}function p(t){n.children(".ogx_calendar_head:first").children(".ogx_calendar_head_labels:first").html(t)}function m(t,e,i,n){if(0<=e.y-1&&e.y-1<c.layouts.length){var o=$(n),r=d[l].value(),a=c.display_date.clone().add(i.x*r.value,r.unit),s=d[e.y-1].html(a,OGX.CalendarEngine[c.layouts[e.y-1].engine],c.layouts[e.y-1].config,c.date);o.html(s)}}this._NAME_=OGX.Calendar.NAME,this.el=null,this.val=function(t){return void 0!==t&&(c.date=t,moment().isMoment(c.date)||(c.date=moment(c.date)),c.display_date=c.date.clone(),h(),setTimeout(u,0)),c.date},this.display=function(t){return void 0!==t&&(c.display_date=t,moment().isMoment(c.display_date)||(c.display_date=moment(c.display_date)),h(),setTimeout(u,0)),c.display_date},this.axis=function(t,e){c.axis.x=t,c.axis.y=e},this.next=function(){c.layouts.length},this.prev=function(){},this.getLayout=function(){return l},this.destroy=function(){c.selectable&&s(!1),f(!1),i.destroy()},function(){for(var t in r)c.hasOwnProperty(t)||(c[t]=r[t]);o.el=n=$(c.container),n.addClass("ogx_calendar"),c.display_date?moment.isMoment(c.display_date)||(c.display_date=moment(c.display_date)):c.display_date=moment(),l=c.layout,a.y=l+1}(),n.html('<div class="ogx_calendar_head"><div class="ogx_calendar_head_date"></div><div class="ogx_calendar_head_labels"></div></div><div class="ogx_calendar_body"></div>'),function(){e=[[!1,!1,!1]];for(var t=0;t<c.layouts.length;t++)e.push([m,m,m]);e.push([!1,!1,!1])}(),function(){for(var t=0;t<c.layouts.length;t++)d.push((e=c.layouts[t].layout,i={},OGX.CalendarLayout[e].prototype=Object.create(OGX.CalendarLayout.BASE_LAYOUT.prototype),OGX.CalendarLayout[e].prototype.constructor=OGX.CalendarLayout[e],new OGX.CalendarLayout[e](i)));var e,i}(),i=new OGX.GridSwiper({container:c.container+" .ogx_calendar_body:first",loop:!0,map:e,start:{x:1,y:1},chromeos:c.chromeos}),h(),p(d[l].labels()),f(!0),c.selectable&&s(!0)},OGX.Calendar.NAME="OgxCalendar",OGX.Calendar.SELECT="OgxCalendarSelect",OGX.Calendar.UNSELECT="OgxCalendarUnselect",OGX.CalendarLayout={},OGX.CalendarLayout.BASE_LAYOUT=function(){"use strict";this.labels=function(t){return""},this.html=function(t,e,i,n){return""},this.value=function(){return{value:1,unit:"months"}},this.format=function(){return"YYYY-MM"}},OGX.CalendarLayout.MONTH_DAYS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){for(var t="",e=function(){for(var t=new Date(Date.UTC(2017,0,2)),e=[],i=0;i<7;i++)e.push(t.toLocaleDateString(navigator.language,{weekday:"short"})),t.setDate(t.getDate()+1);return e}(),i=0;i<e.length;i++)t+='<span class="ogx_calendar_layout_month_days_label">'+e[i]+"</span>";return t},this.html=function(t,e,i,n){var o,r=t.format("MM"),a=moment(t.format("YYYY-MM-")+"01").day(),s=moment(t.format("YYYY-MM-")+"01").subtract(a,"days"),l="";n&&(l=n.format("YYYY-MM-DD"));for(var c,d="",_=0;_<42;_++)c="",o=s.format("YYYY-MM-DD"),s.format("MM")!==r&&(c+="ogx_calendar_layout_month_days_offset "),o===moment().format("YYYY-MM-DD")&&(c+="ogx_calendar_layout_month_days_today "),n&&l===o&&(c+="ogx_calendar_selected_item "),d+='<div class="ogx_calendar_layout_item ogx_calendar_layout_month_days '+c+'" data-ogx-date="'+o+'">'+e(o,i)+"</div>",s.add(1,"days");return d},this.value=function(){return{value:1,unit:"months"}},this.format=function(){return"YYYY-MM"}},OGX.CalendarLayout.CENTURY_DECADES=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){return""},this.html=function(t,e,i,n){var o,r=100*Math.floor(Number(t.format("YYYY"))/100),a="",s=10*Math.floor(Number(moment().format("YYYY"))/10),l="";n&&(l=10*Math.floor(Number(n.format("YYYY"))/10));for(var c=0;c<10;c++)o="",s===r&&(o="ogx_calendar_layout_century_decades_current "),l===s&&(o+="ogx_calendar_selected_item "),a+='<div class="ogx_calendar_layout_item ogx_calendar_layout_century_decades '+o+'" data-ogx-date="'+r+'">'+e(r,i)+"</div>",r+=10;return a},this.value=function(){return{value:100,unit:"years"}},this.format=function(){return"YYYY"}},OGX.CalendarLayout.CENTURY_YEARS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){return""},this.html=function(t,e,i,n){var o,r=100*Math.floor(Number(t.format("YYYY"))/100),a="",s=Number(moment().format("YYYY")),l="";n&&(l=Number(n.format("YYYY")));for(var c=0;c<100;c++)o="",r+c===s&&(o+="ogx_calendar_layout_century_years_current"),l===r+c&&(o+="ogx_calendar_selected_item"),a+='<div class="ogx_calendar_layout_item ogx_calendar_layout_century_years '+o+'" data-ogx-date="'+(r+c)+'">'+e(r+c+"-01-01",i)+"</div>";return a},this.value=function(){return{value:100,unit:"years"}},this.format=function(){return"Y"}},OGX.CalendarLayout.DECADE_YEARS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){return""},this.html=function(t,e,i,n){var o,r=10*Math.floor(Number(t.format("YYYY"))/10),a="",s=Number(moment().format("YYYY")),l="";n&&(l=Number(n.format("YYYY")));for(var c=0;c<10;c++)o="",r+c===s&&(o+="ogx_calendar_layout_decade_years_current "),r+c===l&&(o+="ogx_calendar_selected_item "),a+='<div class="ogx_calendar_layout_item ogx_calendar_layout_decade_years '+o+'" data-ogx-date="'+(r+c)+'">'+e(r+c+"-01-01",i)+"</div>";return a},this.value=function(){return{value:10,unit:"years"}},this.format=function(){return"Y"}},OGX.CalendarLayout.DECADE_MONTHS=function(){"use strict";var u;OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){for(var t="",e=0;e<10;e++)t+="<span>"+(u+e)+"</span>";return t},this.html=function(t,e,i,n){u=10*Math.floor(Number(t.format("YYYY"))/10);var o,r,a,s="",l=moment().format("YYYY-MM"),c=moment(u+"-01-01");n&&(o=n.format("YYYY-MM"));for(var d=0;d<10;d++)for(var _=0;_<12;_++)a="",(r=c.format("YYYY-MM"))===l&&(a="ogx_calendar_layout_decade_months_current "),r===o&&(a+="ogx_calendar_selected_item "),s+='<div class="ogx_calendar_layout_item ogx_calendar_layout_decade_months '+a+'" data-ogx-date="'+r+'">'+e(r,i)+"</div>",c.add(1,"months");return s},this.value=function(){return{value:10,unit:"years"}},this.format=function(){return" "}},OGX.CalendarLayout.YEAR_MONTHS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){return""},this.html=function(t,e,i,n){var o,r,a=moment().format("YYYY-MM"),s=t.format("YYYY"),l="",c="";n&&(c=n.format("YYYY-MM"));for(var d=1;d<13;d++)o="",s+"-"+(r=d<10?"0"+d:d)===a&&(o+="ogx_calendar_layout_year_months_current "),s+"-"+r===c&&(o+="ogx_calendar_selected_item "),l+='<div class="ogx_calendar_layout_item ogx_calendar_layout_year_months '+o+'" data-ogx-date="'+s+"-"+r+'">'+e(s+"-"+r+"-01",i)+"</div>";return l},this.value=function(){return{value:1,unit:"years"}},this.format=function(){return"Y"}},OGX.CalendarLayout.YEAR_WEEKS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){return'<span class="ogx_calendar_layout_year_weeks_label">Weeks</span>'},this.html=function(t,e,i,n){var o=moment().week(),r=t.format("YYYY"),a=moment().format("YYYY"),s="",l="";n&&(l=n.week(),s=n.format("YYYY"));for(var c,d,_="",u=1;u<53;u++)c="",o===u&&r===a&&(c="ogx_calendar_layout_year_weeks_current "),l===u&&r===s&&(c+="ogx_calendar_selected_item "),_+='<div class="ogx_calendar_layout_item ogx_calendar_layout_year_weeks '+c+'" data-ogx-date="'+(d=moment().year(r).week(u).format("YYYY-MM-DD"))+'">'+e(d,i)+"</div>";return _},this.value=function(){return{value:1,unit:"years"}},this.format=function(){return"Y"}},OGX.CalendarLayout.YEAR_DAYS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){return""},this.html=function(t,e,i,n){var o,r,a,s="",l=t.format("YYYY-MM-DD"),c=moment(t.format("YYYY")+"-01-01"),d="";n&&(d=n.format("YYYY-MM-DD")),r=t.isLeapYear()?366:365;for(var _=0;_<r;_++)o="",(a=c.format("YYYY-MM-DD"))===l&&(o="ogx_calendar_layout_year_days_current "),a===d&&(o+="ogx_calendar_selected_item "),s+='<div class="ogx_calendar_layout_item ogx_calendar_layout_year_days '+o+'" data-ogx-date="'+a+'">'+e(moment(a),i)+"</div>",c.add(1,"days");return s},this.value=function(){return{value:1,unit:"years"}},this.format=function(){return"Y"}},OGX.CalendarLayout.MONTH_WEEKS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){return""},this.html=function(t,e,i,n){for(var o="",r=0;r<5;r++)css="",o+='<div class="ogx_calendar_layout_item ogx_calendar_layout_year_days '+css+'" data-ogx-date="'+fm+'">'+e(moment(fm),i)+"</div>",d.add(1,"days");return o},this.value=function(){return{value:1,unit:"years"}},this.format=function(){return"Y"}},OGX.CalendarLayout.WEEK_DAYS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){for(var t="",e=function(){for(var t=new Date(Date.UTC(2017,0,2)),e=[],i=0;i<7;i++)e.push(t.toLocaleDateString(navigator.language,{weekday:"short"})),t.setDate(t.getDate()+1);return e}(),i=0;i<e.length;i++)t+='<span class="ogx_calendar_layout_month_days_label">'+e[i]+"</span>";return t},this.html=function(t,e,i,n){var o,r,a="",s=t.weekday(),l=t.subtract(s,"days"),c=moment().format("YYYY-MM-DD"),d="";n&&(d=n.format("YYYY-MM-DD"));for(var _=0;_<7;_++)o="",(r=l.format("YYYY-MM-DD"))===c&&(o="ogx_calendar_layout_week_days_current "),r===d&&(o+="ogx_calendar_selected_item "),a+='<div class="ogx_calendar_layout_item ogx_calendar_layout_week_days '+o+'" data-ogx-date="'+r+'">'+e(moment(r),i)+"</div>",l.add(1,"days");return a},this.value=function(){return{value:1,unit:"weeks"}},this.format=function(){return"YYYY-MM"}},OGX.CalendarLayout.DAY_HOURS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){return""},this.html=function(t,e,i,n){var o,r,a="",s=Number(moment().format("HH")),l=t.format("YYYY-MM-DD "),c=moment().format("YYYY-MM-DD "),d="",_="";n&&(d=Number(n.format("HH")),_=n.format("YYYY-MM-DD "));for(var u=0;u<24;u++)r="",u===s&&l===c&&(r="ogx_calendar_layout_days_hours_current "),u===d&&l===_&&(r+="ogx_calendar_selected_item "),a+='<div class="ogx_calendar_layout_item ogx_calendar_layout_days_hours '+r+'" data-ogx-date="'+(l+(o=u<10?"0"+u:String(u)))+':00">'+e(moment(l+o+":00"),i)+"</div>";return a},this.value=function(){return{value:1,unit:"days"}},this.format=function(){return"YYYY-MM-DD HH:[00]"}},OGX.CalendarLayout.DAY_WORK_HOURS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){return""},this.html=function(t,e,i,n){i&&void 0!==i?i.hasOwnProperty("start")||(i.start=8,i.end=17):i={start:8,end:17};var o,r,a="",s=Number(moment().format("HH")),l=t.format("YYYY-MM-DD "),c=moment().format("YYYY-MM-DD "),d="",_="";n&&(d=Number(n.format("HH")),_=n.format("YYYY-MM-DD "));for(var u=i.start;u<i.end+1;u++)r="",u===s&&l===c&&(r="ogx_calendar_layout_days_work_hours_current "),u===d&&_===l&&(r+="ogx_calendar_selected_item "),a+='<div class="ogx_calendar_layout_item ogx_calendar_layout_days_work_hours '+r+'" data-ogx-date="'+(l+(o=u<10?"0"+u:u))+':00">'+e(moment(l+o+":00"),i)+"</div>";return a},this.value=function(){return{value:1,unit:"days"}},this.format=function(){return"YYYY-MM-DD HH:[00]"}},OGX.CalendarLayout.DAY=function(){"use strict";this.labels=function(t){return""},this.html=function(t,e,i,n){var o="",r=t.format("YYYY-MM-DD"),a=moment().format("YYYY-MM-DD");return n&&r===n.format("YYYY-MM-DD")&&(o+="ogx_calendar_layout_selected_item "),r===a&&(o+="ogx_calendar_layout_day_current "),'<div class="ogx_calendar_layout_item ogx_calendar_layout_day '+o+'" data-ogx-date="'+r+'">'+e(t,i)+"</div>"},this.value=function(){return{value:1,unit:"days"}},this.format=function(){return"YYYY-MM-DD"},this.select=function(t){}},OGX.CalendarEngine={},OGX.CalendarEngine.CELL_VALUE=function(t,e){var i=moment(t);return'<div class="ogx_calendar_engine_cell_value '+e.css+'">'+i.format(e.format)+"</div>"},OGX.CalendarEngine.DAY_NUMBER=function(t,e){return OGX.CalendarEngine.CELL_VALUE(t,{format:"DD",css:"ogx_calendar_engine_day_number"})},OGX.CalendarEngine.WEEK_NUMBER=function(t,e){return'<div class="ogx_calendar_engine_week_number">'+moment(t).week()+"</div>"},OGX.CalendarEngine.DECADE_NUMBER=function(t){return'<div class="ogx_calendar_engine_date_day_number">'+t+"</div>"},OGX.CalendarEngine.DAY_GRAPH=function(t){var e=moment(t),i=Math.round(1e4*Math.random()),n='<div class="ogx_calendar_engine_day_graph" data-graph="'+e.format("YYYY-MM-DD")+i+'"></div>';return setTimeout(function(){new Chartist.Line('.ogx_calendar_engine_day_graph[data-graph="'+e.format("YYYY-MM-DD")+i+'"]',{labels:["Monday","Tuesday","Wednesday","Thursday","Friday"],series:[[12,9,7,8,5],[2,1,3.5,7,3],[1,3,4,5,6]]},{fullWidth:!0,chartPadding:{right:40}})},0),n},require("Carousel","Uxi","Touch"),OGX.Carousel=function(t){construct(this,"Carousel");var n,o,i,e,r,a,s=this,l=t,c={enabled:!0,path:"html",nodes:[],current:0,min_x:100,anim:!0,drag:!0,dots:!1},d=!1,_=0,u=new OGX.List;function f(t){o.off("transitionend"),o.removeClass("ogx_carousel_anim")}function g(t){var e=a*i*-1+t.distX*t.dirX;e<=0&&e>-1*(o.width()-s.el.width())&&o.css({transform:"translate3d("+e+"px, 0, 0)"})}function h(t){if(t.distX>l.min_x){var e=a+-1*t.dirX;0<=e&&e<l.panels.length&&(a=e,n.trigger(OGX.Carousel.CHANGE,a))}var i=0;a&&(i=100/l.panels.length*(-1*a)),p(i)}function p(t){l.anim&&(!0,o.addClass("ogx_carousel_anim"),o.on("transitionend",function(){!1,o.off("transitionend"),o.removeClass("ogx_carousel_anim")})),o.css({transform:"translate3d("+t+"%, 0, 0)"})}function m(){d=!0,clearInterval(e),e=setInterval(y,50),i=Math.floor(n.innerWidth()),o.removeClass("ogx_carousel_anim")}function y(){d=!1,clearInterval(e),e=!1}this._NAME_=OGX.Carousel.NAME,this.el=null,this.enable=function(){l.drag&&this.touch.swipe.enable()},this.disable=function(){l.drag&&this.touch.swipe.disable()},this.resize=function(){setTimeout(m,0)},this.val=function(t){if(void 0===t)return a;this.showPanel(t)},this.addPanel=function(t){var e;void 0===t&&(e=""),_++,o.append('<div class="ogx_view ogx_carousel_view" data-ogx-panel-id="'+_+'"><div>'+e+"</div></div>");var i=100/(l.panels.length+1);return o.css("width",i+"%"),_},this.addView=function(t,e){var i=this.addPanel(),n='.ogx_carousel[data-ogx-id="'+this.id+'"] .ogx_carousel_views:first .ogx_carousel_view[data-ogx-panel-id="'+i+'"] div';t.container=n;var o=app.createView(t);this.add(o),o.focus()},this.addNode=function(t,e){var i=this.addPanel(),n='.ogx_carousel[data-ogx-id="'+this.id+'"] .ogx_carousel_views:first .ogx_carousel_view[data-ogx-panel-id="'+i+'"] div',o={};for(var r in t){var a=r.split(":");a[0],o[n]=a[1];break}OGX.OML.render(this,o,e);this.nodes.last().id},this.showPanel=function(t){if(0<=t&&t<u.length&&!d){var e=100/l.panels.length*(-1*t);return setTimeout(function(){p(e)},0),a=t,!0}return!1},this.swapPanel=function(t,e){var i=o.children(".ogx_carousel_view:eq("+t+")").detach();t<e?o.children(".ogx_carousel_view:eq("+(e-1)+")").after(i):o.children(".ogx_carousel_view:eq("+e+")").before(i);var n=100/l.panels.length*(-1*e);o.removeClass("ogx_carousel_anim"),o.css({transform:"translate3d("+n+"%, 0, 0)"}),a=t},this.removePanel=function(t){0<=t&&t<l.panels.length&&(0<=t-1&&s.showView(t-1),o.children(".ogx_carousel_view:eq("+t+")").remove(),o.css("width",Math.round(100*u.length)+"%"))},this.destroy=function(){e&&clearInterval(e),l.dots&&r.destroy()},OGX.Data.merge(l,c,!1),a=l.current,s.el=n=$(l.container),i=Math.floor(n.innerWidth()),n.addClass("ogx_carousel"),n.attr("data-ogx-id",s.id),n.html('<div class="ogx_carousel_views" style="width:'+100*l.panels.length+'%;"></div>'),l.dots&&n.append('<div class="ogx_dots"></div>'),(o=n.find(".ogx_carousel_views:first")).css({transform:"translate3d("+100/l.panels.length*(-1*a)+"%, 0, 0)"}),l.dots&&(r=s.create("Dots",{container:'.ogx_carousel[data-ogx-id="'+s.id+'"] .ogx_dots',total:l.panels.length})).bind("dots",r),function(){for(var t=0;t<l.panels.length;t++)o.append('<div class="ogx_carousel_view" style="width:'+100/l.panels.length+'%;" data-ogx-panel-id="'+_+'"><div></div></div>'),u.push(_),_++;n.trigger(OGX.Carousel.READY)}(),s.touch.swipe.set({x:!0,cb_down:f,cb_swipe:g,cb_up:h})},OGX.Carousel.NAME="carousel",OGX.Carousel.READY="CarouselReady",OGX.Carousel.SWIPE="CarouselSwipe",OGX.Carousel.DRAG="CarouselDrag",OGX.Carousel.CHANGE="CarouselChange",OGX.Carousel.RESTORE="CarouselRestore",void 0===OGX)var OGX={};if(require("Chat","Uxi"),OGX.Chat=function(__config){construct(this,"Chat");var that=this,config=__config,config_default={placeholder:"Type a message",dot_speed:600,on_keyb_update_delay:300,messages:[],handle_keyboard:!0,hide_keyboard_on_send:!1,template_left:'<div class="ogx_chat_message ogx_chat_message_left" style="{{$opacity}} data-id="$uid"><span class="ogx_chat_message_icon" style="{{$bg}}"><span>{{$letter}}</span></span><span class="ogx_chat_message_container"><span class="ogx_chat_message_body">{{$body}}</span><span class="ogx_chat_message_date">{{$date}}</span><span style="clear:both"></span></span></div>',template_right:'<div class="ogx_chat_message ogx_chat_message_right" style="{{$opacity}}" data-id="{{$uid}}"><span class="ogx_chat_message_container"><span class="ogx_chat_message_body">{{$body}}</span><span class="ogx_chat_message_date">{{$date}}</span><span style="clear:both"></span></span></div>',key:"_id",users:[],user:!1,display_mode:OGX.Chat.DISPLAY_INITIALS,picture_key:"",restrict:{multiline:!1,length:500},date_format:"YYYY-MM-DD h:mm:ss A"},container,inner,scroller,composer,intv,winh,oldh=!1,typing={},type=".";function render(){if(0<config.messages.length){for(var t=0;t<config.messages.length;t++)addMessage(config.messages[t]);scroller.resize(),scroller.bottom()}scroller.vocal()}function addMessage(__msg,__prepend){void 0===__prepend&&(__prepend=!1),scroller.observe(!1),scroller.mute();var u=config.users.find(config.key,__msg.from,1),initals=u.first_name.substr(0,1).toUpperCase()+u.last_name.substr(0,1).toUpperCase();switch(config.display_mode){case OGX.Chat.DISPLAY_INITIALS:__msg.letter=initals,__msg.bg="";break;case OGX.Chat.DISPLAY_PICTURE:__msg.letter="";var e=eval("u."+config.picture_key);"undefined"!==e?__msg.bg="background-image:url('"+e+"')":(__msg.letter=initals,__msg.bg="")}__msg.uid=u[config.key],__msg.opacity=__prepend?"opacity:1;":"";var html=OGX.Templater.templatize(__msg,getTemplate(__msg));__prepend?inner.prepend(html):inner.append(html);var msg=inner.children(".ogx_chat_message:last");setTimeout(function(){msg.addClass("ogx_chat_message_anim"),scroller.resize(),__prepend?scroller.top():scroller.bottom(),scroller.vocal(),scroller.observe(!0)},100)}function addTyping(t){typing[t]=!0;var e='<div class="ogx_chat_typing" data-user="'+t+'"><span class="ogx_chat_typing_body">.</div></div>';inner.append(e),animTyping(!0)}function removeTyping(t){typing[t]=!1,inner.find('.ogx_chat_typing[data-user="'+t+'"]').remove(),0===inner.find(".ogx_chat_typing").length&&animTyping(!1)}function animTyping(t){t?intv||(intv=setInterval(typeDot,config.dot_speed)):(clearInterval(intv),intv=null)}function typeDot(){3<(type+=".").length&&(type="."),inner.find(".ogx_chat_typing_body").html(type)}function getTemplate(t){return t.from===config.user?config.template_right:config.template_left}function sendMessage(){var t=composer.find("textarea:first").val();if(t.length&&(t=(t=(t=t.replace(/^[\r|\n\r]+/,"")).replace(/<>\*/,"")).replace(/â€™/,"'")).length){t=t.replace(/[\r\n]/g,"<br>");var e={from:config.user,body:t,date:moment().format(config.date_format)};addMessage(e);var i=JSON.parse(JSON.stringify(e));delete i.bg,delete i.letter,composer.find("textarea:first").val(""),that.el.trigger(OGX.Chat.SEND_MESSAGE,i)}}function handleShowKeyb(t){oldh||(oldh=container.height()),container.height(oldh-t.keyboardHeight),updateScroller()}function handleHideKeyb(){container.height(oldh),updateScroller()}function updateScroller(){setTimeout(function(){scroller.resize(),scroller.bottom()},config.on_keyb_update_delay)}function listenKeyb(t){t?(window.addEventListener("native.keyboardshow",handleShowKeyb),window.addEventListener("native.keyboardhide",handleHideKeyb)):(window.removeEventListener("native.keyboardshow",handleShowKeyb),window.removeEventListener("native.keyboardhide",handleHideKeyb))}function listenArea(t){t?composer.on("keyup","textarea",function(t){13===t.which&&(sendMessage(),config.hide_keyboard_on_send&&handleHideKeyb())}):composer.off("keyup","textarea")}function listenComposer(t){t?composer.on("click",".ogx_chat_composer_send",function(){sendMessage(),config.hide_keyboard_on_send&&handleHideKeyb()}):composer.off("click",".ogx_chat_composer_send")}function initScroller(){that.el.on(OGX.Scroller.READY,function(){that.el.off(OGX.Scroller.READY),inner=scroller.inner(),(inner=$(inner)).addClass("ogx_chat_messages_inner"),scroller.mute(),scroller.resize(),render()}),scroller=OGX.Object.create("Scroller",{container:that.el.find(".ogx_chat_messages:first")[0],initDelay:100,auto_scroll:!0,trigger:!0})}function initMarkup(){var t='<div class="ogx_chat_messages"></div><div class="ogx_chat_composer">';t+='<span class="ogx_chat_composer_input"><textarea placeholder="'+config.placeholder+'">',t+='</textarea></span><span class="ogx_chat_composer_send"></span></div>',container.append(t),composer=container.find(".ogx_chat_composer:first")}function initUsers(){for(var t in config.users)typing[t]=!1}function initDefaults(){for(var t in config_default)config.hasOwnProperty(t)||(config[t]=config_default[t]);config.users.hasOwnProperty("find")||(config.users=new OGX.List(config.users)),that.el=container=$(config.container),container.addClass("ogx_chat")}function init(){if(initDefaults(),initMarkup(),initUsers(),initScroller(),config.handle_keyboard&&listenKeyb(!0),listenComposer(!0),config.restrict){var t=JSON.parse(JSON.stringify(config.restrict));config.restrict.hasOwnProperty("forbidden")&&(t.forbidden=config.restrict.forbidden),config.restrict.hasOwnProperty("allowed")&&(t.allowed=config.restrict.allowed),t.container=that.el.find(".ogx_chat_composer:first .ogx_chat_composer_input:first textarea")[0],OGX.Form.restrictField(t)}listenArea(!0),winh=$(window).height()}this._NAME_=OGX.Chat.NAME,this.el=null,this.users=function(t){return void 0===t?(t.hasOwnProperty("find")||(t=new OGX.List(t)),config.users=t,!0):config.users},this.user=function(t){return void 0===t?config.user:(config.user=t,!0)},this.typing=function(t,e){t&&!typing[e]?addTyping(e):!t&&typing[e]&&removeTyping(e)},this.compose=function(t){composer.find("textarea:first").val(t)},this.clear=function(){inner.empty()},this.scroller=function(){return scroller},this.addMessage=function(t){addMessage(t)},this.setMessages=function(t){config.messages=t,render()},this.prependMessages=function(t){for(var e=0;e<t.length;e++)addMessage(t[e],!0);config.messages=t.concat(config.messages)},this.destroy=function(){config.restrict&&OGX.Form.unrestrictField(that.el.find(".ogx_chat_composer:first .ogx_chat_composer_input:first textarea")[0]),listenKeyb(!1),listenArea(!1),listenComposer(!1)},init()},OGX.Chat.NAME="OgxChat",OGX.Chat.SEND_MESSAGE="ChatSend",OGX.Chat.DISPLAY_INITIALS="ChatDisplayInitials",OGX.Chat.DISPLAY_PICTURE="ChatDisplayPicture",void 0===OGX)var OGX={};if(OGX.Color={},OGX.Color.hexToRgb=function(t){"use strict";t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,n){return e+e+i+i+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},OGX.Color.rgbToHex=function(t,e,i){"use strict";return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},OGX.Color.rgbToHsl=function(t){"use strict";var e,i,n,o=new RegExp("rgb\\(([0-9]+)\\, ([0-9 ]+)\\, ([0-9]+)","g").exec(t);if(o){o.shift(),e=o[0],i=o[1],n=o[2],e/=255,i/=255,n/=255;var r,a,s=Math.max(e,i,n),l=Math.min(e,i,n),c=(s+l)/2;if(s===l)r=a=0;else{var d=s-l;switch(a=.5<c?d/(2-s-l):d/(s+l),s){case e:r=(i-n)/d+(i<n?6:0);break;case i:r=(n-e)/d+2;break;case n:r=(e-i)/d+4}r/=6}return[r,a,c]}return!1},OGX.Color.hslToRgb=function(t,e,i){"use strict";var n,o,r;if(0===e)n=o=r=i;else{var a=function(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},s=i<.5?i*(1+e):i+e-i*e,l=2*i-s;n=a(l,s,t+1/3),o=a(l,s,t),r=a(l,s,t-1/3)}return[Math.round(255*n),Math.round(255*o),Math.round(255*r)]},require("Container","Uxi","Placeholder"),OGX.Container=function(t){construct(this,"Container");var e,i=this,n={tabs:!0,editable:!0,enable:!0,reorder:!0,anim:!0,drag:!0,flatten:!1,explode:!1,chromeos:!1},o=t,r=!1,a=!1,s=!1,l="normal",c=0;function d(t){t?(a.el.on(OGX.Tabs.SELECT,function(t,e){s.showPanel(a.index())}),a.el.on(OGX.Tabs.CLOSE,function(){}),a.el.on(OGX.Tabs.REORDER,function(t,e){s.swapPanel(e.from,e.to)}),a.el.on(OGX.Tabs.ADD,function(){}),s.el.on(OGX.Carousel.CHANGE,function(t,e){a.selectIndex(e)})):(a.el.off(OGX.Tabs.SELECT),a.el.off(OGX.Tabs.CLOSE),a.el.off(OGX.Tabs.REORDER),a.el.off(OGX.Tabs.ADD),s.el.off(OGX.Carousel.CHANGE))}function _(){var t={container:r.children(".tabs:first")[0],reorder:o.reorder,editable:!1,chromeos:o.chromeos};Array.isArray(o.tabs)?t.tabs=o.tabs:t.tabs=function(){for(var t=[],e=0;e<o["node:OML"].length;e++)for(var i in o["node:OML"][e]){t.push({label:o["node:OML"][e][i].label});break}return t}(),a=OGX.Object.create("Tabs",t),i.add(a)}this.el=null,this._NAME_=OGX.Container.NAME,this.show=function(t,e){if("normal"===l){for(var i=new OGX.List,n=0;n<this.nodes.length;n++)this.nodes[n]._NAME_!==OGX.Tabs.NAME&&this.nodes[n]._NAME_!==OGX.Carousel.NAME&&i.push(this.nodes[n]);var o=i.findIndex("id",e);s.val(o.index),a.selectIndex(o.index)}},this.enable=function(){o.tabs&&d(!0)},this.disable=function(){o.tabs&&d(!1)},this.resize=function(){var t,e;o.flatten&&("flattened"!==l&&this.el.width()>=o.flatten?(l="flattened",o.tabs&&(a.blur(),a.hide()),s.blur(),c=(t=s.el.children(".ogx_carousel_views:first"),e=t[0].style.transform,e=(e=e.match(/translate3d\(([0-9px%,\.\- ]+)\)/))[1].split(","))[0],s.el.children(".ogx_carousel_views:first").addClass("ogx_container_flattened").css("transform","translate3d(0px, 0px, 0px)")):"flattened"===l&&this.el.width()<o.flatten&&(l="normal",o.tabs&&(a.focus(),a.show()),s.focus(),s.el.children(".ogx_carousel_views:first").removeClass("ogx_container_flattened").css("transform","translate3d("+c+", 0px, 0px)")))},OGX.Data.merge(o,n,!1),i.el=r=$(o.container),r.addClass("ogx_container"),r.html('<div class="tabs"></div><div class="carousel"></div>'),o.tabs&&_(),e={container:r.children(".carousel:first")[0],anim:o.anim,panels:Array(o["node:OML"].length),chromeos:o.chromeos,drag:o.drag},s=OGX.Object.create("Carousel",e),i.add(s),function(){for(var t=[],e=0;e<o["node:OML"].length;e++)t.push('.ogx_carousel[data-ogx-id="'+s.id+'"] .ogx_carousel_views .ogx_carousel_view[data-ogx-panel-id="'+e+'"] div');i.placeholders(o,t)}(),setTimeout(function(){i.resize()},0)},OGX.Container.NAME="container",OGX.Container.MODE_NORMAL="ContainerModeNormal",OGX.Container.MODE_FLATTEN="ContainerModeFlatten",OGX.Container.MODE_EXPLODE="ContainerModeExplode",void 0===OGX)var OGX={};if(require("Controller","Uxi"),OGX.Controller=function(t){construct(this,"Controller"),delete t.id,this.__views(t),this.construct=function(){}},OGX.Controller.prototype.construct=function(){},OGX.Controller.prototype.__views=function(t){for(var e in t)for(var i in this[e+"s"]={},t[e])this[e+"s"][i]=app.find(null,i)},void 0===OGX)var OGX={};if(OGX.Data={},OGX.Data.weld=function(t,e,o,i){void 0===o&&(o=!1),void 0===i&&(i=!1);var n=t;return i&&(n=JSON.parse(JSON.stringify(t))),function t(e,i){for(var n in i)!e.hasOwnProperty(n)||o?e[n]=i[n]:"object"==typeof i[n]&&t(e[n],i[n])}(n,e),n},OGX.Data.merge=function(t,e,i,n){for(var o in void 0===i&&(i=!1),void 0===n&&(n=!1),n&&(master=JSON.parse(JSON.stringify(t))),e)i?t[o]=e[o]:t.hasOwnProperty(o)||(t[o]=e[o]);return t},OGX.Data.props=function(t,e){for(var i in e)if(!t.hasOwnProperty(e[i]))return!1;return!0},OGX.Data.clone=function(t){return JSON.parse(JSON.stringify(t))},OGX.Data.isOML=function(t){for(var e in t)if(-1!==e.indexOf(":"))return!0;return!1},void 0===OGX)var OGX={};if(OGX.Display=function(t){"use strict";void 0!==t&&"object"==typeof t&&t||(t={});var o=t,e={html:!1,css:!1,oml:!1,template:!1,view:!1},i=!1,n=!1,r=!1,a=!1;function s(){a=r=n=i=!1,OGX.Data.merge(o,e,!1),o.template&&("object"==typeof o.template?r=!0:a=OGX.Templater.getTemplate(o.template)),o.css&&(i="object"==typeof o.css&&o.css.hasOwnProperty("bind"),n="object"==typeof o.css&&o.css.hasOwnProperty("add"))}this._NAME_=OGX.Display.NAME,this.val=function(t){if(void 0===t)return o;o=t,s()},this.css=function(t){var e="";return i?(e=t[o.css.bind],n&&(e+=" "+o.css.add)):o.css&&(e=o.css),e},this.html=function(t){var e="";return r?e=OGX.Templater.getTemplate(t[o.template.bind]):a?e=a:o.html&&(e=o.html),"object"==typeof t&&e&&(e=OGX.Templater.templatize(t,e)),e},this.oml=function(t,e,i){var n={};return o.oml?o.oml:o.view?(n[t+":"+o.view]=o.view,n[t+":"+o.view].id=e[i],n[t+":"+o.view].data=e,n):o.template?("string"==typeof o.template?n[t+":Template"]={id:o.template,data:e}:n[t+":Template"]={id:e[o.template.bind],data:e},n):!!o.hasOwnProperty("html")&&(n[t+":HTML"]=this.html(e),n)},this.toJSON=function(){return o},s()},OGX.Display.NAME="OgxDisplay",void 0===OGX)var OGX=function(){};if(require("DisplayList","Uxi"),OGX.DisplayList=function(t){construct(this,"DisplayList");var e=this,i=t,n={render:!0,list:!1,display:!1};this.render=function(){for(var t="",e=0;e<i.list.length;e++)t+=i.display.html(i.list[e]);$(i.container).html(t),$(i.container).trigger(OGX.DisplayList.RENDER)},OGX.Data.merge(i,n),i.display.hasOwnProperty("_NAME_")||(i.display=new OGX.Display(i.display)),i.render&&e.render()},OGX.DisplayList.NAME="OgxDisplayList",OGX.DisplayList.RENDER="DisplayListRender",void 0===OGX)var OGX=function(){};if(require("Dots","Touch"),OGX.Dots=function(t){construct(this,"Dots");var o,i=this,r=t,e={container:"document",total:0,current:0,clickable:!0},n={};function a(t){switch(n[t]._NAME_){case OGX.Carousel.NAME:n[t].el.off(OGX.Carousel.SWIPE),delete n[t]}}function s(t){t?o.on(i.touch.down,".ogx_dots_item",function(){var t=Number($(this).data("id"));i.select(t),o.trigger(OGX.Dots.SELECT,t),function(t){for(var e in n)switch(n[e]._NAME_){case OGX.Carousel.NAME:n[e].showView(t)}}(t)}):o.off(i.touch.down)}function l(){for(var t,e='<div class="ogx_dots">',i=Math.floor(100/r.total),n=0;n<r.total;n++)t="",r.current===n&&(t="ogx_dots_selected"),e+='<div class="ogx_dots_item" data-id="'+n+'" style="width:'+i+'%;"><span class="ogx_dots_gfx '+t+'"></span></div>';e+="</div>",o.html(e)}this._NAME_=OGX.Dots.NAME,this.el=null,this.bind=function(t,e){return!(n.hasOwnProperty(t)||!e.hasOwnProperty("_NAME_"))&&function(t,e){switch((n[t]=e)._NAME_){case OGX.Carousel.NAME:r.total=e.getViews().length,r.current=e.getView(),setTimeout(l,0),e.el.on(OGX.Carousel.SWIPE,function(t,e){i.select(e)})}return!0}(t,e)},this.unbind=function(t){return!!n.hasOwnProperty(t)&&a(t)},this.select=function(t){o.find(".ogx_dots_selected").removeClass("ogx_dots_selected"),o.find(".ogx_dots:first").children(".ogx_dots_item:eq("+t+")").children(".ogx_dots_gfx:first").addClass("ogx_dots_selected"),r.current=t},this.destroy=function(){!function(){for(var t in n)a(t)}(),r.clickable&&s(!1)},OGX.Data.merge(r,e),i.el=o=$(r.container),l(),r.clickable&&s(!0)},OGX.Dots.NAME="OgxDots",OGX.Dots.SELECT="DotsSelect",void 0===OGX)var OGX={};if(require("DynamicList","Uxi","Touch"),OGX.DynamicList=function(__config){construct(this,"DynamicList");var that=this,config=__config,config_default={container:null,key:!1,display:!1,displays:!1,reorder:!1,swipe:!1,chromeos:!1,min_x:30,click_time:100,hold_time:2e3,interval:20,list:[],mode:OGX.DynamicList.SELECT_MODE_SINGLE,trigger:!1,swipe_template:'<div class="ogx_dynamic_list_item ogx_dynamic_list_swiper_back_item" style="height:{{$height}}px; z-index:{{$zindex}};">{{$template}}</div>',zindex:1},swipe_default={mode:OGX.DynamicList.SWIPE_MODE_DELETE,options:{},template:!1,html:""},container,filtered,isFiltered,ogx_id=(new Date).getTime()+""+Math.round(1e3*Math.random()),selection=new OGX.List,binds={},key_id=1,key_default="__id__",key,drag={mode:!1,stime:0,target:0,si:0,ei:0,y:0},move_intv=null,hold_intv=null,drag_intv=null,swipe_dir=0,display=new OGX.Display,scroller=!1,ready=!1;function render(){for(var t,e,i,n=getWorkList(),o="",r=[],a=0;a<n.length;a++)!1,e="",t=n[a][key],selection.find(key,t,1)&&(e="ogx_dynamic_list_selected_item"),setDisplay(n[a]),display.html(n[a]),o+='<div class="ogx_dynamic_list_item '+e+" "+display.css(n[a])+'" data-ogx-id='+t+"></div>",i=display.oml('.ogx_dynamic_list[data-ogx-id="'+ogx_id+'"] .ogx_dynamic_list_item[data-ogx-id="'+t+'"]',n[a],config.key),r.push(i);container.html(o),parseOML(r),config.trigger&&container.trigger(OGX.DynamicList.RENDER)}function parseOML(t){for(var e=0;e<t.length;e++)that.parse(t[e])}function setDisplay(t){if(config.displays){var e=t[config.display.bind],i=config.displays[e];display.val(i)}else display.val(OGX.Data.clone(config.display))}function bind(n){if(n.hasOwnProperty("mode")||(n.mode="eqjson"),"object"==typeof n.object)switch((binds[n.property]=n).object._NAME_){case OGX.DynamicList.NAME:config.list.removeFilter(n.property);var t=worklistSelection(n.property,n.remote_property);config.list.addFilter(n.property,n.mode,t),binds[n.property].object.el.on(OGX.DynamicList.SELECT,function(t,e){var i;return config.list.removeFilter(n.property),i=binds[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_SINGLE||binds[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_TOGGLE?binds[n.property].object.getSelection()[0][n.remote_property]:worklistSelection(n.property,n.remote_property),config.list.addFilter(n.property,n.mode,i),filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0),!1}),binds[n.property].object.el.on(OGX.DynamicList.UNSELECT,function(t,e){var i;return config.list.removeFilter(n.property),0<(i=binds[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_SINGLE||binds[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_TOGGLE?[]:worklistSelection(n.property,n.remote_property)).length&&config.list.addFilter(n.property,n.mode,i),filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0),!1});break;case OGX.TagManager.NAME:config.list.removeFilter(n.property),config.list.addFilter(n.property,n.mode,n.object.getCurrentTags()),binds[n.property].object.el.on(OGX.TagManager.TAG_ADDED+" "+OGX.TagManager.TAG_REMOVED,function(t,e){return config.list.removeFilter(n.property),config.list.addFilter(n.property,n.mode,binds[n.property].object.getCurrentTags()),filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0),!1});break;case OGX.Switch.NAME:config.list.removeFilter(n.property),config.list.addFilter(n.property,n.mode,n.object.val()),binds[n.property].object.el.on(OGX.Switch.TOGGLE,function(t,e){return config.list.removeFilter(n.property),config.list.addFilter(n.property,n.mode,e),filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0),!1});break;case OGX.SwitchMulti.NAME:config.list.removeFilter(n.property),config.list.addFilter(n.property,n.mode,n.object.val()),binds[n.property].object.el.on(OGX.SwitchMulti.CHANGE,function(t,e){return config.list.removeFilter(n.property),""!==e&&config.list.addFilter(n.property,n.mode,e),filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0),!1});break;case OGX.Roulette.NAME:config.list.removeFilter(n.property),config.list.addFilter(n.property,n.mode,n.object.val()),binds[n.property].object.el.on(OGX.Roulette.CHANGE,function(t,e){return config.list.removeFilter(n.property),""!==e&&config.list.addFilter(n.property,n.mode,e),filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0),!1})}else if("string"==typeof n.object){if(0===$(n.object).length)return!1;n.object=$(n.object);var e=(binds[n.property]=n).object.val();switch(binds[n.property].hasOwnProperty("min_length")?(binds[n.property].last_val=e).length>=binds[n.property].min_length&&(config.list.removeFilter(n.property),config.list.addFilter(n.property,n.mode,e)):(config.list.removeFilter(n.property),config.list.addFilter(n.property,n.mode,e)),n.object.attr("type").toLowerCase()){case"text":case"number":case"email":case"password":case"tel":binds[n.property].object.on("input",function(){return e=$(this).val(),config.list.removeFilter(n.property),binds[n.property].hasOwnProperty("min_length")?e.length<binds[n.property].min_length&&binds[n.property].last_val.length>=binds[n.property].min_length||e.length>=binds[n.property].min_length?(e.length>=binds[n.property].min_length&&config.list.addFilter(n.property,n.mode,e),filtered=config.list.filter(),isFiltered=!0,binds[n.property].last_val=e,setTimeout(render,0)):binds[n.property].last_val=e:(e.length&&config.list.addFilter(n.property,n.mode,e),filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0)),!1});break;case"range":var i;binds[n.property].object.on("input",function(){return i=Number($(this).attr("min")),config.list.removeFilter(n.property),config.list.addFilter(n.property,n.mode,[i,$(this).val()]),filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0),!1})}}}function unbind(t){if(binds.hasOwnProperty(t)&&"object"==typeof binds[t].object)switch(binds[t].object._NAME_){case OGX.DynamicList.NAME:binds[t].object.el.off(OGX.DynamicList.SELECT),binds[t].object.el.off(OGX.DynamicList.UNSELECT);break;case OGX.TagManager.NAME:binds[t].object.el.off(OGX.TagManager.TAG_ADDED+" "+OGX.TagManager.TAG_REMOVED);break;case OGX.Switch.NAME:binds[t].object.el.off(OGX.Switch.TOGGLE);break;case OGX.SwitchMulti.NAME:binds[t].object.el.off(OGX.SwitchMulti.CHANGE);break;case OGX.Roulette.NAME:binds[t].object.el.off(OGX.Roulette.CHANGE);break;default:binds[t].object.off("input")}else binds[t].object.off("input");return config.list.removeFilter(t),delete binds[t],filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0),!0}function worklistSelection(t,e){for(var i=binds[t].object.getSelection(),n=[],o=0;o<i.length;o++)n.push(i[o][e]);return n}function clearBinds(){for(var t in binds)unbind(t)}function listenItems(t){void 0!==container&&ready&&(t?container.on("click",".ogx_dynamic_list_item",onClick):container.off("click",".ogx_dynamic_list_item",onClick))}function listenTouch(t){t?container.on(that.touch.down,".ogx_dynamic_list_item",onTouchStart):container.off(that.touch.down,".ogx_dynamic_list_item",onTouchStart)}function listenTouchHold(t){t?hold_intv=setInterval(onTouchHold,20):(clearInterval(hold_intv),hold_intv=null)}function listenTouchMove(t){t?container.on(that.touch.move,".ogx_dynamic_list_item",onTouchMove):container.off(that.touch.move,".ogx_dynamic_list_item")}function onTouchStart(t){drag.mode=!1,drag.target=$(t.currentTarget),drag.si=drag.target.index(),drag.cy=container.offset().top,t=that.event(t),drag.startx=t.pageX,drag.starty=t.pageY,drag_intv&&clearInterval(drag_intv),drag.stime=(new Date).getTime(),config.reorder&&listenTouchHold(!0),listenTouchMove(!0),$("body").on(that.touch.up,onTouchEnd)}function onTouchMove(t){t=that.event(t),drag.y=-1*(drag.starty-t.pageY),drag.mx=t.pageX-drag.startx,drag.px=t.pageX,drag.py=t.pageY,config.swipe&&!drag.mode&&Math.abs(drag.mx)>config.min_x&&(drag.mode="swipe",config.reorder&&listenTouchHold(!1),listenSwipeMove(!0))}function onTouchHold(){!drag.mode&&(new Date).getTime()-drag.stime>config.hold_time&&(drag.mode="reorder",drag.item=config.list.find(key,drag.target.data("id").toString(),1),container.trigger(OGX.DynamicList.HOLD,drag.item),listenTouchHold(!1),setTimeout(startDrag(),0))}function onTouchEnd(t){if($("body").off(that.touch.up,onTouchEnd),(config.reorder||config.swipe)&&(clearInterval(drag_intv),listenTouchMove(drag_intv=!1)),config.swipe&&listenSwipeMove(!1),config.reorder&&listenTouchHold(!1),config.reorder&&"reorder"===drag.mode){if(container.off(that.touch.move,handleMove),drag.clone){var e=JSON.parse(JSON.stringify(config.list[drag.si]));return config.list.delete(drag.si),config.list.insert(e,drag.ei),drag.clone.remove(),drag.clone=!1,drag.target.removeClass("ogx_dynamic_list_frozen"),void container.trigger(OGX.DynamicList.DROP,drag.item)}if((new Date).getTime()-drag.stime<config.click_time){var i=drag.target.data("id").toString(),n=config.list.find(key,i,1);container.trigger(OGX.DynamicList.SELECT,n),that.select(key,i)}}else if(config.swipe&&"swipe"===drag.mode){var o=drag.target.outerWidth(!0),r=Math.abs(100*drag.mx/o);r<50?r?(drag.target.addClass("ogx_dynamic_list_swiper_trans_item_restore"),drag.target.addClass("ogx_dynamic_list_swiper_trans_item").css("transform","translateX(0px)")):(drag.target.next(".ogx_dynamic_list_swiper_back_item:first").remove(),drag.target.css("transform","translateX(0px)")):0<drag.mx?(drag.target.attr("data-side","left"),drag.target.addClass("ogx_dynamic_list_swiper_trans_item").css("transform","translateX("+o+"px)")):(drag.target.attr("data-side","right"),drag.target.addClass("ogx_dynamic_list_swiper_trans_item").css("transform","translateX("+-1*o+"px)"))}drag.mode=!1}function listenSwipeMove(t){t?move_intv=setInterval(onSwipeMove,config.interval):(clearInterval(move_intv),move_intv=!1)}function onSwipeMove(){if("swipe"===drag.mode&&Math.abs(drag.mx)>config.min_x){var t=drag.target.outerHeight();if(!drag.target.hasClass("ogx_dynamic_list_swiper_work")){drag.target.addClass("ogx_dynamic_list_swiper_work");var e={};e.height=t,e.margin=t,e.top=drag.target.position().top,e.zindex=config.zindex;var i="";config.swipe.template?i=OGX.Templater.getTemplate(config.swipe.template):config.swipe.html&&(i=config.swipe.html),e.template=i,i=OGX.Templater.templatize(e,config.swipe_template),drag.target.after(i)}if(config.swipe.mode===OGX.DynamicList.SWIPE_MODE_SIDE&&(drag.mx<0?(swipe_dir=1,drag.target.next(".ogx_dynamic_list_swiper_back_item:first").removeClass("ogx_dynamic_list_swiper_side_right").addClass("ogx_dynamic_list_swiper_side_left")):(swipe_dir=-1,drag.target.next(".ogx_dynamic_list_swiper_back_item:first").removeClass("ogx_dynamic_list_swiper_side_left").addClass("ogx_dynamic_list_swiper_side_right"))),drag.py>=drag.target.offset().top&&drag.py<=drag.target.offset().top+t){drag.target.css("transform","translateX("+drag.mx+"px)");var n=drag.target.next(".ogx_dynamic_list_swiper_back_item:first");drag.mx<0?(n.removeClass("ogx_dynamic_list_swiper_left"),n.addClass("ogx_dynamic_list_swiper_right")):(n.addClass("ogx_dynamic_list_swiper_left"),n.removeClass("ogx_dynamic_list_swiper_right"))}else onTouchEnd(drag.target)}}function listenTrans(t){t?container.on("transitionend",".ogx_dynamic_list_swiper_trans_item",function(){var t=$(this),e=t.next(".ogx_dynamic_list_swiper_back_item:first");if(t.hasClass("ogx_dynamic_list_swiper_trans_item_restore"))e.remove(),t.css("transform","translateX(0px)"),t.removeClass("ogx_dynamic_list_swiper_trans_item");else{var i,n=t.index(),o=t.data("id");switch(config.swipe.mode){case OGX.DynamicList.SWIPE_MODE_DELETE:t.remove(),shrink(e),i=config.list.findDelete(config.key,o,1),container.trigger(OGX.DynamicList.DELETE,{item:i,index:n});break;case OGX.DynamicList.SWIPE_MODE_SIDE:var r;i=config.list.find(config.key,o,1),r=-1===swipe_dir?"right":"left",container.trigger(OGX.DynamicList.SIDED,{side:r,item:i,index:n});break;case OGX.DynamicList.SWIPE_MODE_CUSTOM:}}t.removeClass("ogx_dynamic_list_swiper_work"),t.removeClass("ogx_dynamic_list_swiper_trans_item_restore")}):container.off("transitionend",".ogx_dynamic_list_swiper_trans_item")}function shrink(t,e){t.addClass("ogx_dynamic_list_swiper_delete"),t.on("transitionend",function(){t.off("transitionend"),t.remove()})}function startDrag(){drag.tgy=drag.target.position().top,drag.tgx=drag.target.position().left,drag.y=0;var t=drag.target.outerWidth(),e=drag.target.outerHeight();drag.clone=drag.target.clone().css({position:"absolute",left:drag.tgx+"px",top:drag.tgy+"px",width:t+"px",height:e+"px"}).addClass("ogx_dynamic_list_reorder").prependTo(container),drag.target.addClass("ogx_dynamic_list_frozen"),drag_intv=setInterval(handleDrag,config.interval),container.on(that.touch.move,handleMove)}function handleMove(t){t.preventDefault(),t.stopImmediatePropagation(),t=that.event(t),drag.y=-1*(drag.starty-t.pageY)}function handleDrag(){if(1<Math.abs(container.offset().top-drag.cy))return clearInterval(drag_intv),drag_intv=!1,drag.clone.remove(),drag.clone=!1,drag.target.removeClass("ogx_dynamic_list_frozen"),void container.trigger(OGX.DynamicList.RELEASE);var i=!1,t=container.children(".ogx_dynamic_list_item:last"),e=t.offset().top+-1*drag.cy;if(drag.tgy+drag.y<e?drag.clone.css({top:drag.tgy+drag.y}):i=t,!i){var n,o,r,a,s=0;container.children(".ogx_dynamic_list_item").each(function(t,e){if((e=$(e))[0]!==drag.clone[0]&&!e.hasClass("ogx_dynamic_list_frozen")){if(n=e.offset().top,o=e.outerHeight(),a=n+o/2,r=drag.clone.offset().top,n<r&&r<a)return s=-1,void(i=e);if(a<r&&r<n+o)return s=1,void(i=e)}})}if(i){switch(drag.ei=config.list.findIndex(key,$(i).data("id").toString()).index,s){case-1:i.index()-1!==drag.target.index()&&drag.target.detach().insertBefore(i);break;case 1:i.index()+1!==drag.target.index()&&drag.target.detach().insertAfter(i)}i=!1}}function onClick(t){var e=$(this);switch(config.mode){case OGX.DynamicList.SELECT_MODE_SINGLE:e.hasClass("ogx_dynamic_list_selected_item")||e.hasClass("ogx_dynamic_list_swiper_trans_item")||(selectIndex(e.index(),!0),container.trigger(OGX.DynamicList.SELECT,selection[selection.length-1]));break;case OGX.DynamicList.SELECT_MODE_TOGGLE:e.hasClass("ogx_dynamic_list_selected_item")||e.hasClass("ogx_dynamic_list_swiper_trans_item")?(selectIndex(e.index(),!1),container.trigger(OGX.DynamicList.UNSELECT)):(that.resetSelection(),selectIndex(e.index(),!0),container.trigger(OGX.DynamicList.SELECT,selection[selection.length-1]));break;case OGX.DynamicList.SELECT_MODE_MULTI:e.hasClass("ogx_dynamic_list_selected_item")||e.hasClass("ogx_dynamic_list_swiper_trans_item")?(selectIndex(e.index(),!1),container.trigger(OGX.DynamicList.UNSELECT)):(selectIndex(e.index(),!0),container.trigger(OGX.DynamicList.SELECT,selection));break;case OGX.DynamicList.SELECT_MODE_HIT:var i=getWorkList();if(e.hasClass("ogx_dynamic_list_swiper_back_item")){var n="left";e.hasClass("ogx_dynamic_list_swiper_side_right")&&(n="right"),container.trigger(OGX.DynamicList.BACK_HIT,{side:n,item:i[e.index()]})}else container.trigger(OGX.DynamicList.SELECT,i[e.index()])}}function select(t,e,i){"single"===config.mode&&that.resetSelection();var n,o=getWorkList().find(t,e);o&&!Array.isArray(o)&&(o=[o]);for(var r=0;r<o.length;r++)(n=container.find(".ogx_dynamic_list_item[data-ogx-id="+o[r][key]+"]:first"))&&(i?(n.addClass("ogx_dynamic_list_selected_item"),selection.push(o[r])):n.removeClass("ogx_dynamic_list_selected_item"));return"single"===config.mode&&o.length?o[0]:o}function selectIndex(t,e){var i,n=getWorkList();return 0<(i=container.find(".ogx_dynamic_list_item:eq("+t+")")).length&&(config.mode===OGX.DynamicList.SELECT_MODE_SINGLE&&that.resetSelection(),e?(i.addClass("ogx_dynamic_list_selected_item"),selection.push(n[t])):(i.removeClass("ogx_dynamic_list_selected_item"),selection.findDelete(key,i.data("id"),1)),!0)}function getWorkList(){return isFiltered?filtered:config.list}function forceIds(){for(var t=0;t<config.list.length;t++)config.list[t][key]=String(key_id),key_id++}function clearIds(t){for(var e=0;e<t.length;e++)delete t[e][key];return t}function initBinds(){for(var t=0;t<config.binds.length;t++)bind(config.binds[t])}function initScroller(){container.on(OGX.Scroller.READY,function(){container.off(OGX.Scroller.READY),(container=scroller.container()).addClass("ogx_dynamic_list").attr("data-ogx-id",ogx_id),that.val(config.list),config.binds&&initBinds(),ready=!0,that.blured||listenItems(!0),container.trigger(OGX.DynamicList.READY)}),scroller=that.create("Scroller",{container:container})}function initDefaults(){config||(config={}),OGX.Data.merge(config,config_default),"string"==typeof config.list&&0===config.list.indexOf("#")&&(config.list=eval(config.list.substr(1))),config.list.hasOwnProperty("insert")||(config.list=new OGX.List(config.list)),!config.key&&0<config.list.length?(key=key_default,forceIds()):key=config.key,config.swipe&&("object"!=typeof config.swipe&&(config.swipe={}),OGX.Data.merge(config.swipe,swipe_default)),that.el=container=$(config.container),container.attr("data-ogx-id",ogx_id)}function init(){initDefaults(),config.scroll?initScroller():(ready=!0,that.val(config.list),config.binds&&initBinds(),container.trigger(OGX.DynamicList.READY))}this._NAME_=OGX.DynamicList.NAME,this.el=null,this.enable=function(){return config.mode!==OGX.DynamicList.STATIC&&(this.touch.enable(),listenItems(!0),(config.reorder||config.swipe)&&(listenTouch(!0),config.swipe&&listenTrans(!0)),!0)},this.disable=function(){return config.mode!==OGX.DynamicList.STATIC&&(this.touch.disable(),listenItems(!1),(config.reorder||config.swipe)&&(listenTouch(!1),config.swipe&&listenTrans(!1)),!0)},this.val=function(t){if(void 0===t){if(!config.key){var e=JSON.parse(JSON.stringify(config.list));return clearIds(OGX.List(e))}return config.list}t.hasOwnProperty("insert")||(t=new OGX.List(t)),config.list=t,config.key||(key_id=1,key=key_default,forceIds()),setTimeout(render,0)},this.getFilteredList=function(){if(isFiltered){if(!config.key){var t=JSON.parse(JSON.stringify(filtered));return clearIds(OGX.List(t))}return filtered}return!1},this.display=function(t){return void 0===t?config.display:(config.display=t,!0)},this.displays=function(t){return void 0===t?config.displays:(config.displays=t,!0)},this.mode=function(t){return void 0===t?config.mode:(config.mode=t,!0)},this.bind=function(t){return!binds.hasOwnProperty(t.property)&&bind(t)},this.unbind=function(t){return!!binds.hasOwnProperty(t)&&unbind(t)},this.order=function(t,e){return config.list.order(t,e),setTimeout(render,0),!0},this.filter=function(){return filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0),filtered},this.unfilter=function(){return isFiltered=!1,setTimeout(render,0),!0},this.addFilter=function(t,e,i){return config.list.addFilter(t,e,i)},this.removeFilter=function(t,e,i){return config.list.removeFilter(t,e,i)},this.resetFilters=function(){return config.list.resetFilters()},this.getFilters=function(){return config.list.getFilters()},this.insert=function(t,e){var n;config.key||(t[key]=key_id++);var o=!0;if(isFiltered){var r=new OGX.List(t);r.setFilters(config.list.getFilters()),0===r.filter().length?o=!1:filtered.push(t)}setDisplay(t);var a='<div class="ogx_dynamic_list_item '+display.css(list[i])+'" data-ogx-id='+t[key]+"></div>",s=display.oml('.ogx_dynamic_list[data-ogx-id="'+ogx_id+'"] .ogx_dynamic_list_item[data-ogx-id="'+id+'"]',t,key);if(void 0===e)config.list.push(t),o&&container.append(a);else if(config.list.insert(t,e),o){if(isFiltered)n=(filtered=config.list.filter()).findIndex(key,t[key]);else{if(0===e)return container.prepend(a),!0;n=config.list.findIndex(key,t[key])}var l=container.children(".ogx_dynamic_list_item:nth-child("+(n.index+1)+")");0<l.length?l.before(a):container.append(a),config.trigger&&container.trigger(OGX.DynamicList.RENDER)}return this.parse(s),o},this.delete=function(t){var e=getWorkList().delete(t);if(e){var i=container.children(".ogx_dynamic_list_item:eq("+t+")");return this.remove(e[key]),i.remove(),!0}return!1},this.deleteSelection=function(){for(var t=getWorkList(),e=0;e<selection.length;e++)t.findDelete(key,selection[e][key],1),this.remove(selection[e][key]),container.children(".ogx_dynamic_list_selected_item").remove();return!0},this.findDelete=function(t,e,i){var n,o,r=config.list.findDelete(t,e,i);r&&!Array.isArray(r)&&(r=[r]);for(var a=0;a<r.length;a++)o=(n=container.children(".ogx_dynamic_list_item[data-ogx-id="+r[a][key]+"]:first")).next(".ogx_dynamic_list_swiper_back_item:first"),n.remove(),this.remove(r[a][key]),shrink(o);return r},this.select=function(t,e){return select(t,e,!0)},this.selectIndex=function(t){return selectIndex(t,!0)},this.unselect=function(t,e){return select(t,e,!1)},this.unselectIndex=function(t){return selectIndex(t,!1)},this.resetSelection=function(){selection=new OGX.List,container.children(".ogx_dynamic_list_selected_item").removeClass("ogx_dynamic_list_selected_item")},this.getSelection=function(t){return void 0===t&&(t=!1),t?container.children(".ogx_dynamic_list_selected_item"):config.key?selection:clearIds(JSON.parse(JSON.stringify(selection)))},this.getElement=function(t,e){var i=config.list.find(t,e,1);return!!i&&container.children('.ogx_dynamic_list_item[data-ogx-id="'+i[key]+'"]')[0]},this.getIndex=function(t,e){var i=config.list.find(t,e,1);return i?container.children('.ogx_dynamic_list_item[data-ogx-id="'+i[key]+'"]').index():-1},this.replace=function(t,e,i){config.key||(i[key]=key_id++);var n=config.list.findReplace(t,e,i,1);if(n){var o=container.children(".ogx_dynamic_list_item[data-ogx-id="+n[key]+"]:first");return o.length&&(o.attr("data-ogx-id",i[key]),o.html(config.display.html(i)),config.trigger&&container.trigger(OGX.DynamicList.RENDER)),!0}return!1},this.update=function(t,e,i,n,o){var r,a=config.list.findUpdate(t,e,i,n,o);if(a&&!Array.isArray(a)&&(a=[a]),a.length){for(var s=0;s<a.length;s++)0<(r=container.children(".ogx_dynamic_list_item[data-ogx-id="+a[s][key]+"]:first")).length&&(r.html(config.display.html(a[s])),config.trigger&&container.trigger(OGX.DynamicList.RENDER));return a.length}return!1},this.restore=function(t,e){var i=config.list.find(t,e,1),n=container.children('.ogx_dynamic_list_item[data-ogx-id="'+i[config.key]+'"]');n.addClass("ogx_dynamic_list_swiper_trans_item_restore"),n.css({transform:"translateX(0px)","z-index":config.zindex+1}),setTimeout(function(){n.next(".ogx_dynamic_list_swiper_back_item:first").remove()},200)},this.clear=function(){container.empty()},this.reset=function(){container.empty(),isFiltered=!1,config.list=new OGX.List,selection=new OGX.List,filtered=new OGX.List},this.destroy=function(){clearBinds(),container.empty(),container.removeClass("ogx_dynamic_list")},this.render=function(){setTimeout(render,0)},init()},OGX.DynamicList.NAME="ogxDynamicList",OGX.DynamicList.HOLD="DynamicListHold",OGX.DynamicList.RELEASE="DynamicListRelease",OGX.DynamicList.DROP="DynamicListDrop",OGX.DynamicList.SELECT="DynamicListSelect",OGX.DynamicList.DELETE="DynamicListDelete",OGX.DynamicList.SIDED="DynamicListSided",OGX.DynamicList.BACK_HIT="DynamicListBackHit",OGX.DynamicList.UNSELECT="DynamicListUnselect",OGX.DynamicList.RENDER="DynamicListRender",OGX.DynamicList.SELECT_MODE_SINGLE="single",OGX.DynamicList.SELECT_MODE_TOGGLE="toggle",OGX.DynamicList.SELECT_MODE_MULTI="multi",OGX.DynamicList.SELECT_MODE_HIT="hit",OGX.DynamicList.STATIC="static",OGX.DynamicList.SWIPE_LEFT="DynamicListSwipeLeft",OGX.DynamicList.SWIPE_RIGHT="DynamicListSwipeRight",OGX.DynamicList.SWIPE_MODE_DELETE="DynamicListSwipeModeDelete",OGX.DynamicList.SWIPE_MODE_SIDE="DynamicListSwipeModeSide",OGX.DynamicList.SWIPE_MODE_CUSTOM="DynamicListSwipeModeCustom",OGX.DynamicList.READY="DynamicListReady",void 0===OGX)var OGX={};if(OGX.File=function(){this.readFile=function(t,e){},this.writeFile=function(t,e,i){}},void 0===OGX)var OGX={};if(OGX.Form=function(){"use strict";var s=this,c={container:!1,allowed:!1,forbidden:!1,change_cb:!1,submit_cb:!1,validate:!1,elem_types:["input","textarea"],wait:1e3,fields:{}},i={container:!1,allowed:/^[a-z0-9\\!\\.\\?\\#\\@\\$\\-\\:\\(\\)\\/_,;%'"â€™ ]$/gi,forbidden:!1,mask:!1,mask_char:"%",paste:!0,autocomplete:null,multiline:!1,input_cb:!1,change_cb:!1,val:null,changing:!1,wait:2e3,intv:!1,max:2500,type:"string",params:null},_={},o={};function e(t,e){if(_[e].change_cb){for(var i in _[e].fields)if(_[e].fields[i].intv)return;var n,o=l(e);for(var r in o)_[e].fields.hasOwnProperty(r)&&_[e].fields[r].hasOwnProperty("type")?o[r]=u(_[e].fields[r].type,o[r]):_[e].hasOwnProperty("type")&&(o[r]=u(_[e].type,o[r]));if(_[e].validate){n={obj:o,form:e,valid:!1};var a=s.validateForm(e);!0===a?n.valid=!0:(n.valid=!1,n.error=a)}else n=o;_[e].change_cb(n)}}function u(t,e){switch(t){case"string":return String(e);case"number":return Number(e);case"int":return parseInt(e);case"bool":return"true"===e||1===e}}function l(t){return $(t).serializeArray().map(function(t){return this[t.name]=t.value,this}.bind({}))[0]}function r(t){return Object.assign({},t)}function a(t,e){for(var i in e)t.hasOwnProperty(i)&&(t[i]=e[i]);return t}this.bindForm=function(t){return!_.hasOwnProperty(t.container)&&(function(t){for(var n=a(r(c),t),i=0;i<n.elem_types.length;i++)$(n.container).find(n.elem_types[i]).each(function(t,e){e.hasAttribute("name")&&(o=e.getAttribute("name"),n.fields.hasOwnProperty(o)||(n.fields[o]={}),n.fields[o].tag=n.elem_types[i])});for(var o in n.fields)n.fields[o].change_cb=e,n.fields[o].container=n.container+" "+n.fields[o].tag+'[name="'+o+'"]',delete n.fields[o].tag,n.fields[o].params=n.container,n.fields[o]=s.bindField(n.fields[o]);_[n.container]=n,$(n.container).on("submit",function(t){t.preventDefault(),t.stopImmediatePropagation();var e={obj:l(n.container),form:n.container};if(_[n.container].validate){var i=s.validateForm(n.container);!0===i?e.valid=!0:(e.valid=!1,e.error=i)}_[n.container].submit_cb?_[n.container].submit_cb(e):$(n.container).trigger("submit",e)})}(t),!0)},this.unbindForm=function(t){_.hasOwnProperty(t)&&(!function(t){for(var e in $(document).off("submit",t),_[t].fields)s.unbindField(_[t].fields[e].container);delete _[t]}(t),delete _[t])},this.bindField=function(t){if(_.hasOwnProperty(t.container))return!1;var e=a(r(i),t);return function(l){var c=$(l.container),d=c.attr("name"),i=c.val();c.on("input change",function(){var t=$(this).val();if(t!==i){if(i=t,l.input_cb){var e={value:null,obj:{},el:null};t=u(l.type,t),e.el=c[0],e.value=t,e.property=d,e.obj[d]=t,l.input_cb(e,l.params)}_[l.container].intv||(_[l.container].intv=setInterval(function(){!function(t,e){var i=$(t).val(),n=_[t];if(n.val!==i&&(n.val=i,n.changing=(new Date).getTime()),n.changing&&(new Date).getTime()>n.wait+n.changing&&(clearInterval(n.intv),n.intv=!1,_[t].change_cb)){var o={value:null,obj:{},el:null};i=u(_[t].type,i),o.el=$(t)[0],o.property=$(t).attr("name"),o.value=i,o.obj[o.property]=i,_[t].change_cb(o,e)}}(l.container,l.params)},50))}}),l.multiline||c.on("keydown",function(t){if(8!==t.which&&13!==t.which){var e=$(this).val(),i=t.key;if(13!==t.which&&l.mask){if(e.length>l.mask.length)return t.preventDefault(),t.stopImmediatePropagation(),!1;for(var n=l.mask,o=0;o<e.length;o++)l.mask.substr(o,1)===l.mask_char&&(n=n.replace(l.mask_char,e.substr(o,1)));var r=n.indexOf(l.mask_char),a=!1;return r+1<n.length+1&&(a=n.substr(r+1,1)),-1!==r&&(i===l.mask.substr(n.indexOf(l.mask_char)-1,1)?n=n.substr(0,n.indexOf(l.mask_char)-1):(n=n.substr(0,n.indexOf(l.mask_char)),a&&a!==l.mask_char&&setTimeout(function(){c.val(n+i+a)},0))),void c.val(n)}}if(13===t.which){t.preventDefault(),t.stopImmediatePropagation();var e=$(this).val();if(_[l.container].intv&&(clearInterval(_[l.container].intv),_[l.container].intv=null),l.change_cb){var s={value:null,obj:{},el:null};e=u(l.type,e),s.el=c[0],s.property=d,s.value=e,s.obj[d]=e,l.change_cb(s,l.params)}else c.trigger("change",e)}});((_[l.container]=l).allowed||l.forbidden)&&s.restrictField(l)}(e),e},this.unbindField=function(t){if(_.hasOwnProperty(t)){var e=$(t);e.off("input change"),_[t].multiline||e.off("keydown"),_[t].intv&&clearInterval(_[t].intv),o.hasOwnProperty(t)&&s.unrestrictField(t),delete _[t]}},this.restrictField=function(t){return!o.hasOwnProperty(t.container)&&(function(i){var t=$(i.container),n=[8,9];o[i.container]=i,o[i.container].keys=[],null===i.autocomplete&&t[0].hasAttribute("autocomplete")&&"on"===t.attr("autocomplete")?i.autocomplete=!0:i.autocomplete=!1;i.autocomplete?i.hasOwnProperty("allowed")&&i.allowed&&(i.allowed=new RegExp(i.allowed.toString().replace("$/gi","+$").replace("/^","^"),"gi")):o[i.container].keys.push(229);-1!==["input","texarea"].indexOf(t.get(0).tagName.toLowerCase())?o[i.container].content="val":o[i.container].content="html";o[i.container].multiline||o[i.container].keys.push(13);t.on("textInput keydown",function(t){if("textInput"===t.type){var e=t.originalEvent.data;if(o[i.container].allowed){if(!e.match(o[i.container].allowed))return t.preventDefault(),t.stopImmediatePropagation(),!1}else if(o[i.container].forbidden&&e.match(o[i.container].forbidden))return t.preventDefault(),t.stopImmediatePropagation(),!1}if("keydown"===t.type){if(-1!==o[i.container].keys.indexOf(t.which))return t.preventDefault(),t.stopImmediatePropagation(),!1;if($(this)[o[i.container].content]().length>=o[i.container].max&&-1===t.which.indexOf(n))return t.preventDefault(),t.stopImmediatePropagation(),!1}}),o[i.container].paste||t.on("paste",function(t){t.preventDefault(),t.stopImmediatePropagation()})}(t),!0)},this.unrestrictField=function(t){if(o.hasOwnProperty(t)){var e=$(t);return e.off("textInput keydown"),o[t].paste||e.off("paste"),delete o[t],!0}return!1},this.formToObj=function(t){return l(t)},this.populateForm=function(t,i){var n,e=$(t);function o(t,e){n=$(e).attr("name"),t.hasOwnProperty(n)&&$(e).val(t[n])}e.find("input").each(function(t,e){o(i,e)}),e.find("texarea").each(function(t,e){o(i,e)})},this.validateForm=function(t){for(var i,n,o,e=$(t),r={},a=!0,s=c.elem_types,l=0;l<s.length;l++)e.find(s[l]).each(function(t,e){i=$(e),e.hasAttribute("required")&&e.hasAttribute("pattern")&&("input"===i[0].tagName&&"submit"!==i.attr("type")||"input"!==i[0].tagName)&&(n=i.attr("pattern"),o=i.val(),n&&((n=new RegExp(n,"g")).test(o)||(r[i.attr("name")]=!1,a=!1)))});return!!a||r}},OGX.Form=new OGX.Form,void 0===OGX)var OGX={};if(OGX.Geo=function(t){"use strict";var s=this;void 0===t&&(t={});var r,e,i,n={map:null,markers:[],icon:"",browser_loc:null},l=t;function a(t,e){for(var i,n={},o=0;o<t.length;o++){i=!1;for(var r=0;r<e.length;r++){for(var a=0;a<e[r].address_components.length;a++)if(-1!==e[r].address_components[a].types.indexOf(t[o][0])){n.hasOwnProperty(t[o][1])&&n[t[o][1]].length||(n[t[o][1]]=e[r].address_components[a].short_name),i=!0;break}if(i)break}}return n=s.clean(n)}function c(t){return t*(Math.PI/180)}function d(t){return Array.isArray(t)?new google.maps.LatLng(t[0],t[1]):"function"!=typeof t.lat?new google.maps.LatLng(t.lat,t.lng):t}function o(t){var e={gmap:new google.maps.LatLng(t.coords.latitude,t.coords.longitude),raw:{lat:t.coords.latitude,lng:t.coords.longitude}};i?(i(e),i=null):$(document).trigger(OGX.Geo.BROWSER_LOC_SUCCESS,e)}function _(t){$(document).trigger(OGX.Geo.BROWSER_LOC_ERROR,t)}this._NAME_=OGX.Geo.NAME,this.setMap=function(t){l.map=t,google.maps.event.addListenerOnce(l.map,"tilesloaded",function(){$(document).trigger(OGX.Geo.MAP_LOADED)})},this.getMap=function(){return l.map},this.getMapRadius=function(){return!!l.map&&function(){if(l.map){var t=l.map.getBounds(),e=t.getCenter(),i=t.getNorthEast(),n=e.lat()/57.2958,o=e.lng()/57.2958,r=i.lat()/57.2958,a=i.lng()/57.2958,s=3963*Math.acos(Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos(a-o));return s}return!1}()},this.getCurrentLocation=function(){return!!l.map&&(t=l.map.getCenter(),new google.maps.LatLng(t.lat(),t.lng()));var t},this.getBrowserLocation=function(t){i=void 0===t?null:t,navigator.geolocation.getCurrentPosition(o,_,{maximumAge:0,timeout:1e4,enableHighAccuracy:!0})},this.getDistance=function(t,e,i,n){var o=c(i-t),r=c(n-e),a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(c(t))*Math.cos(c(i))*Math.sin(r/2)*Math.sin(r/2),s=6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)));return Math.round(1e3*s)/1e3},this.addressToLatLng=function(t,i,n){r.geocode({address:t},function(t,e){e==google.maps.GeocoderStatus.OK?i(t[0].geometry.location,n):i(!1,n)})},this.getCityBoundaries=function(t,e,i,n,o){r.geocode({address:t+", "+e+", "+i},function(t,e){e==google.maps.GeocoderStatus.OK?n(t[0].geometry,o):n(!1,o)})},this.latLngToZip=function(t,n,e){t=d(t),r.geocode({location:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i=a([["postal_code","zip"]],t);n(i)}})},this.latLngToCountryStateCity=function(t,n,o){t=d(t),r.geocode({location:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i=a([["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);n(i,o)}else n(!1,o)})},this.partialAddressToCountryStateCity=function(t,n,o){r.geocode({address:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i=a([["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);n(i,o)}else n(!1,o)})},this.latLngToAddress=function(t,n,o){t=d(t),r.geocode({location:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i=a([["street_number","number"],["route","street"],["postal_code","zip"],["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);t[0].hasOwnProperty("formatted_address")&&(i.formatted=t[0].formatted_address),n(i,o)}else n(!1,o)})},this.partialAddressToAddress=function(t,n,o){r.geocode({address:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i=a([["street_number","number"],["route","street"],["postal_code","zip"],["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);t[0].hasOwnProperty("formatted_address")&&(i.formatted=t[0].formatted_address),i.lat=t[0].geometry.location.lat(),i.lng=t[0].geometry.location.lng(),n(i,o)}else n(!1,o)})},this.zipToAddress=function(t,e,i){this.partialAddressToAddress(zip,e,i)},this.zipToLatLng=function(t,n,o){r.geocode({address:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i={};i.lat=t[0].geometry.location.lat(),i.lng=t[0].geometry.location.lng(),n(i,o)}else n(!1,o)})},this.getRoute=function(i){var t={start:!1,end:!1,waypoints:!1,optimize:!0,mode:OGX.Geo.TRAVEL_MODE_CAR,callback:!1,params:!1};for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e]);var n=new google.maps.DirectionsService,o={origin:i.start,destination:i.end,travelMode:i.mode};i.waypoints&&(o.waypoints=i.waypoints,i.optimize&&(o.optimizeWaypoints=!0)),n.route(o,function(t,e){e===google.maps.DirectionsStatus.OK?i.callback(t,i.params):i.callback(!1,i.params)})},this.calcRouteMinutes=function(t){for(var e=0,i=0;i<t.legs.length;i++)e+=t.legs[i].duration.value;return e=Math.round(e/60)},this.drawRoute=function(t){e||(e=new google.maps.DirectionsRenderer),e.setMap(l.map),e.setDirections(t)},this.clearMap=function(){l.map&&e&&e.setMap(null)},this.latLngToLoc=function(t,e){return new google.maps.LatLng(t,e)},this.clean=function(t,e){var i;if(void 0===e&&(e=!1),t.hasOwnProperty("city")&&t.hasOwnProperty("vicinity")&&-1!==t.vicinity.indexOf(",")&&(i=new RegExp(", ([a-z -']+)$","gi").exec(t.vicinity))&&1<i.length&&(t.city===i[1]?t.vicinity=t.vicinity.replace(i[0],""):t.city?t.city.length>i[1].length&&(t.city=i[1],t.vicinity=t.vicinity.replace(i[0],"")):t.city=i[1]),e)for(var n in t)-1===e.indexOf(n)&&delete t[n];return t},"undefined"!=typeof google&&void 0!==google.maps?(r=new google.maps.Geocoder,function(){for(var t in n)l.hasOwnProperty(t)||(l[t]=n[t])}(),l.map&&l.markers.length):$(document).trigger(OGX.Geo.ERROR_GMAP)},OGX.Geo.NAME="OgxGeo",OGX.Geo.ERROR="GEOTOOLS_error",OGX.Geo.ERROR_GMAP="GEOTOOLS_GMAP_ERROR",OGX.Geo.TRAVEL_MODE_CAR="DRIVING",OGX.Geo.TRAVEL_MODE_TRANSIT="TRANSIT",OGX.Geo.TRAVEL_MODE_WALK="WALKING",OGX.Geo.TRAVEL_MODE_BIKE="BICYCLING",OGX.Geo.BROWSER_LOC_SUCCESS="GEOTOOLS_BROWSER_LOC_SUCCESS",OGX.Geo.BROWSER_LOC_ERROR="GEOTOOLS_BROWSER_LOC_ERROR",OGX.Geo.MAP_LOADED="GEOTOOLS_MAP_LOADED",void 0===OGX)var OGX=function(){};if(require("GridSwiper","Uxi","Touch"),OGX.GridSwiper=function(t){construct(this,"GridSwiper");var s,l,c,d,e,i,o,r,n,a,_,u,f=this,g=t,h={map:[],axis:{x:!0,y:!0},loop:!0,start:!1,chromeos:!1},p=!1,m={x:null,y:null},y={x:0,y:0},v={},x={x:0,y:0},O={x:0,y:0},b=(new Date).getTime()+Math.round(1e3*Math.random()),w=[];function G(t){t?s.on(f.touch.down,X):s.off(f.touch.down,X)}function X(t){p=!1,r=o=i=e=0,t=I(t),m.x=t.pageX,m.y=t.pageY,L(!0)}function E(t){t?$("body").on(f.touch.up,T):$("body").off(f.touch.up,T)}function T(t){L(!1),D()}function D(t,e){var i,n;void 0===t&&(t=0),void 0===e&&(e=0),!0?(l.off("transitionend"),l.on("transitionend",function(){l.off("transitionend"),l.removeClass("ogx_grid_swiper_anim"),y=k(l);var t={x:null,y:null};t.x=-1*Math.round(y.x/c),t.y=-1*Math.round(y.y/d),x.x!==t.x?(o=x.x>t.x?1:-1,x.x=t.x,O.x=Y(x).x,-1===o?(l.children(".ogx_grid_swiper_cell[data-y="+(x.y-1)+"]").attr("data-x",x.x).css("left",x.x*c),l.children(".ogx_grid_swiper_cell[data-y="+(x.y+1)+"]").attr("data-x",x.x).css("left",x.x*c),l.children(".ogx_grid_swiper_cell[data-x="+(x.x-2)+"][data-y="+x.y+"]").attr("data-x",x.x+1).css("left",(x.x+1)*c),s.trigger(OGX.GridSwiper.SWIPE_LEFT,{cell:O,point:x}),P(w=[{x:x.x+1,y:x.y},{x:x.x,y:x.y-1},{x:x.x,y:x.y+1}])):(l.children(".ogx_grid_swiper_cell[data-y="+(x.y-1)+"]").attr("data-x",x.x).css("left",x.x*c),l.children(".ogx_grid_swiper_cell[data-y="+(x.y+1)+"]").attr("data-x",x.x).css("left",x.x*c),l.children(".ogx_grid_swiper_cell[data-x="+(x.x+2)+"][data-y="+x.y+"]").attr("data-x",x.x-1).css("left",(x.x-1)*c),s.trigger(OGX.GridSwiper.SWIPE_RIGHT,{cell:O,point:x}),P(w=[{x:x.x-1,y:x.y},{x:x.x,y:x.y-1},{x:x.x,y:x.y+1}]))):x.y!==t.y&&(r=x.y>t.y?1:-1,x.y=t.y,O.y=Y(x).y,-1===r?(l.children(".ogx_grid_swiper_cell[data-x="+(x.x-1)+"]").attr("data-y",x.y).css("top",x.y*d),l.children(".ogx_grid_swiper_cell[data-x="+(x.x+1)+"]").attr("data-y",x.y).css("top",x.y*d),l.children(".ogx_grid_swiper_cell[data-y="+(x.y-2)+"][data-x="+x.x+"]").attr("data-y",x.y+1).css("top",(x.y+1)*d),s.trigger(OGX.GridSwiper.SWIPE_UP,{cell:O,point:x}),P(w=[{x:x.x,y:x.y+1},{x:x.x-1,y:x.y},{x:x.x+1,y:x.y}])):(l.children(".ogx_grid_swiper_cell[data-x="+(x.x-1)+"]").attr("data-y",x.y).css("top",x.y*d),l.children(".ogx_grid_swiper_cell[data-x="+(x.x+1)+"]").attr("data-y",x.y).css("top",x.y*d),l.children(".ogx_grid_swiper_cell[data-y="+(x.y+2)+"][data-x="+x.x+"]").attr("data-y",x.y-1).css("top",(x.y-1)*d),s.trigger(OGX.GridSwiper.SWIPE_DOWN,{cell:O,point:x}),P(w=[{x:x.x,y:x.y-1},{x:x.x-1,y:x.y},{x:x.x+1,y:x.y}]))),p=0})):l.off("transitionend"),l.addClass("ogx_grid_swiper_anim"),y=k(l),i=-1*Math.round((y.x+t)/c)*c*-1,n=-1*Math.round((y.y+e)/d)*d*-1,l.css({transform:"translate3d("+i+"px, "+n+"px, 0px)"})}function L(t){t?(C(!0),s.on(f.touch.move,M)):(C(!1),s.off(f.touch.move,M))}function M(t){t=I(t),r=o=i=e=0,p||(g.axis.x&&Math.abs(t.pageX-m.x)>Math.abs(t.pageY-m.y)?p="x":g.axis.y&&Math.abs(t.pageX-m.x)<Math.abs(t.pageY-m.y)&&(p="y")),p&&(g.axis.x&&"x"===p?(e=Math.abs(t.pageX-m.x),o=0<t.pageX-m.x?1:-1):g.axis.y&&"y"===p&&(i=Math.abs(t.pageY-m.y),r=0<t.pageY-m.y?1:-1))}function C(t){t?u||(u=setInterval(S,10)):u&&(clearInterval(u),u=null)}function S(){if(g.axis.x&&"x"===p&&e&&o&&e<=c){if(!g.loop&&(x.x+-1*o<0||x.x+-1*o>g.map[0].length-1))return;if((n=(x.x+-1*o)%g.map[0].length)<0&&(n=Math.abs(g.map[0].length+n)),!1===g.map[O.y][n])return;_=e*o,l.css({transform:"translate3d("+(-1*x.x*c+_)+"px, "+y.y+"px, 0px)"})}else if(g.axis.y&&"y"===p&&i&&r&&i<=d){if(!g.loop&&(x.y+-1*r<0||x.y+-1*r>g.map.length-1))return;if((a=(x.y+-1*r)%g.map.length)<0&&(a=Math.abs(g.map.length+a)),!1===g.map[a][O.x])return;_=i*r,l.css({transform:"translate3d("+y.x+"px, "+(-1*x.y*d+_)+"px, 0px)"})}}function A(t){t?$(window).on("resize",N):$(window).off("resize",N)}function N(t){c=s.outerWidth(),d=s.outerHeight();var e=x.x*-c,i=x.y*-d;l.css("transform","translate3d("+e+"px, "+i+"px, 0px")}function k(t,e){var i=t.css("transform");return"none"===i?0:(i=(i=(i=i.substr(7)).substr(0,i.length-1)).split(","),{x:Number(i[4]),y:Number(i[5])})}function I(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}function Y(t){var e={x:0,y:0};return e.x=t.x%g.map[0].length,e.x<0&&(e.x=Math.abs(g.map[0].length+e.x)),e.y=t.y%g.map.length,e.y<0&&(e.y=Math.abs(g.map.length+e.y)),e}function P(t){for(var e,i={x:null,y:null},n=0;n<t.length;n++){if(t[n].y<0||t[n].y>g.map.length-1){if(!g.loop)return!1;i.y=Y(t[n]).y}else i.y=t[n].y;if(t[n].x<0||t[n].x>g.map[0].length-1){if(!g.loop)return!1;i.x=Y(t[n]).x}else i.x=t[n].x;e=g.map[i.y][i.x],R(t[n],e)}}function R(t,e){var i=!1;switch(typeof e){case"string":l.children('.ogx_grid_swiper_cell[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(".ogx_grid_swiper_cell_content:first").html(e);break;case"function":(i=e(t,Y(t),{x:t.x-x.x,y:t.y-x.y},l.children('.ogx_grid_swiper_cell[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(".ogx_grid_swiper_cell_content:first")[0]))&&l.children('.ogx_grid_swiper_cell[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(".ogx_grid_swiper_cell_content:first").html(i);break;case"object":e.hasOwnProperty("data")&&"function"==typeof e.data&&(e.data=e.data(t,Y(t),{x:t.x-x.x,y:t.y-x.y}));var n='.ogx_grid_swiper[data-ogx-id="'+b+'"] .ogx_grid_swiper[data-x="'+t.x+'"][data-y="'+t.y+'"] .ogx_grid_swiper_cell_content:';v[t.x+"_"+t.y]=n}}function F(){w=[],g.axis.x&&(w.push({x:g.start.x-1,y:g.start.y}),w.push({x:g.start.x+1,y:g.start.y})),w.push({x:g.start.x,y:g.start.y}),g.axis.y&&(w.push({x:g.start.x,y:g.start.y-1}),w.push({x:g.start.x,y:g.start.y+1})),P(w)}function W(){g.map.length||(g.map=[[]]),g.map.length&&!Array.isArray(g.map[0])&&(g.map=[g.map],g.axis.y=!1),g.start||(g.start={x:null,y:null},g.start.y=Math.floor(g.map.length/2),g.start.x=Math.floor(g.map[0].length/2))}function z(){var t=g.start.x*-c,e=g.start.y*-d,i=g.start.y-1,n=g.start.x,o='<div class="ogx_grid_swiper_container" style="transform:translate3d('+t+"px, "+e+'px, 0px);">',r=-1*t,a=-1*e-d;g.axis.y&&(o+='<div class="ogx_grid_swiper_cell" style="left:'+r+"px; top:"+a+'px;" data-x="'+n+'" data-y="'+i+'"><div class="ogx_grid_swiper_cell_content"></div></div>',o+='<div class="ogx_grid_swiper_cell" style="left:'+r+"px; top:"+(a+2*d)+'px;" data-x="'+n+'" data-y="'+(i+2)+'"><div class="ogx_grid_swiper_cell_content"></div></div>'),o+='<div class="ogx_grid_swiper_cell" style="left:'+r+"px; top:"+(a+d)+'px;" data-x="'+n+'" data-y="'+(i+1)+'"><div class="ogx_grid_swiper_cell_content"></div></div>',g.axis.x&&(o+='<div class="ogx_grid_swiper_cell" style="left:'+(r-c)+"px; top:"+-1*e+'px;" data-x="'+(n-1)+'" data-y="'+g.start.y+'"><div class="ogx_grid_swiper_cell_content"></div></div>',o+='<div class="ogx_grid_swiper_cell" style="left:'+(r+c)+"px; top:"+-1*e+'px;" data-x="'+(n+1)+'" data-y="'+g.start.y+'"><div class="ogx_grid_swiper_cell_content"></div></div>'),o+="</div>",s.html(o),l=s.children(".ogx_grid_swiper_container:first"),x.x=g.start.x,x.y=g.start.y,y.x=t,y.y=e,O.x=g.start.x,O.y=g.start.y}this._NAME_=OGX.GridSwiper.NAME,this.el=null,this.enable=function(){G(!0),E(!0),A(!0)},this.disable=function(){G(!1),listenMouse(!1),E(!1),C(!1),A(!1)},this.setMap=function(t,e){g.map=t,void 0!==e&&(g.start=e),W(),z(),F()},this.setMapCell=function(t,e){g.map[t.y]||(g.map[t.y]=[]),g.map[t.y][t.x]=e},this.getMapCell=function(t){return 0<t.y&&g.map.length<t.y&&0<t.x&&g.map[t.y].length<t.x&&g.map[t.y][t.x]},this.getCells=function(){var i,n,o,r,a=[];return l.children(".ogx_grid_swiper_cell").each(function(t,e){i=$(e),n={x:Number(i.attr("data-x")),y:Number(i.attr("data-y"))},o=Y(n),r={x:n.x-x.x,y:n.y-x.y},a.push({abs:n,rel:o,offset:r,element:e})}),a},this.getCellContent=function(t){return l.children(".ogx_grid_swiper_cell[data-x="+t.x+"][data-y="+t.y+"]").children(".ogx_grid_swiper_cell_content:first")[0]},this.getCurrentCell=function(){return O},this.renderCellContent=function(t){P([t])},this.setTopCell=function(t){this.setOffsetCell({x:0,y:-1},t)},this.setBottomCell=function(t){this.setOffsetCell({x:0,y:1},t)},this.setLeftCell=function(t){this.setOffsetCell({x:-1,y:0},t)},this.setRightCell=function(t){this.setOffsetCell({x:1,y:0},t)},this.setOffsetCell=function(t,e){var i={x:t.x+x.x,y:t.y+x.y};this.setMapCell(i,e)},this.getOffsetCell=function(t){var e={x:t.x+x.x,y:t.y+x.y};return this.getMapCell(e)},this.getOffsetCellContent=function(t){var e={x:t.x+x.x,y:t.y+x.y};return this.getCellContent(e)},this.swipeRight=function(){D(-c)},this.swipeLeft=function(){D(c)},this.swipeUp=function(){D(0,-d)},this.swipeDown=function(){D(0,d)},this.destroy=function(){},OGX.Data.merge(g,h),f.el=s=$(g.container),s.addClass("ogx_grid_swiper"),s.attr("data-ogx-id",b),c=s.outerWidth(),d=s.outerHeight(),W(),z(),F()},OGX.GridSwiper.NAME="OgxGridSwiper",OGX.GridSwiper.SWIPE_LEFT="GridSwiperSwipeLeft",OGX.GridSwiper.SWIPE_RIGHT="GridSwiperSwipeRight",OGX.GridSwiper.SWIPE_UP="GridSwiperSwipeUp",OGX.GridSwiper.SWIPE_DOWN="GridSwiperSwipeDown",void 0===OGX)var OGX=function(){};if(require("GroupedList","Uxi","Touch"),OGX.GroupedList=function(t){construct(this,"GroupedList");var i,r,s,o,a,e=this,l=t,n={group_by:"name",group_mode:null,group_param:null,group_order:null,sort:null,list:new OGX.List,display:null,key:null,swipe:!1,reorder:!1,display:!1,mode:OGX.DynamicList.SELECT_MODE_HIT},c={},d="static";function _(t){var e,i=new OGX.List;for(var n in t)e={title:l.group_mode?n:t[n][0][l.group_by],display:l.display,mode:l.mode,key:l.key,swipe:l.swipe,reorder:l.reorder,list:t[n],open:!0},i.push(e);return i}function u(t){t?"static"===d&&i.on(e.touch.down,".ogx_grouped_list_item",f):"static"===d&&i.off(e.touch.down,".ogx_grouped_list_item",f)}function f(){i.find(".ogx_grouped_list_selected_item").removeClass("ogx_grouped_list_selected_item"),$(this).addClass("ogx_grouped_list_selected_item");var t=l.list[Number($(this).data("id"))];i.trigger(OGX.GroupedList.SELECT,t)}function g(t){if("object"==typeof c[t].object){switch(c[t].object._NAME_){case OGX.DynamicList.NAME:c[t].object.el.off(OGX.DynamicList.SELECT),c[t].object.el.off(OGX.DynamicList.UNSELECT);break;case OGX.Tags.NAME:c[t].object.el.off(OGX.Tags.TAG_ADDED+" "+OGX.Tags.TAG_REMOVED);break;case OGX.Switch.NAME:c[t].object.el.off(OGX.Switch.TOGGLE);break;case OGX.SwitchMulti.NAME:c[t].object.el.off(OGX.SwitchMulti.CHANGE);break;default:c[t].object.off("input")}l.list.removeFilter(t),delete c[t],o=l.list.filter(),a=!0,setTimeout(p,0)}else c[t].object.off("input");return!0}function h(t,e){for(var i=c[t].getSelection(),n=[],o=0;o<i.length;o++)n.push(i[o][e]);return n}function p(){if(l.list){var t=l.list;return a&&(t=o),s=t.group(l.group_by,l.group_mode,l.group_param),r.setData(_(s)),!0}return!1}this._NAME_=OGX.GroupedList.NAME,this.el=null,this.enable=function(){u(!0),r.enable()},this.disable=function(){u(!1),r.disable()},this.val=function(t){if(void 0===t)return l.list;t.hasOwnProperty("insert")||(t=new OGX.List(t));var e=l.list.getFilters();"{}"!==JSON.stringify(e)&&(a=!0,t.setFilters(e),o=t.filter()),l.list=t,setTimeout(p,0)},this.bind=function(t){return!c.hasOwnProperty(t.property)&&function(i){i.hasOwnProperty("mode")||(i.mode="eqjson");if("object"==typeof i.object)switch((c[i.property]=i).object._NAME_){case OGX.DynamicList.NAME:l.list.removeFilter(i.property);var n=h(i.property,i.remote_property);l.list.addFilter(i.property,i.mode,n),c[i.property].object.el.on(OGX.DynamicList.SELECT,function(t,e){return l.list.removeFilter(i.property),n=c[i.property].object.mode()===OGX.DynamicList.SELECT_MODE_SINGLE||c[i.property].object.mode()===OGX.DynamicList.SELECT_MODE_TOGGLE?c[i.property].object.getSelection()[0][__object.remote_property]:h(i.property,i.remote_property),l.list.addFilter(i.property,i.mode,n),o=l.list.filter(),a=!0,setTimeout(p,0),!1}),c[i.property].object.el.on(OGX.DynamicList.UNSELECT,function(t,e){return l.list.removeFilter(i.property),0<(n=c[i.property].object.mode()===OGX.DynamicList.SELECT_MODE_SINGLE||c[i.property].object.mode()===OGX.DynamicList.SELECT_MODE_TOGGLE?[]:h(i.property,i.remote_property)).length&&l.list.addFilter(i.property,i.mode,n),o=l.list.filter(),a=!0,setTimeout(p,0),!1});break;case OGX.Tags.NAME:l.list.removeFilter(i.property),l.list.addFilter(i.property,i.mode,i.object.getCurrentTags()),c[i.property].object.el.on(OGX.Tags.TAG_ADDED+" "+OGX.Tags.TAG_REMOVED,function(t,e){return l.list.removeFilter(i.property),l.list.addFilter(i.property,i.mode,c[i.property].object.getCurrentTags()),o=l.list.filter(),a=!0,setTimeout(p,0),!1});break;case OGX.Switch.NAME:l.list.removeFilter(i.property),l.list.addFilter(i.property,i.mode,i.object.val()),c[i.property].object.el.on(OGX.Switch.TOGGLE,function(t,e){return l.list.removeFilter(i.property),l.list.addFilter(i.property,i.mode,e),o=l.list.filter(),a=!0,setTimeout(p,0),!1});break;case OGX.SwitchMulti.NAME:l.list.removeFilter(i.property),l.list.addFilter(i.property,i.mode,i.object.val()),c[i.property].object.el.on(OGX.SwitchMulti.CHANGE,function(t,e){return l.list.removeFilter(i.property),l.list.addFilter(i.property,i.mode,e),o=l.list.filter(),a=!0,setTimeout(p,0),!1})}else if("string"==typeof i.object){if(0===$(i.object).length)return!1;i.object=$(i.object);var t=(c[i.property]=i).object.val();switch(c[i.property].hasOwnProperty("min_length")?(c[i.property].last_val=t).length>=c[i.property].min_length&&(l.list.removeFilter(i.property),l.list.addFilter(i.property,i.mode,t)):(l.list.removeFilter(i.property),l.list.addFilter(i.property,i.mode,t)),i.object.attr("type").toLowerCase()){case"text":case"number":case"email":case"password":case"tel":c[i.property].object.on("input",function(){return t=$(this).val(),l.list.removeFilter(i.property),c[i.property].hasOwnProperty("min_length")?t.length<c[i.property].min_length&&c[i.property].last_val.length>=c[i.property].min_length||t.length>=c[i.property].min_length?(t.length>=c[i.property].min_length&&l.list.addFilter(i.property,i.mode,t),o=l.list.filter(),a=!0,c[i.property].last_val=t,setTimeout(p,0)):c[i.property].last_val=t:(t.length&&l.list.addFilter(i.property,i.mode,t),o=l.list.filter(),a=!0,setTimeout(p,0)),!1});break;case"range":var e;c[i.property].object.on("input",function(){return e=Number($(this).attr("min")),l.list.removeFilter(i.property),l.list.addFilter(i.property,i.mode,[e,$(this).val()]),o=l.list.filter(),a=!0,setTimeout(p,0),!1})}}return!0}(t)},this.unbind=function(t){return!!c.hasOwnProperty(t)&&g(t)},this.filter=function(){return o=l.list.filter(),a=!0,setTimeout(p,0),!0},this.unfilter=function(){return a=!1,setTimeout(p,0),!0},this.addFilter=function(t,e,i){return l.list.addFilter(t,e,i)},this.removeFilter=function(t,e,i){return l.list.removeFilter(t,e,i)},this.resetFilters=function(){return l.list.resetFilters()},this.getFilters=function(){return l.list.getFilters()},this.removeGroup=function(t){},this.addItem=function(t){l.list.push(t);var e=new OGX.List(t),i=e.group(l.group_by,l.group_mode,l.group_param);for(var n in i){if(s.hasOwnProperty(n))this.addToGroup(n,e[0]);else{var o=_(i)[0];r.addItem(o),s[n]=[e[0]]}return}},this.removeItem=function(t,e){for(var i in s)if(this.getGroupList(i).val().find(t,e,1))return this.removeFromGroup(i,t,e),!0;return!1},this.replaceItem=function(t,e,i){var n,o;for(var r in s)if(o=(n=this.getGroupList(r)).val().find(t,e,1))return o[l.group_by]!==i[l.group_by]?(this.removeItem(o),this.addItem(i)):n.replace(t,e,i),!0;return!1},this.updateItem=function(t,e,i,n){var o,r;for(var a in s)if(r=(o=this.getGroupList(a)).val().find(t,e,1))return r[l.group_by]!==__item[l.group_by]?(this.removeItem(r),this.addItem(__item)):o.update(t,e,i,n,1),!0;return!1},this.addToGroup=function(t,e){l.list.push(e),s[t].push(e),r.getList(t).insert(e),setTimeout(function(){r.updateItemHeight(t)},0)},this.removeFromGroup=function(t,e,i){l.list.findDelete(e,i,1);for(var n=0;n<s[t].length;n++)if(s[t][n][e]===i){s[t].splice(n,1);break}r.getList(t).findDelete(e,i,1),s[t].length?setTimeout(function(){r.updateItemHeight(t)},0):(r.removeItem(t),delete s[t])},this.updateGroupItem=function(t,e,i,n){this.getGroupList(t).update(e,i,n,!1,1)},this.replaceGroupItem=function(t,e,i,n){this.getGroupList(t).replace(e,i,n)},this.getGroupList=function(t){return r.getList(t)},this.render=function(){return setTimeout(p,0),!0},this.refresh=function(){var t=i.find(".ogx_grouped_list_selected_item:first");if(0<t.length){var e=t.data("id");t.html(OGX.Templater.templatize(l.list[e],l.template))}},this.getNested=function(){return r||!1},this.destroy=function(){!function(){for(var t in c)g(t)}(),u(!1),r.destroy()},function(){OGX.Data.merge(l,n),0<l.list.length&&!l.list.hasOwnProperty("insert")&&(l.list=new OGX.List(l.list)),e.el=i=$(l.container),i.addClass("ogx_grouped_list"),l.display&&l.display.hasOwnProperty("css")&&("object"!=typeof l.display.css?l.display.css+=" ogx_grouped_list_item":l.display.hasOwnProperty("add")?l.display.add="ogx_grouped_list_item "+l.display.add:l.display.add="ogx_grouped_list_item");var t={container:l.container,display:l.display,order:l.group_order};r=this.create("NestedList",t),setTimeout(p,10)}()},OGX.GroupedList.NAME="OgxGroupedList",OGX.GroupedList.SELECT="GroupedListSelect",void 0===OGX)var OGX=function(){};if(require("Iceberg","Uxi","Touch","Placeholder"),OGX.Iceberg=function(t){construct(this,"Iceberg");var e,i=this,n={left:!1,main:!1,right:!1,min:50,drag:!0,flatten:!1},o=t,r=!1,a="normal",s="main",l=0,c={left:null,main:null,right:null},d=0,_=0;function u(){r.hasClass("ogx_iceberg_anim")||(r.off("transitionend"),l=h(r)[0])}function f(t){if(o.drag){var e=l+t.distX*t.dirX;e<=_&&d<=e&&r.css({transform:"translate3d("+e+"px, 0, 0)"})}}function g(t){var e;if(t.swipe){var i;switch(t.swipe=!1,s){case"main":-1===t.dirX&&o.right?(e=-c.right.outerWidth(),i="right",t.swipe=!0):1===t.dirX&&o.left&&(e=c.left.outerWidth(),i="left",t.swipe=!0);break;case"left":-1===t.dirX&&(e=0,i="main",t.swipe=!0);break;case"right":1===t.dirX&&(e=0,i="main",t.swipe=!0)}t.swipe&&(r.addClass("ogx_iceberg_anim"),r.on("transitionend",function(){r.off("transitionend"),r.removeClass("ogx_iceberg_anim"),l=h(r)[0],s=i}),r.css({transform:"translate3d("+e+"px, 0, 0)"}))}else{switch(s){case"main":tx=0;break;case"left":tx=c.left.outerWidth();break;case"right":tx=-c.right.outerWidth()}r.addClass("ogx_iceberg_anim"),r.on("transitionend",function(){r.off("transitionend"),r.removeClass("ogx_iceberg_anim"),l=h(r)[0]}),r.css({transform:"translate3d("+tx+"px, 0, 0)"})}}function h(t){var e=t[0].style.transform;if(e=e.match(/translate3d\(([0-9px%,\.\- ]+)\)/)){e=e[1].split(",");for(var i=0;i<e.length;i++)e[i]=Number(e[i].split("px")[0]);return e}return[0,0,0]}this._NAME_=OGX.Iceberg.NAME,this.el=null,this.show=function(t,e){if("normal"===a){for(var i=new OGX.List,n=0;n<this.nodes.length;n++)i.push(this.nodes[n]);var o=i.findIndex("id",e);this.showPanel(o.index)}},this.enable=function(){"flattened"!==a&&this.touch.swipe.enable()},this.disable=function(){this.touch.swipe.disable()},this.showPanel=function(t){},this.resize=function(){o.left&&(_=c.left.outerWidth()),o.right&&(d=c.right.outerWidth()),o.flatten&&("flattened"!==a&&this.el.outerWidth()>=o.flatten?(a="flattened",l=h(r)[0],r.addClass("ogx_iceberg_views_flattened").css("transform","translate3d(0px, 0px, 0px)"),r.children(".ogx_iceberg_view").addClass("ogx_iceberg_view_flattened"),this.disable()):"flattened"===a&&this.el.width()<o.flatten&&(a="normal",r.children(".ogx_iceberg_view").removeClass("ogx_iceberg_view_flattened"),r.removeClass("ogx_iceberg_views_flattened").css("transform","translate3d("+l+"px, 0px, 0px)"),this.enable()))},OGX.Data.merge(o,n),width=Math.round($(o.container).innerWidth()),height=$(o.container).innerHeight(),i.el=$(o.container),i.el.addClass("ogx_iceberg"),i.el.attr("data-ogx-id",i.id),e='<div class="ogx_iceberg_views ogx_hw" data-ogx-id="'+i.id+'">',o.left&&(e+='<div class="ogx_iceberg_view_left ogx_view ogx_iceberg_view" data-ogx-panel-id="0" style="width:'+(isNaN(o.left)?o.left:o.left+"px")+';"><div></div></div>'),e+='<div class="ogx_iceberg_view_main ogx_view ogx_iceberg_view" data-ogx-panel-id="1"><div></div></div>',o.right&&(e+='<div class="ogx_iceberg_view_right ogx_view ogx_iceberg_view" data-ogx-panel-id="2" style="width:'+(isNaN(o.right)?o.right:o.right+"px")+';"><div></div></div>'),i.el.html(e),r=i.el.children(".ogx_iceberg_views:first"),o.left&&(c.left=r.children(".ogx_iceberg_view_left:first")),c.main=r.children(".ogx_iceberg_view_main:first"),o.right&&(c.right=r.children(".ogx_iceberg_view_right:first")),o.left&&(_=c.left.outerWidth()),o.right&&(d=c.right.outerWidth()),function(){for(var t=[],e=0;e<o["node:OML"].length;e++)t.push('.ogx_iceberg[data-ogx-id="'+i.id+'"] .ogx_iceberg_views .ogx_iceberg_view[data-ogx-panel-id="'+e+'"] div');i.placeholders(o,t)}(),i.touch.swipe.set({x:!0,y:!1,min_x:o.min,cb_down:u,cb_swipe:f,cb_up:g}),i.resize()},void 0===OGX)var OGX={};if(OGX.Media=function(){"use strict";var o=!1,r={},a=0;function i(t,e,i){var n,o,r,a,s=$(t).parent().innerWidth(),l=$(t).parent().innerHeight(),c=(o={width:s,height:l},r=(n={width:e,height:i}).width/n.height,a={},o.width/o.height<r?(a.width=o.width,a.height=Math.round(n.height*(o.width/n.width))):(a.width=Math.round(n.width*(o.height/n.height)),a.height=o.height),a),d=(s-c.width)/2,_=(l-c.height)/2;$(t).css("left",d+"px"),$(t).css("top",_+"px"),$(t).prop("width",c.width),$(t).prop("height",c.height)}function s(t){var e=!1;void 0!==t&&t?r.hasOwnProperty(t)&&(e=$(r[t].element)):e=config.container,e&&(e.find(".ogx_video").each(function(t,e){var i,n,o,r,a,s,l,c;i=e,n=parseInt($(e).data("width"),10),o=parseInt($(e).data("height"),10),r=n/o,a=$(i).parent().innerWidth(),s=$(i).parent().innerHeight(),l=a,(c=Math.ceil(l/r))<s&&(l=(c=s)*r),$(i).prop("width",l),$(i).prop("height",c)}),e.find(".ogx_video_resp").each(function(t,e){var i,n,o,r,a,s,l,c;i=e,n=parseInt($(e).data("width"),10),o=parseInt($(e).data("height"),10),r=n/o,a=$(i).parent().innerWidth(),s=$(i).parent().innerHeight(),l=a,(c=Math.ceil(l/r))<s&&(l=(c=s)*r),$(i).prop("width",l),$(i).prop("height",c)}),e.find(".ogx_video_poster").each(function(t,e){var i,n,o,r,a,s,l,c,d,_;i=e,n=parseInt($(e).data("width"),10),o=parseInt($(e).data("height"),10),r=n/o,a=$(i).parent().innerWidth(),s=$(i).parent().innerHeight(),l=a,c=Math.ceil(l/r),_=d=0,c<s&&(c=s,l=Math.ceil(c*r)),a<l?d=(l-a)/2*-1:l<a&&(d=(a-l)/2*-1),s<c?_=(c-s)/2*-1:c<s&&(_=(s-c)/2*-1),$(i).css("left",d+"px"),$(i).css("top",_+"px"),$(i).prop("width",l),$(i).prop("height",c)}),e.find(".ogx_image_contain").each(function(t,e){i(e,parseInt($(e).data("width"),10),parseInt($(e).data("height"),10))}),e.find(".ogx_image_cover").each(function(t,e){var i,n,o,r,a,s;i=e,n=parseInt($(e).data("width"),10),o=parseInt($(e).data("height"),10),r=$(i).parent().innerWidth(),a=r/(n/o),0<(s=($(i).parent().innerHeight()-a)/2)&&(s=0),$(i).parent().css("overflow","hidden"),$(i).prop("width",r),$(i).prop("height",a),$(i).css("top",s+"px")}),e.find(".ogx_image_fit").each(function(t,e){var i,n,o,r,a,s,l,c;i=e,n=parseInt($(e).data("width"),10),o=parseInt($(e).data("height"),10),r=n/o,a=$(i).parent().innerWidth(),s=a,l=Math.ceil(s/r),c=0,a<s?c=(s-a)/2*-1:s<a&&(c=(a-s)/2*-1),$(i).css("left",c+"px"),$(i).prop("width",s),$(i).prop("height",l)}),e.find(".ogx_image_scale").each(function(t,e){var i,n,o,r,a,s;i=e,n=parseInt($(e).data("width"),10),o=parseInt($(e).data("height"),10),r=n/o,a=$(i).parent().innerWidth(),s=Math.ceil(a/r),$(i).prop("width",a),$(i).prop("height",s)}),e.find(".ogx_image_resp").each(function(t,e){!function(t,e,i){var n=e/i,o=$(t).parent().innerWidth();e<o&&(o=e);var r=Math.ceil(o/n);$(t).prop("width",o),$(t).prop("height",r)}(e,parseInt($(e).data("width"),10),parseInt($(e).data("height"),10))}))}function l(t){t?$(window).on("resize",e):$(window).off("resize",e)}function e(){s()}this.resize=function(t){s(t)},this.bind=function(t,e){return!r.hasOwnProperty(t)&&(r[t]={observer:null,element:e},r[t].observer=(i=e,(n=new(window.MutationObserver||window.WebKitMutationObserver)(function(t,e){t.forEach(function(t){var e;(e=$(i)).find(".ogx_video, .ogx_video_resp, .ogx_video_poster").each(function(t,e){$(e).attr("data-width",$(e).attr("width")),$(e).attr("data-height",$(e).attr("height")),$(e).parent().css("overflow","hidden")}),e.find(".ogx_image_cover, .ogx_image_contain, .ogx_image_fit, .ogx_image_scale, .ogx_image_resp").each(function(t,e){$(e).css("position","relative"),$(e).attr("data-width",$(e).attr("width")),$(e).attr("data-height",$(e).attr("height"))}),setTimeout(s,200)}),s(i)})).observe(document.querySelector(i),{childList:!0,subtree:!0}),n),a++,o||l(o=!0),!0);var i,n},this.unbind=function(t){return!(!r.hasOwnProperty(t)||!r[t].observer)&&(r[t].observer.disconnect(),delete r[t],!--a&&o&&l(!1),!0)}},OGX.Media=new OGX.Media,void 0===OGX)var OGX=function(){};if(require("NestedList","Uxi"),OGX.NestedList=function(t){construct(this,"NestedList");var s,e=this,n={scope:["public"],enabled:!0,template:'<div class="ogx_nested_list_item {{$dsp}}" data-id="{{$nest_id}}"><div class="ogx_nested_list_item_head {{$css}}"><span class="ogx_nested_list_item_title">{{$title}}</span></div><div class="ogx_nested_list_item_body"><div class="ogx_nested_list_item_content">{{$body}}</div></div></div>',list:new OGX.List,item_default:!1,map:{title:"title",body:"body"},order:!1},l={title:"",body:"",scope:[],open:!0,key:null,view:null,list:null,_type:"",_height:0,_nest_id:0,_hidden:!1,_list:null},c=t,r=(new Date).getTime()+""+Math.round(1e3*Math.random()),a=!1,o=0,d=0,_=1,u={y:0,h:0,way:1};function f(t){switch(t._type){case"list":t._list.destroy(),t._list=null;break;case"view":app.removeFromStage(t.view.container),t.view=null}}function g(t){t?s.on("click",".ogx_nested_list_item_head",h):s.off("click",".ogx_nested_list_item_head",h)}function h(t){if(!a){a=!0;var e=$(this),i=e.parent(0).data("id"),n=!1;e.hasClass("ogx_nested_list_item_head_closed")?(u.way=1,e.addClass("ogx_nested_list_item_head_open").removeClass("ogx_nested_list_item_head_closed"),c.list.findUpdate("_nest_id",i,{open:!0},!1,1),n=!0):(u.way=0,e.removeClass("ogx_nested_list_item_head_open").addClass("ogx_nested_list_item_head_closed"),c.list.findUpdate("_nest_id",i,{open:!1},!1,1));var o=c.list.find("_nest_id",i,1);n?s.trigger(OGX.NestedList.OPEN,o):s.trigger(OGX.NestedList.CLOSE,o),setTimeout(m,0)}}function p(t){if(t.hasOwnProperty("scope"))for(var e=0;e<t.scope.length;e++)if(-1!==c.scope.indexOf(t.scope[e]))return!0;return!1}function m(){var t;!function(){var t=0;d=0,u.y=0;for(var e=u.h=0;e<c.list.length;e++)c.list[e].y=t,c.list[e]._hidden||(o||(o=s.children(".ogx_nested_list_item:eq("+e+")").children(".ogx_nested_list_item_head").outerHeight(!0)),d+=o,u.y=t,c.list[e].open&&(u.y+=c.list[e]._height,t+=c.list[e]._height,d+=c.list[e]._height),u.h=c.list[e]._height);d-=u.h}();for(var e=s.children(".ogx_nested_list_mask:first"),i=0;i<c.list.length;i++)(t=s.children('.ogx_nested_list_item[data-id="'+c.list[i]._nest_id+'"]')).removeClass("ogx_nested_list_item_noanim"),t.css("transform","translateY("+c.list[i].y+"px)");e.on("transitionend",function(){e.off("transitionend"),u.way||s.css("height",d+u.h),a=!1}),u.way&&s.css("height",d+u.h),setTimeout(function(){e.css({transform:"translateY("+u.y+"px)"})},0)}function y(t){var e,i,n={css:"",dsp:"ogx_nested_list_prep",nest_id:_};switch(n[c.map.title]=t[c.map.title],n[c.map.body]=t[c.map.body],t._nest_id=_,_++,t._hidden=!1,p(t)||(t._hidden=!0),t.open?n.css="ogx_nested_list_item_head_open":n.css="ogx_nested_list_item_head_closed",(i=t).hasOwnProperty("list")&&i.list?i._type="list":i.hasOwnProperty("view")&&i.view?i._type="view":i.hasOwnProperty("display")&&(i._type="display"),t._type){case"list":n[c.map.body]="";break;case"view":e=new OGX.Display(__data.view),__data.view.hasOwnProperty("data")?n[c.map.body]=e.html(__data.view.data):n[c.map.body]=e.html();break;case"display":e=new OGX.Display(t.display),n[c.map.body]=e.html(t.data)}return OGX.Templater.templatize(n,c.template)}function v(e,i,n){b(l,e);var o=e._hidden,t=y(e);switch(e._hidden=!1,void 0!==n&&n<c.list.length-1&&0<n?s.children(".ogx_nested_list_item:eq("+n+")").before(t):s.children(".ogx_nested_list_mask:first").before(t),e._type){case"view":e.view.container='.ogx_nested_list[data-ogx-nested-list="'+r+'"] .ogx_nested_list_item[data-id="'+e._nest_id+'"] .ogx_nested_list_item_body:first .ogx_nested_list_item_content:first',app.addToStage(e.view);break;case"list":e.container='.ogx_nested_list[data-ogx-nested-list="'+r+'"] .ogx_nested_list_item[data-id="'+e._nest_id+'"] .ogx_nested_list_item_body:first .ogx_nested_list_item_content:first',e._list=new OGX.DynamicList(e)}setTimeout(function(){x(e),i&&(void 0!==n?c.list.insert(e,n):c.list.push(e));var t=$('.ogx_nested_list[data-ogx-nested-list="'+r+'"] .ogx_nested_list_item[data-id="'+e._nest_id+'"]');e._hidden=o,e._hidden&&t.addClass("ogx_nested_list_item_hidden"),t.removeClass("ogx_nested_list_prep"),m()},0)}function x(t){var e=$('.ogx_nested_list[data-ogx-nested-list="'+r+'"] .ogx_nested_list_item[data-id="'+t._nest_id+'"] .ogx_nested_list_item_body:first .ogx_nested_list_item_content:first').outerHeight(!0);t._height=e}function O(){s.empty();s.html('<div class="ogx_nested_list_mask"></div>');for(var t=0;t<c.list.length;t++)v(c.list[t],!1);setTimeout(m,0)}function b(t,e,i){for(var n in void 0===i&&(i=!1),t)e.hasOwnProperty(n)?i&&(e[n]=t[n]):e[n]=t[n]}function w(){c.list.hasOwnProperty("insert")||(c.list=new OGX.List(c.list));for(var t=0;t<c.list.length;t++)c.item_default?b(c.item_default,c.list[t]):b(l,c.list[t]);if(c.order){var e,i=[],n=[];for(t=0;t<c.list.length;t++)-1!==(e=c.order.indexOf(c.list[t][c.map.title]))?i[e]=c.list[t]:n.push(c.list[t]);for(t=0;t<i.length;t++)i[t]||(i.splice(t,1),t--);c.list=new OGX.List(i.concat(n))}}this._NAME_=OGX.NestedList.NAME,this.el=null,this.enable=function(){g(!0)},this.disable=function(){g(!1)},this.setScope=function(t){c.scope=t,function(){for(var t,e=0;e<c.list.length;e++)(t=s.children('.ogx_nested_list_item[data-id="'+c.list[e]._nest_id+'"]')).addClass("ogx_nested_list_item_noanim"),p(c.list[e])?(c.list[e]._hidden=!1,t.removeClass("ogx_nested_list_item_hidden")):(c.list[e]._hidden=!0,t.addClass("ogx_nested_list_item_hidden"));setTimeout(m,0)}()},this.getScope=function(){return c.scope},this.setData=function(t){c.list=t,w(),setTimeout(O,0)},this.getData=function(){return c.list},this.addItems=function(t){for(var e=0;e<t.length;e++)v(t,!0)},this.addItem=function(t){if(c.order){var e=c.order.indexOf(t[c.map.title]);if(-1!==e)return void v(t,!0,e)}v(t,!0)},this.addItemAt=function(t,e){v(t,!0,e)},this.replaceItem=function(t,e){b(l,e);var n=c.list.find(c.map.title,t,1);if(!n)return!1;e._nest_id=n._nest_id;var o=s.children('.ogx_nested_list[data-id="'+_nest_id+'"]');switch(n._type){case"list":n._list.destroy();break;case"view":app.removeFromStage(n.view.container)}var r='.ogx_nested_list[data-id="'+_nest_id+'"] .ogx_nested_list_item_body:first .ogx_nested_list_item_content:first';o.children(".ogx_nested_list_item_head:first").children(".ogx_nested_list_item_title:first").html(e[c.map.title]);var a=y(e);switch(o.replaceWith(a),e._type){case"view":e.view.container=r,app.addToStage(e.view);break;case"list":e._list=this.create("DynamicList",{container:r,display:e.display,key:e.key,swipe:e.swipe,reorder:e.reorder,mode:e.list_mode,list:e.list[i].list})}c.list.findReplace(c.map.title,e[c.map.title],n,1),setTimeout(function(){x(e),m()},0)},this.removeItem=function(t){var e=function(t){switch(t._type){case"list":t._list.destroy();break;case"view":app.removeFromStage(t.view.container)}return s.children('.ogx_nested_list_item[data-id="'+t._nest_id+'"]').remove(),c.list.findDelete("_nest_id",t._nest_id,1)}(c.list.find(c.map.title,t,1));return setTimeout(m,0),e},this.updateItemHeight=function(t){var e=c.list.find(c.map.title,t,1);setTimeout(function(){x(e),m()},0)},this.getView=function(t){var e=views.find(c.map.title,t,1);if(e){var i=app.getCurrentStage();return app.getView(e.view.container,i)}},this.getList=function(t){var e=c.list.find(c.map.title,t,1);return!!e&&e._list},this.resetListSelection=function(){if(lists.length)for(var t=0;t<lists.length;t++)lists[t].resetSelection()},this.destroy=function(){!function(){for(var t=0;t<c.list.length;t++)f(c.list[t])}()},b(n,c),w(),c.template=c.template.replace("{{$title}}","{{$"+c.map.title+"}}"),c.template=c.template.replace("{{$body}}","{{$"+c.map.body+"}}"),e.el=s=$(c.container),s.addClass("ogx_nested_list"),s.attr("data-ogx-nested-list",r),setTimeout(O,0)},OGX.NestedList.NAME="OgxNestedList",OGX.NestedList.OPEN="NestedListOpen",OGX.NestedList.CLOSE="NestedListClose",OGX.NestedList.READY="NestedListReady",void 0===OGX)var OGX={};if(OGX.Net={},OGX.Net.loadSounds=function(t,e,i,n){var o=0,r=0,a={};if(Array.isArray(e))r=e.length;else if("object"==typeof e)for(var s in ___files)r++;else e=[e],r=1;if(r)for(var s in e)a[e[s]]=new Audio,a[e[s]].oncanplaythrough=function(){r===++o&&(void 0!==i?i(a,n):$(document).trigger(OGX.Net.SOUNDS_LOADED,a))},a[e[s]].src=t+e[s],a[e[s]].load();else void 0!==i&&i(!1)},OGX.Net.loadJSON=function(t,e,i,n){var o=0,r=0,a={};if(Array.isArray(e))r=e.length;else if("object"==typeof e)for(var s in ___files)r++;else e=[e],r=1;if(r)for(var s in e)l(t,e[s]);else void 0!==i&&i(!1);function l(t,e){$.getJSON(t+e,function(t){a[e]=t,++o===r&&(void 0!==i?i(a,n):$(document).trigger(OGX.Net.JSON_LOADED,a))})}},OGX.Net.loadFonts=function(t,e,i){if(t.length){for(var n='<div class="ogx_font_loader">',o=0;o<t.length;o++)n+='<span class="'+t[o]+'"></span>';n+="</div>",$("body").append(n),void 0!==e?e(i):$(document).trigger(OGX.Net.FONTS_LOADED,t)}else void 0!==e&&e(!1)},OGX.Net.loadImages=function(t,e,i,n){var o,r=0,a=0,s=[];if(Array.isArray(e))a=e.length;else if("object"==typeof e)for(var l in ___files)a++;else e=[e],a=1;if(a)for(var l in e)(o=new Image).onload=function(){++r===e.length&&(void 0!==i?i(s,n):$(document).trigger(OGX.Net.IMAGES_LOADED,s))},o.src=t+e[l],s.push(o);else void 0!==i&&i(!1)},OGX.Net.SOUNDS_LOADED="Soundsloaded",OGX.Net.JSON_LOADED="Jsonloaded",OGX.Net.FONTS_LOADED="Fontsloaded",OGX.Net.IMAGES_LOADED="Imagesloaded",void 0===OGX)var OGX={};if(OGX.Overlay=function(){"use strict";var s=this,l=!1,c={anim:OGX.Overlay.ANIM_FADE,css:"",index:!1,close_on_click:!1},d=!1,e="mousedown";function _(t){l&&(t?l.on(e,i):l.off(e,i))}function i(){_(!1),s.removeOverlay()}this.hasOverlay=function(){return!!l},this.addOverlay=function(t){if(void 0===t&&(t={}),OGX.Data.merge(t,c,!1),d=t,!l){var e,i=s.el;i=d.hasOwnProperty("container")?$(d.container):this.el,d.zindex?e=d.zindex:(a=0,i.children().each(function(t,e){r=Number($(e).css("z-index")),a<r&&(a=r)}),e=a+1);var n="z-index:"+e+";",o='<div class="ogx_overlay '+d.css+'" style="'+n+'"></div>';if(i.prepend(o),(l=i.children(".ogx_overlay:first")).off("transitionend"),d.anim)switch(d.anim){case OGX.Overlay.ANIM_FADE:setTimeout(function(){l.removeClass("ogx_overlay_fade_out").addClass("ogx_overlay_fade_in")},50)}else l.css("opacity",1)}var r,a;t.close_on_click&&_(!0)},this.removeOverlay=function(t){if(_(!1),void 0===t&&(t=!1,d&&d.anim&&(t=d.anim)),l)if(t)switch(t){case OGX.Overlay.ANIM_FADE:l.removeClass("ogx_overlay_fade_in").addClass("ogx_overlay_fade_out"),0<l.css("opacity")?l.on("transitionend",function(){l&&(l.off("transitionend"),l.remove(),l=null)}):l&&(l.removeClass("ogx_overlay_fade_in").removeClass("ogx_overlay_fade_out"),l.off("transitionend"),l.remove(),l=null)}else l.remove(),l=!1}},OGX.Overlay.ANIM_FADE="OverlayAnimFade",OGX.Overlay.REMOVE="OverlayRemove",OGX.Placeholder=function(){},OGX.Placeholder.prototype.placeholders=function(t,e){if(void 0!==t&&void 0!==e)for(var i=0;i<e.length;i++)t["node:OML"][i]=OGX.OML.replaceNodeName(t["node:OML"][i],e[i])},void 0===OGX)var OGX={};if(require("Point","Uxi"),OGX.Point=function(t){construct(this,"Point");var i=this,n=t;this.points=[],this.point=null,this.resize=function(){var t=function(){for(var t=i.el.width(),e=0;e<i.points.length;e++)if(t>=i.points[e].min&&t<=i.points[e].max)return{id:e,oml:i.points[e].oml};return!1}();t&&t.id!==this.point&&(this.point=t.id,function(){for(var t in n)-1!==t.indexOf(":")&&delete n[t];n["break:Point"]=JSON.parse(JSON.stringify(i.points[i.point].oml)),i.nodes.length&&(i.clear(),OGX.OML.render(i,n["break:Point"],{},{}))}())},i.el=$(n.container),function(){var t;for(var e in n["break:Point"])-1!==e.indexOf(":")&&(t=e.split(":"),i.points.push({min:parseInt(t[0],10),max:parseInt(t[1],10),oml:JSON.parse(JSON.stringify(n["break:Point"][e]))}))}(),i.resize()},require("Popup","Uxi","Touch","Resize","Overlay"),OGX.Popup=function(t){construct(this,"Popup");var s=this,e={name:null,container:!1,anim:!1,width:"80%",height:"80%",top:"center",left:"center",html:!1,template:!1,title:!1,css:"",icon:!1,icons:!1,view:!1,drag:!1,scroll:!1,resize:!1,center:!0,tabs:!1,views:!1,data:{},buttons:[],buttons_enabled:!0,style:OGX.Popup.STYLE_HEAD,anim:OGX.Popup.ANIM_FADE,overlay:!1,listen_overlay:!1,zindex:!1,chromeos:!1},l=t,c=!1;function i(){l.width=c.css("width"),l.height=c.css("height"),s.resizeNodes()}function n(){s.blurNodes(),s.front()}function o(){s.focusNodes()}function r(){s.front()}function d(){var i,n=0;return c.parent().children(".ogx_popup, .ogx_window").each(function(t,e){i=Number($(e).css("z-index")),n<i&&(n=i)}),n+1}function _(){var t=c.parent(),e=t.width(),i=t.height(),n=l.width,o=l.height;return"string"==typeof n&&-1!==n.indexOf("%")&&(n=Number(n.split("%")[0]),n=Math.round(n*e/100)),"string"==typeof o&&-1!==o.indexOf("%")&&(o=Number(o.split("%")[0]),o=Math.round(o*i/100)),{x:Math.round(e/2-n/2),y:Math.round(i/2-o/2)}}function a(t,e,i,n){var o=!1;if(void 0!==e?e&&(o=!0):l.anim&&(e=l.anim),t&&s.front(),o)switch(e){case OGX.Popup.ANIM_FADE:t?(c.css("display","flex"),c.addClass("ogx_window_fade_in")):c.addClass("ogx_window_fade_out"),c.on("transitionend",function(){c.off("transitionend"),c.css("display","none"),t?c.removeClass("ogx_window_fade_in"):c.removeClass("ogx_window_fade_out"),void 0!==i&&i(n)})}else t?c.css({opacity:t,display:"flex"}):c.css("display","none"),void 0!==i&&i(n)}function u(t,e){void 0===e&&(e=!1),t?l.buttons_enabled&&!e||(l.buttons_enabled=!0,c.children(".ogx_popup_buttons:first").removeClass("ogx_popup_buttons_disabled"),c.on(s.touch.down,".ogx_popup_button",function(t){t.preventDefault(),t.stopImmediatePropagation();var e=$(this).index();"object"==typeof l.buttons[e]?l.buttons[e].hasOwnProperty("callback")&&l.buttons[e].callback&&(l.buttons[e].hasOwnProperty("params")?l.buttons[e].callback.apply(null,[l.buttons[e].params]):l.buttons[e].callback()):c.trigger(OGX.Popup.CLICK_BUTTON,{index:e,value:l.buttons[e]})})):l.buttons_enabled&&(l.buttons_enabled=!1,c.children(".ogx_popup_buttons:first").addClass("ogx_popup_buttons_disabled"),c.off(s.touch.down,".ogx_popup_button"))}function f(){var t;t=l.index?l.index:d();var e=_(),i="z-index:"+t+";",n=l.width,o=l.height;-1===String(n).indexOf("%")&&(n+="px"),-1===String(o).indexOf("%")&&(o+="px");var r='<div class="ogx_popup" style="width:'+n+"; height:"+o+"; transform:translate3d("+e.x+"px, "+e.y+"px, 0); "+i+'" data-ogx-id="'+l.id+'">';if(l.icon||l.title||l.icons||l.style===OGX.Popup.STYLE_HEAD||l.drag){if(r+='<div class="ogx_popup_head">',l.icon&&(r+='<div class="ogx_popup_icon" style="background-image:url(\''+l.icon+"')\"></div>"),l.title&&(r+='<div class="ogx_popup_title">'+l.title+"</div>"),l.icons){r+='<div class="ogx_popup_icons">';for(var a=0;a<l.icons.length;a++)"string"==typeof l.icons[a]?r+='<div class="ogx_popup_icons_icon" style="background-image:url(\''+l.icons[a]+"')\"></div>":r+='<div class="ogx_popup_icons_icon" style="background-image:url(\''+l.icons[a].icon+"')\"></div>";r+="</div>"}r+="</div>"}r+='<div class="ogx_popup_body ogx_view '+l.css+'">',l.html?r+=l.html:l.template&&(r+=OGX.Templater.templatize(l.data,OGX.Templater.getTemplate(l.template))),r+="</div>",l.buttons&&l.buttons.length&&(r+='<div class="ogx_popup_buttons">',r+=function(){for(var t="",e=0;e<l.buttons.length;e++)0<l.buttons.length&&("object"==typeof l.buttons[e]?t+='<span class="ogx_popup_button">'+l.buttons[e].label+"</span>":t+='<span class="ogx_popup_button">'+l.buttons[e]+"</span>");return t}(),r+="</div>"),r+="</div>",c.prepend(r),s.el=c=c.children('.ogx_popup[data-ogx-id="'+l.id+'"]')}this.anim=null,this.el=null,this.floating=!0,this._NAME_=OGX.Popup.NAME,this.enable=function(){l.buttons&&u(!1),this.touch.enable(),this.enableResize()},this.disable=function(){l.buttons&&u(!0),this.touch.disable(),this.disableResize()},this.show=function(t,e,i){a(1,t,e,i),this.focus(!0)},this.hide=function(t,e){a(0,t,e,__params),this.blur(!1)},this.center=function(){var t=_();s.el.css({transform:"translate3D("+t.x+"px, "+t.y+"px, 0px)"})},this.move=function(t,e){null===t&&(t=s.el.position().left),null===e&&(e=s.el.position().top),s.el.css({transform:"translate3D("+t+"px, "+e+"px, 0px)"})},this.front=function(){var t=d();this.el.css("z-index",t)},this.icon=function(t){if(void 0===t)return l.icon;l.icon=t,this.el.children(".ogx_popup_head:first").children(".ogx_popup_icon:first").css("background-image","url("+t+")")},this.resize=function(){this.resizeNodes()},this.buttons=function(t){if(void 0===t)return l.buttons;l.buttons=t;var e=initButtons();this.el.children(".ogx_popup_buttons:first").html(e)},this.destroy=function(){u(!1),tabber.destroy()},OGX.Data.merge(l,e,!1),c=$(l.container),s.anim=l.anim,s.centered=l.center,f(),l.drag&&s.touch.drag.set({x:!0,y:!0,cb_down:r,target:".ogx_popup_head:first"}),l.resize&&s.setResize({top:!1,cb_resize:i,cb_down:n,cb_up:o}),OGX.OML.replaceDefaults(l,['.ogx_popup[data-ogx-id="'+l.id+'"] .ogx_popup_body']),l.overlay&&s.addOverlay({zindex:1e3})},OGX.Popup.NAME="popup",OGX.Popup.ANIM_FADE="PopupAnimFade",void 0===OGX)var OGX={};if(OGX.Resize=function(t){"use strict";var o,r,i,n,a,s,l,c,d,_,u=this,f=t,e={enabled:!0,top:!0,left:!0,right:!0,bottom:!0,min_width:100,min_height:100,max_width:0,max_height:0,border:10,cb_up:!1,cb_down:!1,cb_resize:!1},g=!1,h="mousedown",p="mouseup",m="mousemove",y=(f=!1,!1),v=!1;function x(t){f&&(t?u.el.on(h,O):u.el.off(h,O))}function O(t){t.stopImmediatePropagation();var e=T(t);i=e.pageX,n=e.pageY,o=u.el.position().left,r=u.el.position().top,_=d=c=l=s=a=0,f.top&&n<r+f.border&&(c=-1,_=!0),f.bottom&&n>r+u.el.height()-f.border&&(_=!0),f.left&&i<o+f.border&&(l=-1,d=!0),f.right&&i>o+u.el.width()-f.border&&(d=!0),y=-1!==window.getComputedStyle(u.el[0],"width"),v=-1!==window.getComputedStyle(u.el[0],"height"),(d||_)&&(t.preventDefault(),u.hasOwnProperty("dragable")&&u.dragable&&u.touch.drag.disable(),b(!0),G(!0),f.cb_down&&f.cb_down())}function b(t){t?g||(g=setInterval(w,5)):g&&(clearInterval(g),g=!1)}function w(){var t,e,i=u.el.width(),n=u.el.height();t=l&&d?o+a*l:o,e=c&&_?r+s*c:r,(l||c)&&(u.el.css({transform:"translate3D("+t+"px, "+e+"px, 0px)"}),l&&(o+=a,a*=-1),c&&(r+=s,s*=-1)),d&&i+a>f.min_width&&(y?u.el.css("width",100*(i+a)/u.el.parent().width()+"%"):u.el.width(i+a)),_&&n+s>f.min_height&&(v?u.el.css("height",100*(n+s)/u.el.parent().height()+"%"):u.el.height(n+s)),(a||s)&&(f.cb_resize?f.cb_resize():u.el.trigger(OGX.Resize.RESIZING)),s=a=0}function G(t){t?($("body").on(m,X),$("body").on(p,E)):($("body").off(m,X),$("body").off(p,E))}function X(t){t.preventDefault(),t.stopImmediatePropagation(),t=T(t),a=t.pageX-i,s=t.pageY-n,i=t.pageX,n=t.pageY}function E(t){b(!1),G(!1),t=T(t),a=t.pageX-i,s=t.pageY-n,f.cb_up&&f.cb_up(),u.hasOwnProperty("dragable")&&u.dragable&&(x(!1),u.touch.drag.enable(),setTimeout(function(){x(!0)},0))}function T(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}this.resizable=!0,this.setResize=function(t){OGX.Data.merge(t,e,!1),f=t},this.enableResize=function(){x(!0)},this.disableResize=function(){x(!1)},OGX.Data.merge(f,e,!1),void 0===window.ontouchstart||f.chromeos||(h="touchstart",m="touchmove",p="touchend")},OGX.Resize.RESIZING="resizeResizing",void 0===OGX)var OGX=function(){};if(require("Roulette","Uxi","Touch"),OGX.Roulette=function(t){construct(this,"Roulette");var r,c,a,d,i,_,e,s,n=this,u=t,o={force_coef:10,time_coef:.1,min_force_pitch:2,value:null,name:!1,display:!1,key:"value",mode:OGX.Roulette.MODE_REWIND,list:new OGX.List},l={template:!1,html:'<span class="ogx_roulette_block_label">{{$label}}</span>',css:!1},f="object",g=0,h=0;function p(t){return h+t>u.list.length-1?u.list[0]:h+t<0?u.list[u.list.length-1]:u.list[h+t]}function m(t){i=t.y,x(!0)}function y(t){var e;e=t.dirY!==_?0:t.pt1.y-i,i=t.pt1.y,_=t.dirY,c.css({transition:"none",transform:"translate3D(0px, "+(G(c)+e)+"px, 0px)"})}function v(t){x(!1),trans=G(c);var e=Math.round(trans/d)*d,i=Math.round(e/d%u.list.length);if(i=i<=0?Math.abs(i):u.list.length-i,h!==i){switch(h=i,f){case"string":u.value=u.list[h];break;case"object":u.value=u.list[h][u.key]}n.el.children('input[name="'+u.name+'"]').val(u.value),n.el.children('input[name="'+u.name+'"]').trigger("change"),n.el.trigger(OGX.Roulette.CHANGE,u.value)}c.css({transition:"all 0.2s ease-out",transform:"translate3D(0px, "+e+"px, 0px)"})}function x(t){t?e=setInterval(O,10):clearInterval(e)}function O(){var t,e,i;(t=Math.floor((c.position().top+d*_)/(d*u.list.length)*-1))!==g&&(0===c.children('.ogx_roulette_stripe[data-id="'+t+'"]').length&&((e=s.clone()).css("top",t*(d*u.list.length)+"px"),e.attr("data-id",t),c.append(e)),c.children(".ogx_roulette_stripe").each(function(t,e){i=c.position().top+$(e).position().top,(Math.ceil(i+d*u.list.length)<-d||d<i)&&$(e).remove()}),g=t)}function b(){x(!1),c.off("transitionend",b)}function w(){for(var t="",e='<div class="ogx_roulette_stripes">',i=0;i<2;i++){e+='<div class="ogx_roulette_stripe" style="top:'+i*(u.list.length*d)+'px;" data-id="'+i+'">';for(var n=0;n<u.list.length;n++){switch(f){case"string":t=OGX.Templater.templatize({label:u.list[n]},u.display.html());break;case"object":t=u.display.html(u.list[n])}e+='<div class="ogx_roulette_block '+u.display.css(u.list[n])+'" style="width:'+a+"px; height:"+d+"px; line-height:"+d+'px;">'+t+"</div>"}e+="</div>"}if(e+="</div>",u.name)switch(f){case"string":e+='<input type="hidden" name="'+u.name+'" value="'+u.list[h]+'">';break;case"object":e+='<input type="hidden" name="'+u.name+'" value="'+u.list[h][u.key]+'">'}r.html(e),c=r.children(".ogx_roulette_stripes:first"),c.children(".ogx_roulette_stripe:first"),s=(s=c.children(".ogx_roulette_stripe:last")).detach();var o=h*d*-1;c.css({transition:"none",transform:"translate3D(0px, "+o+"px, 0px)"})}function G(t){var e=0;return"none"!==t.css("transform")&&(e=Number(t.css("transform").split(",")[5].split(")")[0])),e}function X(t){switch(f){case"string":return{index:u.list.indexOf(t)};case"object":return u.list.findIndex(u.key,t)}}this._NAME_=OGX.Roulette.NAME,this.el=null,this.enable=function(){r.removeClass("ogx_roulette_disabled"),this.touch.swipe.enable()},this.disable=function(){r.addClass("ogx_roulette_disabled"),this.touch.swipe.disable()},this.val=function(t,e){if(void 0!==t){var i=X(t).index;-1<i&&function(t,e){void 0===e&&(e=!0);c.off("transitionend",b),x(!1),_=-1;var i=G(c),n=Math.round(i/d)*d,o=i-n,r=Math.round(n/d%u.list.length);r=r<=0?Math.abs(r):u.list.length-r;var a=r-t;u.mode===OGX.Roulette.MODE_CLOSEST&&a>u.list.length/2&&(a=-1*(u.list.length-r+t));var s=i+a*d-o,l=20*Math.round(Math.abs(a*d)*u.time_coef);x(!0),c.on("transitionend",b),c.css({transition:"all "+l+"ms ease-out",transform:"translate3D(0px, "+s+"px, 0px)"}),h=t}(i)}else switch(f){case"string":return u.list[h];case"object":return u.list[h][u.key]}},this.loopval=function(t,e){var i=h,n=X(e).index;-1<n&&(h=n);var o=i-n,r=u.time_coef*Math.abs(o+t*u.list.length);x(!0),c.css({transition:"all "+r+"s ease-out",transform:"translate3D(0px, "+(G(c)+(o*d-u.list.length*d*t))+"px, 0px)"}),c.on("transitionend",b)},this.next=function(t){var e,i=p(1);switch(_=1,f){case"string":e=i;break;case"object":e=i[u.key]}this.val(e),u.name&&(this.el.children('input[name="'+u.name+'"]').val(e),this.el.children('input[name="'+u.name+'"]').trigger("change")),void 0!==t&&t&&this.el.trigger(OGX.Roulette.CHANGE,e)},this.prev=function(t){var e,i=p(-1);switch(f){case"string":e=i;break;case"object":e=i[u.key]}this.val(e),u.name&&(this.el.children('input[name="'+u.name+'"]').val(e),this.el.children('input[name="'+u.name+'"]').trigger("change")),void 0!==t&&t&&this.el.trigger(OGX.Roulette.CHANGE,e)},this.setData=function(t,e){t.hasOwnProperty("insert")||(t=new OGX.List(t)),u.value=e,u.list=t,h=void 0===e?0:X(e).index,setTimeout(w,0)},this.destroy=function(){x(!1)},OGX.Data.merge(u,o),0<u.list.length&&!u.list.hasOwnProperty("insert")&&(u.list=new OGX.List(u.list)),"string"==typeof u.list[0]&&(f="string"),1===u.list.length&&(u.list[1]=u.list[0]),u.display?u.display=new OGX.Display(u.display):u.display=new OGX.Display(l),(r=n.el=$(u.container)).addClass("ogx_roulette"),a=r.width(),d=r.height(),h=X(u.value).index,u.list.length&&w(),n.touch.swipe.set({x:!1,y:!0,cb_down:m,cb_swipe:y,cb_up:v})},OGX.Roulette.NAME="OgxRoulette",OGX.Roulette.CHANGE="RouletteChange",OGX.Roulette.MODE_REWIND="RouletteModeRewind",OGX.Roulette.MODE_CLOSEST="RouetteModeClosest",void 0===OGX)var OGX={};if(OGX.Router=function(t){"use strict";var r=t,i=window.location.pathname.split("/").slice(-1)[0],n=!1;function e(t){t.preventDefault(),t.stopImmediatePropagation()}function o(t){if(n)return t.preventDefault(),t.stopImmediatePropagation(),!1;null!==t.originalEvent.state?app.goto(t.originalEvent.state.url,!1):-1!==window.location.href.indexOf("#")&&app.goto(window.location.href.split("#").pop(),{history:!1})}this.start=function(){$(document).on("backbutton",e),$(window).on("popstate",o)},this.stop=function(){$(document).off("backbutton",e),$(window).off("popstate",o)},this.lock=function(){n=!0},this.unlock=function(){n=!1},this.isLocked=function(){return n},this.goto=function(t,e){if(!n){var i=this.findRoute(t);return i?(i.route.hasOwnProperty("scope")||(i.route.scope=["public"]),OGX.Scope.checkScope(i.route.scope)?(e.history&&this.addToHist(t),i):(setTimeout(function(){app.goto(r.errors[403],{history:!1})},0),!1)):(setTimeout(function(){app.goto(r.errors[404],{history:!1})},0),!1)}return!1},this.findRoute=function(t){var e;for(var i in r.routes)if((e=t.match("^"+i+"$"))&&e.length){e.shift();var n={};if(e.length)for(var o=0;o<e.length;o++)n[r.routes[i].properties[o]]=e[o],n[r.routes[i]["properties:Route"][o]]=e[o];return{stage:t.split("/").shift(),route:r.routes[i],data:n}}return!1},this.addToHist=function(t){var e={url:t};history.pushState(e,"title"+(new Date).getTime(),i+"#"+t)}},OGX.Router.BACK="RouterBack",OGX.Router.EXIT="ReouterExit",void 0===OGX)var OGX={};if(OGX.Scope=function(t){var i=["public"];void 0!==t&&(i=t),this.setScope=function(t){i=t},this.getScope=function(t){return i},this.checkScope=function(t){for(var e=0;e<i.length;e++)if(-1!==t.indexOf(i[e]))return!0;return!1}},OGX.Scope=new OGX.Scope,void 0===OGX)var OGX={};if(require("Scroller","Uxi","Touch"),OGX.Scroller=function(t){construct(this,"Scroller");var a,s,o,r,l,c,d,e,i,n,_,u=this,f=t,g={init_delay:0,off_x:0,off_y:0,fade_speed:300,check_delay:100,css:!1,zindex:9999,observe:!0,auto_scroll:!1,scroll_callback:!1,trigger:!1},h=0,p="init",m=!1;function y(t){t?s.on(u.touch.down,v):s.off(u.touch.down,v)}function v(t){t=u.event(t),!1?_=setInterval(E,f.check_delay):clearInterval(_),w(!0),x(!0),y(!1),L("in"),T(!0)}function x(t){t?(n=setInterval(b,10),s.on(u.touch.move,O)):(clearInterval(n),s.off(u.touch.move,O))}function O(t){t=u.event(t)}function b(){E()}function w(t){t?$(document).on(u.touch.up,G):$(document).off(u.touch.up,G)}function G(){x(!1),w(!1),y(!0),a.off("transitionend"),L("out")}function X(t){t?(window.addEventListener("resize",S),s.on("scroll",function(t){t.stopImmediatePropagation(),E()}),void 0!==OGX.NestedList&&$(document).on(OGX.NestedList.OPENED+" "+OGX.NestedList.CLOSED,function(){u.update()})):(window.removeEventListener("resize",S),s.off("scroll"),void 0!==OGX.NestedList&&$(document).off(OGX.NestedList.OPENED+" "+OGX.NestedList.CLOSED))}function E(){var t,e=(t=s.scrollTop())/d,i=Math.round(l.position().top);l.css("top",e+"px"),f.trigger&&!m&&($(f.container).trigger(OGX.Scroller.SCROLL,t),-1*t==s.outerHeight(!0)-a.outerHeight(!0)?i!==Math.round(e)&&$(f.container).trigger(OGX.Scroller.BOTTOM):0===t&&i!==Math.round(e)&&$(f.container).trigger(OGX.Scroller.TOP)),f.scroll_callback&&f.scroll_callback()}function T(t){t?(i&&T(!1),e=a.position().top,i=setInterval(D,f.check_delay-10)):i&&(clearInterval(i),i=null)}function D(){var t=a.position().top;L(t!==e?"in":"out"),e=t}function L(t){f.fade_speed;var e=l.css("opacity");l.removeClass("ogx_scroller_track_anim_fade_in"),l.removeClass("ogx_scroller_track_anim_fade_out"),l.hasClass("ogx_scroller_track_anim")||l.addClass("ogx_scroller_track_anim"),"in"===t?l.addClass("ogx_scroller_track_anim_fade_in"):l.addClass("ogx_scroller_track_anim_fade_out")}function M(t){t?u.observe(!0,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","src","width","height"]},C):u.observe(!1)}function C(){h!==a.height()&&(h=a.height(),S(),f.auto_scroll&&u.bottom())}function S(){if(r=s.innerHeight(),o=a.height(),d=o/r,r<o){var t=Math.round(r/d);l.css("height",t+"px");var e=l.width();f.css?(s.find("."+f.css+":last").css("height",t+"px"),s.find("."+f.css+":last").css("left",s.width()-e+"px")):(s.find(".ogx_scroller_track:first").css("height",r+"px"),s.find(".ogx_scroller_track:first").css("left",s.width()-e+"px"));var i=s.position().left+s.outerWidth()-l.width()+f.off_x,n=s.position().top;c.css("display","block"),c.css("left",i+"px"),c.css("top",n+"px")}else c.css("display","none");"init"===p&&(p=OGX.Scroller.READY,u.el.trigger(OGX.Scroller.READY))}this._NAME_=OGX.Scroller.NAME,this.el=null,this.enable=function(){X(!0),f.observe&&setTimeout(function(){M(!0)},0),y(!0),M(!0)},this.disable=function(){X(!1),f.observe&&M(!1),y(!1),T(!1)},this.resize=function(){S()},this.top=function(){r<o&&(s[0].scrollTop=0,S())},this.bottom=function(){r<o&&(s.scrollTop(o),S())},this.mute=function(){m=!0},this.vocal=function(){m=!1},this.container=function(){return a},this.inner=function(){return a[0]},this.outer=function(){return s[0]},this.getState=function(){return p},this.destroy=function(){this.disable(),u.el.removeClass("ogx_scroller_outer"),a.remove(),c.remove()},OGX.Data.merge(f,g),function(){u.el=$(f.container),u.el.addClass("ogx_scroller_outer");var t=(s=u.el).html(),e=s.position().top,i=s.height();s.html('<div class="ogx_scroller_inner ogx_hw"></div>'),(a=s.children(".ogx_scroller_inner:first")).html(t);var n="";f.css&&(n=" "+f.css);var o='<div class="ogx_scroller_track ogx_hw'+n+' " style="top:'+e+"px; height:"+i+"px; z-index:"+f.zindex+';"><div class="ogx_scroller_track_button"></div></div>';s.parent(0).prepend(o),c=f.css?s.parent(0).find("."+f.css+":last"):s.parent(0).find(".ogx_scroller_track:first"),l=c.find(".ogx_scroller_track_button:first");var r=s.position().left+s.outerWidth()-l.width()+f.off_x;e+=f.off_y,c.css("left",r+"px"),c.css("top",e+"px")}(),setTimeout(S,f.init_delay)},OGX.Scroller.NAME="OgxScroller",OGX.Scroller.READY="ScrollerReady",OGX.Scroller.TOP="ScrollerTop",OGX.Scroller.BOTTOM="ScrollerBottom",OGX.Scroller.SCROLL="ScrollerScroll",void 0===OGX)var OGX=function(){};if(require("StackedTree","Uxi","Touch"),OGX.StackedTree=function(t){construct(this,"StackedTree");var e,o,r,a=this,i={scope:["public"],speed:200,data:[],template:"{{$label}}",chromeos:!1},s=t,l=[],n=[0],c=0,d=!1,_='{{calc (typeof($items) !== "undefined" && $items.length)?$__css="ogx_stacked_tree_door":$__css=""}}';function u(t){t?(e.on(a.touch.down,".ogx_stacked_tree_level_prev",f),e.on(OGX.DynamicList.SELECT,g)):(e.off(a.touch.down,".ogx_stacked_tree_level_prev",f),e.off(OGX.DynamicList.SELECT,g))}function f(t){t.preventDefault(),t.stopImmediatePropagation(),y(--c,!0),n.pop(),a.el.trigger(OGX.StackedTree.BACK)}function g(t,e){d=e;var i=l[c].getIndex("__id__",e.__id__);e.hasOwnProperty("items")&&e.items.length&&function(t){if(!t.hasOwnProperty("scope"))return!0;for(var e=0;e<s.scope.length;e++)if(-1!==t.scope.indexOf(s.scope[e]))return!0;return!1}(e)?(n.push(i),m(++c,e.items),a.el.trigger(OGX.StackedTree.ENTER,e),setTimeout(function(){y(c)},0)):a.el.trigger(OGX.StackedTree.SELECT,e)}function h(t){t?$(window).on("resize",p):$(window).off("resize",p)}function p(){o.removeClass("ogx_stacked_tree_anim"),r=o.width(),o.css("transform","translateX("+c*Math.round(r/n.length)*-1+"px)")}function m(t,e){o.removeClass("ogx_stacked_tree_anim").css("width",100*(t+1)+"%"),r=o.width();var i='<div class="ogx_stacked_tree_level" data-level="'+t+'">';0<t&&(i+='<div class="ogx_stacked_tree_item ogx_stacked_tree_level_prev">'+OGX.Templater.templatize(d,s.template)+"</div>"),i+='<div class="ogx_stacked_tree_level_list"></div></div>',o.append(i);var n=o.children('.ogx_stacked_tree_level[data-level="'+t+'"]').children(".ogx_stacked_tree_level_list");o.children(".ogx_stacked_tree_level").css("flex-basis",Math.floor(100/(t+1)*100)/100+"%"),function(t,e,i){l[t]&&a.remove(l[t].id,OGX.DynamicList.NAME);var n=a.create("DynamicList",{container:e,mode:"hit",scroll:!0,display:{html:_+s.template,css:{bind:"__css",add:"ogx_stacked_tree_item"}},list:i});l[t]=n}(t,n[0],e)}function y(t,e){o.addClass("ogx_stacked_tree_anim"),void 0!==e&&e&&(u(!1),o.on("transitionend",function(){o.off("transitionend"),o.removeClass("ogx_stacked_tree_anim").css("width",100*(t+1)+"%"),a.remove(l[t+1].id,OGX.DynamicList.NAME),l.splice(t+1,1),o.children('.ogx_stacked_tree_level[data-level="'+(t+1)+'"]').remove(),o.children(".ogx_stacked_tree_level").css("flex-basis",Math.floor(100/(t+1)*100)/100+"%"),r=o.width(),u(!(d=!1))})),r=o.width(),o.css("transform","translateX("+t*Math.round(r/n.length)*-1+"px)")}this._NAME_=OGX.StackedTree.NAME,this.el=null,this.enable=function(){this.touch.enable(),u(!0),h(!0)},this.disable=function(){this.touch.disable(),u(!1),h(!1)},this.resize=function(){p()},this.setTree=function(t){if(t.length){var e=t.slice();return s.data={items:e},!0}return!1},this.setScope=function(t){s.scope=t,d=!(n=[c=0])},this.destroy=function(){for(var t=0;t<l.length;t++)l[t]&&this.remove(l[t].id,OGX.DynamicList.NAME)},function(){if(OGX.Data.merge(s,i),a.el=e=$(s.container),e.attr("data-ogx-id",a.id),e.addClass("ogx_stacked_tree"),s.data.length){var t=s.data.slice();s.data={items:t}}}(),e.html('<div class="ogx_stacked_tree_container" style="width:100%"></div>'),o=e.children(".ogx_stacked_tree_container:first"),m(n[0],s.data.items)},OGX.StackedTree.NAME="OgxStackedTree",OGX.StackedTree.BACK="StackedTreeBack",OGX.StackedTree.ENTER="StackedTreeEnter",OGX.StackedTree.SELECT="StackedTreeSelect",require("Stage","Uxi","Overlay","Touch"),OGX.Stage=function(t){construct(this,"Stage");var n=this,o=t;function r(t){t?n.el.on(n.touch.down,".ogx_stage_exit",function(){app.theater.show()}):n.el.off(n.touch.down,".ogx_stage_exit")}this.el=null,this.id=o.id,this.theater=!1,this.home=null,this.url=null,this._NAME_=OGX.Stage.NAME,this.__destroy=function(){o.closable&&r(!1)},function(){o.hasOwnProperty("theater")&&(n.theater=o.theater),n.home=o.home;var t=new OGX.Display(o),e="";o.hasOwnProperty("use")&&o.use||(e="display:none");var i="";o.closable&&(i='<div class="ogx_stage_exit"></div>'),i+=t.html(),$("body").append('<div class="ogx_stage" style="'+e+'" data-ogx-id="'+o.id+'">'+i+"</div>"),n.el=$("body").children('.ogx_stage[data-ogx-id="'+o.id+'"]'),o.closable&&r(!0)}()},OGX.Stage.NAME="stage",OGX.Stage.ANIM_SWAP="stageAnimSwap",OGX.Stage.ANIM_FLIP="stageAnimFlip",void 0===OGX)var OGX={};if(require("Table","Uxi","Touch"),OGX.Table=function(t){construct(this,"Table")},require("Tabs","Uxi","Touch"),OGX.Tabs=function(t){construct(this,"Tabs");var r,e=this,n=t,i={min_width:100,max_width:300,add_width:40,editable:!0,reorder:!0,icons:!1,tabs:new OGX.List},o=!1,a=0,s=!1,l=!1,c=!1,d=!1,_=!1;function u(){for(var t='<div class="ogx_tabs_container">',e="",i=0;i<n.tabs.length;i++)i===a&&(e="ogx_tabs_tab_active"),t+='<div class="ogx_tabs_tab '+e+'">',n.icons&&(t+='<span class="ogx_tabs_tab_icon" style="background-image:'+n.tabs[i].icon+';"></span>'),"string"==typeof n.tabs[i]?t+='<span class="ogx_tabs_tab_label">'+n.tabs[i]+"</span>":t+='<span class="ogx_tabs_tab_label">'+n.tabs[i].label+"</span>",n.editable&&(t+='<span class="ogx_tabs_tab_close"><span></span></span>'),t+="</div>",e="";t+="</div>",n.editable&&(t+='<div class="ogx_tabs_tab_add" style="width:'+n.add_width+'px;"><span></span></div>',r.addClass("ogx_tabs_editable")),r.html(t),o=r.children(".ogx_tabs_container:first").children(".ogx_tabs_tab:eq("+a+")")}function f(t){if(!s){_=!1,l=$(t),c={from:l.index()},r.children(".ogx_tabs_container:first").children(".ogx_tabs_tab_active:first").removeClass("ogx_tabs_tab_active");var e=l.position().left;(s={el:$(t).clone(),y:l.position().top}).w=l.width(),s.el.width(s.w),l.addClass("ogx_tabs_tab_active").addClass("ogx_tabs_frozen"),o=l,s.el.addClass("ogx_tabs_tab_active").addClass("ogx_tabs_float").css("transform","translate3d("+e+"px, "+s.y+"px, 0px)"),r.children(".ogx_tabs_container:first").prepend(s.el),d=setInterval(h,5)}}function g(t){_=t,s.el.css("transform","translate3d("+(t.x-s.w/2)+"px, "+s.y+"px, 0px)")}function h(){var i,n,o;_&&(idx=l.index(),r.children(".ogx_tabs_container:first").children(".ogx_tabs_tab").each(function(t,e){(i=$(e)).hasClass("ogx_tabs_tab_active")||(n=i.position(),o=i.width(),idx!==t&&(_.x>n.left+o/2&&_.x<n.left+o?(l.detach(),i.after(l)):_.x>n.left&&_.x<n.left+o/2&&(l.detach(),i.before(l))))}))}function p(){if(s){clearInterval(d),d=!1,s.el.remove(),s=!1,l.removeClass("ogx_tabs_frozen"),c.to=l.index();var t=n.tabs.splice(c.from,1);n.tabs.insert(t[0],a),a=c.to,e.el.trigger(OGX.Tabs.REORDER,c)}}function m(t){t?(r.on("click",".ogx_tabs_tab",function(){o&&o.removeClass("ogx_tabs_tab_active"),$(this).addClass("ogx_tabs_tab_active"),o=$(this),a!==o.index()&&(a=o.index(),r.trigger(OGX.Tabs.SELECT,n.tabs[o.index()]))}),n.editable&&r.on("click",".ogx_tabs_tab_close",function(t){return t.preventDefault(),t.stopImmediatePropagation(),r.trigger(OGX.Tabs.CLOSE,{index:a,tab:n.tabs[a]}),e.removeCurrentTab(),updateContainerWidth(),!1})):(r.off("click",".ogx_tabs_tab"),n.editable&&(r.off("click",".ogx_tabs_tab_add"),r.off("click",".ogx_tabs_tab_close")))}this._NAME_=OGX.Tabs.NAME,this.el=null,this.set=function(t){if(void 0===t){if(o){var e=o.index();return n.tabs[e]}return!1}t.hasOwnProperty("insert")||(t=new OGX.List(t)),n.tabs=t,setTimeout(u,0)},this.selectIndex=function(t){t!==a&&this.selectTabAt(t)},this.index=function(){return o?a:-1},this.enable=function(){m(!0),n.reorder&&this.touch.hold.enable()},this.disable=function(){m(!1),n.reorder&&this.touch.hold.disable()},this.addTab=function(t){n.icons&&(t.hasOwnProperty("icon")||(t.icon=n.icon_default)),n.tabs.push(t),a=n.tabs.length-1,setTimeout(function(){var t,e,i;u(),t=r.width(),e=r.children(".ogx_tabs_container:first"),i=e.width(),t<i&&e.css("transform","translateX("+-1*(i-t)+"px)")},0)},this.addTabAt=function(t,e){n.icons&&(t.hasOwnProperty("icon")||(t.icon=n.icon_default)),n.tabs.insert(t,e),a=e,setTimeout(u,0)},this.removeCurrentTab=function(){o&&this.removeTabAt(a)},this.removeTabAt=function(t){return!!n.tabs.delete(t)&&(r.children(".ogx_tabs_container:first").children(".ogx_tabs_tab:eq("+t+")").remove(),o=null,function(){0<a?a--:a=0;e.selectTabAt(a)}(),!0)},this.selectTabAt=function(t){return o&&(o.removeClass("ogx_tabs_tab_active"),o=null),(o=r.children(".ogx_tabs_container:first").children(".ogx_tabs_tab:eq("+t+")")).addClass("ogx_tabs_tab_active"),a=t,!0},this.selectTab=function(t){o&&o.removeClass("ogx_tabs_tab_active");var e=n.tabs.findIndex("label",t);this.selectTabAt(e.index)},this.resize=function(){},function(){for(var t in n||(n={}),i)n.hasOwnProperty(t)||(n[t]=i[t]);n.tabs.hasOwnProperty("insert")||(n.tabs=new OGX.List(n.tabs)),e.el=r=$(n.container),r.addClass("ogx_tabs")}(),setTimeout(u,0),n.reorder&&e.touch.hold.set({target:".ogx_tabs_tab",cb_hold:f,cb_move:g,cb_up:p})},OGX.Tabs.NAME="tabs",OGX.Tabs.SELECT="tabsSelect",OGX.Tabs.CLOSE="tabsClose",OGX.Tabs.REORDER="tabsReoroder",OGX.Tabs.ADD="tabsAdd",void 0===OGX)var OGX={};if(OGX.Tags=function(t){"use strict";var e=this,r=t,i={editable:!1,add_new:!0,tags:[],current_tags:[],tags_ascii:[],mode:OGX.Tags.MODE_STRING,keycode:13,placeholder:"keywords",restrict:!1},n="mousedown";function o(t){var e=!1;switch(r.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:-1===r.current_tags.indexOf(t)&&(r.current_tags.push(t),e=!0);break;case OGX.Tags.MODE_OBJECT:var i=r.current_tags.find("label",t,1);i||((i=r.tags.find("label",t,1))?r.current_tags.push(i):r.current_tags.push({label:t}),e=!0)}if(e){var n="";!0===r.editable&&(n='<span class="ogx_tags_remove"></span>');var o='<span class="ogx_tags_tag"><span>'+t+"</span>"+n+"</span>";$(r.container).find(".ogx_tags_tags:first").append(o),$(r.container).trigger(OGX.Tags.TAG_ADDED,t)}$(r.container).find(".ogx_tags_input:first").focus()}function a(i){var t=!1,n=!1;switch(r.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:var e=r.current_tags.indexOf(i);-1<e&&(r.current_tags.splice(e,1),t=!0);break;case OGX.Tags.MODE_OBJECT:t=r.current_tags.findDelete("label",i)}return t&&$(r.container).find(".ogx_tags_tags:first").find(".ogx_tags_tag").each(function(t,e){if($(e).find("span:first").text()===i)return $(e).remove(),void(n=!0)}),n}function s(t,e){if(t){0<$(r.container).find(".ogx_tags_container:first").length&&(s(!1),d(!1));for(var i='<div class="ogx_tags_container">',n=0;n<e.length;n++)switch(r.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:i+='<span class="ogx_tags_tag ogx_tags_container_tag">'+e[n]+"</span>";break;case OGX.Tags.MODE_OBJECT:i+='<span class="ogx_tags_tag ogx_tags_container_tag">'+e[n].label+"</span>"}i+="</div>",$(r.container).append(i),d(!0)}else $(r.container).find(".ogx_tags_container").remove(),d(!1)}function l(t){for(var e="",i="",n=0;n<t.length;n++)switch(i=!0===r.editable?'<span class="ogx_tags_remove"></span>':"",r.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:e+='<span class="ogx_tags_tag"><span>'+t[n]+"</span>"+i+"</span>";break;case OGX.Tags.MODE_OBJECT:e+='<span class="ogx_tags_tag"><span>'+t[n].label+"</span>"+i+"</span>"}return r.current_tags=t,$(r.container).find(".ogx_tags_tags:first").html(e),!0}function c(t){t?$(r.container).find(".ogx_tags_input:first").on("keyup",function(t){var e=$(this).val();if(3<=e.length)if(t.which===r.keycode&&r.add_new)o(e),$(r.container).find(".ogx_tags_input:first").val(""),s(!1);else{var i;switch(r.mode){case OGX.Tags.MODE_STRING:i=function(t){var e=[];t=t.substr(0,3);for(var i=0;i<r.tags.length;i++)0===r.tags[i].toLowerCase().indexOf(t.toLowerCase())&&-1===r.current_tags.indexOf(r.tags[i])&&e.push(r.tags[i]);return e}(e);break;case OGX.Tags.MODE_OBJECT:i=function(t){for(var e=new RegExp(t,"gi"),i=r.tags.find("label",e),n=0;n<r.current_tags.length;n++)i.findDelete("label",r.current_tags[n].label);return i}(e);break;case OGX.Tags.MODE_ASCII:i=function(t){var e=function(t){for(var e="",i=0;i<t.length;i++)e+=t.toLowerCase().charCodeAt(i).toString();return e}(t.substr(0,3)),i=[];if(r.tags_ascii[e])for(var n=0;n<r.tags_ascii[e].length;n++)-1!==r.tags_ascii[e][n].toLowerCase().indexOf(t.toLowerCase())&&-1===r.current_tags.indexOf(r.tags[n])&&i.push(r.tags_ascii[e][n]);return i}(e)}0<i.length?s(!0,i):s(!1)}else s(!1)}):$(r.container).find(".ogx_tags_input:first").off("keyup")}function d(t){t?$(r.container).find(".ogx_tags_container:first").on(n,".ogx_tags_container_tag",function(){o($(this).text()),$(r.container).find(".ogx_tags_input:first").val(""),s(!1)}):$(r.container).find(".ogx_tags_container:first").off(n,".ogx_tags_container_tag")}function _(t){t?$(r.container).on(n,".ogx_tags_remove",function(){var t=$(this).parent("span:first").find("span:first").text();a(t),$(r.container).trigger(OGX.Tags.TAG_REMOVED,t),$(r.container).find(".ogx_tags_input:first").focus()}):$(r.container).off(n,".ogx_tags_remove")}this._NAME_=OGX.Tags.NAME,this.el=null,this.enable=function(){c(!0),d(!0),_(!0),$(r.container).find(".ogx_tags_input:first").prop("placeholder",r.placeholder),$(r.container).find(".ogx_tags_input:first").prop("disabled",!1)},this.disable=function(){c(!1),d(!1),_(!1),$(r.container).find(".ogx_tags_input:first").prop("placeholder",""),$(r.container).find(".ogx_tags_input:first").prop("disabled",!0)},this.setTags=function(t){return t.hasOwnProperty("insert")||(t=new OGX.List(t)),r.tags=t,!0},this.getTags=function(){return r.tags},this.getCurrentTags=function(){return r.current_tags},this.setCurrentTags=function(t){return t.hasOwnProperty("insert")||(t=new OGX.List(t)),r.current_tags=t,l(r.current_tags)},this.showTags=function(t){return l(t)},this.addTag=function(t){return o(t)},this.removeTag=function(t){return a(t)},this.destroy=function(){c(!1),d(!1),_(!1),r.restrict&&OGX.FormTools.unrestrictField($(r.container).find(".ogx_tags_input:first")[0])},void 0!==OGX.List?r&&r.restrict&&void 0===OGX.FormTools?console.log("%c CRITICAL ERROR - OGX.FormTools not found! ","background:#222; color: #FF0000"):(function(){for(var t in r||(r={}),i)r.hasOwnProperty(t)||(r[t]=i[t]);r.tags.hasOwnProperty("insert")||(r.tags=new OGX.List(r.tags)),r.current_tags.hasOwnProperty("insert")||(r.current_tags=new OGX.List(r.current_tags)),void 0!==window.ontouchstart&&(n="touchstart"),e.el=$(r.container)}(),function(){if($(r.container).addClass("ogx_tags"),$(r.container).html('<span class="ogx_tags_tags"></span><input type="text" class="ogx_tags_input" placeholder="'+r.placeholder+'">'),r.restrict){var t={multiline:!1,max:30};"object"==typeof r.restrict&&(t=r.restrict),t.container=$(r.container).find(".ogx_tags_input:first")[0],OGX.FormTools.restrictField(t)}}(),0<r.current_tags.length&&l(r.current_tags)):console.log("%c CRITICAL ERROR - OGX.List not found! ","background:#222; color: #FF0000")},OGX.Tags.prototype.tagDataset=function(t,e,i){"use strict";void 0===i&&(i=!1);for(var n,o=[],r=0;r<t.length;r++)for(var a=0;a<e.length;a++)if(t[r].hasOwnProperty(e[a])){n=t[r][e[a]].split(" ");for(var s=0;s<n.length;s++)i&&-1!==i.indexOf(n[s])||-1===o.indexOf(n[s])&&o.push(n[s])}return o},OGX.Tags.prototype.tagDatatree=function(t,e){"use strict";!function(t,o){var r=[];if(function t(e){if(e.hasOwnProperty("items"))for(var i=0;i<e.items.length;i++){for(var n in e.items[i])-1<o.indexOf(n)&&-1===r.indexOf(e.items[i][n])&&r.push(e.items[i][n]);return t(e.items[i]),!0}}(t));}(t,e)},OGX.Tags.NAME="OgxTags",OGX.Tags.TAG_ADDED="TagsTagAdded",OGX.Tags.TAG_REMOVED="TagsTagRemoved",OGX.Tags.MODE_STRING="TagsModeString",OGX.Tags.MODE_OBJECT="TagsModeObject",OGX.Tags.MODE_ASCII="TagsModeAscii",void 0===OGX)var OGX={};if(require("Template","Uxi"),OGX.Template=function(t){construct(this,"Template");var e=OGX.Templater.getTemplate(t.id);Object.keys(t.data).length&&(e=OGX.Templater.templatize(t.data,e)),$(t.container).html(e)},void 0===OGX)var OGX={};if(OGX.Templater={},OGX.Templater.templatize=function(__obj,__template,__debug){"use strict";var reg;void 0===__debug&&(__debug=!1);var tmp={};function extract(){reg=new RegExp("{{(((?!(}})).)*)}}","gi");var t=__template.match(reg);if(t)for(var e=0;e<t.length;e++)reg=new RegExp("^{{[ ]?([a-z]+) ","gi"),t[e].match(reg)?handleOp(t[e]):handleEcho(t[e])}function handleOp(t){var e=/{{[ ]?([a-z]+)/gi.exec(t);if(e&&e.length)switch(e[1]){case"loop":handleLoop(t);break;case"calc":handleCalc(t)}}function handleLoop(__op){var html="",reg=/{{[ ]?loop[ ]+((?:\$|@)[a-z0-9_\-\.]+)[ ]+(.*)([ ]+)?}}/gi,match=reg.exec(__op);if(match){var prop=eval("__obj."+match[1].substr(1));if(prop){if(prop.length){for(var i=0;i<prop.length;i++)html+=match[2].replace(/\.\$/g,"["+i+"]");html=replace(html)}__template=__template.replace(match[0],html)}else __debug||(__template=__template.replace(__op,""))}}function handleCalc(__op){var html="",s=__op.replace(/{{[ ]?calc/gi,"");s=s.replace(/}/gi,""),s=s.replace(/\@/g,"tmp."),s=s.replace(/\$/g,"__obj."),s=replaceGlobalVar(s);var r=eval(s);void 0===r&&__debug||(__template=__template.replace(__op,""))}function handleEcho(__op){var s=__op.replace(/{|}/gi,"");s=s.replace(/\@/g,"tmp."),s=s.replace(/\$/g,"__obj."),s=replaceGlobalVar(s);var r=eval(s);void 0!==r?__template=__template.replace(__op,r):__debug||(__template=__template.replace(__op,""))}function replaceGlobalVar(t){if(-1!==t.indexOf("#")){var e=t.match(/#([a-z0-9_\\-]+)/gi);e&&(t=t.replace(/(#[a-zA-Z0-9_\\-]+)/g,e[0].substr(1)))}return t}function replace(__html){var reg=new RegExp("((\\$|@|#)[a-z0-9_\\-\\[\\]\\.]+)","gi"),match=__html.match(reg),s,r;if(match){for(var i=0;i<match.length;i++)s=match[i].replace(/\$/g,"__obj."),s=s.replace(/\@/g,"tmp."),s=replaceGlobalVar(s),r=eval(s),void 0!==r&&(__html=__html.replace(match[i],r));return __html}return!1}return extract(__template),__template},OGX.Templater.loadTemplates=function(t,e){"use strict";var o=this;this.templates={},void 0===e&&(e=!1),setTimeout(function(){!function e(i,n){i.length?$.get(i[0].file,function(t){o.templates[i[0].name]=t,$(document).trigger(OGX.Templater.TEMPLATE_LOADED,{name:i[0].name,html:t}),i.splice(0,1),i.length?setTimeout(function(){e(i,n)},0):n?n():$(document).trigger(OGX.Templater.TEMPLATES_LOADED)}):n()}(t,e)},0),this.getTemplate=function(t){return!!this.templates.hasOwnProperty(t)&&this.templates[t]}},OGX.Templater.TEMPLATE_LOADED="Templater_TEMPLATE_LOADED",OGX.Templater.TEMPLATES_LOADED="Templater_TEMPLATES_LOADED",require("Theater","Uxi","Touch"),OGX.Theater=function(t){construct(this,"Theater");var i,o=this,r=t,e={anim:!1,display:!0,icon_size:50},n={template:!1,html:'<span class="ogx_theater_stage_icon" style="background-image:url(\'{{$icon}}\')"></span><span class="ogx_theater_stage_label">{{$label}}</span>'},a='<div class="ogx_theater"></div>',s=!0;function l(t){t?($(document).on("backbutton",c),$(window).on("popstate",c),list.el.on(OGX.DynamicList.SELECT,function(t,e){!function(t){var e=app.find("stage",t);e.wake(),app.goto(e.id+"/"+e.home);var i,n=list.el.find('.ogx_theater_stage[data-ogx-id="'+e.id+'"]').position();o.observe(!0,{childList:!0},function(){o.observe(!1),(i=$("body").children(".ogx_theater_trans:first")).on("transitionend",function(){i.off("transitionend"),o.hide(),i.remove()}),i.removeClass("ogx_theater_trans_hide"),setTimeout(function(){i.addClass("ogx_theater_trans_grow").css({opacity:1,width:"100%",height:"100%",transform:"translate3d(0px, 0px, 0px)"})},0)},$("body")),$("body").append('<div class="ogx_theater_trans ogx_theater_trans_hide" style="width:'+r.icon_size+"px; height:"+r.icon_size+"px; transform:translate3d("+n.left+"px,"+n.top+'px, 0px);" data-ogx-id="'+e.id+'"><div class="icon" style="background-image:url(\'/img/'+e.theater.icon+"')\"></div></div>")}(e.id)})):($(document).off("backbutton",c),$(window).off("popstate",c),list.el.off(OGX.DynamicList.SELECT))}function c(){o.hide()}function d(){$("body").prepend(a);for(var t,e=app.gather("stage"),i=[],n=0;n<e.length;n++)e[n].theater&&(t={id:e[n].id,name:"",icon:""},"object"==typeof e[n].theater&&e[n].theater.hasOwnProperty("icon")&&(t.icon="/img/"+e[n].theater.icon,t.label=e[n].theater.label),i.push(t));$(".ogx_theater:first").on(OGX.DynamicList.RENDER,function(t){$(".ogx_theater:first").off(OGX.DynamicList.RENDER),a=list.el.detach()}),list=o.create("DynamicList",{container:".ogx_theater:first",display:{html:r.display.html,css:"ogx_theater_stage"},key:"id",scroll:!0,mode:"hit",list:i,trigger:!0})}function _(){var t=app.gather("stage");i=[];for(var e=0;e<t.length;e++)t[e].theater&&i.push(t[e])}this._NAME_=OGX.Theater.NAME,this.update=function(){_()},this.show=function(){var i,n;s&&($("body").prepend(a),n=app.getStage(),o.observe(!0,{childList:!0},function(){o.observe(!1),n.sleep(),i=$("body").children(".ogx_theater_trans:first");var t=list.el.find('.ogx_theater_stage[data-ogx-id="'+n.id+'"]'),e=t.position();i.removeClass("ogx_theater_trans_hide"),setTimeout(function(){i.on("transitionend",function(){i.off("transitionend"),i.remove()}),i.addClass("ogx_theater_trans_show").addClass("ogx_theater_trans_shrink").css({opacity:0,width:r.icon_size+"px",height:r.icon_size+"px",transform:"translate3d("+e.left+"px, "+e.top+"px, 0px)"})},0)},$("body")),$("body").append('<div class="ogx_theater_trans ogx_theater_trans_hide" data-ogx-id="'+n.id+'"><div class="icon" style="background-image:url(\'/img/'+n.theater.icon+"')\"></div></div>"),this.focusNodes(),l(!0),s=!1)},this.hide=function(){s||(this.blurNodes(),a=$("body").children(".ogx_theater:first").detach(),l(!1),s=!0)},this.tile=function(t,e){void 0===e&&(e="x")},OGX.Data.merge(r,e),r.display&&("object"!=typeof r.display&&(r.display={}),OGX.Data.merge(r.display,n),r.display.template&&(r.display.html=OGX.Templater.getTemplate(r.display.template))),_(),$(document).on(OGX.App.READY,d)},OGX.Theater.NAME="OgxTheater",OGX.Theater.ANIM_ZOOM="TheaterAnimZoom",OGX.Touch=function(t){"use strict";var e=this;this.touch=!1,this.touch||this.initTouch(t.chromeos),this.touch.swipe=new OGX.Touches.Swipe(this),this.touch.hold=new OGX.Touches.Hold(this),this.touch.drag=new OGX.Touches.Drag(this),this.touch.enable=function(){e.touch.swipe.enable(),e.touch.hold.enable(),e.touch.drag.enable()},this.touch.disable=function(){e.touch.swipe.disable(),e.touch.hold.disable(),e.touch.drag.disable()}},OGX.Touch.prototype.initTouch=function(t){void 0===t&&(t=!1),this.touch={hold:{}},this.touch.down="mousedown",this.touch.up="mouseup",this.touch.move="mousemove",void 0===window.ontouchstart||t||(this.touch.down="touchstart",this.touch.up="touchend",this.touch.move="touchmove")},OGX.Touch.prototype.touchable=function(){return void 0!==window.ontouchstart},OGX.Touch.prototype.event=function(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t},OGX.Touches={},OGX.Touches.Swipe=function(e){"use strict";var i=e,n={speed:10,x:!0,y:!1,min_x:100,min_y:100,cb_down:!1,cb_swipe:!1,cb_up:!1},o=!1,r={x:0,y:0},a={x:0,y:0},s=0,l=0,c=0,d=0,_=0,u=!1,f=!1,g=!1;function h(t){g||(g=!0,t=e.event(t),r.x=t.pageX,r.y=t.pageY,c=d=0,s=l=0,p(!0),o.cb_down&&o.cb_down(r))}function p(t){t?(m(!0),u=setInterval(x,o.speed)):(m(!1),u&&(clearInterval(u),u=!1))}function m(t){t?i.el.on(i.touch.move,v):i.el.off(i.touch.move,v)}function t(t){t?($("body").on(i.touch.up,y),i.el.on(i.touch.down,h)):($("body").off(i.touch.up,y),i.el.off(i.touch.down,h))}function y(t,e){f&&(void 0===e&&(e=!1),p(!1),g&&o.cb_up&&o.cb_up({pt0:r,pt1:a,distX:c,distY:d,dist:_,dirX:s,dirY:l,swipe:e}),g=!1)}function v(t){t=e.event(t),a.x=t.pageX,a.y=t.pageY,s=a.x>r.x?1:-1,l=a.y>r.y?1:-1,c=Math.abs(a.x-r.x),d=Math.abs(a.y-r.y),_=Math.sqrt(Math.abs(Math.pow(a.x-r.x,2)-Math.pow(a.y-r.y,2)))}function x(){o.cb_swipe&&(o.x&&o.min_x&&c>=o.min_x||o.y&&o.min_y&&d>=o.min_y?y(0,!0):o.cb_swipe({pt0:r,pt1:a,dirX:s,dirY:l,distX:c,distY:d,dist:_}))}this.set=function(t){o=t,OGX.Data.merge(o,n)},this.enable=function(){!f&&o&&t(f=!0)},this.disable=function(){f&&o&&(t(f=!1),p(!1),m(!1))}},OGX.Touches.Hold=function(t){"use strict";var e={cb_hold:!1,cb_up:!1,cb_move:!1,time:1e3,container:this.el,target:!1},i=!1,n=!1,o=!1,r=!1,a=!1,s=!1,l=t,c={x:0,y:0},d={x:0,y:0},_=!1;function u(t){t=l.event(t),_=t.target.offsetParent,r||(r=!0,n=(new Date).getTime(),c.x=l.el.offset().left+t.pageX,c.y=l.el.offset().top+t.pageY,$("body").on(l.touch.move,f),o=setInterval(g,1))}function f(t){t=l.event(t),d.x=l.el.offset().left+t.pageX,d.y=l.el.offset().top+t.pageY,!a&&5<Math.abs(c.x-d.x)||5<Math.abs(c.y-d.y)?(clearInterval(o),o=!1):i.cb_move&&i.cb_move(d)}function g(){r&&(new Date).getTime()-n>i.time&&(a||(a=!0,i.cb_hold?i.cb_hold(_):l.el.trigger(OGX.Touch.HOLD_START)))}function h(){r=a=!1,$("body").off(l.touch.move,f),clearInterval(o),o=!1,i.cb_up?i.cb_up():l.el.trigger(OGX.Touch.HOLD_END)}this.set=function(t){i=t,OGX.Data.merge(i,e)},this.enable=function(){!s&&i&&(s=!0,l.el.on(l.touch.down,i.target,u),$("body").on(l.touch.up,h))},this.disable=function(){s&&i&&(s=!1,(r||o)&&(r=a=!1,clearInterval(o),itnv=!1),l.el.off(l.touch.down,i.target,u),$("body").off(l.touch.up,h),$("body").off(l.touch.move,f))}},OGX.Touches.Drag=function(i){"use strict";var e,n,o,r,a,s,l=!1,c={x:!0,y:!0,limit_x:null,limit_y:null,target:!1,cb_down:!1,cb_drag:!1,cb_up:!1,border:10},d=i,_=!1,t=!1;function u(t){var e=[];e=l.target?[d.touch.down,l.target,f]:[d.touch.down,f],t?d.el.on.apply(d.el,e):d.el.off.apply(d.el,e)}function f(t){if(t=i.event(t),o=t.pageX,r=t.pageY,e=d.el.position().left,n=d.el.position().top,l.border){if(o<e+l.border||o>e+d.el.width()-l.border)return;if(r<n+l.border||r>n+d.el.height()-l.border)return}g(!(s=a=0)),h(!0),l.cb_down&&l.cb_down()}function g(t){t?_||(_=setInterval(y,10)):_&&(clearInterval(_),_=null)}function h(t){t?($("body").on(d.touch.move,m),$("body").on(d.touch.up,p)):($("body").off(d.touch.move,m),$("body").off(d.touch.up,p))}function p(t){g(!1),h(!1),t=i.event(t),l.x&&(a=t.pageX-o),l.y&&(s=t.pageY-r),l.cb_up&&l.cb_up({distX:a,distY:s})}function m(t){t=i.event(t);var e=!1;l.x&&(null!==l.limit_x?t.pageX-o>=l.limit_x.min&&t.pageX-o<=l.limit_x.max&&(a=t.pageX-o,e=!0):a=t.pageX-o),l.y&&(null!==l.limit_y?t.pageY-r>=l.limit_y.min&&t.pageY-r<=l.limit_y.max&&(s=t.pageY-r,e=!0):s=t.pageY-r),e&&l.cb_drag&&l.cb_drag({distX:a,distY:s})}function y(){d.el.css({transform:"translate3d("+(e+a)+"px, "+(n+s)+"px, 0px)"})}this.dragable=!0,this.set=function(t){l=t,OGX.Data.merge(l,c)},this.enable=function(){!t&&l&&u(t=!0)},this.disable=function(){t&&l&&(u(t=!1),h(!1),g(!1))}},OGX.Touch.HOLD_START="TouchHoldStart",OGX.Touch.HOLD_END="TouchHoldEnd",require("Tree","Uxi","Touch"),OGX.Tree=function(t){construct(this,"Tree");var c,d,_,u,e,i,s,n,o=this,f=t,r={show_root:!0,root_label:"root",editable:!1,sort:{enabled:!0,property:"label",way:1},toggle:!0,drag_after:1e3,icon_path:"img/",icon_size:30,scope:["public"],chromeos:!1,types:{root:{mode:"folder",icons:{open:"folder_open.svg",close:"folder_close.svg",empty:null}},file:{mode:"file",icon:"file.svg"},folder:{mode:"folder",icons:{open:"folder_open.svg",close:"folder_close.svg",empty:null}}},tree:{id:0,type:"root",label:f.root_label,state:"closed",items:[]},template:'<div class="ogx_tree_item" data-id="{{$_id_}}"><span class="ogx_tree_item_arrow {{$arrow_style}} {{$arrow_display}}"><span style="width:{{$arrow_size}}; height:{{$arrow_size}}"></span></span><img src="{{$icon}}" width="{{$size}}" alt=""><div class="ogx_tree_item_label">{{$label}}</div><div class="ogx_tree_item_container {{$container_display}}"></div></div>'};function a(){var t={icon:X(f.tree),size:f.icon_size,_id_:f.tree._id_,label:f.root_label,container_display:"",arrow_display:"",arrow_style:"ogx_tree_item_arrow_open",arrow_size:Math.round(f.icon_size/2)+"px"};c.html(OGX.Templater.templatize(t,f.template)),f.tree.element=c.children(".ogx_tree_item:first")}function l(){a(),g(f.tree,f.tree.element)}function g(t,e){if(t.hasOwnProperty("items")){var i,n;f.sort.enabled?(r=t.items,a=f.sort.property,s=f.sort.way,r.sort((l=a,c=s,function(t,e){return t[l]<e[l]?-1*c:t[l]>e[l]?c:0})),i=r):i=t.items;for(var o=0;o<i.length;o++)n={icon:null,size:f.icon_size,_id_:t.items[o]._id_,label:t.items[o].label,container_display:"",arrow_display:"",arrow_style:"",arrow_size:Math.round(f.icon_size/2)+"px"},t.items[o].hasOwnProperty("state")||(t.items[o].state="close"),"folder"===E(t.items[o])?(t.items[o].items.length||(t.items[o].state="close",n.arrow_style="ogx_tree_item_arrow_disabled"),"open"===t.items[o].state?n.arrow_style="ogx_tree_item_arrow_open":(n.arrow_style+=" ogx_tree_item_arrow_close",n.container_display="ogx_tree_item_container_hidden")):n.arrow_display="ogx_tree_item_arrow_hidden",n.icon=X(t.items[o]),e.children(".ogx_tree_item_container:last").append(OGX.Templater.templatize(n,f.template)),t.items[o].element=e.children(".ogx_tree_item_container:last").children(".ogx_tree_item:last"),g(t.items[o],t.items[o].element)}var r,a,s,l,c}function h(t){var e=JSON.parse(JSON.stringify(t));return delete e._id_,delete e.element,e}function p(t){"folder"===E(t)&&(t.items.length||(t.state="close",t.element.children(".ogx_tree_item_arrow:first").addClass("ogx_tree_item_arrow_disabled")),"open"===t.state?(t.element.children(".ogx_tree_item_arrow:first").removeClass("ogx_tree_item_arrow_close").removeClass("ogx_tree_item_arrow_disabled").addClass("ogx_tree_item_arrow_open"),t.element.children(".ogx_tree_item_container:first").css("display","block")):(t.element.children(".ogx_tree_item_arrow:first").removeClass("ogx_tree_item_arrow_open").addClass("ogx_tree_item_arrow_close"),t.element.children(".ogx_tree_item_container:first").css("display","none")),t.element.children("img:first").attr("src",X(t)))}function m(){if(s){var t=O(s);t&&(t.children("img:first").removeClass("ogx_tree_selected_item"),s=null)}}function y(o){return G(function(t,e,i,n){return t._id_===o&&(i.items.splice(n,1),i.items.length||(i.state="close"),p(i),!0)})}function v(e,i){return G(function(t){return t._id_===i&&(t.items.push(e),t.state="open",p(t),!0)})}function x(i){return G(function(t,e){return t._id_===i&&t})}function O(t){var e=x(t);return!!e&&e.element}function b(t){var i,e=(i=t,G(function(t,e){return i===e+"/"+t.label&&t}));return!!e&&e.element}function w(){n=1,G(function(t){return t._id_=n++,!1})}function G(a,t){var s;if(void 0===t&&(t=f.tree),s=function t(e,i,n,o){if(s=a(e,i,n,o))return s;if(e.hasOwnProperty("items")&&e.items.length)for(var r=0;r<e.items.length;r++)if(s=t(e.items[r],i+"/"+e.label,e,r))return s;return!1}(t,""))return s}function X(t){return!!f.types.hasOwnProperty(t.type)&&(f.types[t.type].hasOwnProperty("icons")?"close"===t.state&&!t.items.length&&f.types[t.type].icons.hasOwnProperty("empty")?f.icon_path+f.types[t.type].icons.empty:f.icon_path+f.types[t.type].icons[t.state]:f.icon_path+f.types[t.type].icon)}function E(t){return!!f.types.hasOwnProperty(t.type)&&f.types[t.type].mode}function T(t){var e,i;i=h(x(e=t.data("id"))),f.toggle?t.children("img:first").hasClass("ogx_tree_selected_item")?(m(),c.trigger(OGX.Tree.UNSELECT,i)):(m(),t.children("img:first").addClass("ogx_tree_selected_item"),s=e,c.trigger(OGX.Tree.SELECT,i)):(m(),t.children("img:first").addClass("ogx_tree_selected_item"),c.trigger(OGX.Tree.SELECT,i))}function D(t){t?(f.editable?(c.on(o.touch.down,".ogx_tree_item img",function(t){t.preventDefault(),T($(this).parent(0)),1!==$(this).parent(0).data("id")&&function(){e&&clearInterval(e);i=(new Date).getTime(),e=setInterval(L,50)}()}),$(document).on(o.touch.up,function(){var t,e,i,n,o,r,a,s,l;C(),_&&(M(!1),t=_.offset().left,e=_.offset().top,n=t,o=e,!(i=G(function(t,e){return r=t.element.offset(),a=t.element.children("img:first"),n>=r.left&&n<=r.left+a.width()&&o>=r.top&&o<=r.top+a.height()&&t}))||i&&(i._id_===d._id_||"folder"!==E(i))?(u.css("opacity",1),_.remove(),d=_=null):(l=i,y((s=d)._id_),v(s,l._id_),l.element.children(".ogx_tree_item_container:first").empty(),l.state="open",g(l,l.element),p(l),u.remove(),_.remove(),_=null,c.trigger(OGX.Tree.DROP,d),d=null))})):c.on("click",".ogx_tree_item img",function(t){t.preventDefault(),T($(this).parent(0))}),c.on(o.touch.down,".ogx_tree_item_arrow",function(t){if(t.preventDefault(),C(),0<$(this).parent(0).children(".ogx_tree_item_container:first").children().length){var e=x($(this).parent(0).data("id"));"open"===e.state?(e.state="close",c.trigger(OGX.Tree.CLOSE,e)):(e.state="open",c.trigger(OGX.Tree.OPEN,e)),p(e)}})):(f.editable?c.off(o.touch.down,".ogx_tree_item img"):c.off("click",".ogx_tree_item img"),c.off(o.touch.down,".ogx_tree_item_arrow"))}function L(){var t;(new Date).getTime()-i>=f.drag_after&&(s&&(d=x(s))&&(t=d.element,(_=(u=t).clone()).children(".ogx_tree_item_arrow:first").css("display","none"),t.css("opacity",.3),_.addClass("ogx_tree_item_drag"),_.css({top:t.offset().top,left:t.offset().left}),c.prepend(_),M(!0),c.trigger(OGX.Tree.DRAG,d)),C())}function M(t){t?$(document).on(o.touch.move,function(t){t=function(t){if(t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches)return t.originalEvent.changedTouches[0];return t}(t),_.css({top:t.pageY+"px",left:t.pageX+"px"})}):$(document).off(o.touch.move)}function C(){e&&(clearInterval(e),e=null)}this._NAME_=OGX.Tree.NAME,this.el=null,this.setIconSize=function(i){f.icon_size=i,c.find("img").each(function(t,e){$(e).attr("width",i)}),$(".ogx_tree_item_arrow span").css({width:Math.round(f.icon_size/2)+"px",height:Math.round(f.icon_size/2)+"px"})},this.addItem=function(t){if(s){var e=x(s);return"folder"===E(e)&&(t._id_=++n,v(t,s),e.element.children(".ogx_tree_item_container:first").empty(),e.state="open",g(e,e.element),e.element.children(".ogx_tree_item_container:first").css("display","block")),!0}return!1},this.selectItemByPropVal=function(t,e){var i,n,o,r,a=(i=t,n=e,G(function(t,e){return!(!t.data.hasOwnProperty(i)||t.data[i]!==n)&&e+"/"+t.label}));return!!a&&(m(),o=a._id_,(r=O(o))&&(s=o,r.children("img:first").addClass("ogx_tree_selected_item")),!0)},this.selectItemByPath=function(t){var e=b(t);return!!e&&(m(),e.addClass("ogx_tree_selected_item"),s=e.data("id"),!0)},this.updateSelectedItemDataProperty=function(t,e){return!!s&&(x(s).data[t]=e,!0)},this.updateSelectedItemData=function(t){return!!s&&(x(s).data=t,!0)},this.updateSelectedItemLabel=function(t){if(s){var e=x(s);return e.label=t,O(e._id_).children(".ogx_tree_item_label:first").html(t),!0}return!1},this.deleteItemByPath=function(t){var e=b(t);return!!e&&y(e.data("id"))},this.deleteSelectedItem=function(){return function(){if(s)return G(function(t,e,i,n){if(t._id_===s)return t.element.remove(),i.items.splice(n,1),p(i),!0});return!1}()},this.getSelectedItem=function(){return function(){if(s)return x(s);return!1}()},this.getTree=function(){var t=G(h,JSON.parse(JSON.stringify(f.tree)));if(t)return t},this.setData=function(t){t.hasOwnProperty("types")&&this.setTypes(t.types),t.hasOwnProperty("tree")&&this.setTree(t.tree)},this.setTypes=function(t){f.types=t},this.setTree=function(t){f.tree=t,f.tree.hasOwnProperty("state")||(f.tree.state="open"),w(),l()},this.newTree=function(){n=1,f.tree={_id_:n,type:"root",state:"open",label:f.root_label,element:null,items:[]},a()},this.filterTree=function(t){var a,s;a=t,s=[],function t(e,i,n,o){if(-1!==(i+e.label).indexOf(a)&&s.push(i+"/"+e.label),e.hasOwnProperty("items")&&e.items.length)for(var r=0;r<e.items.length;r++)t(e.items[r],i+"/"+e.label,e,r)}(f.tree,"")},this.destroy=function(){D(!1)},OGX.Data.merge(f,r),o.el=c=$(f.container),c.addClass("ogx_tree"),c.attr("data-ogx-id",o.id),w(),D(!0),f.tree&&l()},OGX.Tree.NAME="OgxTree",OGX.Tree.SELECT="TreeSelect",OGX.Tree.UNSELECT="TreeUnselect",OGX.Tree.OPEN="TreeOpen",OGX.Tree.CLOSE="TreeClose",OGX.Tree.DRAG="TreeDrag",OGX.Tree.DROP="TreeDrop",void 0===OGX)var OGX=function(){};if(require("TreedList","Uxi"),OGX.TreedList=function(t){construct(this,"TreedList");var o=this,e={renderer:"Tree",list:new OGX.List,types:null,group_by:null,group_mode:null,group_param:null},r=t,a=null,s=null;function i(){var t,e,i;switch(r.renderer){case"Tree":t={container:r.container,tree:void 0},r.types&&(t.types=r.types),t.tree=(function t(e,i){if(Array.isArray(e)){for(var n=0;n<e.length;n++)e[n].type="file";i.items=e}else for(var o in e)i.items.push({type:"folder",label:o,state:"open",items:[]}),t(e[o],i.items[i.items.length-1])}(a,i={type:"root",label:"root",state:"open",items:[]}),i),s=o.create("Tree",t);break;case"StackedTree":t={container:r.container};var n=(function t(e,i,n){if(Array.isArray(e)){for(var o=0;o<e.length;o++)e[o].hasOwnProperty("scope")||(e[o].scope=["public"]);i.items=e}else for(var r in e)n?(i.data.push({label:r,scope:["public"],items:[]}),t(e[r],i.data[i.data.length-1],!1)):(i.items.push({label:r,scope:["public"],items:[]}),t(e[r],i.items[i.items.length-1],!1))}(a,e={data:[]},!0),e);t.data=n.data,s=o.create("StackedTree",t)}s&&o.add(s)}function l(t,e,i,n){r.list=t,void 0!==e&&(r.group_by=e),void 0!==i&&(r.group_mode=i),void 0!==n&&(r.group_param=n),a=r.list.group(r.group_by,r.group_mode,r.group_param)}this._NAME_=OGX.TreedList.NAME,this.el=null,this.val=function(t,e,i,n){return void 0!==t&&l(t),a},this.getRenderer=function(){return s},this.getTree=function(){return a},void 0!==OGX.List?(r&&void 0!==r||(r={}),OGX.Data.merge(r,e),r.list.hasOwnProperty("insert")||(r.list=new OGX.List(r.list)),o.el=$(r.container),l(r.list),i()):console.log("%c CRITICAL ERROR - OGX.List not found! ","background:#222; color: #FF0000")},OGX.TreedList.NAME="OgxTreedList",void 0===OGX)var OGX={};OGX.Uxi=function(t){"use strict";this.sleeping=!1,this.blured=!0,this.floating=!1,this.nodes=new OGX.List,this.points={},this.observer=!1,void 0!==t&&t.hasOwnProperty("id")?this.id=t.id:this.id=(new Date).getTime()+""+Math.round(1e3*Math.random());var e=$(t.container);e.data("ogx-id")||e.attr("data-ogx-id",this.id)},OGX.Uxi.prototype.enable=function(){},OGX.Uxi.prototype.disable=function(){},OGX.Uxi.prototype.ux=function(){},OGX.Uxi.prototype.destroy=function(){},OGX.Uxi.prototype.resize=function(){},OGX.Uxi.prototype.show=function(){this.el.removeClass("ogx_uxi_hide")},OGX.Uxi.prototype.hide=function(){this.el.addClass("ogx_uxi_hide")},OGX.Uxi.prototype.observe=function(t,e,i,n){var o=this,r=this.el;if(void 0!==n&&(r=n),t){if(!this.observer)return void 0===e&&(e={childList:!0,subtree:!0}),this.observer=new MutationObserver(function(t,e){t.forEach(function(t){void 0!==i?i(t):o.el.trigger(OGX.View.CHANGED,t)})}),this.observer.observe(r[0],e),!0}else if(this.observer)return this.observer.disconnect(),!(this.observer=null);return!1},OGX.Uxi.prototype.blur=function(t){void 0===t&&(t=!0),this.blured||(this.blured=!0,this.ux(!1),this.disable(),t&&this.blurNodes())},OGX.Uxi.prototype.blurNodes=function(){var t=this.gather();if(t.length)for(var e in t)"function"==typeof t[e].blur&&t[e].blur(!1)},OGX.Uxi.prototype.focus=function(t){void 0===t&&(t=!0),this.blured&&(this.blured=!1,this.ux(!0),this.enable(),t&&this.focusNodes())},OGX.Uxi.prototype.focusNodes=function(){var t=this.gather();if(t.length)for(var e in t)"function"==typeof t[e].focus&&t[e].focus(!1)},OGX.Uxi.prototype.sleep=function(){this.sleeping||(this.blur(),this.sleeping=!0,this.__parent=this.el.parent(0),this.el=this.el.detach())},OGX.Uxi.prototype.wake=function(){this.sleeping&&(this.sleeping=!1,this.__parent.prepend(this.el),this.focus(),delete this.__parent)},OGX.Uxi.prototype.resizeNodes=function(){var t=this.gather();if(t.length)for(var e in t)t[e].resize()},OGX.Uxi.prototype._destroy_=function(){this.blur(),"function"==typeof this.destroy&&this.destroy(),"function"==typeof this.__destroy&&this.__destroy(),this.clear()},OGX.Uxi.prototype.reveal=function(t,e){var i=this.path(t,e);if(i){for(var n=0;n<i.length;n++)i[n].show();var o=i.pop();return o.floating?o.show():o.show(t,e),!0}},OGX.Uxi.prototype.path=function(a,s){var l=[],c=0;var t=function t(e,i){if(i&&(l.hasOwnProperty(i)||(l[i]=[]),l[i].push(e)),void 0!==e.nodes&&e.nodes.length){var n={id:{eq:s}};a&&(n._NAME_={eq:a});var o=e.nodes.get(n,null,1);if(o.length)return i;for(var r=0;r<e.nodes.length;r++)if(i||c++,o=t(e.nodes[r],c))return o}return!1}(this,0);if(t)return l[t].unshift(this),l[t]},OGX.Uxi.prototype.gather=function(t){var o=[],r={_NAME_:{eq:""}};return void 0!==t&&(r=Array.isArray(t)?{_NAME_:{regex:new RegExp(t.join("|"))}}:{_NAME_:{regex:new RegExp(t)}}),function t(e){if(void 0!==e&&void 0!==e.nodes&&e.nodes.length){var i=e.nodes.get(r);i.length&&(o=o.concat(i));for(var n=0;n<e.nodes.length;n++)void 0!==e.nodes[n]&&void 0!==e.nodes[n].nodes&&e.nodes[n].nodes.length&&(i=t(e.nodes[n]))&&i.length&&(o=o.concat(i[0]))}}(this),o},OGX.Uxi.prototype.find=function(r,a,s){return void 0===s&&(s=!1),function t(e){if(void 0!==e.nodes&&e.nodes.length){var i={id:{eq:a}};r&&(i._NAME_={eq:r});var n=e.nodes.get(i,null,1);if(n.length){if(s)switch(s){case"remove":return n[0].blur(),n[0]._destroy_(),e.nodes.findDelete(i,1)}return n[0]}for(var o=0;o<e.nodes.length;o++)if(n=t(e.nodes[o]))return n}return!1}(this)},OGX.Uxi.prototype.clear=function(){var n=[];!function t(e){if(e.nodes.length)for(var i=0;i<e.nodes.length;i++)e.nodes[i]&&(void 0!==e.nodes[i].nodes&&e.nodes[i].length?t(e.nodes[i]):n.unshift(e.nodes[i]))}(this);for(var t=0;t<n.length;t++)n[t].blur(),n[t].destroy(),n[t]._destroy_(),n[t].floating?n[t].el.remove():n[t].el.empty();return n=[],this.nodes=new OGX.List,!0},OGX.Uxi.prototype.add=function(t){this.nodes.insert(t)},OGX.Uxi.prototype.remove=function(t,e){return this.nodes.find(t,e,"remove")},OGX.Uxi.prototype.create=function(t,e){var i=OGX.Object.create(t,e);return this.add(i),this.blured||i.focus(),i},OGX.Uxi.prototype.parse=function(t){t=OGX.OML.parse(t),OGX.OML.render(this,t)},OGX.Uxi.prototype.construct=function(){},require("View","Uxi","Overlay","Touch"),OGX.View=function(e){construct(this,"View");var i=this,n=!1,o=!1,r=e;function a(){o.addClass("ogx_view"),r.css&&o.addClass(r.css),"#"===r.id.substr(0,1)&&o.attr("id",r.id.substr(1)),o.attr("data-ogx-id",r.id)}this.el=null,this._NAME_=OGX.View.NAME,this.id=r.id,this.enable=function(){r.observe&&this.observe(!0)},this.disable=function(){r.observe&&this.observe(!1)},this.container=function(){return o},this.scroller=function(){return n},this.observe=function(t){return observe(t)},this.render=function(t){void 0===t?r.hasOwnProperty("html")&&o.html(r.html):o.html(t)},this.__destroy=function(){r.scroll&&n.destroy()},function(){i.el=o=$(r.container);var t=new OGX.Display(e);r.html=t.html(e.data),r.scroll?(n=OGX.Object.create("Scroller",{container:r.container}),o.on(OGX.Scroller.READY,function(){o.off(OGX.Scroller.READY),o=n.container(),a(),i.render()})):(a(),i.render()),r.overlay&&i.addOverlay(r.overlay)}()},OGX.View.NAME="view",OGX.View.CHANGED="ViewChanged",require("Window","Uxi","Touch","Resize","Overlay"),OGX.Window=function(__config){construct(this,"Window");var that=this,container=!1,config_default={anim:!1,style:!1,resize:!1,drag:!1,overlay:!1,width:"100%",height:"100%",style:OGX.Window.STYLE_BACK,icons:[],title:"",win_html:'<div class="ogx_window ogx_hw {{$css}}" style="width:{{$w}}; height:{{$h}}; {{$zindex}}" data-ogx-id="{{$id}}"><div class="ogx_window_head ogx_window_head_{{$style}} ogx_window_head_{{$side}}">$INNER</div><div class="ogx_view ogx_window_body">{{$html}}</div></div>',win_inner:['<span class="ogx_window_main_{{$style}} ogx_window_main_icon"></span>','<span class="ogx_window_title">{{$title}}</span>','<span class="ogx_window_icons">{{loop $icons <span class="ogx_window_icon" style="background-image:url($icons.$)"></span>}}</span>'],html:!1,template:!1,zindex:!1,close_on_click_out:!0},config=__config,pt={x:null,y:null};function getTopIndex(){var i,n=0;return $(config.container).children(".ogx_popup, .ogx_window, .ogx_overlay").each(function(t,e){i=Number($(e).css("z-index")),n<i&&(n=i)}),n+1}function listenBackIcon(t){t?that.el.on("mousedown",".ogx_window_main_icon_back",onBack):that.el.off("mousedown",".ogx_window_main_icon_back",onBack)}function onBack(t){t.preventDefault(),t.stopImmediatePropagation(),that.hide()}function onDrag(t){(50<t.distX||50<t.distY)&&that.hide()}function onRelease(t){t.distX<-50?that.hide():t.distX&&(config.anim&&(that.el.addClass("ogx_window_anim_in"),that.el.on("transitionend",function(){that.el.off("transitionend"),that.el.removeClass("ogx_window_anim_in")})),that.el.css("transform","translate3d("+pt.x+", "+pt.y+", 0px)"))}function render(){var t=prepWindow();$(config.container).append(t),that.el=$(config.container).children('.ogx_window[data-ogx-id="'+config.id+'"]')}function onBody(t){that.status===OGX.Window.OPEN&&that.hide()}function listenBody(t){t?$(config.container).on(that.touch.down,onBody):$(config.container).off(that.touch.down,onBody)}function animWindow(t,e,i){void 0===e&&(e=config.anim);var n={opac:1,tX:0,tY:0},o=$(window).width(),r=$(window).height(),a=that.el.outerWidth(),s=that.el.outerHeight(),l=that.el.find(".ogx_window_main_icon:first");switch(t&&(placeWindow(!0),l.removeClass("ogx_window_main_icon_left ogx_window_main_icon_right ogx_window_main_icon_top")),e){case OGX.Window.ANIM_NONE:break;case OGX.Window.ANIM_TOP:t?(n.tY=0,l.addClass("ogx_window_main_icon_top")):n.tY=-s-10;break;case OGX.Window.ANIM_BOTTOM:t?(n.tY=r-s,l.addClass("ogx_window_main_icon_bottom")):n.tY=r+10;break;case OGX.Window.ANIM_RIGHT:t?(n.tX=o-a,l.addClass("ogx_window_main_icon_right")):n.tX=o+10;break;case OGX.Window.ANIM_LEFT:t?(n.tX=0,l.addClass("ogx_window_main_icon_left")):n.tX=-a-10}var c=100;t?(pt.x=n.tX,pt.y=n.tY):c=0,setTimeout(function(){that.el.on("transitionend",function(){that.el.off("transitionend"),t?that.el.removeClass("ogx_window_anim_in"):that.el.removeClass("ogx_window_anim_out"),void 0!==i&&i(),t?(that.status=OGX.Window.OPEN,that.el.trigger(OGX.Window.OPEN,config.id)):(that.status=OGX.Window.CLOSED,that.el.trigger(OGX.Window.CLOSED,config.id),__config.remove&&that.remove(that.id,"window"))}),t?(that.status=OGX.Window.OPENING,that.el.trigger(OGX.Window.OPENING,config.id)):(that.status=OGX.Window.CLOSING,that.el.trigger(OGX.Window.CLOSING,config.id)),config.anim!==OGX.Window.ANIM_NONE&&(t?that.el.addClass("ogx_window_anim_in"):that.el.addClass("ogx_window_anim_out")),that.el.css({transform:"translate3d("+n.tX+"px, "+n.tY+"px, 0px)",opacity:n.opac,visibility:"visible"})},c)}function placeWindow(t){var e=$(window).width(),i=$(window).height(),n=that.el.outerHeight(),o=that.el.outerWidth();that.el.removeClass("ogx_window_anim_in").removeClass("ogx_window_anim_out");var r={x:0,y:0};switch(config.anim){case OGX.Window.ANIM_TOP:r.y=t?-n:n;break;case OGX.Window.ANIM_BOTTOM:r.y=t?i:i-n;break;case OGX.Window.ANIM_RIGHT:r.x=t?e:-o;break;case OGX.Window.ANIM_LEFT:t&&(r.x=-o)}that.el.css({transform:"translate3d("+r.x+"px, "+r.y+"px, 0px)"})}function prepWindow(){var t={},e=new OGX.Display(config);t.w=config.width,t.h=config.height,t.style=config.style,t.title=config.title,t.css=config.css,t.icons=config.icons,t.html="",t.id=config.id,t.zindex="z-index:",config.zindex?t.zindex+=config.zindex:t.zindex+=getTopIndex(),t.zindex+=";",t.html=e.html();var i=config.win_html,n="";switch(config.anim){case OGX.Window.ANIM_RIGHT:case OGX.Window.ANIM_TOP:case OGX.Window.ANIM_BOTTOM:n=config.win_inner,t.side="right";break;case OGX.Window.ANIM_LEFT:n=config.win_inner.reverse(),t.side="left"}return n=n.toString().replace(/>,</g,"><"),i=i.replace("$INNER",n),OGX.Templater.templatize(t,i)}function onResize(){that.resizeNodes()}function updateOML(){OGX.OML.replaceDefaults(config,['.ogx_window[data-ogx-id="'+config.id+'"] .ogx_window_body'])}function initDefaults(){OGX.Data.merge(config,config_default,!1),-1!==config.style.indexOf(".")&&(config.style=eval(config.style)),-1!==config.anim.indexOf(".")&&(config.anim=eval(config.anim)),that.dragable=config.drag,that.resizable=config.resize}function init(){if(initDefaults(),render(),placeWindow(!0),config.drag){var t={},e={top:!1,bottom:!1,left:!1,right:!1,cb_resize:onResize};switch(t.cb_drag=onDrag,t.cb_up=onRelease,config.anim){case OGX.Window.ANIM_LEFT:t.x=!0,t.y=!1,t.limit_x={min:-300,max:0},e.right=!0;break;case OGX.Window.ANIM_RIGHT:t.x=!0,t.y=!1,t.limit_x={min:0,max:300},e.left=!0;break;case OGX.Window.ANIM_TOP:t.x=!1,t.y=!0,t.limit_y={min:0,max:300},e.bottom=!0;break;case OGX.Window.ANIM_BOTTOM:t.x=!1,t.y=!0,t.limit_y={min:0,max:300},e.top=!0}that.touch.drag.set(t)}config.resize&&that.setResize(e),updateOML()}this.el=null,this._NAME_=OGX.Window.NAME,this.id=config.id,this.dragable=null,this.resizeable=null,this.floating=!0,this.status=OGX.Window.CLOSED,this.enable=function(){config.close_on_click_out&&listenBody(!0),config.style&&listenBackIcon(!0),config.drag&&this.touch.enable(),config.resize&&this.enableResize()},this.disable=function(){config.close_on_click_out&&listenBody(!1),config.style&&listenBackIcon(!1),config.drag&&this.touch.disable(),config.resize&&this.disableResize()},this.show=function(t,e){this.focus(!0),this.front(),void 0===t&&(t=config.anim),animWindow(!0,t,e)},this.hide=function(t,e){this.blur(!0),void 0===t&&(t=config.anim),animWindow(!1,t,e),this.el.trigger(OGX.Window.CLOSING,config.id),this.el.trigger(OGX.Window.CLOSING+"_"+config.id,config.id)},this.front=function(){var t=getTopIndex();this.el.css("z-index",t)},this.place=function(){placeWindow(this.status===OGX.Window.CLOSED)},this.size=function(){var t=calcPos();this.el.css("width",t.w+"px"),this.el.css("height",t.h+"px")},this.destroy=function(){config.drag&&this.touch.disable(),config.style&&listenBackIcon(!1),config.close_on_click_out&&listenBody(!1)},init()},OGX.Window.NAME="window",OGX.Window.READY="WindowReady",OGX.Window.ANIM_LEFT="WindowAnimLeft",OGX.Window.ANIM_RIGHT="WindowAnimRight",OGX.Window.ANIM_TOP="WindowAnimTop",OGX.Window.ANIM_BOTTOM="WindowAnimBottom",OGX.Window.ANIM_NONE="WindowAnimNone",OGX.Window.STYLE_BACK="icon_back",OGX.Window.STYLE_CLOSE="icon_close",OGX.Window.STYLE_NONE="none",OGX.Window.CLOSING="WindowClosing",OGX.Window.CLOSED="WindowClosed",OGX.Window.OPENING="WindowOpening",OGX.Window.OPEN="WindowOpen",OGX.Window.HIT_ICON="WindowHitIcon";