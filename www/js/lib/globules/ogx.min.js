/* globules.io OGX.JS 1.25.0.76 */ 
window.console||(window.console={});for(var methods=["log","debug","warn","info"],i=0;i<methods.length;i++)console[methods[i]]=function(){};if(void 0===OGX)var OGX={};if(OGX.Data={},OGX.Data.weld=function(t,e,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1);var a=t;return i&&(a=JSON.parse(JSON.stringify(t))),function t(e,i){for(var a in i)!e.hasOwnProperty(a)||r?e[a]=i[a]:"object"==typeof i[a]&&t(e[a],i[a])}(a,e),a},OGX.Data.merge=function(t,e,r,i,a){for(var s in void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===a&&(a=!1),i&&(t=JSON.parse(JSON.stringify(t))),e)r?a?t.hasOwnProperty(s)&&(t[s]=e[s]):t[s]=e[s]:t.hasOwnProperty(s)||a||(t[s]=e[s]);return t},OGX.Data.diff=function(t,e,r){void 0===r&&(r=!1);var i={},a=!1;for(var s in e)(!r&&!t.hasOwnProperty(s)||r&&t.hasOwnProperty(s)&&t[s]!==e[s])&&(i[s]=e[s],a=!0);return!!a&&i},OGX.Data.props=function(t,e){for(var r in e)if(!t.hasOwnProperty(e[r]))return!1;return!0},OGX.Data.clone=function(t){return JSON.parse(JSON.stringify(t))},OGX.Data.isOML=function(t){for(var e in t)if(-1!==e.indexOf(":"))return!0;return!1},OGX.Data.stringToVal=function(t){if("string"!=typeof t)return t;var e=-1;return"true"===t&&(e=!0),"false"===t&&(e=!1),-1!==e?e:t.match(/^([0-9]+(\.[0-9]+)?)$/g)?Number(t):t.match(/^(\[|{)/g)?JSON.parse(t):t},OGX.Data.pad=function(t,e,r,i){void 0===i&&(i="0"),void 0===r&&(r=-1);for(var a=String(t);a.length<e;)-1===r?a=i+a:a+=i;return a},OGX.Data.addDec=function(t){return parseFloat(Math.round(100*t)/100).toFixed(2)},OGX.Data.isInt=function(t){return Number(t)===t&&t%1==0},OGX.Data.isFloat=function(t){return Number(t)===t&&t%1!=0},OGX.Data.dateToLocale=function(t,e){return"string"==typeof t&&(t=new Date(t+" ")),void 0===e&&(e={}),OGX.Data.merge(e,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),t.toLocaleDateString(navigator.language,e)},OGX.Data.eval=function(__obj,__path,__value){void 0===__value&&(__value=null);var str="__obj."+__path,res;__value&&(str+=" = "+JSON.stringify(__value));try{res=eval(str)}catch(t){}return res},OGX.Data.getBestSize=function(t,e,r,i){if(void 0===r&&(r=10),void 0===i&&(i=200),"string"==typeof e){if(-1!==e.indexOf("|")){var a=e.substr(e.length-1,1);["+","-"].includes(a)?e=e.substr(0,e.length-1):a="+",a="+"===a?1:-1;for(var s,n=e.split("|"),o=new OGX.List,f=0;f<n.length;f++)-1!==(s=n[f]).indexOf("px")&&(s=s.replace("px","")),-1!==s.indexOf("%")&&(s=Math.round(Number(s.split("%")[0])*t/100)),s<=t&&o.insert({m:t-s,s:n[f],n:s});return o.order("m",a),"100%"===o[0].s&&o.length>1&&o[1].m<i?o[1].s:o[0].s}(m=/(\d+)(%|px)?/gi.exec(e))&&("%"===m[2].trim()?e=Math.round(Number(m[1])*t/100):("px"===m[2].trim()&&(e=m[1]),e=Number(e)))}return e},OGX.Data.same=function(t,e,r){void 0===r&&(r=!0);var i,a=0,s=0;for(i in t)a++;for(i in e)s++;if(a!==s)return!1;if(typeof t!=typeof e)return!1;if(!["object","array"].includes(typeof t))return t===e;return function t(e,a){for(i in e){if(typeof e[i]!=typeof a[i])return!1;if(r&&"object"==typeof e[i]&&a.hasOwnProperty(i)){if(!t(e[i],a[i]))return!1}else if("array"==typeof e[i]){if(e[i].length!==a[i].length)return!1;if(e[i].sort(),a[i].sort(),r){for(var s=0;s<e[i].length;s++)if(!t(e[i][s],a[i][s]))return!1}else if(JSON.parse(JSON.stringify(e[i]))!==JSON.parse(JSON.stringify(__b[i])))return!1}else if(e[i]!==a[i])return!1}return!0}(t,e)},OGX.Data.clipboard=function(t){if(void 0!==t)if(void 0!==navigator.clipboard)navigator.clipboard.writeText(t);else{var e=document.createElement("textarea");e.value=t,e.style.top="-1000px",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.trigger("focus"),e.select();try{document.execCommand("copy")}catch(t){}document.body.removeChild(e)}},void 0===OGX)var OGX={};OGX.List=function(){var filteringMode="and",filterCount=0,indexes=!1;1===arguments.length&&arguments[0]instanceof Array&&(arguments=arguments[0]);var array=Object.create(Array.prototype);for(var method in array=Array.apply(array,arguments)||array,OGX.List.prototype)OGX.List.prototype.hasOwnProperty(method)&&(array[method]=OGX.List.prototype[method]);function doEval(t,e){return new Function("try{return eval("+t+");}catch(error){}")(e)}function addToCache(t){var e;for(var r in indexes){if(-1!==r.indexOf("|")){r=r.split("|"),e=[];for(var i=0;i<r.length;i++)t.hasOwnProperty(r[i])&&e.push(t[r[i]]);e=e.join("|"),r=r.join("|")}else t.hasOwnProperty(r)&&(e=t[r]);indexes.hasOwnProperty(r)||(indexes[r]={}),indexes[r][e]=t}}function matchesCache(t){var e,r=[],i=[];for(var a in indexes){e=!0,r=-1!==a.indexOf("|")?a.split("|"):[a];for(var s=0;s<r.length;s++)if(!t.hasOwnProperty(r[s])){e=!1;break}e&&i.push(a)}return!!i.length&&i}function dynamicSort(__prop,__way){return function(a,b){return eval("a."+__prop)<eval("b."+__prop)?-1*__way:eval("a."+__prop)>eval("b."+__prop)?__way:0}}function extract(__item,__by,__mode,__param){var data;try{data=eval("__item."+__by)}catch(t){}if(data)switch(__mode){case"substr":return data=data.substr(__param[0],__param[1]),data;case"numrange":return data=Number(data),Array.isArray(__param)?(data=Math.floor(data/__param[0]),data="pre"===__param[2]?__param[1]+data*__param[0]+" - "+__param[1]+(data+1)*__param[0]:data*__param[0]+__param[1]+" - "+(data+1)*__param[0]+__param[1]):(data=Math.floor(data/__param),data=data*__param+" - "+(data+1)*__param),data;case"date":if(!Array.isArray(__param)){if("year"===__param)return data=data.substr(0,4),data;if("month"===__param)return data=data.substr(0,7),data;if("week"===__param)return data=data.substr(0,4)+" week "+moment(data).week(),data}return data=moment(data).unix(),data=Math.floor(data/(60*__param[0]*60*24)),data*=60*__param[0]*60*24,data=moment(1e3*data).format(__param[1])+" - "+moment(1e3*data+1e3*__param[0]*60*60*24).format(__param[1]),data;default:return data}return!1}return array.insert=function(t,e){return void 0===e?array.push(t):array.splice(e,0,t),indexes&&addToCache(t),!0},array.delete=function(t){var e=this,r=array.splice(t,1);if(r.length){if(indexes){var i=matchesCache(r[0]);i&&setTimeout((function(){e.rebuild(i)}),0)}return r[0]}return!1},array.last=function(){if(this.length)return this[this.length-1]},array.findDelete=function(__property,__value,__limit){var t=0;void 0===__limit&&(__limit=0);for(var removed=new OGX.List,ev,prop,i=0;i<this.length;i++){prop=null,ev="this["+i+"]."+__property;try{prop=eval(ev)}catch(t){}if(null==prop);else if(prop===__value){if(removed.push(this.splice(i,1)[0]),indexes){var idxs=matchesCache(removed.last());idxs&&this.rebuild(idxs)}if(t++,__limit>0&&__limit===t)return 1===__limit?removed[0]:removed;i--}}return removed},array.findReplace=function(__property,__value,__object,__limit){var t=0;void 0===__limit&&(__limit=0);for(var replaced=new OGX.List,ev,prop,i=0;i<this.length;i++){prop=null,ev="this["+i+"]."+__property;try{prop=eval(ev)}catch(t){}if(null==prop);else if(prop===__value&&(replaced.push(this[i]),t++,this[i]=__object,__limit>0&&__limit===t))return 1===__limit?replaced[0]:replaced}return!!replaced.length&&replaced},array.findUpdate=function(__property,__value,__object,__strict,__limit){var t=0;void 0===__strict&&(__strict=!1),void 0===__limit&&(__limit=0);for(var updated=new OGX.List,upd,ev,prop,i=0;i<this.length;i++){prop=null,ev="this["+i+"]."+__property;try{prop=eval(ev)}catch(t){}if(null==prop);else if(prop===__value){for(var a in upd=!1,__object)__strict?this[i].hasOwnProperty(a)&&(this[i][a]=__object[a],upd=!0):(this[i][a]=__object[a],upd=!0);if(upd&&(t++,updated.push(this[i]),__limit>0&&__limit===t))return 1===__limit?updated[0]:updated}}return!!updated.length&&updated},array.findIndex=function(__property,__value){var isReg=!1,ev,prop;__value instanceof RegExp&&(isReg=!0);for(var i=0;i<this.length;i++){prop=null,ev="this["+i+"]."+__property;try{prop=eval(ev)}catch(t){}if(null!==prop)if(isReg){if(prop.match(__value))return{index:i}}else if(prop===__value)return{index:i}}return!1},array.find=function(t,e,r){var i=0,a=new OGX.List,s=!1;e instanceof RegExp&&(s=!0),void 0===r&&(r=0);for(var n=0;n<this.length;n++)if(s?this[n][t].match(e)&&(a.push(this[n]),i++):this[n][t]===e&&(a.push(this[n]),i++),r>0&&i===r)return 1===r?a[0]:a;return!!a.length&&a},array.swap=function(t,e){var r=this[t];this[t]=this[e],this[e]=r},array.cache=function(){indexes||(indexes={});var t=[],e=[];if(arguments.length>1){for(var r=0;r<arguments.length;r++)t.push(arguments[r]);t=t.join("|")}else t=arguments[0];indexes.hasOwnProperty(t)||(indexes[t]={});for(var i=0;i<this.length;i++){e=[];for(r=0;r<arguments.length;r++)e.push(this[i][arguments[r]]);e=e.join("|"),indexes[t].hasOwnProperty(e)||(indexes[t][e]=[]),indexes[t][e].push(this[i])}return!0},array.uncache=function(t){if(!indexes)return!1;var e=t;return arguments.length>1&&(e=arguments.join("|")),!!indexes.hasOwnProperty(e)&&(delete indexes[e],!0)},array.deleteProperty=function(t){for(var e=0,r=0;r<this.length;r++)this[r].hasOwnProperty(t)&&(delete this[r][t],e++);return indexes&&this.rebuild(),e},array.rebuild=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)delete indexes[t[e]],this.cache(t[e]);else if(indexes)for(var r in indexes)delete indexes[r],this.cache.apply(this,r.split("|"))},array.read=function(t,e,r){var i,a,s=arguments;if(!indexes)return!1;if(!s.length)return indexes;if("object"==typeof t){for(var n in r=s[1],i=[],a=[],t)i.push(n),a.push(t[n]);i=i.join("|"),a=a.join("|")}else i=t,a=e;return void 0===r&&(r=0),!(!indexes.hasOwnProperty(i)||!indexes[i].hasOwnProperty(a))&&(r?r>1?indexes[i][a].splice(0,r):indexes[i][a][0]:indexes[i][a])},array.clear=function(){indexes=!1,filterCount=0,this.length=0},array.unique=function(__prop,__as_object,__new_props){void 0===__as_object&&(__as_object=!0),void 0===__new_props?__new_props=[__prop]:Array.isArray(__new_props)||(__new_props=[__new_props]);var q={};q[__prop]={regex:/(.){1,}/};for(var l=this.get(),ar=[],final=new OGX.List,o,ev,i=0;i<l.length;i++){ev=null;try{ev=eval("l[i]."+__prop)}catch(t){}if(ev&&!ar.includes(ev)&&(ar.push(ev),__as_object)){o={};for(var j=0;j<__new_props.length;j++)o[__new_props[j]]=ev;final.push(o)}}return __as_object?final:ar},array.order=function(t,e){array.sort(dynamicSort(t,e))},array.group=function(t,e,r){if(Array.isArray(t))return array.groupm(t,e,r);for(var i,a={},s=0;s<this.length;s++)(i=extract(this[s],t,e,r))&&(i=i.split(".").pop(),a.hasOwnProperty(i)||(a[i]=new OGX.List),a[i].push(this[s]));return a},array.groupm=function(t,e,r){return function i(a,s){var n=new OGX.List(a),o=e,f=r;void 0!==e&&Array.isArray(e)&&(o=e[s]),void 0!==r&&Array.isArray(r)&&(f=r[s]);var l=n.group(t[s],o,f);if(s+1<=t.length-1)for(var h in l)l[h]=i(l[h],s+1);return l}(this,0)},array.filters={},array.addFilter=function(t,e,r){this.filters.hasOwnProperty(t)||(this.filters[t]=[]);var i={};return i[e]=r,this.filters[t].push(i),filterCount++,!0},array.removeFilter=function(t){return!!this.filters.hasOwnProperty(t)&&(filterCount-=this.filters[t].length,delete this.filters[t],!0)},array.getFilters=function(){return this.filters},array.resetFilters=function(){this.filters={},filterCount=0},array.setFilters=function(t){for(var e in this.resetFilters(),t)for(var r=0;r<t[e].length;r++)for(var i in t[e][r])array.addFilter(e,i,t[e][r][i])},array.setFilteringMode=function(t){filterMode=t},array.get=function(t,e,r,i,a){void 0===e&&(e=!1),void 0===r&&(r=!1),"number"==typeof r&&(i=r,r=!1),void 0===i&&(i=0),void 0===a&&(a=!1);var s=this.getFilters();for(var n in this.resetFilters(),t)for(var o in t[n])this.addFilter(n,o,t[n][o]);var f=this.filter(i,a);if(this.resetFilters(),this.setFilters(s),a)return f;if(1===i)return!!f.length&&f[0];if(e)for(var n in e){f.order(n,e[n]);break}return r?(!Array.isArray(r)&&(r=[r]),f.group.apply(f,r)):f},array.unset=function(t,e){void 0===e&&(e=0);var r=new OGX.List,i=this.get(t,null,null,e,!0);if(i)for(var a=0;a<i.length;a++)r.push(this.delete(i[a]-r.length));return 1===e&&r.length?r[0]:r},array.update=function(__filterobj,__updateobj,__strict,__limit){void 0===__strict&&(__strict=!1),void 0===__limit&&(__limit=0);var filtered=this.get(__filterobj,null,__limit);if(filtered&&(Array.isArray(filtered)||(filtered=[itinerary]),filtered.length)){for(var affected_indexes=[],idx,ev,i=0;i<filtered.length;i++)for(var a in __updateobj)ev=doEval("__o."+a,filtered[i]),__strict&&void 0===ev||(eval("filtered[i]."+a+"=__updateobj[a]"),idx=matchesCache(filtered[i]),idx&&-1===affected_indexes.indexOf(idx)&&affected_indexes.push(idx));return indexes&&affected_indexes.length&&setTimeout((function(){that.rebuild(affected_indexes)}),0),filtered}return[]},array.filter=function(__limit,__as_position){void 0===__limit&&(__limit=0),void 0===__as_position&&(__as_position=!1);for(var ar=[],positions=[],isDate,isString,isNum,isArray,isObject,hasFilters=!1,reg=/[0-9]{4}\-[0-9]{2}\-[0-9]{2}( [0-9]{2}\:[0-9]{2}\:[0-9]{2})?/g,isMatch=!1,matches=0,str,o,err,counter,total,i=0;i<this.length;i++)for(var a in isMatch=!0,matches=0,this.filters){err=!1,hasFilters=!0;try{o=null,str="this["+i+"]."+a,o=eval(str)}catch(t){err=!0}if(err||void 0===o)isMatch=!1;else{isDate=!1,isString=!1,isNum=!1,isArray=Array.isArray(o),isObject=!isArray&&"object"==typeof o,isArray?"string"==typeof o[0]?(isString=!0,o[0].match(reg)&&(isDate=!0)):isNum="number"==typeof o[0]:"string"==typeof o?(isString=!0,o.match(reg)&&(isDate=!0)):isNum="number"==typeof o;for(var j=0;j<this.filters[a].length;j++)for(var b in this.filters[a][j]){if(String(this.filters[a][j][b]).length)if("function"===b)isMatch=this.filters[a][j][b](o),isMatch&&matches++;else switch(b){case"eq":if(isDate){if("string"!=typeof this.filters[a][j][b]||!this.filters[a][j][b].match(reg)){isMatch=!1;break}moment(o).format("YYYY-MM-DD")!==moment(this.filters[a][j][b]).format("YYYY-MM-DD")?isMatch=!1:matches++}else if(isString){if("string"!=typeof this.filters[a][j][b]){isMatch=!1;break}o.toLowerCase()!==String(this.filters[a][j][b]).toLowerCase()?isMatch=!1:matches++}else o!==this.filters[a][j][b]?isMatch=!1:matches++;break;case"eqjson":JSON.stringify(o)!==JSON.stringify(this.filters[a][j][b])?isMatch=!1:matches++;break;case"neq":if(isDate){if("string"!=typeof this.filters[a][j][b]||!this.filters[a][j][b].match(reg)){isMatch=!0,matches++;break}moment(o).format("YYYY-MM-DD")===moment(this.filters[a][j][b]).format("YYYY-MM-DD")?isMatch=!1:matches++}else if(isString){if("string"!=typeof this.filters[a][j][b]){isMatch=!0,matches++;break}o.toLowerCase()===this.filters[a][j][b].toLowerCase()?isMatch=!1:matches++}else o===this.filters[a][j][b]?isMatch=!1:matches++;break;case"in":if((isString||isNum)&&Array.isArray(this.filters[a][j][b])){isMatch=!1;for(var k=0;k<this.filters[a][j][b].length;k++)if(isString){if(-1!==o.indexOf(this.filters[a][j][b][k])){isMatch=!0;break}}else if(isNum&&o===this.filters[a][j][b][k]){isMatch=!0;break}isMatch&&matches++}else if(isString||isNum)isArray?isString&&-1===o.indexOf(this.filters[a][j][b])||isNum&&o!==this.filters[a][j][b]?isMatch=!1:matches++:isString&&-1===o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())||isNum&&o!==this.filters[a][j][b]?isMatch=!1:matches++;else if(isArray)-1===o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++;else if(isObject){for(var p in counter=0,total=0,this.filters[a][j][b])total++,o.hasOwnProperty(p)&&-1!==String(o[p]).toLocaleLowerCase().indexOf(String(this.filters[a][j][b][p]).toLowerCase())&&counter++;isMatch=total===counter,isMatch&&matches++}break;case"nin":if(Array.isArray(this.filters[a][j][b])){for(var k=0;k<this.filters[a][j][b].length;k++)if(isString){if(-1!==o.indexOf(this.filters[a][j][b][k])){isMatch=!1;break}}else if(isNum&&o===this.filters[a][j][b][k]){isMatch=!1;break}isMatch&&matches++}else isString&&"string"==typeof this.filters[a][j][b]?-1!==o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())&&(isMatch=!1):isNum?o===this.filters[a][j][b]&&(isMatch=!1):-1!==o.indexOf(this.filters[a][j][b])&&(isMatch=!1),isMatch&&matches++;break;case"gt":if(isDate){if("string"!=typeof this.filters[a][j][b]||!this.filters[a][j][b].match(reg)){isMatch=!1;break}moment(o).unix()<=moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++}else{if("number"!=typeof this.filters[a][j][b]){isMatch=!1;break}o<=this.filters[a][j][b]?isMatch=!1:matches++}break;case"gte":if(isDate){if("string"!=typeof this.filters[a][j][b]||!this.filters[a][j][b].match(reg)){isMatch=!1;break}moment(o).unix()<moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++}else{if("number"!=typeof this.filters[a][j][b]){isMatch=!1;break}o<this.filters[a][j][b]?isMatch=!1:matches++}break;case"lt":if(isDate){if("string"!=typeof this.filters[a][j][b]||!this.filters[a][j][b].match(reg)){isMatch=!1;break}moment(o).unix()>=moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++}else{if("number"!=typeof this.filters[a][j][b]){isMatch=!1;break}o>=this.filters[a][j][b]?isMatch=!1:matches++}break;case"lte":if(isDate){if("string"!=typeof this.filters[a][j][b]||!this.filters[a][j][b].match(reg)){isMatch=!1;break}moment(o).unix()>moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++}else{if("number"!=typeof this.filters[a][j][b]){isMatch=!1;break}o>this.filters[a][j][b]?isMatch=!1:matches++}break;case"btw":if(isDate){if("string"!=typeof this.filters[a][j][b]||!this.filters[a][j][b].match(reg)){isMatch=!1;break}moment(this.filters[a][j][b][0]).unix()>moment(o).unix()||moment(this.filters[a][j][b][1]).unix()<moment(o).unix()?isMatch=!1:matches++}else{if("number"!=typeof this.filters[a][j][b]){isMatch=!1;break}this.filters[a][j][b][0]>o||this.filters[a][j][b][1]<o?isMatch=!1:matches++}break;case"substr":o.toLowerCase().substr(this.filters[a][j][b][0],this.filters[a][j][b][1]).toLowerCase()!==this.filters[a][j][b][2].toLowerCase()?isMatch=!1:matches++;break;case"regex":o.toString().match(this.filters[a][j][b])?matches++:isMatch=!1}else matches++;if(!isMatch)break}}if("or"===filteringMode?isMatch&&(ar.push(this[i]),positions.push(i)):matches===filterCount&&(ar.push(this[i]),positions.push(i)),__limit&&ar.length===__limit)return __as_position?positions:OGX.List.apply(null,ar)}return __as_position?positions:hasFilters?OGX.List.apply(null,ar):array},array},OGX.Object=function(){"use strict";var t=new OGX.List,e=new OGX.List;function r(t){for(var e=t.split("."),r=OGX,i=0;i<e.length;i++)void 0!==r[e[i]]&&(r=r[e[i]]);return r}e.cache("_NAME_","id"),this.isRegistered=function(t,e){return typeof("undefined"!==this.register[t][e])},this.getExtend=function(e){var r=t.get({main:{eq:e}},null,1);return!!r&&r.extends},this.getExtends=function(e){var r=[],i=t.get({main:{eq:e}},null,1);if(i){var a;r=r.concat(i.extends);for(var s=0;s<i.extends.length;s++)(a=this.getExtends(i.extends[s]))&&(r=r.concat(a))}var n=[];for(s=0;s<r.length;s++)n.includes(r[s])||n.push(r[s]);return n},this.register=function(){var e=Array.prototype.slice.call(arguments),r=e.shift();t.push({main:r,extends:e})},this.create=function(t,i){void 0===i&&(i={});var a=this.getExtends(t),s=!1,n=null,o=null;if(a.length){var f,l,h=r(t);h.prototype=Object.create({}),(f=[]).push(h.prototype);for(var u=0;u<a.length;u++)void 0!==(l=r(a[u]))&&f.push(l.prototype);Object.assign.apply(null,f),h.prototype.constructor=h,a.includes("View")||a.includes("Controller")||a.includes("Stage")?(o=(f=t.split(".")).pop(),n=f.join(".").slice(0,-1)):n=t,s=new h(i)}else OGX.hasOwnProperty(t)&&(s=new OGX[t](i));return o?(s._CLASS_=o,s._NAME_=n):s._NAME_=t,OGX.hasOwnProperty(t)&&OGX[t].hasOwnProperty("FLOAT")&&OGX[t].FLOAT&&(s.floating=!0),!!s&&(e.insert(s),s)},this.cache=function(t){if(void 0===t)return e;e.insert(t)},this.uncache=function(t){e.findDelete("id",t.id)},this.get=function(t,r,i){return e.get(t,r,i)},this.destroy=function(t,r){void 0===r&&(r=!0),t.blur(),"function"==typeof t.destroy&&t.destroy(),"function"==typeof t.__destroy&&t.__destroy(),r&&t.clear(),t.el&&t.el.remove(),t.parent&&t.parent.nodes.findDelete("id",t.id,1),e.findDelete("id",t.id,1)}},"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a)for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},writable:!0,configurable:!0});if(void 0===OGX)var OGX={};function require(){OGX.Object.register.apply(null,arguments)}function construct(__that,__cls){var ext=OGX.Object.getExtend(__cls);for(var a in ext)eval("OGX."+ext[a]).call(__that,arguments.callee.caller.arguments[0])}OGX.Object=new OGX.Object;if(OGX.OML=function(e,t){"use strict";var n=e,i=t,o=!1,r=null,a={},s={},d=new OGX.List;function l(){o=!0}function u(e,t){var n,i,o=[];for(var r in t)if(n=/^(\S*)\:Bind$/g.exec(r))if(i=-1!==n[1].indexOf(",")?n[1].split(","):n[1],Array.isArray(t[r]))for(var a=0;a<t[r].length;a++)t[r][a].property=i,o.push({uxi:e,config:t[r][a]});else t[r].property=i,o.push({uxi:e,config:t[r]});return o}function c(e){setTimeout((function(){g(e.config),e.uxi.bind(e.config)}),0)}function p(e){return e.hasOwnProperty("node:OML")||e.hasOwnProperty("instance")&&e.instance||e.hasOwnProperty("scroll")&&e.scroll}function f(e,t){if("string"==typeof t["node:OML"])t["node:OML"]=h(t["node:OML"]);else if(Array.isArray(t["node:OML"]))for(var n=0;n<t["node:OML"].length;n++)"string"==typeof t["node:OML"][n]&&(t["node:OML"][n]=h(t["node:OML"][n]));return e.__proto__.hasOwnProperty("placeholder")&&e.placeholder(t),t}function h(e){return 0===e.indexOf("{{")&&-1===e.indexOf("$")?OGX.OSE.exec(e):OGX.Data.clone(OGX.Cache.read("oml",e))}function g(e,t,n){var o,r=0;return function e(d){if(!(Array.isArray(d)||"object"!=typeof d||r>=i)){var l=!1;for(var u in d)-1!==u.indexOf(":OSE")?(d[o=u.split(":").shift()]=OGX.OSE.exec(d[u],t,a,n,s),delete d[u],l||(l=!0,r++),e(d[o])):-1!==u.indexOf(":")||"object"!=typeof d[u]||Array.isArray(d[u])||d[u]instanceof HTMLElement||d[u]instanceof jQuery||(l||(l=!0,r++),e(d[u]))}}(e),e}function O(e,t){switch(e){case"scope":return OGX.Scope.fork(t);default:return OGX.OSE.fork(e,t)}}this.get=function(e){return OGX.Cache.read("oml",e)},this.make=function(e,t,n){var i={};return i[e+":"+t]=n,i},this.parse=function(e){return"string"==typeof e&&("{"!==e.substr(0,1)&&(e="{"+e+"}"),e=JSON.parse(e)),e},this.rename=function(e,t,n){function i(e,t,n){var i={};for(var o in e)i[o.replace(t,n)]=e[o];return i}void 0===n&&(n="default"),Array.isArray(n)||(n=[n],t=[t]);for(var o=0;o<n.length;o++)e=i(e,n[o],t[o]);return e},this.result=function(e,t){if(void 0===t){var n=d.findDelete("id",e,1);return!!n&&n.result}d.insert({id:e,result:t})},this.getNodeById=function(e,t){return function e(n){var i;for(var o in n){if(n[o].hasOwnProperty("id")&&n[o].id===t)return n[o];if(n[o].hasOwnProperty("node:OML"))if(Array.isArray(n[o]["node:OML"])){for(var r=0;r<n[o]["node:OML"].length;r++)if(i=e(n[o]["node:OML"][r]))return i}else if(i=e(n[o]["node:OML"]))return i}return!1}(e)},this.replaceDataRecursive=function(e,t,n){function i(e){var a,s;for(var d in e)if(-1!==d.indexOf(":OSE"))a=d.split(":"),(s=r(e[d],t,n))&&(e[a[0]]=s,delete e[d],i(e[a[0]]));else if("node:OML"===d)if("string"==typeof e[d]&&0===e[d].indexOf("{{"))e[d]=OGX.OSE.exec(e[d]),o(e[d]);else if(Array.isArray(e[d]))for(var l=0;l<e[d].length;l++)o(e[d][l]);else o(e[d])}function o(e){var o;for(var a in e)-1!==a.indexOf("{{")&&(o=r(a,t,n))&&(e[o]=e[a],delete e[a],a=o),i(e[a])}function r(e,t,n){var i,o,r=/{{([\S ]+)}}/gi;for(n&&(a[n]=t);i=r.exec(e);){if(o=OGX.OSE.exec(i[0],t,a),-1!==["string","number"].indexOf(typeof o))e=e.replace(i[0],o);else if(-1!==["boolean","object"].indexOf(typeof o))return o;r.lastIndex=0}return e}o(e)},this.render=function(e,t,i,a,s){t=(t=f(e,{"node:OML":t}))["node:OML"],void 0===s&&(s=!1),n&&(o=!1,r&&clearTimeout(r),r=setTimeout(l,n)),function(e,t,n,i,r){var a=[],s=((new Date).getTime(),[]);function d(e,t,l){if(!o)if(void 0===l&&(l=!0),!t.enabled&&(l=!1),Array.isArray(e))for(var c=0;c<e.length;c++)d(e[c],t,l);else{var m,v,w,y,x,_,b,G,X,M,P,S,L,A,C,E,k;if(!r)for(G in e)-1!==G.indexOf(":Point")&&(m=G.split(":")[0],/^(#|\.)/gi.test(m)?(e[G].el=m,e[G].mode=0):(e[G].el=null,e[G].mode=1,e[G].id=m),e[G].parent=t,e[G].data=n,e[G].route_data=i,b=OGX.Object.create("Point",e[G]),t.add(b),b.parent=t,b.focus(),d(b.oml(),b,l),delete e[G]);for(G in e)if((L=/((?!:)[\S ]+):(\S+)/gi.exec(G))&&(m=L[1],void 0!==(v=w=L[2])&&(-1!==m.indexOf("{{")&&"object"==typeof e[G]["data:OML"]&&(m=OGX.Templater.make(m,e[G]["data:OML"]),delete e[G]["data:OML"]),"string"==typeof e[G]&&0===e[G].indexOf("{{")&&(e[G]=h(e[G])),-1===["Route","OML"].indexOf(v)))){switch(w.indexOf(".")>0&&(w=w.substr(0,w.indexOf(".")-1)),_=e[G],e[G].hasOwnProperty("node:OML")&&(e[G]=f(e,e[G])),x=!0,y=!0,A=!1,E=!1,w){case"Function":return y=!1,_.parent=t,_.fnc=m,_=g(_,n,i),void OGX.Fonction(_,n,i);case"Uxi":return void e[G].attach(t,m);case"Fork":(S=O(m,e[G]))&&d(S,t,l),y=!1,x=!1;break;case"Html":_.el=m,_.html=e[G].html,(y=p(_))||(_.template=!1);break;case"Template":_.template=v.split(".")[1],_.el=m,y=p(_),v="Html";break;case"Ghost":_.el=m;break;case"Controller":_.id=m,E=!0;break;case"Scroller":k=$(m),_.el=m,_.content=k.html(),k.empty();break;default:-1!==[".","#"].indexOf(m.substr(0,1))?_.el=m:(_.id=m,_.el=t.el[0],_.parent=t)}x&&(_=g(_,n,i)),X=!1,M=!1,y?(r&&_.hasOwnProperty("id")&&(P=r.find("id",_.id.replace(/^#/gi,""),1))&&(M=!0),M?(P.wake(_.el),b=P):b=OGX.Object.create(v,_),t.add(b),X=b):A?(A.blur(),$(m).html(C),A.el=$(m),t.add(A),setTimeout((function(){!t.blured&&l&&A.focus()}),0)):(X=t,"Html"===v&&OGX.HtmlRender(_)),X&&e[G].hasOwnProperty("node:OML")&&!A&&!M&&d(e[G]["node:OML"],X,l),y&&(b.parent=t,"function"==typeof b.construct&&(M||(E?s.push({object:b,data:[i]}):b.construct.apply(b,[i])))),b&&!E&&(y||M)&&!t.blured&&l&&b.enabled&&(b.floating||b.focus()),void 0!==b&&b&&!E&&(a=a.concat(u(b,e[G])))}}}d(t,e),a.length&&function(e){for(var t=0;t<e.length;t++)c(e[t])}(a);!function(e){for(var t=0;t<e.length;t++)e[t].object.construct.apply(e[t].object,e[t].data),e[t].object.enabled&&e[t].object.focus()}(s)}(e,t,i,a,s)}},void 0===OGX)var OGX={};OGX.Stages={},OGX.Views={},OGX.Controllers={},require("Core","Uxi","Touch"),OGX.Core=function(e){construct(this,"Core");var t,n=this,i=OGX.Data.merge(e,{encrypted:!1,exportable:!1,max_render_time:300,max_depth:2,disable_context:!1,unique:!1}),o={jwt:!0,scope:["public"],routing:{},stages:{blured:!0,use:!1,closeable:!1,anim:!1},overlays:{delay:200,anim:"fade"},popups:{blured:!1,sleeping:!1},theater:!1,observe:!1,auto_exit:!1,chromeos:!1},r=!1,a=!1,s=!1,d=/(iPhone|iPod|iPad)/i.test(navigator.userAgent),l=matchMedia("(prefers-color-scheme: dark)").matches,u=null;function c(e){app.remove("Popup",e.id),e.cb&&e.cb(e.params),r.el.trigger(OGX.Popup.CLOSE,e.id)}function p(e){e.matches}function f(){if(r)for(var e=r.gather(""),t=0;t<e.length;t++)"Controller"!==e[t]._NAME_&&e[t].hasOwnProperty("resize")&&e[t].hasOwnProperty("resizeNodes")&&(["Popup","Window"].includes(e[t]._NAME_)?"Popup"===e[t]._NAME_?e[t].sleeping||(e[t].resize(),e[t].centered&&e[t].center(),e[t].resizeNodes()):"Window"===e[t]._NAME_&&(e[t].sleeping||(e[t].resize(),e[t].resizeNodes())):e[t].sleeping||(e[t].resize(),e[t].resizeNodes()))}function h(){t.routing&&(n.router=new OGX.Router(t.routing),n.router.start()),function(){var e,i,o,a,s,d,l,u=!1;for(var c in t.vapps)i=(e=c.split(":"))[0],o=e[1],(s=OGX.Data.merge(t.vapps[c],t.stages,!1,!0)).id=i,!0===s.use&&(u=i,a=i+"/"+s.home),d=n.addStage(o,s),!0===s.use&&(r=d);u&&(l=t.routing.options.bookmark&&-1!==window.location.href.indexOf("#")&&app.router.request().route.stage==r.id?window.location.href.split("#").pop():a,l=a,setTimeout((function(){n.goto(l)}),0),setTimeout((function(){$(document).trigger(OGX.App.READY)}),100))}(),t.theater&&function(){for(var e=app.gather("Stage"),i=[],o=0;o<e.length;o++)e[o].theater&&i.push(e[o]);t.theater.stages=i,t.theater.el="body",n.theater=n.create("Theater",t.theater)}()}function g(e){return e}function O(e,t){return void 0===t&&(t=location.hostname),CryptoJS.AES.encrypt(e,t,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7})}function m(e,t){return void 0===t&&(t=location.hostname),CryptoJS.AES.decrypt(e,t,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8)}this.blured=!1,this.router=!1,this.isWebView=function(){return s},this.isTouch=function(){return this.touch.touchable()},this.iOS=function(){return d},this.getURL=function(){return this.router.url()},this.isDarkMode=function(){return l},this.toggleTheme=function(){var e="(prefers-color-scheme: ";l?($("head").children('link[data="dark"]').attr("media",e+"light)"),$("head").children('link[data="light"]').attr("media",e+"dark)")):($("head").children('link[data="dark"]').attr("media",e+"dark)"),$("head").children('link[data="light"]').attr("media",e+"light)")),l=!l},this.moveNode=function(e,t,n){e.detach(),e.attach(t,n)},this.addStage=function(e,n){OGX.Data.merge(n,t.stages),n.el="body";var i=OGX.Object.create(e,n);return this.add(i),n.hasOwnProperty("node:OML")&&OGX.OML.render(i,n["node:OML"]),setTimeout((function(){i.construct(n),n.use?(i.el.css("display","block"),i.focus(),a=i):i.sleep()}),0),i},this.removeStage=function(e){var t=this.cfind("Stage",e);t&&(t.destroy(),t.kill(),this.find("Stage",e,"remove"))},this.useStage=function(e){if(!r||r.id!==e){var t=this.cfind("Stage",e);return!!t&&(r&&r.blur(2),(r=t).focus(1),!0)}},this.getStage=function(e){if(void 0===e)return r||a;var t=this.find("Stage",e);return t||!1},this.showStage=function(e,t){if(!r||r.id!==e){var i=this.cfind("Stage",e);if(i){if(void 0===t&&(t=i.anim?i.anim:!!a.anim&&a.anim),t){var o=$(window).height();switch(t){case OGX.Stage.SWAP:a&&(i.wake(),a.el.on("transitionend",(function(){a.el.off("transitionend"),a.el.css("top",-o+"px"),i.el.css("top","0px"),i.el.on("transitionend",(function(){i.el.off("transitionend"),i.el.css("transform","scale(1)"),a.el.removeClass("ogx_stage_anim"),a.el.css({top:"0px",transform:"scale(1)"}),a.sleep(),n.el.trigger(OGX.Stage.SWAP,{old:a,new:i}),a=i}))})),i.el.addClass("ogx_stage_anim"),a.el.addClass("ogx_stage_anim"),a.el.css("transform","scale(0.9)")),i.el.css("top",o+"px"),i.el.css("display","block"),i.el.css("transform","scale(0.9)"),i.el.addClass("ogx_stage_anim");break;case OGX.Stage.FLIP:a&&(i.wake(),a.el.on("transitionend",(function(){a.el.off("transitionend"),a.el.removeClass("ogx_stage_anim"),a.el.css("transform","scaleX(1)"),a.sleep(),i.el.css("transform","scaleX(1)"),n.el.trigger(OGX.Stage.SWAP,{old:a,new:i}),a=i})),i.el.addClass("ogx_stage_anim"),i.el.css("transform","scaleX(0)"),a.el.addClass("ogx_stage_anim"),a.el.css("transform","scaleX(0)")),i.el.css("display","block")}}else a&&a.id!==i.id&&a.sleep(),i.sleeping&&i.wake(),i.el.css("display","block"),a=i;n.useStage(e)}}},this.getWindow=function(e){return this.cfind("Window",e)},this.getWindows=function(){return this.gather("Window")},this.windowExists=function(e){return!1!==this.cfind("Window",e)},this.addWindow=function(e,n){if(e=OGX.Data.merge(e,t.windows),void 0===n){if(!a)return!1;n=a}var i;return!!n&&(e.el=n.el,e.parent=n,e.hasOwnProperty("node:OML")?(i=OGX.Object.create("Window",e),n.add(i),i.focus(),OGX.OML.render(i,e["node:OML"])):i=n.create("Window",e),i)},this.windowOpen=function(e){return this.cfind("Window",e).status===OGX.Window.OPEN},this.showWindow=function(e,n,i,o){!0===n&&(n=t.anim);var r=this.cfind("Window",e);return!!r&&(r.sleeping&&attachWindow(e),r.blured&&r.focus(),r.show(n,i,o),!0)},this.hideWindow=function(e,n,i,o){!0===n&&(n=t.anim),"string"!=typeof e&&(e=this.findWindow(e).id),this.cfind("Window",e).hide(n,i,o)},this.swapWindows=function(e,t){var n,i,o,r;return!(!this.windowExists(e)||!this.windowExists(t))&&(n=this.getWindow(e),i=this.getWindow(t),o=n.el.css("z-index"),r=i.el.css("z-index"),n.el.css("z-index",r),i.el.css("z-index",o),!0)},this.sleepWindow=function(e){this.cfind("Window",e).sleep()},this.blurWindow=function(e){this.cfind("Window",e).blur()},this.focusWindow=function(e){this.cfind("Window",e).focus()},this.removeWindow=function(e){return this.find("Window",e,"remove")},this.removeWindows=function(e){for(var t=0;t<e.length;t++)this.removeWindow(e[t]);return!0},this.removeAllWindows=function(e){void 0===e&&(e=[]);for(var t=this.gather("Window"),n=0;n<t.length;n++)e.includes(t[n].id)&&this.removeWindow(t[n].id)},this.findWindow=function(e){for(var t=e;t.hasOwnProperty("parent")&&t.parent;){if("Window"===t.parent._NAME_)return t.parent;t=t.parent}return!1},this.addPopup=function(e,n){var i;return void 0!==n&&n||(n=r),e.el=n.el[0],e.parent=n,e.chromeos=t.chromeos,e.hasOwnProperty("node:OML")?(i=OGX.Object.create("Popup",e),n.add(i),i.focus(),OGX.OML.render(i,e["node:OML"]),i.construct()):i=n.create("Popup",e),i},this.removePopup=function(e,t,n,i,o){var r=!1;void 0===o&&(o=a,r=!0),void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===t&&(t=!0);var s=null;return!!(s=r?o.find("Popup",e):app.cfind("Popup",e))&&(s.hide(t,c,{id:e,cb:n,params:i},null,!0),!0)},this.findPopup=function(e){var t;t=e instanceof HTMLElement?e:e.el;var n=$(t).parents(".ogx_popup");if(n.length){var i=$(n[0]).data("ogx-id");return this.cfind("Popup",i)}return!1},this.getVisiblePopups=function(){for(var e=this.gather("Popup"),t=[],n=0;n<e.length;n++)"visible"===e[n].el.css("visibility")&&t.push(e[n]);return t},this.popupExists=function(e){return!1!==this.cfind("Popup",e)},this.groupPopups=function(e,t,i){void 0===i&&(i=null);var o={drag:!0,resize:!0,anim:!1};i&&OGX.Data.merge(o,i,!0);var r=e.id,a=t.id,s=e.nodes.get({_NAME_:{eq:"Container"}},null,1),d=t.nodes.get({_NAME_:{eq:"Container"}},null,1);if(s&&d){var l=s.nodes.get({_NAME_:{eq:"Carousel"}},null,1),u=s.nodes.get({_NAME_:{eq:"Tabs"}},null,1),c=d.nodes.get({_NAME_:{eq:"Carousel"}},null,1),p=(O=d.nodes.get({_NAME_:{eq:"Tabs"}},null,1)).index(),f=l.panels().slice();e.nodes=new OGX.List;for(var h=0;h<f.length;h++)O.add(u[h]),M=f[h].instance?{"default:Uxi":f[h].instance}:{"default:Html":{html:f[h].html}},c.addNode(M,null,!1);p+=u.length,c.showPanel(p,!1),O.index(p),n.removePopup(e.id,!1,!1,!1,e.parent),$(document).trigger(OGX.Popup.GROUP,{popups:[r,a],popup:t})}else if(s||d){var g,O,m,v;s?(g=s.nodes.get({_NAME_:{eq:"Carousel"}},null,1),O=s.nodes.get({_NAME_:{eq:"Tabs"}},null,1),S=t,m=e):(g=d.nodes.get({_NAME_:{eq:"Carousel"}},null,1),O=d.nodes.get({_NAME_:{eq:"Tabs"}},null,1),S=e,m=t),S.nodes.length?((v=S.nodes[0]).detach(),S.nodes=new OGX.List,M={"default:Uxi":v}):M={"default:Html":{html:S.el.find(".ogx_popup_body").first().html()}};var w=S.title();n.removePopup(S.id,!1,!1,!1,S.parent),g.addNode(M,null,!0,!1,(function(){$(document).trigger(OGX.Popup.GROUP,{popups:[r,a],popup:m})})),O.add(w),O.index(O.set().length-1)}else{var y=e.nodes;y=!!y.length&&y[0];var x,_,b=t.nodes;b=!!b.length&&b[0],y?(y.detach(),x={"default:Uxi":y}):x={"default:Html":{html:e.el.find(".ogx_popup_body").children().first().detach()}},b?(b.detach(),_={"default:Uxi":b}):_={"default:Html":{html:t.el.find(".ogx_popup_body").children().first().detach()}};var G=t.icons()||e.icons();"boolean"==typeof G&&(G=!1),!(G&&Array.isArray(G)&&G.length)&&(G=!1);var X=this.gather("Popup");X=X.get({id:{in:e.group}});var M={id:e.group+"_"+X.length,width:e.el.width(),height:e.el.height(),title:e.group,group:e.group,icons:G,"node:OML":[{"default:Container":{index:1,tabs:{list:[t.title(),e.title()]},"node:OML":[_,x]}}]};OGX.Data.merge(M,o,!0);var P=e.parent,S=app.addPopup(M,e.parent);this.removePopup(e.id,!1,!1,!1,P),this.removePopup(t.id,!1,!1,!1,P),$(document).trigger(OGX.Popup.GROUP,{popups:[r,a],popup:S})}},this.ungroupPopup=function(e,t,n,i,o){var r=e.icons(),a=e.nodes.get({_NAME_:{eq:"Container"}},null,1).nodes.get({_NAME_:{eq:"Carousel"}},null,1),s=a.getPanel(t),d=e.parent,l=e.width(),u=e.height(),c=e.resizable,p=e.dragable,f={};if(s.instance){var h=a.nodes.get({id:{eq:s.instance.id},_NAME_:{eq:s.instance._NAME_}},null,1);h&&(f["default:Uxi"]=h)}else f["default:Html"]={html:s.html};a.removePanel(t,!1);var g="popup_"+(new Date).getTime(),O={id:g,group:e.group,title:n,resize:c,drag:p,width:l,height:u,icons:r,"node:OML":[f]};if(void 0!==i){var m=e.el.position(),v=e.el.offset();O.x=m.left+(i-v.left),O.y=m.top+(o-v.top)}this.addPopup(O,d),$(document).trigger(OGX.Popup.UNGROUP,{from_popup:e.id,from_index:t,to_popup:g})},this.addOverlay=function(e,t){return void 0===t&&(t=a),!!t&&(t.addOverlay(e),!0)},this.removeOverlay=function(e,t){void 0===t&&(t=a),t&&t.removeOverlay(e)},this.theater=!1,this.getJSON=function(e){return OGX.Data.clone(OGX.Cache.read("json",e))},this.getOML=function(e){return OGX.Data.clone(OGX.Cache.read("oml",e))},this.goto=function(e,t){return this.router.goto(e,t)},this.getDefaults=function(e){return t[e]},OGX.Net=new OGX.Net({ios:d,encrypted:i.encrypted}),OGX.Net.load("app.json",(function(e){if(i.encrypted&&(e=function(e){var t=document.cookie.match("(^|[^;]+)\\s*ogx_key\\s*=\\s*([^;]+)");if(t)return t=decodeURIComponent(t.pop()),document.cookie="ogx_key=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",e=m(e,t),JSON.parse(e)}(e)),i.disable_context&&(window.oncontextmenu=function(){return!1}),i.exportable||(delete OGX.Uxi.prototype.toOML,delete OGX.Controller.prototype.toOML,delete OGX.View.prototype.toOML),i.unique){var r="function"==typeof i.unique;if(!function(){var e=!1;(u=sessionStorage.getItem("ogx-tab"))?u=m(u):(u=(new Date).getTime()+"-"+Math.round(1e3*Math.random()),sessionStorage.setItem("ogx-tab",O(u)));var t=localStorage.getItem("ogx");return t?(t&&(t=m(t)),t&&((t=JSON.parse(t))&&t.instance!==u?t.unix+1500<(new Date).getTime()&&(t={instance:u,unix:(new Date).getTime()},localStorage.setItem("ogx",O(JSON.stringify(t))),e=!0):e=!0)):(t={instance:u,unix:(new Date).getTime()},localStorage.setItem("ogx",O(JSON.stringify(t))),e=!0),e&&(window.addEventListener("beforeunload",(function(){localStorage.removeItem("ogx")})),OGX.Workers.run(g,null,null,1e3,u,(function(e){var t={instance:e,unix:(new Date).getTime()};localStorage.setItem("ogx",O(JSON.stringify(t)))}))),e}())return r&&i.unique(!1),void n.el.trigger(OGX.App.DUPLICATE);r&&i.unique(!0)}t=e,OGX.Scope=new OGX.Scope(t.jwt),OGX.OML=new OGX.OML(i.max_render_time,i.max_depth),s=void 0!==window.ontouchstart,d&&$("body").addClass("ios"),t=OGX.Data.weld(t,o,!1,!1),n.el=$(document),OGX.Net.preload(t.preload,h),window.addEventListener("resize",f),function(e){if(!0){var t=window.matchMedia("(prefers-color-scheme: dark)");t.addListener(p)}else t.removeListener(p)}()}))},OGX.App=function(e){"use strict";return void 0===e&&(e={}),e.el="document",e.always_on=!0,OGX.Object.create("Core",e)},OGX.App.LOADING="AppLoading",OGX.App.READY="AppReady",OGX.App.DUPLICATE="AppDuplicate";OGX.Audio=function(){"use strict";var t=!1;this.get=function(t){var e;return!!(e=OGX.Cache.read("snd",t))&&e},this.play=function(e,i,n){void 0===i&&(i=1),void 0===n&&(n=!1);var o=this.get(e);return!!o&&(o.hasOwnProperty("howl")?(o.howl.volume(i),o.howl.loop(n)):o.howl=new Howl({src:["snd/"+o.file],loop:n,volume:i}),t?o.howl.play():setTimeout((function(){o.howl.play()}),0),!0)},this.stop=function(t){if(void 0!==t){var e=this.get(t);if(e)return e.howl.stop(),!0}return!1},this.prepare=function(){for(var t=OGX.Cache.get({ext:{eq:"snd"}}),e=0;e<t.length;e++)t[e].hasOwnProperty("howl")||(t[e].howl=new Howl({src:["snd/"+t[e].file]}))},$(document).on("touchstart mousedown",(function e(){t=!0,$(document).off("touchstart mousedown",e)}))},OGX.Audio=new OGX.Audio,OGX.Bind=function(){"use strict";var t=this,e={object:null,event:null,mode:"eq",action:"filter",property:null,remote_property:null,min_length:0,convert:!0},i={};function n(e,i){var n,r,s,l,c="string"==typeof i.object;function d(e,n){if("object"==typeof n){if(function(e,i){for(var n in e.__p)t.unbindFilter(n);e.__p={}}(i),i.remote_property&&Array.isArray(i.remote_property)){var s=0;for(var l in n)i.__p[i.remote_property[s]]=!0,r(i.remote_property[s],i.mode,n[l]),a(i.remote_property[s],n[l]),s++;return}if(i.remote_property)n="DynamicList"===i.object._NAME_?i.object.getSelection().unique(i.remote_property,!1):n[i.remote_property],r(i.property,i.mode,n),a(i.property,n),o(i,n);else{if(Array.isArray(i.property)){s=0;for(var l in n)i.__p[i.property[s]]=!0,r(i.property[s],i.mode,n[l]),a(i.property[s],n[l]),s++;return}r(i.property,i.mode,n),a(i.property,n),o(i,n)}}else i.remote_property?(r(i.remote_property,i.mode,n),a(i.remote_property,n)):(r(i.property,i.mode,n),a(i.property,n))}function u(t){if(i.min_length&&t.target.value.length<i.min_length&&t.target.value.length)return!1;var e=t.target.value;i.convert&&(e=OGX.Data.stringToVal(e)),r(i.property,i.mode,e)}switch(c?(e&&(i.object={el:$(i.object)},n=i.event),s=u):(e&&(n=OGX[i.object._NAME_].BIND),s=d),i.action){case"render":r=t.bindRender;break;case"filter":r=t.bindFilter}e?(i.object.el.on(n,s),c?u({target:{value:i.object.el.val()}}):(l=i.object.bindValue?i.object.bindValue():i.object.val(),Array.isArray(l)&&l.hasOwnProperty("insert")&&(l=JSON.parse(JSON.stringify(l))),d(0,l))):i.object.el.off(n,s)}function o(t,e){for(var i in e)t.__p[i]=!0}function a(e,i){t.el.trigger(OGX.Bind.FILTER,{property:e,value:i})}this.bind=function(t){return OGX.Data.merge(t,e),!!t.property&&(t.object&&"string"==typeof t.object&&(t.event="input change",t.action="filter"),t.__p={},i.hasOwnProperty(t.property)||(i[t.property]=[]),i[t.property].push(t),n(!0,t),!0)},this.unbind=function(t){for(var e=0;e<i[t].length;e++)n(!1,i[t][e]);return delete i[t],!0},this.clearBinds=function(){for(var t in i){for(var e=0;e<i[t].length;e++)n(!1,i[t][e]);delete i[t]}}},OGX.Bind.prototype.unbindFilter=function(t){},OGX.Bind.prototype.bindFilter=function(t,e,i){},OGX.Bind.prototype.bindRender=function(t,e){},OGX.Bind.prototype.bindValue=null,OGX.Bind.FILTER="bindFilter",OGX.Cache=function(){"use strict";var t=new OGX.List;t.cache("ext","id"),this.read=function(e,i){var n=t.read({ext:e,id:i},null,1);return!!n&&("snd"===n.ext?n:n.data)},this.get=function(e,i){return void 0===i&&(i=0),t.get(e,null,null,i)},this.set=function(e){t=new OGX.List(e)},this.add=function(e){if(Array.isArray(e))for(var i=0;i<e.length;i++)t.insert(e[i]);else t.insert(e)},this.remove=function(e,i,n){void 0===n&&(n=1);var o={};return void 0!==e&&e&&(o.ext={eq:e}),void 0!==i&&i&&(o.id={eq:i}),t.unset({ext:{eq:e},id:{eq:i}},n)},"undefined"!=typeof __array&&this.set(__array)},OGX.Cache=new OGX.Cache,require("Calendar","Uxi","Bind","Touch"),OGX.Calendar=function(t){construct(this,"Calendar");var e,i,n,o,a=this,r=t,s={display_date:moment(),date:!1,format:"YYYY-MM-DD",layouts:[{layout:{name:"MONTH_DAYS"},engine:{name:"DAY_NUMBER"}}],layout:0,selectable:!0,no_selection:!1,off_dates:!1,mode:"select",swipe:!0,browse:!0,chromeos:!1,callbacks:{select:null,unselect:null}},l=[],c={x:1,y:1},d=!1;function u(t){t?(i.on(a.touch.down,".ogx_calendar_left",f),i.on(a.touch.down,".ogx_calendar_right",f)):(i.off(a.touch.down,".ogx_calendar_left",f),i.off(a.touch.down,".ogx_calendar_right",f))}function f(t){t.preventDefault(),t.stopImmediatePropagation(),d||(d=!0,$(this).hasClass("ogx_calendar_left")?(a.el.trigger(OGX.Calendar.BROWSE,-1),e.swipeLeft()):(a.el.trigger(OGX.Calendar.BROWSE,1),e.swipeRight()),setTimeout((function(){d=!1}),350))}function h(t){t?i.on("click",".ogx_calendar_layout_item",g):i.off("click",".ogx_calendar_layout_item",g)}function g(t){var e=$(this),i=e.data("ogx-date");r.no_selection&&r.no_selection.includes(i)||("toggle"===r.mode&&e.hasClass("ogx_calendar_selected_item")?(m(),a.onUnselect(),a.el.trigger(OGX.Calendar.UNSELECT,""),r.date=!1):(m(),p(i),r.date=moment(i),r.display_date=r.date.clone(),a.onSelect(r.date),a.el.trigger(OGX.Calendar.SELECT,r.date),O()),setTimeout(_,0))}function _(){for(var t=e.getCells(),i=0;i<t.length;i++)0==t[i].offset.x&&0==t[i].offset.y||w(t[i].abs,t[i].rel,t[i].offset,$(t[i].element).children(0)[0])}function p(t){a.el.find('.ogx_calendar_layout_item[data-ogx-date="'+t+'"]').addClass("ogx_calendar_selected_item")}function m(){a.el.find(".ogx_calendar_selected_item").removeClass("ogx_calendar_selected_item")}function v(){O(),b(l[o].labels(r.display_date));for(var t=e.getCells(),i=0;i<t.length;i++)w(t[i].abs,t[i].rel,t[i].offset,$(t[i].element).children(0)[0])}function y(t){t?(i.on(OGX.GridSwiper.SWIPE_START,(function(){r.selectable&&h(!1)})),i.on(OGX.GridSwiper.SWIPE_END,(function(){r.selectable&&h(!0)})),i.on(OGX.GridSwiper.SWIPE_LEFT,(function(t,e){var i=l[o].value();x(i.value,i.unit),b(l[o].labels(r.display_date))})),i.on(OGX.GridSwiper.SWIPE_RIGHT,(function(t,e){var i=l[o].value();x(-1*i.value,i.unit),b(l[o].labels(r.display_date))})),i.on(OGX.GridSwiper.SWIPE_UP,(function(t,e){o=e.cell.y-1,O(),b(l[o].labels(r.display_date))})),i.on(OGX.GridSwiper.SWIPE_DOWN,(function(t,e){o=e.cell.y-1,O(),b(l[o].labels(r.display_date))}))):(i.off(OGX.GridSwiper.SWIPE_LEFT),i.off(OGX.GridSwiper.SWIPE_RIGHT),i.off(OGX.GridSwiper.SWIPE_UP),i.off(OGX.GridSwiper.SWIPE_DOWN),i.off(OGX.GridSwiper.SWIPE_START),i.off(OGX.GridSwiper.SWIPE_END))}function x(t,e){r.display_date.add(t,e),O()}function O(){var t=l[o].format(r.display_date),e="";r.browse&&(e+='<span class="ogx_calendar_left"></span><span class="ogx_calendar_display_date">'+r.display_date.format(t)+"</span>"),r.date&&(e+='<span class="ogx_calendar_selected_date">'+r.date.format(r.format)+"</span>"),r.browse&&(e+='<span class="ogx_calendar_right"></span>'),i.children(".ogx_calendar_head").children(".ogx_calendar_head_date").html(e)}function b(t){i.children(".ogx_calendar_head").children(".ogx_calendar_head_labels").html(t)}function w(t,e,i,n){if(e.y-1>=0&&e.y-1<r.layouts.length){var a=$(n),s=l[o].value(),c=r.display_date.clone().add(i.x*s.value,s.unit),d=l[e.y-1].html(c,OGX.CalendarEngine[r.layouts[e.y-1].engine.name],r.layouts[e.y-1].engine.config,r.date);a.html(d)}}function G(){for(var t,e=0;e<r.layouts.length;e++)r.layouts[e].layout.hasOwnProperty("config")&&(t=r.layouts[e].layout.config),r.off_dates&&(t.off_dates=r.off_dates),l.push(X(r.layouts[e].layout.name,t))}function X(t,e){return void 0===e&&(e={}),OGX.CalendarLayout[t].prototype=Object.create(OGX.CalendarLayout.BASE_LAYOUT.prototype),OGX.CalendarLayout[t].prototype.constructor=OGX.CalendarLayout[t],new OGX.CalendarLayout[t](e)}function T(){n=[[!1,!1,!1]];for(var t=0;t<r.layouts.length;t++)n.push([w,w,w]);n.push([!1,!1,!1])}this.onFocus=function(){return r.selectable&&h(!0),y(!0),r.browse&&u(!0),this},this.onBlur=function(){return r.selectable&&h(!1),y(!1),r.browse&&u(!1),this},this.resize=function(){return this.resizeNodes(),this},this.onSelect=function(){},this.onUnselect=function(){},this.resetSelection=function(){m(),r.date=null},this.val=function(t,e){return void 0===e&&(e=!0),void 0!==t?(r.date=t,moment.isMoment(r.date)||(r.date=moment(r.date)),r.display_date=r.date.clone(),O(),void(e?setTimeout(v,0):(m(),p(r.date.format("YYYY-MM-DD"))))):r.date?r.date:""},this.refresh=function(){return setTimeout(v,0),this},this.display=function(t){return void 0!==t?(r.display_date=t,moment.isMoment(r.display_date)||(r.display_date=moment(r.display_date)),O(),setTimeout(v,0),!0):r.display_date},this.axis=function(t,e){return r.axis.x=t,r.axis.y=e,this},this.getLayout=function(){return o},this.layouts=function(t,i){return void 0===t?r.layouts:(r.layouts=t,r.layout=void 0!==i?i:0,o=r.layout,l=[],G(),T(),e.setMap(n,{x:0,y:r.layout+1}),v(),this)},this.offDates=function(t,i){return void 0===t?r.off_dates:(void 0===i&&(i=!0),r.off_dates=t,i?(l=[],G(),e.setMap(n,{x:0,y:r.layout+1}),v()):l.forEach((e=>{e.off_dates=t})),this)},this.noSelection=function(t,e){return void 0===t?r.no_selection:(void 0===e&&(e=!0),r.no_selection=t,e&&v(),this)},OGX.Data.merge(r,s),r.callbacks.select||(r.callbacks.select=a.onSelect),r.callbacks.unselect||(r.callbacks.unselect=a.onUnselect),(i=a.el).addClass("ogx_calendar"),r.date&&(moment.isMoment(r.date)||(r.date=moment(r.date)),r.display_date=r.date.clone()),r.display_date?moment.isMoment(r.display_date)||(r.display_date=moment(r.display_date)):r.display_date=moment(),o=r.layout,c.y=o+1,i.html('<div class="ogx_calendar_head"><div class="ogx_calendar_head_date"></div><div class="ogx_calendar_head_labels"></div></div><div class="ogx_calendar_body"></div>'),T(),G(),e=a.create("GridSwiper",{el:r.el+" .ogx_calendar_body",loop:!0,map:n,start:{x:1,y:o+1},chromeos:r.chromeos,enabled:r.swipe}),O(),b(l[o].labels(r.display_date))},OGX.Calendar.SELECT="CalendarSelect",OGX.Calendar.UNSELECT="CalendarUnselect",OGX.Calendar.BIND=OGX.Calendar.SELECT+" "+OGX.Calendar.UNSELECT,OGX.Calendar.BROWSE="CalendarBrowse",OGX.CalendarLayout={},OGX.CalendarLayout.BASE_LAYOUT=function(t){"use strict";this.off_dates=null,this.labels=function(t){return""},this.html=function(t,e,i,n){return""},this.value=function(){return{value:1,unit:"months"}},this.format=function(){return t.hasOwnProperty("format")?t.format:"YYYY-MM"}},OGX.CalendarLayout.MONTH_DAYS=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="YYYY-MM"),!t.hasOwnProperty("labels")&&(t.labels="ddd"),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){var i="",n=Number(e.format("d")),o=e.clone();n&&o.subtract(n,"day");for(var a=0;a<7;a++)i+='<span class="ogx_calendar_layout_month_days_label">'+o.format(t.labels)+"</span>",o.add(1,"day");return i},this.html=function(t,e,i,n){var o,a=t.format("MM"),r=moment(t.format("YYYY-MM-")+"01").day(),s=moment(t.format("YYYY-MM-")+"01").subtract(r,"days"),l="";n&&(l=n.format("YYYY-MM-DD"));for(var c,d="",u=0;u<35;u++)c="",o=s.format("YYYY-MM-DD"),s.format("MM")!==a&&(c+="ogx_calendar_layout_month_days_offset "),o===moment().format("YYYY-MM-DD")&&(c+="ogx_calendar_layout_month_days_today "),n&&l===o&&(c+="ogx_calendar_selected_item "),this.off_dates&&this.off_dates.includes(o)&&(c+="ogx_calendar_layout_off_date "),d+='<div class="ogx_calendar_layout_item ogx_calendar_layout_month_days '+c+'" data-ogx-date="'+o+'">'+e(o,i)+"</div>",s.add(1,"days");return d},this.value=function(){return{value:1,unit:"months"}}},OGX.CalendarLayout.CENTURY_DECADES=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="YYYY"),!t.hasOwnProperty("labels")&&(t.labels=null),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){return'<span class="ogx_calendar_layout_century_decades_label">'+(t.labels?e.format(t.labels):100*Math.floor(Number(e.format("YYYY"))/100)+"'s")+"</span>"},this.html=function(t,e,i,n){var o,a,r=moment(),s=100*Math.floor(Number(r.format("YYYY"))/100),l=10*Math.floor(Number(r.format("YYYY").substr(2))/10),c=100*Math.floor(Number(t.format("YYYY"))/100),d=0,u=0;n&&(d=100*Math.floor(Number(n.format("YYYY"))/100),u=10*Math.floor(Number(n.format("YYYY").substr(2))/10));for(var f="",h=0;h<10;h++)a="",s+l===c+(o=10*h)&&(a="ogx_calendar_layout_century_decades_current "),d+u===c+o&&(a+="ogx_calendar_selected_item "),this.off_dates&&this.off_dates.includes(c+o)&&(a+="ogx_calendar_layout_off_date "),f+='<div class="ogx_calendar_layout_item ogx_calendar_layout_century_decades '+a+'" data-ogx-date="'+(c+o)+'-01-01">'+e(c+o,i)+"</div>";return f},this.value=function(){return{value:100,unit:"years"}}},OGX.CalendarLayout.CENTURY_YEARS=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="Y"),!t.hasOwnProperty("labels")&&(t.labels=null),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){return'<span class="ogx_calendar_layout_century_decades_label">'+(t.labels?e.format(t.labels):100*Math.floor(Number(e.format("YYYY"))/100)+"'s")+"</span>"},this.html=function(t,e,i,n){var o,a=moment(),r=100*Math.floor(Number(a.format("YYYY"))/100),s=Number(a.format("YYYY").substr(2)),l=100*Math.floor(Number(t.format("YYYY"))/100),c=0,d=0;n&&(c=100*Math.floor(Number(n.format("YYYY"))/100),d=Math.floor(Number(n.format("YYYY").substr(2))));for(var u="",f=0;f<100;f++)o="",l+f===r+s&&(o+="ogx_calendar_layout_century_years_current "),l+f===c+d&&(o+="ogx_calendar_selected_item"),this.off_dates&&this.off_dates.includes(l+f)&&(o+="ogx_calendar_layout_off_date "),u+='<div class="ogx_calendar_layout_item ogx_calendar_layout_century_years '+o+'" data-ogx-date="'+(l+f)+'-01-01">'+e(l+f+"-01-01",i)+"</div>";return u},this.value=function(){return{value:100,unit:"years"}}},OGX.CalendarLayout.DECADE_YEARS=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="Y"),!t.hasOwnProperty("labels")&&(t.labels=null),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){return'<span class="ogx_calendar_layout_century_years_label">'+(t.labels?e.format(t.labels):10*Math.floor(Number(e.format("YYYY"))/10)+"'s")+"</span>"},this.html=function(t,e,i,n){var o,a=10*Math.floor(Number(t.format("YYYY"))/10),r="",s=Number(moment().format("YYYY")),l="";n&&(l=Number(n.format("YYYY")));for(var c=0;c<10;c++)o="",a+c===s&&(o+="ogx_calendar_layout_decade_years_current "),a+c===l&&(o+="ogx_calendar_selected_item "),this.off_dates&&this.off_dates.includes(a+c)&&(o+="ogx_calendar_layout_off_date "),r+='<div class="ogx_calendar_layout_item ogx_calendar_layout_decade_years '+o+'" data-ogx-date="'+(a+c)+'-01-01">'+e(a+c+"-01-01",i)+"</div>";return r},this.value=function(){return{value:10,unit:"years"}}},OGX.CalendarLayout.DECADE_MONTHS=function(t){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(t){for(var e=10*Math.floor(Number(t.format("YYYY"))/10),i=Number(String(e).substr(2,2)),n="",o=0;o<10;o++)n+='<span class="ogx_calendar_layout_decade_months_label">\''+i+"</span>",i++;return n},this.html=function(t,e,i,n){var o,a,r,s,l=10*Math.floor(Number(t.format("YYYY"))/10),c="",d=moment().format("YYYY-MM");n&&(o=n.format("YYYY-MM"));for(var u=0;u<12;u++){s=u+1;for(var f=0;f<10;f++)a="",(r=l+f+"-"+(s<10?"0"+s:s))===d&&(a="ogx_calendar_layout_decade_months_current "),r===o&&(a+="ogx_calendar_selected_item "),this.off_dates&&this.off_dates.includes(r)&&(a+="ogx_calendar_layout_off_date "),moment(r+"-01"),c+='<div class="ogx_calendar_layout_item ogx_calendar_layout_decade_months '+a+'" data-ogx-date="'+r+'-01">'+e(r+"-01",i)+"</div>"}return c},this.value=function(){return{value:10,unit:"years"}},this.format=function(t){return"["+10*Math.floor(Number(t.format("YYYY"))/10)+"'s]"}},OGX.CalendarLayout.YEAR_MONTHS=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="Y"),!t.hasOwnProperty("labels")&&(t.labels="[Months]"),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){return'<span class="ogx_calendar_layout_year_months_label">'+e.format(t.labels)+"</span>"},this.html=function(t,e,i,n){var o,a,r=moment().format("YYYY-MM"),s=t.format("YYYY"),l="",c="";n&&(c=n.format("YYYY-MM"));for(var d=1;d<13;d++)o="",s+"-"+(a=d<10?"0"+d:d)===r&&(o+="ogx_calendar_layout_year_months_current "),s+"-"+a===c&&(o+="ogx_calendar_selected_item "),this.off_dates&&this.off_dates.includes(s+"-"+a)&&(o+="ogx_calendar_layout_off_date "),l+='<div class="ogx_calendar_layout_item ogx_calendar_layout_year_months '+o+'" data-ogx-date="'+s+"-"+a+'-01">'+e(s+"-"+a+"-01",i)+"</div>";return l},this.value=function(){return{value:1,unit:"years"}}},OGX.CalendarLayout.YEAR_WEEKS=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="Y"),!t.hasOwnProperty("labels")&&(t.labels="[Weeks]"),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){return'<span class="ogx_calendar_layout_year_weeks_label">'+e.format(t.labels)+"</span>"},this.html=function(t,e,i,n){var o=moment().week(),a=t.format("YYYY"),r=moment().format("YYYY"),s="",l="";n&&(l=n.week(),s=n.format("YYYY"));for(var c,d,u="",f=1;f<53;f++)c="",d=moment().year(a).week(f).format("YYYY-MM-DD"),o===f&&a===r&&(c="ogx_calendar_layout_year_weeks_current "),l===f&&a===s&&(c+="ogx_calendar_selected_item "),this.off_dates&&this.off_dates.includes(d)&&(c+="ogx_calendar_layout_off_date "),u+='<div class="ogx_calendar_layout_item ogx_calendar_layout_year_weeks '+c+'" data-ogx-date="'+d+'">'+e(d,i)+"</div>";return u},this.value=function(){return{value:1,unit:"years"}}},OGX.CalendarLayout.YEAR_DAYS=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="Y"),!t.hasOwnProperty("labels")&&(t.labels="[Nth Day]"),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){return'<span class="ogx_calendar_layout_year_weeks_label">'+e.format(t.labels)+"</span>"},this.html=function(t,e,i,n){var o,a,r,s="",l=t.format("YYYY-MM-DD"),c=moment(t.format("YYYY")+"-01-01"),d="";n&&(d=n.format("YYYY-MM-DD")),a=t.isLeapYear()?366:365;for(var u=0;u<a;u++)o="",(r=c.format("YYYY-MM-DD"))===l&&(o="ogx_calendar_layout_year_days_current "),r===d&&(o+="ogx_calendar_selected_item "),this.off_dates&&this.off_dates.includes(r)&&(o+="ogx_calendar_layout_off_date "),s+='<div class="ogx_calendar_layout_item ogx_calendar_layout_year_days '+o+'" data-ogx-date="'+r+'">'+e(r,i)+"</div>",c.add(1,"days");return s},this.value=function(){return{value:1,unit:"years"}}},OGX.CalendarLayout.MONTH_WEEKS=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="[(]YYYY-MM[)] W"),!t.hasOwnProperty("labels")&&(t.labels="[Nth Week]"),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){return'<span class="ogx_calendar_layout_year_weeks_label">'+e.format(t.labels)+"</span>"},this.html=function(t,e,i,n){var o,a="",r=moment(),s=Number(r.format("YYYY")),l=Number(r.format("w")),c=Number(t.format("YYYY")),d=0,u=0;n&&(d=Number(n.format("YYYY")),u=Number(n.format("w")));a="";for(var f,h=moment(t.format("YYYY-MM-[01]")),g=0;g<5;g++)f="",o=Number(h.format("w")),c===d&&o===u&&(f+="ogx_calendar_selected_item "),c===s&&o===l&&(f+="ogx_calendar_layout_month_weeks_current"),this.off_dates&&this.off_dates.includes(o)&&(f+="ogx_calendar_layout_off_date "),a+='<div class="ogx_calendar_layout_item ogx_calendar_layout_month_weeks '+f+'" data-ogx-date="'+h.format("YYYY-MM-DD")+'">'+e(h.format("YYYY-MM-DD"),i)+"</div>",h.add(7,"days");return a},this.value=function(){return{value:1,unit:"months"}}},OGX.CalendarLayout.WEEK_DAYS=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="YYYY-MM (wo [week])"),!t.hasOwnProperty("labels")&&(t.labels="ddd DD"),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){var i="",n=Number(e.format("d")),o=e.clone();n&&o.subtract(n,"day");for(var a=0;a<7;a++)i+='<span class="ogx_calendar_layout_month_days_label">'+o.format(t.labels)+"</span>",o.add(1,"day");return i},this.html=function(t,e,i,n){var o,a,r="",s=t.weekday(),l=t.subtract(s,"days"),c=moment().format("YYYY-MM-DD"),d="";n&&(d=n.format("YYYY-MM-DD"));for(var u=0;u<7;u++)o="",(a=l.format("YYYY-MM-DD"))===c&&(o="ogx_calendar_layout_week_days_current "),a===d&&(o+="ogx_calendar_selected_item "),this.off_dates&&this.off_dates.includes(a)&&(o+="ogx_calendar_layout_off_date "),r+='<div class="ogx_calendar_layout_item ogx_calendar_layout_week_days '+o+'" data-ogx-date="'+a+'">'+e(a,i)+"</div>",l.add(1,"days");return r},this.value=function(){return{value:1,unit:"weeks"}}},OGX.CalendarLayout.DAY_HOURS=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="YYYY-MM-DD HH:[00]"),!t.hasOwnProperty("labels")&&(t.labels="[Hours]"),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){return'<span class="ogx_calendar_layout_day_hours_label">'+e.format(t.labels)+"</span>"},this.html=function(t,e,i,n){var o,a,r="",s=Number(moment().format("HH")),l=t.format("YYYY-MM-DD "),c=moment().format("YYYY-MM-DD "),d="",u="";n&&(d=Number(n.format("HH")),u=n.format("YYYY-MM-DD "));for(var f=0;f<24;f++)a="",f===s&&l===c&&(a="ogx_calendar_layout_days_hours_current "),f===d&&l===u&&(a+="ogx_calendar_selected_item "),this.off_dates&&this.off_dates.includes(l+o+":00")&&(a+="ogx_calendar_layout_off_date "),r+='<div class="ogx_calendar_layout_item ogx_calendar_layout_days_hours '+a+'" data-ogx-date="'+(l+(o=f<10?"0"+f:String(f)))+':00">'+e(l+o+":00",i)+"</div>";return r},this.value=function(){return{value:1,unit:"days"}}},OGX.CalendarLayout.DAY_WORK_HOURS=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="YYYY-MM-DD HH:[00]"),!t.hasOwnProperty("labels")&&(t.labels="[Work Hours]"),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){return'<span class="ogx_calendar_layout_day_work_hours_label">'+e.format(t.labels)+"</span>"},this.html=function(t,e,i,n){i&&void 0!==i?i.hasOwnProperty("start")||(i.start=8,i.end=17):i={start:8,end:17};var o,a,r="",s=Number(moment().format("HH")),l=t.format("YYYY-MM-DD "),c=moment().format("YYYY-MM-DD "),d="",u="";n&&(d=Number(n.format("HH")),u=n.format("YYYY-MM-DD "));for(var f=i.start;f<i.end+1;f++)a="",f===s&&l===c&&(a="ogx_calendar_layout_days_work_hours_current "),f===d&&u===l&&(a+="ogx_calendar_selected_item "),this.off_dates&&this.off_dates.includes(l+o+":00")&&(a+="ogx_calendar_layout_off_date "),r+='<div class="ogx_calendar_layout_item ogx_calendar_layout_days_work_hours '+a+'" data-ogx-date="'+(l+(o=f<10?"0"+f:f))+':00">'+e(l+o+":00",i)+"</div>";return r},this.value=function(){return{value:1,unit:"days"}}},OGX.CalendarLayout.DAY=function(t){"use strict";!t.hasOwnProperty("format")&&(t.format="YYYY-MM-DD"),!t.hasOwnProperty("labels")&&(t.labels="dddd DD"),OGX.CalendarLayout.BASE_LAYOUT.call(this,t),this.labels=function(e){return'<span class="ogx_calendar_layout_day_label">'+e.format(t.labels)+"</span>"},this.html=function(t,e,i,n){var o="",a=t.format("YYYY-MM-DD"),r=moment().format("YYYY-MM-DD");return n&&a===n.format("YYYY-MM-DD")&&(o+="ogx_calendar_selected_item "),a===r&&(o+="ogx_calendar_layout_day_current "),this.off_dates&&this.off_dates.includes(a)&&(o+="ogx_calendar_layout_off_date "),'<div class="ogx_calendar_layout_item ogx_calendar_layout_day '+o+'" data-ogx-date="'+a+'">'+e(a,i)+"</div>"},this.value=function(){return{value:1,unit:"days"}},this.select=function(t){}},OGX.CalendarEngine={},OGX.CalendarEngine.CELL_VALUE=function(t,e){var i=moment(t);return e.hasOwnProperty("css")||(e.css=""),'<div class="ogx_calendar_engine_cell_value '+e.css+'">'+i.format(e.format)+"</div>"},OGX.CalendarEngine.DAY_NUMBER=function(t,e){var i=moment(t);return OGX.CalendarEngine.CELL_VALUE(i,{format:"DD",css:"ogx_calendar_engine_day_number"})},OGX.CalendarEngine.WEEK_NUMBER=function(t,e){return'<div class="ogx_calendar_engine_week_number">'+moment(t).week()+"</div>"},OGX.CalendarEngine.MONTH_NUMBER=function(t,e){return OGX.CalendarEngine.CELL_VALUE(t,{format:"MM",css:"ogx_calendar_engine_month_number"})},OGX.CalendarEngine.YEAR_NUMBER=function(t,e){return OGX.CalendarEngine.CELL_VALUE(t,{format:"YY",css:"ogx_calendar_engine_year_number"})},OGX.CalendarEngine.DECADE_NUMBER=function(t){return'<div class="ogx_calendar_engine_date_day_number">'+String(t).substr(2)+"'s</div>"},require("Carousel","Uxi","Placeholder","Touch"),OGX.Carousel=function(t){construct(this,"Carousel");var e,i,n,o,a,r,s=this,l=t,c={min_x:100,anim:!0,drag:!0,drag_left:!0,drag_right:!0,dots:!1,css:!1,index:0,capture:!1,callbacks:{change:null},display:!1,displays:!1,as:"item",list:null},d={position:"bottom"},u=!1,f=0,h=0,g=new OGX.List,_="ogx_carousel",p=null,m=null;function v(t){if(void 0!==t&&g[t]&&g[t].instance){var e=s.find(g[t].instance._NAME_,g[t].instance.id);e&&e.blur(2)}}function y(t){if(void 0!==t&&g[t]&&g[t].instance){var e=s.find(g[t].instance._NAME_,g[t].instance.id);e&&s.enabled&&e.focus(1)}}function x(t){i.off("transitionend"),i.removeClass(_+"_anim")}function O(t){if(t.dirX){if(-1===t.dirX&&!l.drag_right)return;if(1===t.dirX&&!l.drag_left)return}if(t.distX>t.distY){var e=r*n*-1+t.distX*t.dirX;e<=0&&e>-1*(i.width()-s.el.width())&&i.css({transform:"translate3d("+e+"px, 0, 0)"})}}function b(t){if(t.distX>l.min_x){var i=r+-1*t.dirX;i>=0&&i<h&&r!==i&&(v(r),r=i,s.onChange(r),e.trigger(OGX.Carousel.CHANGE,r))}var n=0;r&&(n=100/h*(-1*r)),w(n,r,!0)}function w(t,e,n){n?(i.addClass(_+"_anim"),i.on("transitionend",(function(){i.off("transitionend"),i.removeClass(_+"_anim"),y(e)}))):(i.removeClass(_+"_anim"),s.enabled&&y(e)),i.css({transform:"translate3d("+t+"%, 0, 0)"})}function G(){u=!0,clearInterval(o),o=setInterval(X,50),n=Math.floor(e.innerWidth()),i.removeClass(_+"_anim")}function X(){u=!1,clearInterval(o),o=!1,l.drag&&m.enable()}function T(){var t,e,n;h&&(g.clear(),i.children("."+_+"_view").each((function(i,o){t=$(o),(e=t.children().first()).length?(e[0].hasAttribute("data-ogx-id")&&(n=e.data("ogx-id"),e.hasClass("ogx_scroller_outer")&&(n=e.find(".ogx_scroller_inner").first().data("ogx-id"))),void 0!==s.nodes[i]&&(i!==r?s.nodes[i].blur():s.enabled&&s.nodes[i].focus(),g.push({index:i,instance:s.nodes.get({id:{eq:String(n)}},null,1),html:!1}))):g.push({index:i,instance:!1,html:t.html()})})))}function C(){for(var t=[],n=0;n<h;n++)i.append('<div class="'+_+'_view" style="width:'+100/h+'%;" data-ogx-panel-id="'+f+'"></div>'),t.push("."+_+'[data-ogx-id="'+s.id+'"] > .'+_+"_views > ."+_+'_view[data-ogx-panel-id="'+f+'"]'),f++;i.css("width",100*h+"%"),s.placeholders(l,t),e.trigger(OGX.Carousel.READY)}this.construct=function(){T(),l.index&&this.showPanel(l.index,!1),l.dots&&a.bind("dots",s)},this.onFocus=function(){l.drag&&m.enable(),setTimeout((function(){for(var t=0;t<g.length;t++)g[t].instance&&(t!==r?g[t].instance.blur():g[t].instance.focus())}),0)},this.onBlur=function(){l.drag&&m.disable()},this.focus=function(){return this.blured&&(this.blured=!1,this.ux(!0),this.onFocus(),g.length&&g[r].instance&&g[r].instance.focus()),this},this.resize=function(){return l.drag&&m.disable(),setTimeout(G,0),this},this.show=function(t,e){arguments.length||this._show();var i=this.getNodeIndex(t,e);return i&&this.showPanel(i.index),this},this.onChange=function(){},this.getNodeIndex=function(t,e){var i=g.get({"instance.id":{eq:e},"instance._NAME_":{eq:t}},null,1);return!!i&&{index:i.index}},this.anim=function(t){return void 0===t?l.anim:(l.anim=t,this)},this.drag=function(t){return void 0===t?l.drag:(l.drag!==t&&(l.drag&&m.disable(),t&&m.enable(),l.drag=t),this)},this.dragLeft=function(t){return void 0===t?l.drag_left:(l.drag_left=t,this)},this.dragRight=function(t){return void 0===t?l.drag_right:(l.drag_right=t,this)},this.destroy=function(){o&&clearInterval(o),l.dots&&a.destroy()},this.val=function(t){return void 0===t?r:(this.showPanel(t),this)},this.prev=function(){return r>0&&this.showPanel(r-1),this},this.next=function(){return r+1<h&&this.showPanel(r+1),this},this.panels=function(){return g},this.addNode=function(t,n,o,a,r){void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===r&&(r=!1);var l=function(t){void 0===t&&(t="");return h++,i.append('<div class="'+_+'_view" style="width:'+100/h+'%;" data-ogx-panel-id="'+f+'">'+t+"</div>"),i.css("width",Math.round(100*h)+"%"),i.children("."+_+"_view").css("width",100/h+"%"),++f-1}(),c="."+_+'[data-ogx-id="'+this.id+'"] > .'+_+"_views > ."+_+'_view[data-ogx-panel-id="'+l+'"]',d={},u=c;if(t.hasOwnProperty("_NAME_"))t.detach(),t.attach(this,c),o&&this.showPanel(h-1,a);else{for(var g in t){u+=":"+g.split(":")[1],d[u]=t[g];break}var p=null;setTimeout((function(){s.observe(!0,{childList:!0,subtree:!0},(function(){s.observe(!1),p&&clearTimeout(p),p=setTimeout(T,20),o&&(s.showPanel(h-1,a),r?r():e.trigger(OGX.Carousel.ADDED,h))})),OGX.OML.render(s,d,n)}),0)}return this},this.removeNode=function(t,e){void 0===e&&(e=t,t=null);for(var i=!1,n=0;n<g.length;n++)if(g[n].instance.id===e)return i=!0,t&&(i=g[n].instance._NAME_===t),i&&this.removePanel(n),!0;return!1},this.showPanel=function(t,e,i){if((void 0===i&&(i=!1),t>=0&&t<h&&!u)&&((o=r)!==t||i)){void 0===e&&(e=l.anim),r!==t&&v(r);var n=100/h*(-1*t),o=t;return setTimeout((function(){w(n,o,e)}),0),r=t,l.dots&&a.select(t),!0}return!1},this.getPanel=function(t){return g.get({index:{eq:t}},null,1)},this.swapPanels=function(t,n){var o=i.children("."+_+"_view:eq("+t+")").detach();n>t?i.children("."+_+"_view:eq("+(n-1)+")").after(o):i.children("."+_+"_view:eq("+n+")").before(o);var a=100/h*(-1*n);return i.removeClass(_+"_anim"),i.css({transform:"translate3d("+a+"%, 0, 0)"}),r=n,setTimeout(T,0),s.onChange(r),e.trigger(OGX.Carousel.CHANGE,r),this},this.removePanel=function(t,n){if(void 0===n&&(n=!0),t>=0&&t<h){var o=null;if(n&&(n="remove"),i.children("."+_+"_view:eq("+t+")").children().data("ogx-id")){var a=g[t];a.instance&&(o=this.find(a.instance._NAME_,a.instance.id,n))&&(n||o.detach()),g.splice(t,1)}return h--,i.children("."+_+"_view:eq("+t+")").remove(),i.removeClass(_+"_anim").css("width",Math.round(100*h)+"%"),i.children("."+_+"_view").css("width",100/h+"%"),t>=r?t--:t=--r,t<0&&(t=0),r=t,s.showPanel(t,!1,!0),e.trigger(OGX.Carousel.REMOVED,h),o}return!1},this.empty=function(){return this.clear(),i.empty(),i.removeClass(_+"_anim").css("width","100%"),i.css({transform:"translate3d(0%, 0, 0)"}),h=0,g=new OGX.List,l.index=r=0,l["node:OML"]=[],this},this.render=function(t,e){return l["node:OML"]=t,h=l["node:OML"].length,C(),OGX.OML.render(this,l["node:OML"],e),this},this.destroy=function(){this.touch.wipe()},function(){if(OGX.Data.merge(l,c,!1),l.callbacks.change||(l.callbacks.change=s.onChange),l.dots&&("boolean"==typeof l.dots&&(l.dots={}),OGX.Data.merge(l.dots,d)),p=new OGX.Display(l),r=l.index,e=s.el,n=Math.floor(e.innerWidth()),l.hasOwnProperty("node:OML")&&l["node:OML"].length)h=l["node:OML"].length;else if(l.list&&l.list.length){for(var t,i,o=[],a=0;a<l.list.length;a++)if(p.hasOML())t=p.oml('.ogx_carousel[data-ogx-id="'+s.id+'"] > .ogx_carousel_views > .ogx_carousel_view[data-ogx-panel-id="'+a+'"]',l.list[a],l.as),o.push(t);else{i=p.html(l.list[a]);var u='{"default:Html":{"html":'+JSON.stringify(i)+"}}";t=JSON.parse(u),o.push(t)}l["node:OML"]=o,h=l["node:OML"].length}}(),function(){e.addClass(_);var t="";l.dots&&"top"===l.dots.position&&(t+='<div class="carousel_dots"></div>'),t+='<div class="'+_+'_views" style="width:'+100*h+'%;"></div>',l.dots&&"bottom"===l.dots.position&&(t+='<div class="carousel_dots"></div>'),e.append(t),(i=e.find("."+_+"_views").first()).css({transform:"translate3d("+100/h*(-1*r)+"%, 0, 0)"})}(),l.dots&&(a=s.create("Dots",{el:"."+_+'[data-ogx-id="'+s.id+'"] > .carousel_dots',total:h})),C(),m=s.touch.add("Swipe",{x:!0,cb_down:x,cb_swipe:O,cb_up:b,capture:l.capture,state:"manual"}),l.drag?m.enable():s.drag(!1)},OGX.Carousel.READY="CarouselReady",OGX.Carousel.CHANGE="CarouselChange",OGX.Carousel.ADDED="CarouselAdded",OGX.Carousel.REMOVED="CarouselRemoved",OGX.Color={},OGX.Color.hexToRgb=function(t){"use strict";t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,n){return e+e+i+i+n+n}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null},OGX.Color.rgbToHex=function(t,e,i){"use strict";var n,o,a;arguments.length>1&&(t=t+", "+e+", "+i),"object"==typeof t&&(t=Array.isArray(t)?t.join(","):t.r+" "+t.g+" "+t.b);var r=/(\d+)[ ,]*(\d+)[ ,]*(\d+)/g,s=r.exec(t);return s&&(s.shift(),n=Number(s[0]),o=Number(s[1]),a=Number(s[2])),"#"+((1<<24)+(n<<16)+(o<<8)+a).toString(16).slice(1)},OGX.Color.rgbToHsl=function(t,e,i){"use strict";var n,o,a;arguments.length>1&&(t=t+", "+e+", "+i),"object"==typeof t&&(t=Array.isArray(t)?t.join(","):t.r+" "+t.g+" "+t.b);var r=/(\d+)[ ,]*(\d+)[ ,]*(\d+)/g,s=r.exec(t);if(s){s.shift(),n=s[0],o=s[1],a=s[2],n/=255,o/=255,a/=255;var l,c,d=Math.max(n,o,a),u=Math.min(n,o,a),f=(d+u)/2;if(d===u)l=c=0;else{var h=d-u;switch(c=f>.5?h/(2-d-u):h/(d+u),d){case n:l=(o-a)/h+(o<a?6:0);break;case o:l=(a-n)/h+2;break;case a:l=(n-o)/h+4}l/=6}return[l,c,f]}return!1},OGX.Color.hslToRgb=function(t,e,i){"use strict";if(1===arguments.length)if("object"==typeof t)Array.isArray(t)?(i=t[2],e=t[1],t=t[0]):(i=t.l,e=t.s,t=t.h);else if("string"==typeof t){var n=/([0-9\.]+)[ ,]*([0-9\.]+)[ ,]*([0-9\.]+)/g,o=n.exec(t);o&&(o.shift(),t=Number(o[0]),e=Number(o[1]),i=Number(o[2]))}var a,r,s;if(0===e)a=r=s=i;else{var l=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},c=i<.5?i*(1+e):i+e-i*e,d=2*i-c;a=l(d,c,t+1/3),r=l(d,c,t),s=l(d,c,t-1/3)}return[Math.round(255*a),Math.round(255*r),Math.round(255*s)]},OGX.Color.formatHex=function(t){return"#"===t.slice(0,1)&&(t=t.slice(1)),t.length>3||t.split("").map((function(t){return t+t})),"#"+t},require("Container","Uxi"),OGX.Container=function(t){construct(this,"Container");var e=this,i={tabs:!0,carousel:{enabled:!0},enabled:!0,reorder:!0,anim:!0,flatten:!1,chromeos:!1,index:0,dots:!1},n=t,o="normal",a=0;function r(t){t?(e.tabs.el.on(OGX.Tabs.SELECT,(function(t,i){var n=e.tabs.index();e.carousel.val(n),e.el.trigger(OGX.Container.CHANGE,n)})),e.tabs.el.on(OGX.Tabs.REMOVE,(function(){})),e.tabs.el.on(OGX.Tabs.REORDER,(function(t,i){e.carousel.swapPanels(i.from,i.to)})),e.tabs.el.on(OGX.Tabs.ADD,(function(){})),e.carousel.el.on(OGX.Carousel.CHANGE,(function(t,i){e.tabs.index(i),e.el.trigger(OGX.Container.CHANGE,i)}))):(e.tabs.el.off(OGX.Tabs.SELECT),e.tabs.el.off(OGX.Tabs.REMOVE),e.tabs.el.off(OGX.Tabs.REORDER),e.tabs.el.off(OGX.Tabs.ADD),e.carousel.el.off(OGX.Carousel.CHANGE)),s(t)}function s(t){t?e.tabs.el.on(OGX.Tabs.REMOVE,(function(t,i){s(!1),"Popup"===e.parent._NAME_?app.ungroupPopup(e.parent,i.index,i.label,i.x,i.y):e.carousel.removeNode(e.carousel.nodes[i.index].id),setTimeout((function(){s(!0)}),200)})):e.tabs.el.off(OGX.Tabs.REMOVE)}this.carousel=null,this.tabs=null,this.construct=function(){this.carousel=this.find("Carousel",this.id+"_carousel")},this.show=function(t,e){if(arguments.length||this._show(),this.carousel&&"normal"===o){var i=this.carousel.getNodeIndex(t,e);i&&(this.carousel.val(i.index),n.tabs&&this.tabs.index(i.index))}},this.index=function(t){return this.carousel&&"normal"===o&&(this.carousel.val(t),n.tabs&&this.tabs.index(t)),this},this.onFocus=function(){return n.tabs&&this.carousel&&(this.tabs.onFocus(),r(!0)),this},this.onBlur=function(){return n.tabs&&this.carousel&&(this.tabs.onBlur(),r(!1)),this},this.resize=function(){var t,e,i;return n.flatten&&(this.carousel&&"flattened"!==o&&this.el.width()>=n.flatten?(o="flattened",n.tabs&&(this.tabs.blur(),this.tabs.hide()),this.carousel.blur(),a=(t=this.carousel.el.children(".ogx_carousel_views"),e=t[0].style.transform,i=/translate3d\(([0-9px%,\.\- ]+)\)/,e=(e=e.match(i))[1].split(","))[0],this.carousel.el.children(".ogx_carousel_views").addClass("ogx_container_flattened").css("transform","translate3d(0px, 0px, 0px)")):this.carousel&&"flattened"===o&&this.el.width()<n.flatten&&(o="normal",n.tabs&&(this.tabs.focus(),this.tabs.show()),this.carousel.focus(),this.carousel.el.children(".ogx_carousel_views").removeClass("ogx_container_flattened").css("transform","translate3d("+a+", 0px, 0px)"))),this},this.empty=function(){return this.carousel.empty(),this.tabs.empty(),this},function(){OGX.Data.merge(n,i,!1),OGX.Data.merge(n.carousel,i.carousel,!1),n.tabs&&"object"!=typeof n.tabs&&(n.tabs={}),e.el.addClass("ogx_container");var t=!1;n.tabs&&(!function(){var t={el:'.ogx_container[data-ogx-id="'+e.id+'"]',reorder:n.reorder,add:!1,remove:!1,chromeos:n.chromeos,index:n.index};if(!0===n.tabs){n.tabs=[];for(var i=0;i<n["node:OML"].length;i++)for(var o in n["node:OML"][i])n["node:OML"][i][o].hasOwnProperty("title")&&n.tabs.push({label:n["node:OML"][i][o].title})}t=OGX.Data.merge(n.tabs,t),e.tabs=e.create("Tabs",t)}(),t="ogx_carousel_shink");var o=n["node:OML"].slice(),a={},r='.ogx_container[data-ogx-id="'+e.id+'"]:Carousel';a["node:OML"]={},a["node:OML"][r]={id:e.id+"_carousel",css:t,anim:n.anim,chromeos:n.chromeos,drag:n.carousel.drag,index:n.index,dots:n.dots,"node:OML":o},n["node:OML"]=a["node:OML"],setTimeout((function(){e.resize()}),0)}()},OGX.Container.CHANGE="ContainerChange",require("Controller","Touch"),OGX.Controller=function(t){construct(this,"Controller");t=OGX.Data.merge(t,{enabled:!0,blured:!0,always_on:!1}),this.el=!1,this.blured=t.blured,this.enabled=t.enabled,this.floating=!1,this.always_on=t.always_on,this.id=t.id},OGX.Controller.prototype.enable=function(){return this.enabled||(this.enabled=!0,this.focus()),this},OGX.Controller.prototype.disable=function(){return this.enabled&&(this.enabled=!1,this.blur()),this},OGX.Controller.prototype.blur=function(){return this.always_on||this.blured||(this.blured=!0,this.ux(!1)),this},OGX.Controller.prototype.focus=function(){return this.blured&&this.enabled&&(this.blured=!1,this.ux(!0)),this},OGX.Controller.prototype.construct=function(){},OGX.Controller.prototype.ux=function(){},OGX.Controller.prototype.resize=function(){},OGX.Controller.prototype.clear=function(){},OGX.Controller.prototype.destroy=function(){},OGX.Controller.prototype.kill=function(){OGX.Object.destroy(this)},OGX.Controller.prototype.toOML=function(){var t={};return t[this.id+":Controllers."+this._CLASS_]={},t},OGX.Display=function(t){"use strict";var e,i,n={display:!1,displays:!1},o={html:!1,css:!1,oml:!1,placeholder:!1,template:!1,view:!1,bind_css:!1,add_css:!1,calc_css:!1,bind_template:!1,calc_template:!1};function a(t,e){return-1!==t.indexOf("{{")?OGX.OSE.exec(t,e):t}function r(t){if(e.display&&(!e.display.hasOwnProperty("bind")||!e.display.bind))return OGX.Data.merge(e.display,{},!0,!1,!1);if(e.displays&&e.display.hasOwnProperty("bind")&&e.display.bind){if(t.hasOwnProperty(e.display.bind)){var i=t[e.display.bind];return OGX.Data.merge({},e.displays[i],!0,!1,!1)}if(e.displays.hasOwnProperty("__default"))return OGX.Data.clone(e.displays.__default)}return!1}function s(t){var e=OGX.Data.merge(o,t,!0,!0,!1);return e.template&&("object"==typeof e.template?(e.template.hasOwnProperty("conditions")&&(e.calc_template=!0),e.template.hasOwnProperty("bind")&&(e.bind_template=!0)):0===e.template.indexOf("{{")?e.calc_template=!0:(e.html=OGX.Templater.get(e.template),e.template=!1)),e.css&&(e.bind_css="object"==typeof e.css&&e.css.hasOwnProperty("bind"),e.add_css="object"==typeof e.css&&e.css.hasOwnProperty("add"),e.calc_css="object"==typeof e.css&&e.css.hasOwnProperty("conditions")||"string"==typeof e.css&&"{{"===e.css.slice(0,2)),e}function l(t){if(void 0===t&&(t={}),e=OGX.Data.clone(n),!t.hasOwnProperty("display")&&!t.hasOwnProperty("displays"))return e.display=OGX.Data.merge(o,t,!0,!0,!1),e.display=s(e.display),void(i=r());if(t.hasOwnProperty("display")&&t.display&&!t.display.hasOwnProperty("bind"))return e.display=OGX.Data.merge(o,t.display,!0,!0,!1),e.display=s(e.display),void(i=r());if(t.hasOwnProperty("display")&&t.display&&t.display.hasOwnProperty("bind")&&t.hasOwnProperty("displays")&&t.displays&&(e.display=t.display,e.displays=OGX.Data.clone(t.displays)),e.displays)for(var a in e.displays)e.displays[a]=OGX.Data.merge(o,e.displays[a],!0,!0,!0),e.displays[a]=s(e.displays[a])}this.val=function(t){if(void 0===t)return OGX.Data.clone(e);l(t)},this.display=function(t){return e.displays&&e.displays.hasOwnProperty(t)?(i=e.displays[t],!0):i},this.css=function(t){var e,n="",o=void 0!==t;if((e=o?r(t):i)&&(e.bind_css&&o?n+=t[a(e.css.bind,t)]:e.css&&"string"==typeof e.css&&(n=a(e.css,t)),e.add_css&&(n+=" "+a(e.css.add,t)),e.calc_css&&o))if("string"==typeof e.css)n=a(e.css,t);else for(var s,l,c=0;c<e.css.conditions.length;c++)if(OGX.OSE.exec(e.css.conditions[c][0],t)&&((s=e.css.conditions[c][1]).hasOwnProperty("css")&&(n=a(s.css,t)),s.hasOwnProperty("add")&&(n+=" "+a(s.add,t)),s.hasOwnProperty("remove"))){l=s.remove.explode(" ");for(var d=0;d<l.length;d++)n=n.replace(a(l[d],t),"")}return n||""},this.html=function(t){var e,n=!1,o=void 0!==t;return(e=o?r(t):i)&&(e.bind_template&&o?n=OGX.Templater.get(t[e.template.bind]):e.template?e.calc_template&&0===e.template.indexOf("{{")?(n=OGX.OSE.exec(e.template,t),n=OGX.Templater.get(n)):n=e.html:e.html&&(n=e.html),o&&n&&(n=OGX.Templater.make(n,t))),n||(n=""),n},this.oml=function(t,e,n){void 0===n&&(n="&item");var o={},a=r(e);if(a||(a=i),a){if(a.oml)return"string"==typeof a.oml&&(a.oml=app.getOML(a.oml)),o=OGX.OML.rename(OGX.Data.clone(a.oml),t),OGX.OML.replaceDataRecursive(o,e,n),a.placeholder?function(t,e,i){var n,o,a=OGX.Data.clone(t.oml);for(var r in a){var s,l;for(var c in a[n=r.replace("default",e)]=a[r],a[n]["node:OML"]=[],t.placeholder){l=i[c].length;for(var d=0;d<l;d++){for(var u in s=OGX.Data.clone(t.placeholder[c]),(o=OGX.Data.clone(i))[c]=o[c][d],s){s[u].data=o;break}a[n]["node:OML"].push(s)}return delete a[r],a}}return!1}(a,t,e):o;if(a.template){if("string"==typeof a.template)if(0===a.template.indexOf("{{"))(s=OGX.OSE.exec(a.template,e))&&(o[t+":Templates."+s]={data:e});else o[t+":Templates."+a.template]={data:e};else if(a.bind_template)o[t+":Templates."+e[a.template.bind]]={data:e};else if(a.calc_template)for(var s,l=0;l<a.template.conditions.length;l++){var c=a.template.conditions[l][0];if(s=OGX.OSE.exec(c,e)){!0===s?o[t+":Templates."+a.template.conditions[l][1]]={data:e}:1===a.template.conditions[l].length&&(o[t+":Templates."+s]={data:e});break}}return o}if(a.hasOwnProperty("html"))return o[t+":Html"]={html:this.html(e)},o}return!1},this.hasOML=function(){return!1!==i.oml},this.toJSON=function(){return e},l(t)},require("Dots","Uxi","Touch"),OGX.Dots=function(t){construct(this,"Dots");var e,i=this,n=t,o={el:"document",total:0,current:0,clickable:!0,callbacks:{select:null}},a={};function r(t){switch(a[t]._NAME_){case"Carousel":a[t].el.off(OGX.Carousel.CHANGE,s),a[t].el.off(OGX.Carousel.ADDED+" "+OGX.Carousel.REMOVED,l),delete a[t]}}function s(t,e){i.select(e)}function l(t,e){n.total=e,d()}function c(t){t?e.on(i.touch.down,".ogx_dots_item",(function(){var t=Number($(this).data("id"));i.select(t),i.onSelect(t),e.trigger(OGX.Dots.SELECT,t),function(t){for(var e in a)switch(a[e]._NAME_){case"Carousel":a[e].val(t)}}(t)})):e.off(i.touch.down)}function d(){for(var t,i="",o=0;o<n.total;o++)t="",n.current===o&&(t="ogx_dots_selected"),i+='<div class="ogx_dots_item" data-id="'+o+'"><span class="ogx_dots_gfx '+t+'"></span></div>';e.html(i)}this.onFocus=function(){return n.clickable&&c(!0),this},this.onBlur=function(){return n.clickable&&c(!1),this},this.bind=function(t,e){return!(a.hasOwnProperty(t)||!e.hasOwnProperty("_NAME_"))&&function(t,e){switch(a[t]=e,e._NAME_){case"Carousel":n.total=e.panels().length,n.current=e.val(),e.el.on(OGX.Carousel.CHANGE,s),e.el.on(OGX.Carousel.ADDED+" "+OGX.Carousel.REMOVED,l)}return!0}(t,e)},this.unbind=function(t){return!!a.hasOwnProperty(t)&&r(t)},this.select=function(t){e.find(".ogx_dots_selected").removeClass("ogx_dots_selected"),e.children(".ogx_dots_item:eq("+t+")").children(".ogx_dots_gfx").first().addClass("ogx_dots_selected"),n.current=t},this.onSelect=function(){},this.destroy=function(){!function(){for(var t in a)r(t)}()},OGX.Data.merge(n,o),n.callbacks.select||(n.callbacks.select=i.onSelect),(e=i.el).addClass("ogx_dots"),d()},OGX.Dots.SELECT="DotsSelect",require("DynamicList","Uxi","Bind","Touch"),OGX.DynamicList=function(__config){construct(this,"DynamicList");var that=this,config=__config,config_default={el:null,key:!1,as:"item",display:!1,displays:!1,reorder:!1,swipe:!1,reselect:!1,chromeos:!1,min_x:30,hold_time:1e3,interval:5,list:[],selection:[],no_selection:{enabled:!1,prop:"",val:0},callbacks:{select:null,unselect:null},mode:OGX.DynamicList.SELECT_MODE_SINGLE,trigger:!1,scope:!0,swipe_template:'<div class="ogx_dynamic_list_item ogx_dynamic_list_swiper_back_item" style="height:{{$height}}px; z-index:{{$zindex}}; margin-bottom:{{$margin}}px;">{{$template}}</div>',zindex:1},swipe_default={mode:OGX.DynamicList.SWIPE_MODE_DELETE,options:{},template:!1,html:""},container,filtered,isFiltered,selection=new OGX.List,key_id=1,key_default="__id__",key,drag={mode:!1,stime:0,target:0,si:0,ei:0,y:0},move_intv=null,hold_intv=null,drag_intv=null,swipe_dir=0,display=new OGX.Display(config),ready=!1,scroller=!1;function isSelectable(__item){return!config.no_selection.enabled||eval("__item."+config.no_selection.prop+" === config.no_selection.val")}function replace(t,e,i){if(display.hasOML()){var n,o,a=toDataId(i[e]),r=display.oml('.ogx_dynamic_list[data-ogx-id="'+that.id+'"] > .ogx_dynamic_list_item[data-ogx-id='+a+"]",i,config.as);$('.ogx_dynamic_list[data-ogx-id="'+that.id+'"] > .ogx_dynamic_list_item[data-ogx-id='+a+"]").find(".ogx_uxi").each((function(t,e){n=$(e).data("ogx-id"),(o=that.cfind(!1,n,1))&&that.find(o._NAME_,o.id,"remove")})),OGX.OML.render(that,r,i)}else{var s="";selection.length&&selection.find(e,i[e],1)&&(s="ogx_dynamic_list_selected_item "),t.attr("class","").addClass("ogx_dynamic_list_item "+s+display.css(i)),t.html(display.html(i))}}function render(){var t=getWorkList(),e=selection;isFiltered&&(selection.resetFilters(),selection.setFilters(config.list.getFilters()),(e=selection.filter()).length!==selection.length&&(e.length?container.trigger(OGX.DynamicList.SELECT_FILTERED,e):container.trigger(OGX.DynamicList.SELECT_UNFILTERED,selection)));for(var i,n,o,a="",r=[],s=0;s<t.length;s++)if(!config.scope||!t[s].hasOwnProperty("scope")||config.scope&&!0===config.scope&&OGX.Scope.eval(t[s].scope)||config.scope&&"string"==typeof config.scope&&OGX.Scope.eval(t[s].scope,config.scope)){!1,n="",i=t[s][key],selection.find(key,i,1)&&(n="ogx_dynamic_list_selected_item"),display.html(t[s]);var l=toDataId(i);a+='<div class="ogx_dynamic_list_item '+n+" "+display.css(t[s])+'" data-ogx-id='+l+"></div>",o=display.oml('.ogx_dynamic_list[data-ogx-id="'+that.id+'"] .ogx_dynamic_list_item[data-ogx-id='+l+"]",t[s],config.as),r.push(o)}container.html(a),parseOML(r),config.trigger&&container.trigger(OGX.DynamicList.RENDER)}function parseOML(t){for(var e=0;e<t.length;e++)that.parse(t[e])}function listenScope(t){t?$(document).on(OGX.Scope.CHANGE,onScopeChange):$(document).off(OGX.Scope.CHANGE,onScopeChange)}function onScopeChange(){that.render()}function listenItems(t){void 0!==container&&ready&&(t?container.on(that.touch.click,".ogx_dynamic_list_item",onClick):container.off(that.touch.click,".ogx_dynamic_list_item",onClick))}function listenTouch(t){t?container.on(that.touch.down,".ogx_dynamic_list_item",onTouchStart):container.off(that.touch.down,".ogx_dynamic_list_item",onTouchStart)}function listenTouchHold(t){t?hold_intv=setInterval(onTouchHold,20):(clearInterval(hold_intv),hold_intv=null)}function listenTouchMove(t){t?container.on(that.touch.move,".ogx_dynamic_list_item",onTouchMove):container.off(that.touch.move,".ogx_dynamic_list_item")}function onTouchStart(t){drag.mode=!1,drag.target=$(t.currentTarget),drag.si=drag.target.index(),drag.cy=container.offset().top,t=that.event(t),drag.startx=t.pageX,drag.starty=t.pageY,drag_intv&&clearInterval(drag_intv),drag.stime=(new Date).getTime(),config.reorder&&listenTouchHold(!0),listenTouchMove(!0),$("body").on(that.touch.up,onTouchEnd)}function onTouchMove(t){t=that.event(t),drag.y=-1*(drag.starty-t.pageY),drag.mx=t.pageX-drag.startx,drag.px=t.pageX,drag.py=t.pageY,drag.st=!1,config.swipe&&!drag.mode&&Math.abs(drag.mx)>config.min_x&&(drag.mode="swipe",config.scroll&&!drag.st&&(drag.st=!0,scroller.disable(),scroller.container().css("cssText","height:"+scroller.container().height()+"px !important;")),config.reorder&&listenTouchHold(!1),listenSwipeMove(!0))}function onTouchHold(){if(!drag.mode&&(new Date).getTime()-drag.stime>config.hold_time){drag.mode="reorder";var t=drag.target.data("ogx-id"),e=getWorkList();drag.item=e.find(key,t,1),container.trigger(OGX.DynamicList.HOLD,drag.item),listenTouchHold(!1),setTimeout(startDrag(),0)}}function onTouchEnd(t){if($("body").off(that.touch.up,onTouchEnd),(config.reorder||config.swipe)&&(clearInterval(drag_intv),drag_intv=!1,listenTouchMove(!1)),config.swipe&&listenSwipeMove(!1),config.reorder&&listenTouchHold(!1),config.scroll&&(scroller.enable(),scroller.container().removeAttr("style")),config.reorder){if("reorder"===drag.mode&&(container.off(that.touch.move,handleMove),drag.clone)){var e=JSON.parse(JSON.stringify(config.list[drag.si]));return config.list.delete(drag.si),config.list.insert(e,drag.ei),drag.clone.remove(),drag.clone=!1,drag.target.removeClass("ogx_dynamic_list_frozen"),void container.trigger(OGX.DynamicList.DROP,drag.item)}var i=drag.target.data("ogx-id"),n=config.list.find(key,i,1);config.callbacks.select(n),container.trigger(OGX.DynamicList.SELECT,n),that.select(key,i)}else if(config.swipe&&"swipe"===drag.mode){var o=drag.target.outerWidth(!0),a=Math.abs(100*drag.mx/o);a<50?a?(drag.target.addClass("ogx_dynamic_list_swiper_trans_item_restore"),drag.target.addClass("ogx_dynamic_list_swiper_trans_item").css("transform","translateX(0px)")):(drag.target.next(".ogx_dynamic_list_swiper_back_item").remove(),drag.target.css("transform","translateX(0px)")):drag.mx>0?(drag.target.attr("data-side","left"),drag.target.addClass("ogx_dynamic_list_swiper_trans_item").css("transform","translateX("+o+"px)")):(drag.target.attr("data-side","right"),drag.target.addClass("ogx_dynamic_list_swiper_trans_item").css("transform","translateX("+-1*o+"px)"))}drag.mode=!1}function listenSwipeMove(t){t?move_intv=setInterval(onSwipeMove,config.interval):(clearInterval(move_intv),move_intv=!1)}function onSwipeMove(){if("swipe"===drag.mode&&Math.abs(drag.mx)>config.min_x){var t=parseInt(drag.target.css("border-top-width").split("px")[0]),e=parseInt(drag.target.css("border-bottom-width").split("px")[0]),i=drag.target.outerHeight();if(!drag.target.hasClass("ogx_dynamic_list_swiper_work")){drag.target.addClass("ogx_dynamic_list_swiper_work");var n={};n.height=i,n.margin=-2*(t+e),n.top=drag.target.position().top,n.zindex=config.zindex;var o="";config.swipe.template?o=OGX.Templater.get(config.swipe.template):config.swipe.html&&(o=config.swipe.html),n.template=o,o=OGX.Templater.make(config.swipe_template,n),drag.target.after(o)}if(config.swipe.mode===OGX.DynamicList.SWIPE_MODE_SIDE&&(drag.mx<0?(swipe_dir=1,drag.target.next(".ogx_dynamic_list_swiper_back_item").addClass("ogx_dynamic_list_swiper_side_left").removeClass("ogx_dynamic_list_swiper_side_right")):(swipe_dir=-1,drag.target.next(".ogx_dynamic_list_swiper_back_item").addClass("ogx_dynamic_list_swiper_side_right").removeClass("ogx_dynamic_list_swiper_side_left"))),drag.py>=drag.target.offset().top&&drag.py<=drag.target.offset().top+i){drag.target.css("transform","translateX("+drag.mx+"px)");var a=drag.target.next(".ogx_dynamic_list_swiper_back_item");drag.mx<0?a.addClass("ogx_dynamic_list_swiper_right").removeClass("ogx_dynamic_list_swiper_left"):a.addClass("ogx_dynamic_list_swiper_left").removeClass("ogx_dynamic_list_swiper_right")}else onTouchEnd(drag.target)}}function listenTrans(t){t?container.on("transitionend",".ogx_dynamic_list_swiper_trans_item",onTransEnd):container.off("transitionend",".ogx_dynamic_list_swiper_trans_item",onTransEnd)}function onTransEnd(t){var e=$(this),i=e.next(".ogx_dynamic_list_swiper_back_item");if(e.hasClass("ogx_dynamic_list_swiper_trans_item_restore"))i.remove(),e.css("transform","translateX(0px)"),e.removeClass("ogx_dynamic_list_swiper_trans_item");else{var n,o=e.index(),a=e.data("ogx-id");switch(config.swipe.mode){case OGX.DynamicList.SWIPE_MODE_DELETE:e.remove(),shrink(i),n=config.list.findDelete(config.key,String(a),1),container.trigger(OGX.DynamicList.DELETE,{item:n,index:o});break;case OGX.DynamicList.SWIPE_MODE_SIDE:var r;n=config.list.find(config.key,a,1),r=-1===swipe_dir?"right":"left",container.trigger(OGX.DynamicList.SIDED,{side:r,item:n,index:o});break;case OGX.DynamicList.SWIPE_MODE_CUSTOM:}}e.removeClass("ogx_dynamic_list_swiper_work"),e.removeClass("ogx_dynamic_list_swiper_trans_item_restore")}function shrink(t,e){t.addClass("ogx_dynamic_list_swiper_delete"),t.on("transitionend",(function(){t.off("transitionend"),t.remove()}))}function startDrag(){drag.tgy=drag.target.position().top,drag.tgx=drag.target.position().left,drag.y=0;var t=drag.target.outerWidth(),e=drag.target.outerHeight();drag.clone=drag.target.clone().css({position:"absolute",left:drag.tgx+"px",top:drag.tgy+"px",width:t+"px",height:e+"px"}).addClass("ogx_dynamic_list_reorder").prependTo(container),drag.clone.addClass("ogx_dynamic_list_drag"),drag.target.addClass("ogx_dynamic_list_frozen"),drag_intv=setInterval(handleDrag,config.interval),container.on(that.touch.move,handleMove)}function handleMove(t){t.preventDefault(),t.stopImmediatePropagation(),t=that.event(t),drag.y=-1*(drag.starty-t.pageY)}function handleDrag(){if(Math.abs(container.offset().top-drag.cy)>1)return clearInterval(drag_intv),drag_intv=!1,drag.clone.remove(),drag.clone=!1,drag.target.removeClass("ogx_dynamic_list_frozen"),void container.trigger(OGX.DynamicList.RELEASE);var t=!1,e=container.children(".ogx_dynamic_list_item:last"),i=e.offset().top+-1*drag.cy;if(drag.tgy+drag.y<i?drag.clone.css({top:drag.tgy+drag.y}):t=e,!t){var n,o,a,r,s=0;container.children(".ogx_dynamic_list_item").each((function(e,i){if((i=$(i))[0]!==drag.clone[0]&&!i.hasClass("ogx_dynamic_list_frozen")){if(n=i.offset().top,o=i.outerHeight(),r=n+o/2,(a=drag.clone.offset().top)>n&&a<r)return s=-1,void(t=i);if(a>r&&a<n+o)return s=1,void(t=i)}}))}if(t){var l,c=$(t).data("ogx-id");switch(drag.ei=config.list.findIndex(key,c).index,s){case-1:t.index()-1!==drag.target.index()&&((l=drag.target.detach()).removeClass("ogx_dynamic_list_drag"),l.insertBefore(t));break;case 1:t.index()+1!==drag.target.index()&&((l=drag.target.detach()).removeClass("ogx_dynamic_list_drag"),l.insertAfter(t))}t=!1}}function onClick(t){var e=$(this);switch(config.mode){case OGX.DynamicList.SELECT_MODE_SINGLE:!config.reselect&&e.hasClass("ogx_dynamic_list_selected_item")||e.hasClass("ogx_dynamic_list_swiper_trans_item")||(o=selectIndex(e.index(),!0))&&(config.callbacks.select(o),container.trigger(OGX.DynamicList.SELECT,o));break;case OGX.DynamicList.SELECT_MODE_TOGGLE:e.hasClass("ogx_dynamic_list_selected_item")||e.hasClass("ogx_dynamic_list_swiper_trans_item")?(o=selectIndex(e.index(),!1),config.callbacks.unselect(o),container.trigger(OGX.DynamicList.UNSELECT,o)):(that.resetSelection(),(o=selectIndex(e.index(),!0))&&(config.callbacks.select(o),container.trigger(OGX.DynamicList.SELECT,o)));break;case OGX.DynamicList.SELECT_MODE_MULTI:e.hasClass("ogx_dynamic_list_selected_item")||e.hasClass("ogx_dynamic_list_swiper_trans_item")?(o=selectIndex(e.index(),!1),config.callbacks.unselect(o),container.trigger(OGX.DynamicList.UNSELECT,o)):(o=selectIndex(e.index(),!0))&&(config.callbacks.select(o),container.trigger(OGX.DynamicList.SELECT,o));break;case OGX.DynamicList.SELECT_MODE_HIT:var i=getWorkList();if(e.hasClass("ogx_dynamic_list_swiper_back_item")){var n="left";e.hasClass("ogx_dynamic_list_swiper_side_right")&&(n="right"),container.trigger(OGX.DynamicList.BACK_HIT,{side:n,item:i[e.index()]})}else{var o=i[e.index()];config.callbacks.select(o),container.trigger(OGX.DynamicList.SELECT,o)}}}function select(t,e,i){var n=null;"single"===config.mode&&(that.resetSelection(),n=1);var o,a,r=getWorkList(),s={};Array.isArray(e)?(s[t]={in:e},sel=r.get(s,null,n)):(s[t]={eq:e},sel=r.get(s)),sel&&!Array.isArray(sel)&&(sel=[sel]);for(var l=0;l<sel.length;l++)a=toDataId(sel[l][key]),(o=container.find(".ogx_dynamic_list_item[data-ogx-id="+a+"]"))&&(i?(o.addClass("ogx_dynamic_list_selected_item"),selection.push(sel[l])):(o.removeClass("ogx_dynamic_list_selected_item"),selection.findDelete(key,sel[l][key],1)));return"single"===config.mode&&sel.length?sel[0]:sel}function selectIndex(t,e){var i,n,o=getWorkList();if((i=container.find(".ogx_dynamic_list_item:eq("+t+")")).length>0){config.mode===OGX.DynamicList.SELECT_MODE_SINGLE&&that.resetSelection();var a=i.data("ogx-id");return isSelectable(n=o.find(key,a,1))&&(e?(i.addClass("ogx_dynamic_list_selected_item"),selection.push(o[t])):(i.removeClass("ogx_dynamic_list_selected_item"),selection.findDelete(key,a,1))),n}return!1}function getWorkList(){return isFiltered?filtered:config.list}function toDataId(t){return"string"==typeof t&&(t='"'+t+'"'),t}function forceIds(){for(var t=0;t<config.list.length;t++)config.list[t][key]=key_id,key_id++}function clearIds(t){for(var e=0;e<t.length;e++)delete t[e][key];return t}function finalize(){config.selection.length&&that.observeOnce({childList:!0,subtree:!0},(function(){for(var t=0;t<config.selection.length;t++)that.select(key,config.selection[t])})),that.val(config.list,!1,!1),ready=!0,!that.blured&&config.enabled&&listenItems(!0),!0===config.scope&&listenScope(!0),container.trigger(OGX.DynamicList.READY)}function initDefaults(){config||(config={}),OGX.Data.merge(config,config_default),config.list.hasOwnProperty("_NAME_")||(config.list=new OGX.List(config.list)),!config.key&&config.list.length>0?(key=key_default,forceIds()):key=config.key,config.swipe&&("object"!=typeof config.swipe&&(config.swipe={}),OGX.Data.merge(config.swipe,swipe_default)),config.callbacks.select||(config.callbacks.select=that.onSelect),config.callbacks.unselect||(config.callbacks.unselect=that.onUnselect),(container=that.el).addClass("ogx_dynamic_list")}function init(){initDefaults(),finalize(),config.scroll&&(scroller=that.find("Scroller",config.id+"_scroller"))}this.onFocus=function(t){return void 0===t&&(t=!1),(t||config.mode!==OGX.DynamicList.STATIC)&&(listenItems(!0),(config.reorder||config.swipe)&&(listenTouch(!0),config.swipe&&listenTrans(!0))),this},this.onBlur=function(t){return void 0===t&&(t=!1),(t||config.mode!==OGX.DynamicList.STATIC)&&(listenItems(!1),(config.reorder||config.swipe)&&(listenTouch(!1),config.swipe&&listenTrans(!1))),this},this.bindFilter=function(t,e,i){void 0!==i&&(config.list.removeFilter(t),config.list.addFilter(t,e,i)),config.list.getFilters()&&(filtered=config.list.filter(),isFiltered=!0),setTimeout(render,0)},this.unbindFilter=function(t){return config.list.removeFilter(t),filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0),this},this.bindValue=function(){return this.getSelection()},this.destroy=function(){!0===config.scope&&listenScope(!1),this.clearBinds(),container.empty(),container.removeClass("ogx_dynamic_list")},this.val=function(t,e,i){if(void 0===t){if(!config.key){var n=JSON.parse(JSON.stringify(config.list));return clearIds(OGX.List(n))}return config.list}var o;void 0===e&&(e=!1),void 0===i&&(i=!0),t.hasOwnProperty("insert")||(t=new OGX.List(t)),this.resetSelection(),e||(o=config.list.getFilters()),config.list=t,config.key&&key!==key_default||(key_id=1,key=key_default,t=JSON.parse(JSON.stringify(t)),forceIds()),!e&&Object.keys(o).length?(config.list.setFilters(o),setTimeout(this.filter,0)):i?setTimeout(render,0):render()},this.scope=function(t){return"undefined"!=typeof __script&&"string"==typeof config.scope?(config.scope=t,void this.render()):config.scope},this.onSelect=function(t){},this.onUnselect=function(t){},this.getFilteredList=function(){if(isFiltered){if(!config.key){var t=JSON.parse(JSON.stringify(filtered));return clearIds(OGX.List(t))}return filtered}return!1},this.display=function(t){return void 0===t?config.display:display.val(t)},this.key=function(t){if(void 0===t)return t;config.key=t,config.key||(key=key_default)},this.mode=function(t){return void 0===t?config.mode:(config.mode!==t&&(config.mode===OGX.DynamicList.STATIC?this.onFocus(!0):t===OGX.DynamicList.STATIC&&this.onBlur(!0),config.mode=t),this)},this.noSelection=function(t,e){return 1===arguments.length?"object"==typeof t?void(config.no_selection=t):void(config.no_selection.enabled=t):2===arguments.length?(config.no_selection.enabled=!0,config.no_selection.prop=t,void(config.no_selection.val=e)):config.no_selection},this.order=function(t,e){return config.list.order(t,e),setTimeout(render,0),this},this.filter=function(){return filtered=config.list.filter(),isFiltered=!0,setTimeout(render,0),filtered},this.unfilter=function(){return isFiltered=!1,setTimeout(render,0),this},this.addFilter=function(t,e,i){return config.list.addFilter(t,e,i)},this.removeFilter=function(t,e,i){return config.list.removeFilter(t,e,i)},this.resetFilters=function(){return config.list.resetFilters()},this.getFilters=function(){return config.list.getFilters()},this.insert=function(t,e){if(!Array.isArray(t)){config.key||(t[key]=key_id++);var i=!1,n=!0;if(isFiltered){var o=new OGX.List(t);o.setFilters(config.list.getFilters()),0===o.filter().length?n=!1:filtered.push(t)}var a=toDataId(t[key]),r='<div class="ogx_dynamic_list_item '+display.css(t)+'" data-ogx-id='+a+"></div>",s=display.oml('.ogx_dynamic_list[data-ogx-id="'+this.id+'"] .ogx_dynamic_list_item[data-ogx-id='+a+"]",t,config.as);if(void 0===e)config.list.push(t),n&&container.append(r);else if(config.list.insert(t,e),n&&(isFiltered?i=(filtered=config.list.filter()).findIndex(key,t[key]):0===e?container.prepend(r):i=config.list.findIndex(key,t[key]),i)){var l=container.children(".ogx_dynamic_list_item:nth-child("+(i.index+1)+")");l.length>0?l.before(r):container.append(r)}return this.parse(s),config.trigger&&container.trigger(OGX.DynamicList.RENDER),n}for(var c=0;c<t.length;c++)void 0!==e?this.insert(t[c],e+c):this.insert(t[c])},this.delete=function(t){var e=getWorkList().delete(t);if(e){config.list.findDelete(key,e[key],1),isFiltered&&filtered.findDelete(key,e[key],1);var i=container.children(".ogx_dynamic_list_item:eq("+t+")");return this.remove(e[key]),i.remove(),!0}return!1},this.deleteSelection=function(){for(var t=0;t<selection.length;t++)config.list.findDelete(key,selection[t][key],1),isFiltered&&filtered.findDelete(key,selection[t][key],1),this.remove(selection[t][key]),container.children(".ogx_dynamic_list_selected_item").remove();return!0},this.findDelete=function(t,e,i){void 0===i&&1===arguments.length&&(e=t,t=key);var n,o,a,r=config.list.findDelete(t,e,i);r&&!Array.isArray(r)&&(r=[r]);for(var s=0;s<r.length;s++)isFiltered&&filtered.findDelete(t,e,i),a=toDataId(r[s][key]),o=(n=container.children(".ogx_dynamic_list_item[data-ogx-id="+a+"]")).next(".ogx_dynamic_list_swiper_back_item"),n.remove(),this.remove(r[s][key]),shrink(o);return 1===i?r[0]:r},this.findIndex=function(t,e){var i=arguments.length;1===i&&(e=t,t=key);var n=config.list.find(t,e,1);if(n){var o=toDataId(n[key]);return container.children(".ogx_dynamic_list_item[data-ogx-id="+o+"]").index()}return-1},this.findReplace=function(t,e,i){var n=arguments.length;2===n&&(i=e,e=t,t=key),config.key||(i[key]=key_id++);var o=config.list.findReplace(t,e,i,1);if(o){isFiltered&&filtered.findReplace(t,e,i,1);var a=toDataId(o[key]),r=container.children(".ogx_dynamic_list_item[data-ogx-id="+a+"]").first();return r.length&&(r.attr("data-ogx-id",i[key]),replace(r,key,i),config.trigger&&container.trigger(OGX.DynamicList.RENDER)),!0}return!1},this.replaceAt=function(t,e){var i=getWorkList();if(void 0===i[t])return!1;if(config.key)i[t]=e;else{var n=i[t][key];i[t]=e,i[t].key=n}return this.refreshAt(t)},this.select=function(t,e){return void 0===e&&(e=t,t=key),select(t,e,!0)},this.selectIndex=function(t){return selectIndex(t,!0)},this.index=function(t){if(void 0!==t){var e=getWorkList();return this.select(key,e[t][key])}return container.children(".ogx_dynamic_list_selected_item").index()},this.unselect=function(t,e){return void 0===e&&(e=t,t=key),select(t,e,!1)},this.unselectIndex=function(t){return selectIndex(t,!1)},this.resetSelection=function(){return selection=new OGX.List,container.children(".ogx_dynamic_list_selected_item").removeClass("ogx_dynamic_list_selected_item"),this},this.getSelection=function(t){if(void 0===t&&(t=!1),!t){var e,i=selection;if(isFiltered&&(selection.resetFilters(),selection.setFilters(config.list.getFilters()),i=selection.filter()),config.key)e=i;else e=clearIds(OGX.Data.clone(i));return config.mode===OGX.DynamicList.SELECT_MODE_SINGLE?!!e.length&&e[0]:e=new OGX.List(e)}return container.children(".ogx_dynamic_list_selected_item")},this.getElement=function(t,e){var i=arguments.length;1===i&&(e=t,t=key);var n=config.list.find(t,e,1);if(n){var o=toDataId(n[key]);return container.children(".ogx_dynamic_list_item[data-ogx-id="+o+"]")[0]}return!1},this.findUpdate=function(t,e,i,n,o,a){var r;"number"==typeof n&&(a=o,Array.prototype.unshift.call(arguments,key)),void 0===a&&(a=!0);var s=config.list.findUpdate.apply(config.list,arguments);if(s&&!Array.isArray(s)&&(s=[s]),s.length&&a){var l;isFiltered&&filtered.findUpdate.apply(filtered,arguments);for(var c=0;c<s.length;c++)l=toDataId(s[c][key]),(r=container.children(".ogx_dynamic_list_item[data-ogx-id="+l+"]").first()).length&&(replace(r,key,s[c]),config.trigger&&container.trigger(OGX.DynamicList.RENDER));return s.length}return!1},this.update=function(t,e,i,n,o){void 0===o&&(o=!0);var a=config.list.update(t,e,i,n);if(a&&!Array.isArray(a)&&(a=[a]),a.length&&o){var r;isFiltered&&filtered.update(arguments);for(var s=0;s<a.length;s++)r=toDataId(a[s][key]),el=container.children(".ogx_dynamic_list_item[data-ogx-id="+r+"]").first(),el.length&&(replace(el,key,a[s]),config.trigger&&container.trigger(OGX.DynamicList.RENDER));return a.length}return!1},this.refresh=function(t,e,i){var n=arguments.length;void 0!==i&&n--,1===n&&(e=t,t=key);var o=config.list.find(t,e,i);if(o&&(1===i&&(o=[o]),o.length))for(var a,r,s=0;s<o.length;s++)r=toDataId(o[s][key]),(a=container.children(".ogx_dynamic_list_item[data-ogx-id="+r+"]")).length>0&&replace(a,key,o[s]);return this},this.refreshAt=function(t){var e=getWorkList();if(void 0!==e[t]){var i=toDataId(e[t][key]),n=container.children(".ogx_dynamic_list_item[data-ogx-id="+i+"]");if(n.length>0)return replace(n,key,e[t]),!0}return!1},this.restore=function(t,e){var i=arguments.length;1===i&&(e=t,t=key);var n=config.list.find(t,e,1),o=toDataId(n[key]),a=container.children(".ogx_dynamic_list_item[data-ogx-id="+o+"]");a.addClass("ogx_dynamic_list_swiper_trans_item_restore"),a.css({transform:"translateX(0px)","z-index":config.zindex+1}),setTimeout((function(){a.next(".ogx_dynamic_list_swiper_back_item").remove()}),200)},this.wipe=function(){return container.empty(),this},this.reset=function(){return container.empty(),isFiltered=!1,config.list=new OGX.List,selection=new OGX.List,filtered=new OGX.List,this},this.render=function(){return setTimeout(render,0),this},init()},OGX.DynamicList.HOLD="DynamicListHold",OGX.DynamicList.RELEASE="DynamicListRelease",OGX.DynamicList.DROP="DynamicListDrop",OGX.DynamicList.SELECT="DynamicListSelect",OGX.DynamicList.DELETE="DynamicListDelete",OGX.DynamicList.SIDED="DynamicListSided",OGX.DynamicList.BACK_HIT="DynamicListBackHit",OGX.DynamicList.UNSELECT="DynamicListUnselect",OGX.DynamicList.RENDER="DynamicListRender",OGX.DynamicList.SELECT_MODE_SINGLE="single",OGX.DynamicList.SELECT_MODE_TOGGLE="toggle",OGX.DynamicList.SELECT_MODE_MULTI="multi",OGX.DynamicList.SELECT_MODE_HIT="hit",OGX.DynamicList.SELECT_FILTERED="DynamicListSelectFiltered",OGX.DynamicList.SELECT_UNFILTERED="DynamicListSelecUnfiltered",OGX.DynamicList.STATIC="static",OGX.DynamicList.SWIPE_LEFT="DynamicListSwipeLeft",OGX.DynamicList.SWIPE_RIGHT="DynamicListSwipeRight",OGX.DynamicList.SWIPE_MODE_DELETE="DynamicListSwipeModeDelete",OGX.DynamicList.SWIPE_MODE_SIDE="DynamicListSwipeModeSide",OGX.DynamicList.SWIPE_MODE_CUSTOM="DynamicListSwipeModeCustom",OGX.DynamicList.READY="DynamicListReady",OGX.DynamicList.BIND=OGX.DynamicList.SELECT+" "+OGX.DynamicList.UNSELECT,OGX.Fonction=function(__config,__data,__route_data){var that=this,config=__config,config_default={id:1,parent:null,fnc:null,data:null,success:null,error:null};OGX.Data.merge(config,config_default,!1);var fnc=eval(config.fnc),oml,promise=fnc.apply(null,[config.data]);promise.then((function(t){OGX.OML.result(config.id,t),oml=config.success,OGX.OML.render(config.parent,oml,__data,__route_data)}),(function(t){OGX.OML.result(config.id,t),oml=config.error,OGX.OML.render(config.parent,oml,__data,__route_data)}))},OGX.Form=function(){"use strict";var t=this,e={el:!1,allowed:!1,forbidden:!1,change_cb:!1,submit_cb:!1,validate:!1,diff:!0,params:null,elem_types:["input","select","textarea"],wait:1e3,fields:{},buffer:null},i={el:!1,allowed:/[0-9a-zA-Z'"--\\-\\!\\.\\?\\#\\@\\$\\:\\(\\)\\/_,;%' ]/,forbidden:/[<>]/,pattern:!1,validate:!1,mask:!1,mask_char:"%",paste:!0,autocomplete:null,multiline:!1,input_cb:!1,change_cb:!1,diff:!0,val:null,last_change:!1,wait:2e3,intv:!1,max:2500,type:"string",params:null},n=new OGX.List,o=new OGX.List,a=!1;function r(e,i){if(!a){var o,r=n.find("el",i,1);if(r&&r.config.change_cb){for(var s in r.fields)if(r.fields[s].intv)return;var c=d(r.form);for(var u in c)r.config.fields.hasOwnProperty(u)&&r.config.fields[u].hasOwnProperty("type")?c[u]=l(r.config.fields[u].type,c[u]):r.config.hasOwnProperty("type")&&(c[u]=l(r.config.type,c[u]));if(o=JSON.stringify(c),!r.diff||r.val!==o){var f;if(r.val=o,r.config.validate){f={obj:c,form:i,valid:!1};var h=t.validate(r.form);!0===h?f.valid=!0:(f.valid=!1,f.error=h)}else f=c;r.config.params&&(f.params=r.config.params),r.buffer&&clearTimeout(r.buffer),r.buffer=setTimeout((function(){r.config.change_cb(f)}),10)}}}}function s(e){var i={el:e.el,config:e,field:$(e.el),intv:!1};i.name=i.field.attr("name"),i.val=i.field.val(),i.field.val(i.val),e.pattern&&i.field.attr("pattern",e.pattern),n.insert(i),$(document).on("input change",i.el,(function(t){if(!a){var e=$(this).val();if(!i.config.diff||i.config.diff&&e!==i.val){if(i.config.input_cb){var n={value:null,obj:{},el:null};e=l(i.config.type,e),n.el=i.field[0],n.value=e,n.property=i.name,n.obj[i.name]=e,i.config.input_cb(n,i.config.params)}i.intv&&clearTimeout(i.intv),i.intv=setTimeout((function(){!function(t){var e=$(t.el).val();if(t.val=e,t.config.change_cb){var i={value:null,obj:{},el:null};e=l(t.config.type,e),i.el=t.field[0],i.property=t.name,i.value=e,i.obj[i.property]=e,t.config.validate&&(i.valid=i.el.checkValidity()),t.config.change_cb(i,t.config.params)}}(i)}),i.config.wait)}}})),e.multiline||$(document).on("keydown",i.el,(function(t){var e=$(this);if(void 0!==t.which&&void 0!==t.key){if(!a){if(i.config.mask&&8===t.which||46===t.which){var n=e[0].selectionStart,o=e.val();return o=8===t.which?o.substr(0,n-1):o.substr(0,n),e.val(o),!1}if(8!==t.which&&13!==t.which&&1===t.key.length){var r=t.key;if(13!==t.which&&i.config.mask){if((o=e.val()).length>=i.config.mask.length)return t.preventDefault(),t.stopImmediatePropagation(),!1;for(var s=i.config.mask,c=0;c<o.length;c++)i.config.mask.substr(c,1)===i.config.mask_char&&(s=s.replace(i.config.mask_char,o.substr(c,1)));var d=s.indexOf(i.config.mask_char),u=!1;return d+1<s.length+1&&(u=s.substr(d+1,1)),-1!==d&&(r===i.config.mask.substr(s.indexOf(i.config.mask_char)-1,1)?s=s.substr(0,s.indexOf(i.config.mask_char)-1):(s=s.substr(0,s.indexOf(i.config.mask_char)),u&&u!==i.config.mask_char&&setTimeout((function(){i.field.val(s+r+u)}),0))),void i.field.val(s)}}if(13===t.which){t.preventDefault(),t.stopImmediatePropagation();o=$(this).val();if(i.intv&&(clearInterval(i.intv),i.intv=null),i.config.change_cb){var f={value:null,obj:{},el:null};o=l(i.config.type,o),f.el=i.field[0],f.property=i.name,f.value=o,f.obj[i.name]=o,i.config.validate&&(f.valid=i.field[0].checkValidity()),i.config.change_cb(f,i.config.params)}else i.field.trigger("change",o)}}}else i.config.mask&&setTimeout((function(){for(var t=e.val(),n="",o=0,a=0;a<i.config.mask.length&&a-o!==t.length;a++)i.config.mask.substr(a,1)===i.config.mask_char||i.config.mask.substr(a,1)===t.substr(a-o,1)?n+=t.substr(a-o,1):i.config.mask.substr(a,1)!==i.config.mask_char&&(n+=i.config.mask.substr(a,1),a&&o++);e.val(n)}),0)})),(i.config.allowed||i.config.forbidden)&&t.restrictField(i.config)}function l(t,e){switch(t){case"string":return String(e);case"number":return Number(e);case"int":return parseInt(e);case"bool":if([!0,"true",1].includes(e))return!0;case"json":return JSON.parse(e)}return!1}function c(){for(var t=0;t<n.length;t++)n[t].hasOwnProperty("field")&&n[t].field.length&&(n[t].val=$(n[t].field[0]).val())}function d(t){return $(t).serializeArray().map(function(t){return this[t.name]=t.value,this}.bind({}))[0]}this.updateBind=function(t,e){var i=this.getBind(t);return!!i&&(OGX.Data.merge(i.config,e,!0,!1,!1),!0)},this.getBind=function(t){return n.get({el:{in:t}},null,null,1)},this.bindForm=function(o){return OGX.Data.merge(o,e,!1),function(e){for(var o,l,c={el:e.el,config:e,form:$(e.el),fields:new OGX.List,val:""},u=0;u<e.elem_types.length;u++)c.form.find(e.elem_types[u]).each((function(t,n){n.hasAttribute("name")&&(l=n.getAttribute("name"),o=OGX.Data.clone(i),OGX.Data.merge(o,e,!0,!1,!0),e.fields.hasOwnProperty(l)&&(o=OGX.Data.merge(o,e.fields[l],!0)),o.el=e.el+" "+e.elem_types[u]+'[name="'+l+'"]',o.change_cb=r,o.params=e.el,s(o),c.fields.insert({el:o.el}))}));c.form.on("submit",(function(e){if(e.preventDefault(),e.stopImmediatePropagation(),!a){var i={obj:d(c.el),form:c.el};if(c.config.params&&(i.params=c.config.params),c.config.validate){var n=t.validate(c.el);!0===n?i.valid=!0:(i.valid=!1,i.error=n)}c.config.submit_cb?c.config.submit_cb(i):c.form.trigger("submit",i)}})),n.insert(c)}(o),!0},this.enable=function(){a&&(a=!1)},this.disable=function(){a||(a=!0)},this.unbindForm=function(t){if(void 0===t)unbindAll("form");else{var e=n.find("el",t,1);if(e){for(var i in $(document).off("submit",e.el),e.fields)this.unbindField(e.fields[i].el);n.findDelete("el",t,1)}}},this.unbindAll=function(e){void 0===e&&(e="all");for(var i=0;i<n.length;i++)["form","all"].includes(e)&&n[i].hasOwnProperty("fields")?t.unbindForm(n[i].el):["field","all"].includes(e)&&!n[i].hasOwnProperty("fields")&&t.unbindField(n[i].el)},this.bindField=function(t){return OGX.Data.merge(t,i),s(t),!0},this.unbindField=function(t){var e=n.find("el",t,1);e&&($(document).off("input change",e.el),e.config.multiline||$(document).off("keydown",e.el),e.intv&&clearInterval(e.intv),o.find("el",e.el,1)&&this.unrestrictField(e.el),n.findDelete("el",e.el,1))},this.restrictField=function(t){return OGX.Data.merge(t,i),function(t){var e={el:t.el,config:t,field:$(t.el),keys:[],content:null},i=[8,9];null===t.autocomplete&&e.field[0].hasAttribute("autocomplete")&&"off"!==e.field.attr("autocomplete")?e.config.autocomplete=!0:e.config.autocomplete=t.autocomplete;t.autocomplete||e.keys.push(229);-1!==["input","texarea"].indexOf(e.field.get(0).tagName.toLowerCase())?e.content="val":e.content="html";e.config.multiline||e.keys.push(13);$(document).on("textInput keydown",e.el,(function(t){if("keydown"===t.type&&8==t.keyCode||46==t.keyCode)$(this).trigger("input");else if("textInput"===t.type){var n=t.originalEvent.data;if(n.length>1)return e.config.autocomplete?void 0:(t.preventDefault(),t.stopImmediatePropagation(),!1);if(1===n.length&&-1!==e.keys.indexOf(t.which)&&-1===t.which.indexOf(i))return t.preventDefault(),t.stopImmediatePropagation(),!1;if(e.config.multiline&&13===t.keyCode)return!1;if(e.config.allowed&&!n.match(e.config.allowed))return t.preventDefault(),t.stopImmediatePropagation(),!1;if(e.config.forbidden&&n.match(e.config.forbidden))return t.preventDefault(),t.stopImmediatePropagation(),!1;if($(t.originalEvent.target)[e.content]().length>=e.config.max)return t.preventDefault(),t.stopImmediatePropagation(),!1}})),$(document).on("paste",e.el,(function(t){if(!e.config.paste)return t.preventDefault(),t.stopImmediatePropagation(),!1;var i=t.originalEvent.clipboardData.getData("Text");return e.config.forbidden&&i.match(e.config.forbidden)?(t.preventDefault(),t.stopImmediatePropagation(),!1):void 0})),o.insert(e)}(t),!0},this.unrestrictField=function(t){var e=o.find("el",t,1);return!!e&&($(document).off("textInput keydown",e.el),$(document).off("paste",e.el),o.findDelete("el",t,1),!0)},this.toObj=function(t){return d(t)},this.populate=function(t,e,i){var n,o,a;void 0===i&&(i=null),$(t).find("*[name]").each((function(t,r){n=r.getAttribute("name"),a=!1,"string"!=typeof(a=OGX.Data.eval(e,n))&&(a=JSON.stringify(a)),void 0!==a&&(i&&i.hasOwnProperty(n)&&"function"==typeof i[n]&&(a=i[n](a)),(o=$(r)).val(a),r.hasAttribute("type")&&"hidden"===o.attr("type")&&o.trigger("change"))})),setTimeout(c,0)},this.validate=function(t){var i,n=$(t),o=e.elem_types,a=[];return n.find(o.join(",")).each((function(t,e){"submit"!==(i=$(e)).attr("type")&&(e.checkValidity()||a.push(i))})),!a.length||a}},OGX.Form=new OGX.Form,OGX.Form.fromObject=function(t,e,i,n){var o={el:e.selector+" "+i,data:t,fullpath:!1};return OGX.Data.merge(o,n),e.create("FormInstance",o)},require("FormInstance","Uxi","Placeholder"),OGX.FormInstance=function(__config){construct(this,"FormInstance");var that=this,config_defaults={fullpath:!1},config=OGX.Data.merge(__config,OGX.Form.defaults,!1,!0);function render(){var html="",oml='{"default:Html":{"html": {{$html}}, "node:OML": {{$oml}}  }}',render_oml=!1,row,nodes=[];function cycle(__o,__path){for(var a in __o){var t=typeof __o[a],p;switch(p=__path?__path+"."+a:a,t){case"object":if(Array.isArray(__o[a]))if(["string","number","boolean"].includes(typeof __o[a][0]))row=genRow("array",a,JSON.stringify(__o[a])),html+=row.html,row.oml&&(nodes.push(row.oml),render_oml=!0);else for(var i=0;i<__o[a].length;i++)cycle(__o[a][i],__path?__path+"."+a+"["+i+"]":a+"["+i+"]");else cycle(__o[a],__path?__path+"."+a:a);break;case"string":case"number":case"boolean":var pattern="",required=!1,readonly=!1,oo;if(config.hasOwnProperty("fields")){try{oo=eval("config.fields."+p)}catch(t){}void 0!==oo&&(oo.hasOwnProperty("pattern")&&(pattern=oo.pattern),oo.hasOwnProperty("required")&&(required=oo.required),oo.hasOwnProperty("readonly")&&(readonly=oo.readonly))}row=genRow(t,p,__o[a],required,pattern,readonly),html+=row.html,row.oml&&(nodes.push(row.oml),render_oml=!0)}}}cycle(config.data,null),html=OGX.Templater.make(OGX.Form.defaults.templates.form,{rows:html}),oml=render_oml?nodes.join(","):null,oml=JSON.parse(oml),oml=OGX.OML.rename(oml,that.selector),that.el.html(html),oml&&OGX.OML.render(that,oml)}function genRow(t,e,i,n,o,a){var r={html:"",oml:null},s=config.types[t],l="",c="",d="";void 0!==n&&n&&(l="required",c='pattern="'+o+'"'),void 0!==a&&a&&(d="readonly");var u=e;return config.fullpath||(u=e.split(".").pop()),r.html=OGX.Templater.make(s.html,{name:u,prop:e,val:i,required:l,pattern:c,readonly:d}),r.html=OGX.Templater.make(OGX.Form.defaults.templates.row,{html:r.html,name:u,prop:e}),s.hasOwnProperty("oml")&&(r.oml=OGX.Templater.make(s.oml,{name:u,prop:e,val:i,required:l,pattern:c,readonly:d})),r}function init(){that.el.addClass("ogx_form"),render(),setTimeout((function(){OGX.Form.bindForm({el:that.selector+">form",change_cb:that.onChange,submit_cb:that.onSubmit})}),300)}OGX.Data.merge(config,config_defaults,!1),this.destroy=function(){OGX.Form.unbindForm(that.selector)},this.onChange=function(t){},this.onSubmit=function(t){},init()},OGX.Form.defaults={templates:{form:"<form>{{$rows}}</form>",row:'<span class="row"><span class="label">{{$name}}</span>{{$html}}</span>'},types:{boolean:{html:'<span class="{{$name}}"></span>',oml:'{"default .{{$name}}:Switch":{"name" : "{{$prop}}", "val":{{$val}}, "editable" : {{!$readonly}} } }'},string:{html:'<input type="text" name="{{$prop}}" value="{{$val}}" {{$required}} {{$pattern}} {{$readonly}}>'},number:{html:'<input type="number" name="{{$prop}}" value="{{$val}}" {{$required}} {{$pattern}} {{$readonly}}>'},array:{html:'<span class="{{$name}}"></span>',oml:'{"default .{{$name}}:Tags":{"name" : "{{$prop}}", "editable" : {{!$readonly}}, "current_tags":{{$val}} } }'}}},OGX.Geo=function(t){"use strict";var e=this;void 0===t&&(t={});var i,n,o,a,r=OGX.Data.merge(t,{map:null,markers:[],icon:"",browser_loc:null});function s(t,i){for(var n,o={},a=0;a<t.length;a++){n=!1;for(var r=0;r<i.length;r++){for(var s=0;s<i[r].address_components.length;s++)if(-1!==i[r].address_components[s].types.indexOf(t[a][0])){o.hasOwnProperty(t[a][1])&&o[t[a][1]].length||(o[t[a][1]]=i[r].address_components[s].short_name),n=!0;break}if(n)break}}return o=e.clean(o)}function l(t){return t*(Math.PI/180)}function c(t){return Array.isArray(t)?new google.maps.LatLng(t[0],t[1]):"function"!=typeof t.lat?new google.maps.LatLng(t.lat,t.lng):t}function d(t){var e={gmap:new google.maps.LatLng(t.coords.latitude,t.coords.longitude),raw:{lat:t.coords.latitude,lng:t.coords.longitude}};a?(a(e),a=null):$(document).trigger(OGX.Geo.BROWSER_LOC_SUCCESS,e)}function u(t){$(document).trigger(OGX.Geo.BROWSER_LOC_ERROR,t)}function f(){i||(i=new google.maps.Geocoder)}this.setMap=function(t){r.map=t,google.maps.event.addListenerOnce(r.map,"tilesloaded",(function(){$(document).trigger(OGX.Geo.MAP_LOADED)}))},this.getMap=function(){return r.map},this.getMapRadius=function(){return!!r.map&&function(){if(r.map){var t=r.map.getBounds(),e=t.getCenter(),i=t.getNorthEast(),n=3963,o=e.lat()/57.2958,a=e.lng()/57.2958,s=i.lat()/57.2958,l=i.lng()/57.2958;return n*Math.acos(Math.sin(o)*Math.sin(s)+Math.cos(o)*Math.cos(s)*Math.cos(l-a))}return!1}()},this.getCurrentLocation=function(){return!!r.map&&(t=r.map.getCenter(),new google.maps.LatLng(t.lat(),t.lng()));var t},this.getBrowserLocation=function(t){a=void 0===t?null:t,navigator.geolocation.getCurrentPosition(d,u,{maximumAge:0,timeout:1e4,enableHighAccuracy:!0})},this.getDistance=function(t,e,i,n){var o=l(i-t),a=l(n-e),r=Math.sin(o/2)*Math.sin(o/2)+Math.cos(l(t))*Math.cos(l(i))*Math.sin(a/2)*Math.sin(a/2),s=6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)));return Math.round(1e3*s)/1e3},this.addressToLatLng=function(t,e,n){f(),i.geocode({address:t},(function(t,i){i==google.maps.GeocoderStatus.OK?e(t[0].geometry.location,n):e(!1,n)}))},this.getCityBoundaries=function(t,e,n,o,a){f(),i.geocode({address:t+", "+e+", "+n},(function(t,e){e==google.maps.GeocoderStatus.OK?o(t[0].geometry,a):o(!1,a)}))},this.latLngToZip=function(t,e,n){t=c(t),f(),i.geocode({location:t},(function(t,i){if(i===google.maps.GeocoderStatus.OK){var n=s([["postal_code","zip"]],t);e(n)}}))},this.latLngToCountryStateCity=function(t,e,n){t=c(t),f(),i.geocode({location:t},(function(t,i){if(i===google.maps.GeocoderStatus.OK){var o=s([["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);e(o,n)}else e(!1,n)}))},this.partialAddressToCountryStateCity=function(t,e,n){f(),i.geocode({address:t},(function(t,i){if(i===google.maps.GeocoderStatus.OK){var o=s([["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);e(o,n)}else e(!1,n)}))},this.latLngToAddress=function(t,e,n){t=c(t),f(),i.geocode({location:t},(function(t,i){if(i===google.maps.GeocoderStatus.OK){var o=s([["street_number","number"],["route","street"],["postal_code","zip"],["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);t[0].hasOwnProperty("formatted_address")&&(o.formatted=t[0].formatted_address),e(o,n)}else e(!1,n)}))},this.partialAddressToAddress=function(t,e,n){f(),i.geocode({address:t},(function(t,i){if(i===google.maps.GeocoderStatus.OK){var o=s([["street_number","number"],["route","street"],["postal_code","zip"],["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);t[0].hasOwnProperty("formatted_address")&&(o.formatted=t[0].formatted_address),o.lat=t[0].geometry.location.lat(),o.lng=t[0].geometry.location.lng(),e(o,n)}else e(!1,n)}))},this.zipToAddress=function(t,e,i){this.partialAddressToAddress(t,e,i)},this.zipToLatLng=function(t,e,n){f(),i.geocode({address:t},(function(t,i){if(i===google.maps.GeocoderStatus.OK){var o={};o.lat=t[0].geometry.location.lat(),o.lng=t[0].geometry.location.lng(),e(o,n)}else e(!1,n)}))},this.getRoute=function(t){n||(n=new google.maps.DirectionsService);var e={start:!1,end:!1,waypoints:!1,optimize:!0,mode:OGX.Geo.TRAVEL_MODE_CAR,callback:!1,params:!1};for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i]);var o={origin:t.start,destination:t.end,travelMode:t.mode};t.waypoints&&(o.waypoints=t.waypoints,t.optimize&&(o.optimizeWaypoints=!0)),n.route(o,(function(e,i){i===google.maps.DirectionsStatus.OK?t.callback(e,t.params):t.callback(!1,t.params)}))},this.calcRouteMinutes=function(t){for(var e=0,i=0;i<t.legs.length;i++)e+=t.legs[i].duration.value;return e=Math.round(e/60)},this.drawRoute=function(t,e){void 0===e&&(e=!0),o||(o=new google.maps.DirectionsRenderer({suppressMarkers:!e})),o.setMap(r.map),o.setDirections(t)},this.clearRoute=function(){r.map&&o&&o.setMap(null)},this.latLngToLoc=function(t,e){return new google.maps.LatLng(t,e)},this.clean=function(t,e){var i;if(void 0===e&&(e=!1),t.hasOwnProperty("city")&&t.hasOwnProperty("vicinity")&&-1!==t.vicinity.indexOf(",")&&(i=new RegExp(", ([a-z -']+)$","gi").exec(t.vicinity))&&i.length>1&&(t.city===i[1]?t.vicinity=t.vicinity.replace(i[0],""):t.city?t.city.length>i[1].length&&(t.city=i[1],t.vicinity=t.vicinity.replace(i[0],"")):t.city=i[1]),e)for(var n in t)-1===e.indexOf(n)&&delete t[n];return t},"undefined"!=typeof google&&void 0!==google.maps||$(document).trigger(OGX.Geo.ERROR_GMAP)},OGX.Geo.ERROR="GEO_error",OGX.Geo.ERROR_GMAP="GEO_GMAP_ERROR",OGX.Geo.TRAVEL_MODE_CAR="DRIVING",OGX.Geo.TRAVEL_MODE_TRANSIT="TRANSIT",OGX.Geo.TRAVEL_MODE_WALK="WALKING",OGX.Geo.TRAVEL_MODE_BIKE="BICYCLING",OGX.Geo.BROWSER_LOC_SUCCESS="GEO_BROWSER_LOC_SUCCESS",OGX.Geo.BROWSER_LOC_ERROR="GEO_BROWSER_LOC_ERROR",OGX.Geo.MAP_LOADED="GEO_MAP_LOADED",require("GridSwiper","Uxi","Touch"),OGX.GridSwiper=function(t){construct(this,"GridSwiper");var e,i,n,o,a,r,s,l,c,d,u,f,h=this,g=t,_={map:[[!0,!0,!0],[!0,!0,!0],[!0,!0,!0]],axis:{x:!0,y:!0},loop:!0,start:!1,chromeos:!1,capture:!1,callbacks:{up:null,down:null,left:null,right:null}},p=!1,m={x:null,y:null},v={x:0,y:0},y=".ogx_grid_swiper_cell",x=!1,O=!1,b=!1,w={x:0,y:0},G={x:0,y:0},X=(new Date).getTime()+Math.round(1e3*Math.random()),T=[];function C(t){t?e.on(h.touch.down,D):e.off(h.touch.down,D)}function D(t){p=!1,a=0,r=0,s=0,l=0,t=Y(t),m.x=t.pageX,m.y=t.pageY,x=!0,k(!0)}function E(t){t?$("body").on(h.touch.up,S):$("body").off(h.touch.up,S)}function S(t){x&&(x=!1,k(!1),!L()&&b&&(e.trigger(OGX.GridSwiper.SWIPE_END),O=!1,b=!1))}function L(t,e,a){var r,s;return void 0===t&&(t=0),void 0===e&&(e=0),void 0===a&&(a=!0),a&&A(!0),i.addClass("ogx_grid_swiper_anim"),v=P(i),r=-1*Math.round((v.x+t)/n)*n*-1,s=-1*Math.round((v.y+e)/o)*o*-1,i.css({transform:"translate3d("+r+"px, "+s+"px, 0px)"}),v.x-r||v.y-s}function k(t){t?(N(!0),e.on(h.touch.move,M)):(N(!1),e.off(h.touch.move,M))}function M(t){t=Y(t),g.capture&&(t.preventDefault(),t.stopImmediatePropagation()),a=0,r=0,s=0,l=0,p||(g.axis.x&&Math.abs(t.pageX-m.x)>Math.abs(t.pageY-m.y)?p="x":g.axis.y&&Math.abs(t.pageX-m.x)<Math.abs(t.pageY-m.y)&&(p="y")),p&&(g.axis.x&&"x"===p?(a=Math.abs(t.pageX-m.x),s=t.pageX-m.x>0?1:-1):g.axis.y&&"y"===p&&(r=Math.abs(t.pageY-m.y),l=t.pageY-m.y>0?1:-1))}function N(t){t?f||(O=!1,f=setInterval(I,10)):f&&(clearInterval(f),f=null)}function I(){if((a||r)&&(O||(b=!0,e.trigger(OGX.GridSwiper.SWIPE_START)),O=!0),g.axis.x&&"x"===p&&a&&s&&a<=n){if(!g.loop&&(w.x+-1*s<0||w.x+-1*s>g.map[0].length-1))return;if((c=(w.x+-1*s)%g.map[0].length)<0&&(c=Math.abs(g.map[0].length+c)),!1===g.map[G.y][c])return;u=a*s,i.css({transform:"translate3d("+(-1*w.x*n+u)+"px, "+v.y+"px, 0px)"})}else if(g.axis.y&&"y"===p&&r&&l&&r<=o){if(!g.loop&&(w.y+-1*l<0||w.y+-1*l>g.map.length-1))return;if((d=(w.y+-1*l)%g.map.length)<0&&(d=Math.abs(g.map.length+d)),!1===g.map[d][G.x])return;u=r*l,i.css({transform:"translate3d("+v.x+"px, "+(-1*w.y*o+u)+"px, 0px)"})}}function A(t){t?(i.off("transitionend"),i.on("transitionend",(function(){O&&b&&(e.trigger(OGX.GridSwiper.SWIPE_END),O=!1,b=!1),i.off("transitionend"),i.removeClass("ogx_grid_swiper_anim"),v=P(i);var t={x:null,y:null};t.x=-1*Math.round(v.x/n),t.y=-1*Math.round(v.y/o),w.x!==t.x?(s=w.x>t.x?1:-1,w.x=t.x,G.x=R(w).x,-1===s?(i.children(y+"[data-y="+(w.y-1)+"]").attr("data-x",w.x).css("left",w.x*n),i.children(y+"[data-y="+(w.y+1)+"]").attr("data-x",w.x).css("left",w.x*n),i.children(y+"[data-x="+(w.x-2)+"][data-y="+w.y+"]").attr("data-x",w.x+1).css("left",(w.x+1)*n),h.onLeft({cell:G,point:w}),e.trigger(OGX.GridSwiper.SWIPE_LEFT,{cell:G,point:w}),W(T=[{x:w.x+1,y:w.y},{x:w.x,y:w.y-1},{x:w.x,y:w.y+1}]),F()):(i.children(y+"[data-y="+(w.y-1)+"]").attr("data-x",w.x).css("left",w.x*n),i.children(y+"[data-y="+(w.y+1)+"]").attr("data-x",w.x).css("left",w.x*n),i.children(y+"[data-x="+(w.x+2)+"][data-y="+w.y+"]").attr("data-x",w.x-1).css("left",(w.x-1)*n),h.onRight({cell:G,point:w}),e.trigger(OGX.GridSwiper.SWIPE_RIGHT,{cell:G,point:w}),W(T=[{x:w.x-1,y:w.y},{x:w.x,y:w.y-1},{x:w.x,y:w.y+1}]),F())):w.y!==t.y&&(l=w.y>t.y?1:-1,w.y=t.y,G.y=R(w).y,-1===l?(i.children(y+"[data-x="+(w.x-1)+"]").attr("data-y",w.y).css("top",w.y*o),i.children(y+"[data-x="+(w.x+1)+"]").attr("data-y",w.y).css("top",w.y*o),i.children(y+"[data-y="+(w.y-2)+"][data-x="+w.x+"]").attr("data-y",w.y+1).css("top",(w.y+1)*o),h.onUp({cell:G,point:w}),e.trigger(OGX.GridSwiper.SWIPE_UP,{cell:G,point:w}),W(T=[{x:w.x,y:w.y+1},{x:w.x-1,y:w.y},{x:w.x+1,y:w.y}]),F()):(i.children(y+"[data-x="+(w.x-1)+"]").attr("data-y",w.y).css("top",w.y*o),i.children(y+"[data-x="+(w.x+1)+"]").attr("data-y",w.y).css("top",w.y*o),i.children(y+"[data-y="+(w.y+2)+"][data-x="+w.x+"]").attr("data-y",w.y-1).css("top",(w.y-1)*o),h.onDown({cell:G,point:w}),e.trigger(OGX.GridSwiper.SWIPE_DOWN,{cell:G,point:w}),W(T=[{x:w.x,y:w.y-1},{x:w.x-1,y:w.y},{x:w.x+1,y:w.y}]),F())),p=0}))):i.off("transitionend")}function P(t,e){var i=t.css("transform");return"none"===i?0:(i=(i=(i=i.substr(7)).substr(0,i.length-1)).split(","),{x:Number(i[4]),y:Number(i[5])})}function Y(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}function R(t){var e={x:0,y:0};return e.x=t.x%g.map[0].length,e.x<0&&(e.x=Math.abs(g.map[0].length+e.x)),e.y=t.y%g.map.length,e.y<0&&(e.y=Math.abs(g.map.length+e.y)),e}function W(t){for(var e,i={x:null,y:null},n=0;n<t.length;n++){if(t[n].y<0||t[n].y>g.map.length-1){if(!g.loop)return!1;i.y=R(t[n]).y}else i.y=t[n].y;if(t[n].x<0||t[n].x>g.map[0].length-1){if(!g.loop)return!1;i.x=R(t[n]).x}else i.x=t[n].x;e=g.map[i.y][i.x],H(t[n],e),h.onRender(i)}}function H(t,e){var n=!1;switch(typeof e){case"string":i.children(y+'[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(y+"_content").first().html(e);break;case"function":(n=e(t,R(t),{x:t.x-w.x,y:t.y-w.y},i.children(y+'[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(y+"_content").first()[0]))&&i.children(y+'[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(y+"_content").first().html(n);break;case"object":var o='.ogx_grid_swiper[data-ogx-id="'+X+'"] > .ogx_grid_swiper_container > '+y+'[data-x="'+t.x+'"][data-y="'+t.y+'"] > '+y+"_content",a=R(t);for(var r in e){e[r].id="cell_"+a.x+"_"+a.y;break}e=OGX.OML.rename(e,o);var s=h.nodes.find("id","cell_"+a.x+"_"+a.y,1);s&&h.remove(s._NAME_,s.id),$(o).empty(),OGX.OML.render(h,e,{abs:t,rel:R(t)}),F()}}function F(){for(var t=0;t<h.nodes.length;t++)h.nodes[t].id==="cell_"+G.x+"_"+G.y?h.nodes[t].focus():h.nodes[t].blur()}function z(){T=[],g.axis.x&&(T.push({x:g.start.x-1,y:g.start.y}),T.push({x:g.start.x+1,y:g.start.y})),T.push({x:g.start.x,y:g.start.y}),g.axis.y&&(T.push({x:g.start.x,y:g.start.y-1}),T.push({x:g.start.x,y:g.start.y+1})),W(T)}function U(){g.map.length||(g.map=[[]],g.axis.y=!1),g.map.length&&!Array.isArray(g.map[0])&&(g.map=[g.map],g.axis.y=!1),g.start||(g.start={x:null,y:null},g.start.y=Math.floor(g.map.length/2),g.start.x=Math.floor(g.map[0].length/2))}function B(){var t=g.start.x*-n,a=g.start.y*-o,r=g.start.y-1,s=g.start.x,l='<div class="ogx_grid_swiper_container" style="transform:translate3d('+t+"px, "+a+'px, 0px);">',c=-1*t,d=-1*a-o;g.axis.y&&(l+='<div class="ogx_grid_swiper_cell" style="left:'+c+"px; top:"+d+'px;" data-x="'+s+'" data-y="'+r+'"><div class="ogx_grid_swiper_cell_content"></div></div>',l+='<div class="ogx_grid_swiper_cell" style="left:'+c+"px; top:"+(d+2*o)+'px;" data-x="'+s+'" data-y="'+(r+2)+'"><div class="ogx_grid_swiper_cell_content"></div></div>'),l+='<div class="ogx_grid_swiper_cell" style="left:'+c+"px; top:"+(d+o)+'px;" data-x="'+s+'" data-y="'+(r+1)+'"><div class="ogx_grid_swiper_cell_content"></div></div>',g.axis.x&&(l+='<div class="ogx_grid_swiper_cell" style="left:'+(c-n)+"px; top:"+-1*a+'px;" data-x="'+(s-1)+'" data-y="'+g.start.y+'"><div class="ogx_grid_swiper_cell_content"></div></div>',l+='<div class="ogx_grid_swiper_cell" style="left:'+(c+n)+"px; top:"+-1*a+'px;" data-x="'+(s+1)+'" data-y="'+g.start.y+'"><div class="ogx_grid_swiper_cell_content"></div></div>'),l+="</div>",e.html(l),i=e.children(".ogx_grid_swiper_container").first(),w.x=g.start.x,w.y=g.start.y,v.x=t,v.y=a,G.x=g.start.x,G.y=g.start.y}this.onFocus=function(){return C(!0),E(!0),F(),this},this.onBlur=function(){return C(!1),E(!1),N(!1),this},this.focus=function(){return this.blured&&(this.blured=!1,this.onFocus()),this},this.resize=function(){A(!1),i.removeClass("ogx_grid_swiper_anim"),n=e.width(),o=e.height();var t=w.x*-n,a=w.y*-o;i.children(y+"[data-y="+(w.y-1)+"]").css({top:(w.y-1)*o,left:w.x*n}),i.children(y+"[data-y="+w.y+"]").css({top:w.y*o,left:w.x*n}),i.children(y+"[data-y="+(w.y+1)+"]").css({top:(w.y+1)*o,left:w.x*n}),i.children(y+"[data-x="+(w.x-1)+"]").css({top:w.y*o,left:(w.x-1)*n}),i.children(y+"[data-x="+(w.x+1)+"]").css({top:w.y*o,left:(w.x+1)*n}),i.css("transform","translate3d("+t+"px, "+a+"px, 0px"),k(!1),setTimeout((function(){L(0,0,!1),i.addClass("ogx_grid_swiper_anim")}),0)},this.onUp=function(){},this.onDown=function(){},this.onLeft=function(){},this.onRight=function(){},this.onRender=function(){},this.setMap=function(t,e){return g.map=t,void 0!==e&&(g.start=e),w={x:0,y:0},G={x:0,y:0},m={x:null,y:null},v={x:0,y:0},U(),B(),z(),this},this.setMapCell=function(t,e){return g.map[t.y]||(g.map[t.y]=[]),g.map[t.y][t.x]=e,this},this.getMapCell=function(t){return t.y>0&&g.map.length<t.y&&t.x>0&&g.map[t.y].length<t.x&&g.map[t.y][t.x]},this.getCells=function(){var t,e,n,o,a=[];return i.children(y).each((function(i,r){t=$(r),e={x:Number(t.attr("data-x")),y:Number(t.attr("data-y"))},n=R(e),o={x:e.x-w.x,y:e.y-w.y},a.push({abs:e,rel:n,offset:o,element:r})})),a},this.getCellContent=function(t){return i.children(y+"[data-x="+t.x+"][data-y="+t.y+"]").children(y+"_content").first()[0]},this.getCurrentCell=function(){return G},this.renderCellContent=function(t){return W([t]),this},this.setTopCell=function(t){return this.setOffsetCell({x:0,y:-1},t),this},this.setBottomCell=function(t){return this.setOffsetCell({x:0,y:1},t),this},this.setLeftCell=function(t){return this.setOffsetCell({x:-1,y:0},t),this},this.setRightCell=function(t){return this.setOffsetCell({x:1,y:0},t),this},this.setOffsetCell=function(t,e){var i={x:t.x+w.x,y:t.y+w.y};return this.setMapCell(i,e),this},this.getOffsetCell=function(t){var e={x:t.x+w.x,y:t.y+w.y};return this.getMapCell(e)},this.getOffsetCellContent=function(t){var e={x:t.x+w.x,y:t.y+w.y};return this.getCellContent(e)},this.swipeRight=function(){return L(-n),this},this.swipeLeft=function(){return L(n),this},this.swipeUp=function(){return L(0,-o),this},this.swipeDown=function(){return L(0,o),this},OGX.Data.merge(g,_),g.callbacks.up||(g.callbacks.up=h.onUp),g.callbacks.down||(g.callbacks.down=h.onDown),g.callbacks.right||(g.callbacks.right=h.onRight),g.callbacks.left||(g.callbacks.left=h.onLeft),(e=h.el).addClass("ogx_grid_swiper"),e.attr("data-ogx-id",X),n=e.width(),o=e.height(),U(),B(),z()},OGX.GridSwiper.SWIPE_LEFT="GridSwiperSwipeLeft",OGX.GridSwiper.SWIPE_RIGHT="GridSwiperSwipeRight",OGX.GridSwiper.SWIPE_UP="GridSwiperSwipeUp",OGX.GridSwiper.SWIPE_DOWN="GridSwiperSwipeDown",OGX.GridSwiper.SWIPE_START="GridSwiperSwipeStart",OGX.GridSwiper.SWIPE_END="GridSwiperSwipeEnd",require("GroupedList","Uxi","Bind","Touch"),OGX.GroupedList=function(t){construct(this,"GroupedList");var e,i,n,o,a,r=this,s=t,l={group_by:"name",group_mode:null,group_param:null,group_order:null,order:null,list:new OGX.List,key:null,swipe:!1,reorder:!1,display:!1,mode:OGX.DynamicList.SELECT_MODE_HIT,scope:["public"]},c=[];function d(t){t?e.on(r.touch.down,".ogx_grouped_list_item",u):e.off(r.touch.down,".ogx_grouped_list_item",u)}function u(){e.find(".ogx_grouped_list_selected_item").removeClass("ogx_grouped_list_selected_item"),$(this).addClass("ogx_grouped_list_selected_item");var t=s.list[Number($(this).data("id"))];e.trigger(OGX.GroupedList.SELECT,t)}function f(t){var e=s.group_order.indexOf(t);if(-1===e)return e;for(var i=e,n=0;n<e;n++)-1===c.indexOf(s.group_order[n])&&i--;return i}function h(t,e){for(var n,o=0;o<i.nodes.length;o++)if(n=i.nodes[o].val().find(t,e,1))return{list:i.nodes[o],item:n};return!1}function g(){var t=!1,e=!1;if(s.list&&(t=s.list,o&&(t=n),t.length&&(e=a,a=t.group(s.group_by,s.group_mode,s.group_param))),t&&t.length){if(JSON.stringify(e)!==JSON.stringify(a)){r.find("NestList",r.id+"_nests","remove");var l=function(){var t='.ogx_grouped_list[data-ogx-id="'+r.id+'"]',e={};e[t+":NestList"]={id:r.id+"_nests",list:[],"node:OML":[]};var i,n=[],o=OGX.Data.clone(s.group_order);for(var l in a)i=s.group_order?s.group_order.indexOf(l):n.length,e[t+":NestList"].list.push({title:l}),c.push(l),n[i]={"default:DynamicList":{list:a[l],key:s.key,mode:s.mode,display:s.display,swipe:s.swipe,reorder:s.reorder,order:s.order}};for(var d=0;d<n.length;d++)void 0===n[d]&&(n.splice(d,1),o.splice(d,1),d--);return e[t+":NestList"]["node:OML"]=n,e[t+":NestList"].order=o,e}();OGX.OML.render(r,l),(i=r.find("NestList",r.id+"_nests")).updateNestsHeight()}}else a=!1,r.el.empty()}this.onFocus=function(){return d(!0),this},this.onBlured=function(){return d(!1),this},this.bindFilter=function(t,e,i){return s.list.removeFilter(t),void 0!==i&&s.list.addFilter(t,e,i),s.list.getFilters()&&(n=s.list.filter(),o=!0),setTimeout(g,0),this},this.bindValue=function(){return this.getSelection()},this.destroy=function(){this.clearBinds()},this.scope=function(t){return void 0!==t?(s.scope=t,i.scope(t),!0):s.scope},this.val=function(t){if(void 0===t)return s.list;t.hasOwnProperty("insert")||(t=new OGX.List(t));var e=s.list.getFilters();"{}"!==JSON.stringify(e)&&(o=!0,t.setFilters(e),n=t.filter()),s.list=t,setTimeout(g,0)},this.nests=function(){return i||!1},this.filter=function(){return n=s.list.filter(),o=!0,setTimeout(g,0),this},this.unfilter=function(){return o=!1,setTimeout(g,0),this},this.addFilter=function(t,e,i){return s.list.addFilter(t,e,i)},this.removeFilter=function(t,e,i){return s.list.removeFilter(t,e,i)},this.resetFilters=function(){return s.list.resetFilters()},this.getFilters=function(){return s.list.getFilters()},this.addGroup=function(t,e,n){if(s.list.length){var o={title:t,scope:s.scope},a={};void 0===e&&(e=[]),a["default:DynamicList"]={list:e,key:s.key,mode:s.mode,display:s.display,swipe:s.swipe,reorder:s.reorder},i.addNest(o,a,n),s.group_order.insert(t,n),s.list=new OGX.List(s.list.concat(e)),c.push(t)}else s.list.insert(e),g();return this},this.removeGroup=function(t){return!!this.getGroupList(t)&&(i.removeNest(t),s.list.findDelete(s.group_by,t),c.splice(c.indexOf(t),1),!0)},this.addToGroup=function(t,e){var n=this.getGroupList(t);return n&&(n.insert(e),s.list.push(e),setTimeout((function(){i.updateNestHeight(t)}),0)),this},this.removeFromGroup=function(t,e,n){2===arguments.length&&(n=e,e=s.key);var o=this.getGroupList(t);return o&&(o.findDelete(e,n,1),s.list.findDelete(e,n,1),o.val().length?setTimeout((function(){i.updateNestHeight(t)}),0):this.removeGroup(t)),this},this.updateGroupItem=function(t,e,i,n){return this.getGroupList(t).findUpdate(e,i,n,!1,1),s.list.findUpdate(e,i,n,1),this},this.replaceGroupItem=function(t,e,i,n){return this.getGroupList(t).findReplace(e,i,n),s.list.findReplace(e,i,n,1),this},this.getGroupList=function(t){var e=f(t);return-1!==e&&e<i.nodes.length&&i.nodes[e]},this.hasGroup=function(t){return-1!==c.indexOf(t)},this.addItem=function(t){if(s.list.length){var e=t[s.group_by];if(this.hasGroup(e))this.addToGroup(e,t);else{var n=-1;-1!==s.group_order.indexOf(e)&&(n=f(e)),-1!==n?this.addGroup(e,[t],n):this.addGroup(e,[t])}setTimeout((function(){i.updateNestHeight(e)}),0)}else s.list.insert(t),g();return this},this.removeItem=function(t,e){s.key&&1===arguments.length&&(e=t,t=s.key);var n=s.list.find(t,e,1);if(n){var o=n[s.group_by];return this.removeFromGroup(o,t,e),setTimeout((function(){i.updateNestHeight(o)}),0),!0}return!1},this.replaceItem=function(t,e,n){s.key&&2===arguments.length&&(e=t,t=s.key);var o=h(t,e);if(o){var a=null;return o.item[s.group_by]!==n[s.group_by]?(a=o.item[s.group_by],o.list.findDelete(t,e,1),s.list.findDelete(t,e,1),-1===s.list.unique(s.group_by,!1).indexOf(a)&&(this.removeGroup(a),a=!1),this.addItem(n),setTimeout((function(){a&&i.updateNestHeight(o.item[s.group_by]),i.updateNestHeight(n[s.group_by])}),0)):o.list.findReplace(t,e,n),!0}return!1},this.updateItem=function(t,e,n,o){if(s.key){var a=arguments.length;void 0!==o&&(a--,o=!1),2===a&&(n=e,e=t,t=s.key)}var r=h(t,e);if(r){if(n.hasOwnProperty(s.group_by)&&r.item[s.group_by]!==n[s.group_by]){var l=r.item[s.group_by],c=r.list.findDelete(t,e,1);r.list.val().length||this.removeGroup(l),s.list.findDelete(t,e,1),c=OGX.Data.merge(c,n,!0,!1,o),this.addItem(c),r.list.val().length&&setTimeout((function(){i.updateNestHeight(l)}),0)}else r.list.findUpdate(t,e,n,o,1);return!0}return!1},this.render=function(){return setTimeout(g,0),this},this.refresh=function(){var t=e.find(".ogx_grouped_list_selected_item").first();if(t.length>0){var i=t.data("id");t.html(OGX.Templater.make(s.template,s.list[i]))}return this},OGX.Data.merge(s,l),s.list.hasOwnProperty("insert")||(s.list=new OGX.List(s.list)),s.group_order&&!s.group_order.hasOwnProperty("insert")&&(s.group_order=new OGX.List(s.group_order)),s.display&&s.display.hasOwnProperty("css")&&("object"!=typeof s.display.css&&s.display.css?s.display.css+=" ogx_grouped_list_item":s.display.hasOwnProperty("add")?s.display.add="ogx_grouped_list_item "+s.display.add:s.display.add="ogx_grouped_list_item"),a=!1,(e=r.el).addClass("ogx_grouped_list"),g()},OGX.GroupedList.SELECT="GroupedListSelect",OGX.GroupedList.BIND=OGX.GroupedList.SELECT,require("Html","Uxi","Placeholder"),OGX.Html=function(t){construct(this,"Html"),void 0!==t&&t&&(this.el=$(t.el),OGX.HtmlRender(t))},OGX.HtmlRender=function(t){var e=$(t.el),i=new OGX.Display(t);data=!1,t.data&&Object.keys(t.data).length&&(data=t.data),e.html(i.html(data)),t.css&&e.addClass(i.css(data)),t.hasOwnProperty("id")&&t.id&&"#"===t.id.substr(0,1)&&e.attr("id",t.id.substr(1))},require("Iceberg","Uxi","Touch"),OGX.Iceberg=function(t){construct(this,"Iceberg");var e,i,n,o,a,r,s=this,l={left:0,right:0,top:0,bottom:0,min:50,drag:!0,flatten:!1,capture:!0,"node:OML":{},callbacks:{up:null,down:null,left:null,right:null,restore:null}},c=t,d=!1,u="normal",f="main",h={left:null,main:null,right:null,top:null,bottom:null},g=[0,0,0],_=0,p=0,m=0,v=0;function y(t){for(var e in h)h[e]&&h[e].instance&&(t===e?h[e].instance.focus():h[e].instance.blur())}function x(){d.hasClass("ogx_iceberg_anim")||(d.off("transitionend"),g=G(d))}function O(t){var e=0;return t.dirY&&t.distY>t.distX&&(e=1),e}function b(t){c.drag&&t.dist&&(!(n=O(t))&&["main","left","right"].includes(f)?t.dirX&&t.distX&&(e=g[0]+t.distX*t.dirX)<=p&&e>=_&&d.css({transform:"translate3d("+e+"px, 0, 0)"}):["main","top","bottom"].includes(f)&&t.dirY&&t.distY&&(i=g[1]+t.distY*t.dirY)<=v&&i>=m&&d.css({transform:"translate3d(0, "+i+"px, 0)"}))}function w(t){if(e=0,i=0,n=O(t),t.swipe&&t.dist){var r;switch(t.swipe=!1,f){case"main":-1===t.dirX&&c.right&&!n?(e=-h.right.outerWidth(),r="right",t.swipe=!0):1===t.dirX&&c.left&&!n?(e=h.left.outerWidth(),r="left",t.swipe=!0):1===t.dirY&&c.top&&n?(i=h.top.outerHeight(),r="top",t.swipe=!0):-1===t.dirY&&c.bottom&&n&&(i=-h.bottom.outerHeight(),r="bottom",t.swipe=!0);break;case"left":-1!==t.dirX||n||(e=0,r="main",t.swipe=!0);break;case"right":1!==t.dirX||n||(e=0,r="main",t.swipe=!0);break;case"top":-1===t.dirY&&n&&(i=0,r="main",t.swipe=!0);break;case"bottom":1===t.dirY&&n&&(i=0,r="main",t.swipe=!0)}n?1===t.dirY?(o=OGX.Iceberg.SWIPE_DOWN,a="down"):(o=OGX.Iceberg.SWIPE_UP,a="up"):1===t.dirX?(o=OGX.Iceberg.SWIPE_RIGHT,a="right"):(o=OGX.Iceberg.SWIPE_LEFT,a="left"),t.swipe&&t.dist&&(d.addClass("ogx_iceberg_anim"),d.on("transitionend",(function(){d.off("transitionend"),d.removeClass("ogx_iceberg_anim"),g=G(d),y(f=r),c.callbacks[a](f),d.trigger(o,f)})),d.css({transform:"translate3d("+e+"px, "+i+"px, 0)"}))}else if(t.dist){switch(e=0,i=0,f){case"left":e=h.left.outerWidth();break;case"right":e=-h.right.outerWidth();break;case"top":i=h.top.outerHeight();break;case"bottom":i=-h.bottom.outerHeight()}d.addClass("ogx_iceberg_anim"),d.on("transitionend",(function(){d.off("transitionend"),d.removeClass("ogx_iceberg_anim"),g=G(d),c.callbacks.onRestore(f),d.trigger(OGX.Iceberg.RESTORE,f)})),d.css({transform:"translate3d("+e+"px, "+i+"px, 0)"})}}function G(t){var e=t[0].style.transform;if(e=e.match(/translate3d\(([0-9px%,\.\- ]+)\)/)){e=e[1].split(",");for(var i=0;i<e.length;i++)e[i]=Number(e[i].split("px")[0]);return e}return[0,0,0]}function X(){var t;for(var e in h)h[e]&&((t=h[e].children().first()).length&&t[0].hasAttribute("data-ogx-id")?h[e].instance=s.nodes.find("id",String(t.data("ogx-id")),1):h[e].instance=!1)}this.show=function(t,e){if(void 0===t&&(t=!1),"normal"===u)for(var i in h)if(h[i]&&h[i].instance&&h[i].instance.id===e){if(!t)return this.val(i),!0;if(h[i].instance._NAME_===h[i].instance.NAME)return this.val(i),!0}return!1},this.val=function(t){if(void 0===t)return f;if(e=0,i=0,"normal"===u){switch(t){case"left":e=h.left.outerWidth();break;case"top":i=h.top.outerHeight();break;case"main":e=0;break;case"right":e=h.left.outerWidth();break;case"bottom":i=-h.bottom.outerHeight()}h[f].instance&&h[f].instance.blur(),h[f=t].instance&&h[f].instance.focus(),d.css({transform:"translate3d("+e+"px, "+i+"px, 0)"})}},this.onFocus=function(){"flattened"!==u&&(r.enable(),setTimeout((function(){y(f)}),0))},this.onBlur=function(){r.disable()},this.focus=function(){return this.blured&&(this.blured=!1,this.onFocus()),this},this.resize=function(){return h.left&&(p=h.left.outerWidth()),h.right&&(_=-h.right.outerWidth()),h.top&&(v=h.top.outerHeight()),h.bottom&&(m=-h.bottom.outerHeight()),c.flatten&&("flattened"!==u&&this.el.outerWidth()>=c.flatten?(u="flattened",g=G(d),d.addClass("ogx_iceberg_views_flattened").css("transform","translate3d(0px, 0px, 0px)"),d.children(".ogx_iceberg_view").addClass("ogx_iceberg_view_flattened"),this.onBlur()):"flattened"===u&&this.el.width()<c.flatten&&(u="normal",d.children(".ogx_iceberg_view").removeClass("ogx_iceberg_view_flattened"),d.removeClass("ogx_iceberg_views_flattened").css("transform","translate3d("+g[0]+"px, 0px, 0px)"),this.onFocus())),this},this.destroy=function(){this.touch.wipe()},this.onUp=function(){},this.onDown=function(){},this.onLeft=function(){},this.onRight=function(){},this.onRestore=function(){},OGX.Data.merge(c,l),c.callbacks.up||(c.callbacks.up=s.onUp),c.callbacks.down||(c.callbacks.down=s.onDown),c.callbacks.right||(c.callbacks.right=s.onRight),c.callbacks.left||(c.callbacks.left=s.onLeft),c.callbacks.restore||(c.callbacks.restore=s.onRestore),width=Math.round($(c.el).innerWidth()),height=$(c.el).innerHeight(),s.el.addClass("ogx_iceberg"),function(){var t,e,i='<div class="ogx_iceberg_views ogx_hw">',n={},o='.ogx_iceberg[data-ogx-id="'+s.id+'"] > .ogx_iceberg_views > .ogx_iceberg_view[data-ogx-panel-id="';for(var a in c["node:OML"])for(var r in c["node:OML"][a])0===r.indexOf("left")&&(i+='<div class="ogx_iceberg_view_left ogx_view ogx_iceberg_view" data-ogx-panel-id="left" style="width:'+(isNaN(c.left)?c.left:c.left+"px")+';"></div>',n.left=o+'left"]',h.left=!0),0===r.indexOf("top")&&(i+='<div class="ogx_iceberg_view_top ogx_view ogx_iceberg_view" data-ogx-panel-id="top" style="height:'+(isNaN(c.top)?c.top:c.top+"px")+';"></div>',n.top=o+'top"]',h.top=!0),0===r.indexOf("main")&&(i+='<div class="ogx_iceberg_view_main ogx_view ogx_iceberg_view" data-ogx-panel-id="main"></div>',n.main=o+'main"]'),0===r.indexOf("right")&&(i+='<div class="ogx_iceberg_view_right ogx_view ogx_iceberg_view" data-ogx-panel-id="right" style="width:'+(isNaN(c.right)?c.right:c.right+"px")+';"></div>',n.right=o+'right"]',h.right=!0),0===r.indexOf("bottom")&&(i+='<div class="ogx_iceberg_view_bottom ogx_view ogx_iceberg_view" data-ogx-panel-id="bottom" style="height:'+(isNaN(c.bottom)?c.bottom:c.bottom+"px")+';"></div>',n.bottom=o+'bottom"]',h.bottom=!0);for(s.el.html(i),a=0;a<c["node:OML"].length;a++)for(var r in c["node:OML"][a])t=r.split(":")[0],e=r.replace(t,n[t]),c["node:OML"][a][e]=c["node:OML"][a][r],delete c["node:OML"][a][r];d=s.el.children(".ogx_iceberg_views").first(),h.left&&(h.left=d.children(".ogx_iceberg_view_left").first(),p=h.left.outerWidth()),h.top&&(h.top=d.children(".ogx_iceberg_view_top").first(),v=h.top.outerHeight()),h.main=d.children(".ogx_iceberg_view_main").first(),h.right&&(h.right=d.children(".ogx_iceberg_view_right").first(),_=-h.right.outerWidth()),h.bottom&&(h.bottom=d.children(".ogx_iceberg_view_bottom").first(),m=-h.bottom.outerHeight())}(),setTimeout(X,0),r=s.touch.add("Swipe",{state:"manual",capture:c.capture,x:!0,y:!0,min_x:c.min,min_y:c.min,cb_down:x,cb_swipe:b,cb_up:w}),s.resize()},OGX.Iceberg.SWIPE_UP="icebergSwipeUp",OGX.Iceberg.SWIPE_DOWN="icebergSwipeDown",OGX.Iceberg.SWIPE_LEFT="icebergSwipeLeft",OGX.Iceberg.SWIPE_RIGHT="icebergSwipeRight",OGX.Iceberg.RESTORE="icebergRestore",OGX.Loading=function(t){"use strict";var e=this,i=!1,n={display:{css:"ogx_loading",html:" ",anim:OGX.Overlay.FADE}};t.hasOwnProperty("loading")&&t.loading&&setTimeout(e.addLoading,0),this.hasLoading=function(){return!!i},this.addLoading=function(t){return e.hasOverlay()||(i=!0,void 0===t&&(t={}),OGX.Data.merge(t,n),e.addOverlay(t)),this},this.removeLoading=function(t){return e.hasOverlay()&&(e.removeOverlay(t),i=!1),this}},OGX.Media=function(){"use strict";var t=!1,e={},i=0;function n(t,e,i){var n=$(t),o=n.parent().innerWidth(),a=n.parent().innerHeight(),r=function(t,e){var i={};return t.width/t.height>e.width/e.height?(i.width=e.width,i.height=Math.round(t.height*(e.width/t.width))):(i.width=Math.round(t.width*(e.height/t.height)),i.height=e.height),i}({width:e,height:i},{width:o,height:a}),s=(o-r.width)/2,l=(a-r.height)/2;n.css("left",s+"px"),n.css("top",l+"px"),n.prop("width",r.width),n.prop("height",r.height)}function o(t){var e,i=$(t);i&&(i.find(".ogx_video").each((function(t,i){e=$(i),function(t,e,i){var n=$(t),o=e/i,a=n.parent().innerWidth(),r=n.parent().innerHeight(),s=a,l=Math.ceil(s/o);l<r&&(s=(l=r)*o),n.prop("width",s),n.prop("height",l)}(i,parseInt(e.data("width"),10),parseInt(e.data("height"),10))})),i.find(".ogx_video_resp").each((function(t,i){e=$(i),function(t,e,i){var n=$(t),o=e/i,a=n.parent().innerWidth(),r=n.parent().innerHeight(),s=a,l=Math.ceil(s/o);l<r&&(s=(l=r)*o),n.prop("width",s),n.prop("height",l)}(i,parseInt(e.data("width"),10),parseInt(e.data("height"),10))})),i.find(".ogx_video_poster").each((function(t,i){e=$(i),function(t,e,i){var n=$(t),o=e/i,a=n.parent().innerWidth(),r=n.parent().innerHeight(),s=a,l=Math.ceil(s/o),c=0,d=0;l<r&&(l=r,s=Math.ceil(l*o)),s>a?c=(s-a)/2*-1:s<a&&(c=(a-s)/2*-1),l>r?d=(l-r)/2*-1:l<r&&(d=(r-l)/2*-1),n.css("left",c+"px"),n.css("top",d+"px"),n.prop("width",s),n.prop("height",l)}(i,parseInt(e.data("width"),10),parseInt(e.data("height"),10))})),i.find(".ogx_image_contain").each((function(t,i){e=$(i),n(i,parseInt(e.data("width"),10),parseInt(e.data("height"),10))})),i.find(".ogx_image_cover").each((function(t,i){e=$(i),function(t,e,i){var n=$(t),o=n.parent().innerWidth(),a=o/(e/i),r=(n.parent().innerHeight()-a)/2;r>0&&(r=0),n.parent().css("overflow","hidden"),n.prop("width",o),n.prop("height",a),n.css("top",r+"px")}(i,parseInt(e.data("width"),10),parseInt(e.data("height"),10))})),i.find(".ogx_image_fit").each((function(t,i){e=$(i),function(t,e,i){var n=$(t),o=e/i,a=n.parent().innerWidth(),r=a,s=Math.ceil(r/o),l=0;r>a?l=(r-a)/2*-1:r<a&&(l=(a-r)/2*-1),n.css("left",l+"px"),n.prop("width",r),n.prop("height",s)}(i,parseInt(e.data("width"),10),parseInt(e.data("height"),10))})),i.find(".ogx_image_scale").each((function(t,i){e=$(i),function(t,e,i){var n=$(t),o=e/i,a=n.parent().innerWidth(),r=Math.ceil(a/o);n.prop("width",a),n.prop("height",r)}(i,parseInt(e.data("width"),10),parseInt(e.data("height"),10))})),i.find(".ogx_image_resp").each((function(t,i){e=$(i),function(t,e,i){var n=$(t),o=e/i,a=n.parent().innerWidth();a>e&&(a=e);var r=Math.ceil(a/o);n.prop("width",a),n.prop("height",r)}(i,parseInt(e.data("width"),10),parseInt(e.data("height"),10))})))}function a(t){t?$(window).on("resize",r):$(window).off("resize",r)}function r(){for(var t in e)o(e[t].selector)}function s(t){var e;t.find(".ogx_video, .ogx_video_resp, .ogx_video_poster").each((function(t,i){(e=$(i)).parent().css("overflow","hidden"),i.hasAttribute("data-width")||(e.attr("data-width",e.attr("width")),e.attr("data-height",e.attr("height")))})),t.find(".ogx_image_cover, .ogx_image_contain, .ogx_image_fit, .ogx_image_scale, .ogx_image_resp").each((function(t,i){(e=$(i)).css("position","relative"),i.hasAttribute("data-width")||(e.attr("data-width",e.attr("width")),e.attr("data-height",e.attr("height")))})),o(t)}this.resize=function(t){void 0!==t?o(t):r()},this.bind=function(n,o){return!e.hasOwnProperty(n)&&(e[n]={observer:null,element:o},e[n].observer=(r=o,l=null,(c=new(window.MutationObserver||window.WebKitMutationObserver)((function(t,e){t.forEach((function(t){l&&clearTimeout(l),l=setTimeout((()=>{s($(r))}),10)}))}))).observe(document.querySelector(r),{childList:!0,subtree:!0}),c),e[n].selector=o,i++,t||(t=!0,a(!0)),s($(o)),!0);var r,l,c},this.unbind=function(n){return!(!e.hasOwnProperty(n)||!e[n].observer)&&(e[n].observer.disconnect(),delete e[n],!--i&&t&&(t=!1,a(!1)),!0)}},OGX.Media=new OGX.Media,require("NestList","Uxi","Bind"),OGX.NestList=function(t){construct(this,"NestList");var e,i,n=this,o={scope:["public"],template:'<div class="ogx_nest_list_item {{$dsp}}" data-ogx-nest-id="{{$id}}"><div class="ogx_nest_list_item_head {{$css}}"><span class="ogx_nest_list_item_title">{{$title}}</span><span class="ogx_nest_list_item_icon"></span></div><div class="ogx_nest_list_item_body"><div class="ogx_nest_list_item_content">{{$body}}</div></div></div>',list:new OGX.List,item_default:!1,map:{title:"title",scope:"scope",id:"id"},order:!1,callbacks:{open:null,close:null}},a={title:"",scope:[],open:!0},r={id:0,title:!1,scope:[],height:0,y:0,hidden:!1,open:!0,selector:!1},s=t,l=!1,c=0,d=0,u=1,f={y:0,h:0,way:1},h=!1,g=new OGX.List;function _(t){t?e.on("click",".ogx_nest_list_item_head",p):e.off("click",".ogx_nest_list_item_head",p)}function p(t){l||(l=!0,m($(this)))}function m(t){var i=t.parent(0).data("ogx-nest-id"),o=!1;t.hasClass("ogx_nest_list_item_head_closed")?(f.way=1,t.addClass("ogx_nest_list_item_head_open").removeClass("ogx_nest_list_item_head_closed"),g.findUpdate("id",i,{open:!0},!1,1),o=!0):(f.way=0,t.removeClass("ogx_nest_list_item_head_open").addClass("ogx_nest_list_item_head_closed"),g.findUpdate("id",i,{open:!1},!1,1));var a=g.find("id",i,1);o?(!function(t){var e=v(t);if(e)return e.focus(),!0}(a),n.onOpen(a),e.trigger(OGX.NestList.OPEN,a)):(!function(t){var e=v(t);if(e)return e.blur(),!0}(a),n.onClose(a),e.trigger(OGX.NestList.CLOSE,a)),setTimeout(x,0)}function v(t){var e=$(t.selector).find(".ogx_uxi").first();if(e.length){var i=String(e.data("ogx-id")),o=n.nodes.find("id",i,1);if(o)return o}return!1}function y(t){if(t.hasOwnProperty("scope"))for(var e=0;e<t.scope.length;e++)if(-1!==s.scope.indexOf(t.scope[e]))return!0;return!1}function x(){var t;!function(){var t=0;d=0,f.y=0,f.h=0;for(var i=0;i<g.length;i++)g[i].y=t,g[i].hidden||(c||(c=e.children(".ogx_nest_list_item:eq("+i+")").children(".ogx_nest_list_item_head").outerHeight(!0)),d+=c,f.y=t,g[i].open&&(f.y+=g[i].height,t+=g[i].height,d+=g[i].height),f.h=g[i].height);d-=f.h}();for(var i=e.children(".ogx_nest_list_mask").first(),o=0;o<g.length;o++)(t=e.children('.ogx_nest_list_item[data-ogx-nest-id="'+g[o].id+'"]')).removeClass("ogx_nest_list_item_noanim"),t.css("transform","translateY("+g[o].y+"px)");var a="height:"+Math.ceil(d+f.h)+"px !important;";i.on("transitionend",(function(){f.way||e.css("cssText",a),l=!1,n.scroller&&n.scroller.resize()})),f.way&&e.css("cssText",a),setTimeout((function(){i.css({transform:"translateY("+f.y+"px)"})}),0)}function O(t,i){OGX.Data.merge(t,a);var o=OGX.Data.merge(r,t,!0,!0);t.hasOwnProperty(s.map.id)?o.id=t[s.map.id]:(o.id=u,u++);var l,c,d=((c={css:"",dsp:"ogx_nest_list_prep",id:(l=o).id})[s.map.title]=l[s.map.title],l.open?c.css="ogx_nest_list_item_head_open":c.css="ogx_nest_list_item_head_closed",OGX.Templater.make(s.template,c));void 0!==i&&i<s.list.length-1?e.children(".ogx_nest_list_item:eq("+i+")").before(d):e.children(".ogx_nest_list_mask").first().before(d),o.selector='.ogx_nest_list[data-ogx-id="'+n.id+'"] > .ogx_nest_list_item[data-ogx-nest-id="'+o.id+'"] > .ogx_nest_list_item_body > .ogx_nest_list_item_content';var f=$('.ogx_nest_list[data-ogx-id="'+n.id+'"] > .ogx_nest_list_item[data-ogx-nest-id="'+o.id+'"]');return o.hidden&&f.addClass("ogx_nest_list_item_hidden"),f.removeClass("ogx_nest_list_prep"),o}function b(){var t=s.list;h&&(t=i),e.empty(),g.clear();var o;e.html('<div class="ogx_nest_list_mask"></div>'),s.hasOwnProperty("node:OML")||(s["node:OML"]=[]);for(var a=0;a<t.length;a++)o=O(t[a]),g.push(o),s["node:OML"][a]=OGX.OML.rename(s["node:OML"][a],o.selector);n.observe(!0,{childList:!0,subtree:!0},(function(){n.updateNestsHeight()}))}function w(){for(var t=[],e=0;e<s.list.length;e++)t[s.order.indexOf(s.list[e][s.map.title])]=s.list[e];return s.list=new OGX.List(t)}function G(){s.list.hasOwnProperty("insert")||(s.list=new OGX.List(s.list));for(var t=0;t<s.list.length;t++)s.item_default?OGX.Data.merge(s.list[t],s.item_default):OGX.Data.merge(s.list[t],a),s.order&&w()}this.onFocus=function(){return _(!0),this},this.onBlur=function(){return _(!1),this},this.show=function(t,e){arguments.length||this._show();var i=this.find(t,e);if(i){var n=i.el.parents(".ogx_nest_list_item").first().children(".ogx_nest_list_item_head").first();m(n)}return this},this.bindFilter=function(t,e,n){s.list.removeFilter(t),void 0!==n&&s.list.addFilter(t,e,n),s.list.getFilters()&&(i=s.list.filter(),h=!0),setTimeout(b,0)},this.destroy=function(){e.children(".ogx_nest_list_mask").off("transitionend"),n.observe(!1)},this.onOpen=function(){},this.onClose=function(){},this.scope=function(t){return void 0!==t?(s.scope=t,function(){for(var t,i=0;i<g.length;i++)(t=e.children(g[i].selector)).addClass("ogx_nest_list_item_noanim"),y(g[i])?(g[i].hidden=!1,t.removeClass("ogx_nest_list_item_hidden")):(g[i].hidden=!0,t.addClass("ogx_nest_list_item_hidden"));setTimeout(x,0)}(),!0):s.scope},this.val=function(t){if(void 0===t)return s.list;s.list=t,G(),setTimeout(b,0)},this.addNest=function(t,e,i){var n=O(t,i);if(g.insert(n,i),e=OGX.OML.rename(e,n.selector),OGX.OML.render(this,e),void 0!==i){var o=this.nodes.pop();this.nodes.insert(o,i)}},this.removeNest=function(t){var e=g.findIndex(s.map.title,t);e&&(this.nodes[e.index].kill(),this.nodes.splice(e.index,1),$('.ogx_nest_list[data-ogx-id="'+n.id+'"] > .ogx_nest_list_item[data-ogx-nest-id="'+g[e.index].id+'"]').remove(),g.splice(e.index,1),setTimeout(x,0))},this.updateNestHeight=function(t){var e=g.find(s.map.title,t,1);setTimeout((function(){var t,i;t=e,i=$(t.selector).outerHeight(!0),t.height=i,x()}),0)},this.updateNestsHeight=function(){for(var t,e=0;e<g.length;e++)t=g[e],this.updateNestHeight(t[s.map.title])},this.updateMask=function(){x()},OGX.Data.merge(s,o),s.callbacks.open||(s.callbacks.open=n.onOpen),s.callbacks.close||(s.callbacks.close=n.onClose),G(),s.template=s.template.replace("{{$title}}","{{$"+s.map.title+"}}"),(e=n.el).addClass("ogx_nest_list"),s.list.length&&b()},OGX.NestList.OPEN="NestListOpen",OGX.NestList.CLOSE="NestListClose",OGX.NestList.READY="NestListReady",OGX.Net=function(t){"use strict";var e=1,i=OGX.Data.merge(t,{file_default:{file:!1,path:!1},extensions:[{ext:"json",path:"/json",type:"json"},{ext:"js",path:"/js",type:"text"},{ext:"html",path:"/html",type:"text"},{ext:"oml",path:"/oml",type:"json"},{ext:"ose",path:"/ose",type:"text"},{ext:"mp3",path:"/snd",type:"mp3"},{ext:"wav",path:"/snd"},{ext:"ogg",path:"/snd"},{ext:"png",path:"/img"},{ext:"jpg",path:"/img"},{ext:"gif",path:"/img"},{ext:"svg",path:"/img"}],ios:!1},!1,!0);function n(t,e,i){switch(t.ext){case"json":case"txt":case"oml":case"ose":case"html":case"snd":"app.json"!==t.file&&OGX.Cache.add(t)}void 0!==e?setTimeout((function(){e(t.data,i)}),0):$(document).trigger(OGX.Net.LOAD_SUCCESS,t)}function o(t,e,o){!function(){var r=t.path+"/"+t.file;"/"===r.substr(0,1)&&(r=r.substr(1)),(i.encrypted&&"app.json"===r||"pak"===t.ext)&&(t.type="text"),fetch(r,{method:"GET",mode:"no-cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":a(t.type)},redirect:"follow",referrerPolicy:"same-origin"}).then((e=>{switch(t.type){case"text":return e.text();case"json":return e.json();default:return e.blob()}})).catch((t=>{$(document).trigger(OGX.Api.NETWORK_ERROR,t)})).then((i=>{t.data=i,n(t,e,o)}))}()}function a(t){switch(t){case"text":case"json":return"text/plain";default:return"application/zip"}}i.extensions.hasOwnProperty("insert")||(i.extensions=new OGX.List(i.extensions)),this.preload=function(t,e,i){var n={loaded:0,total:0,files:new OGX.List};for(var o in t)for(var a=0;a<t[o].length;a++)n.total++,this.load(o+"/"+t[o][a],r);function r(t,o){n.loaded++,n.files.insert(t),n.loaded===n.total&&setTimeout((function(){e(n.files,i)}),0)}},this.load=function(t,a,r){var s,l={file:null,path:null};-1!==t.indexOf("/")?(s=t.split("/"),l.file=s.pop(),l.path=s.join("/")):(l.path="",l.file=t),OGX.Data.merge(l,i.file_default);var c=function(t){var e;if(e=/([a-z0-9\_\-]+\.)?([a-z0-9\_\-]+)\.([a-z0-9]{3,4})/gi.exec(t))return e.shift(),e;return!1}(l.file);if(c)switch(l.ext=c[2],l.id=c[1],l.ext){case"json":case"txt":case"oml":case"ose":case"html":l.type=i.extensions.find("ext",l.ext,1).type,o(l,a,r);break;case"mp3":case"ogg":case"wav":!function(t,e,i){var o;function a(){var a=t.path+"/"+t.file;"/"===a.substr(0,1)&&(a=a.substr(1)),o=new Audio(a),t.data=o,t.ext="snd",t.format=t.file.split(".").pop(),n(t,e,i)}a()}(l,a,r);break;case"png":case"gif":case"jpg":case"svg":!function(t,e,i){var o=new Image;function a(){o.onload=function(){t.data=o,n(t,e,i)};var a=t.path+"/"+t.file;"/"===a.substr(0,1)&&(a=a.substr(1)),o.src=a}a()}(l,a,r);break;case"ttf":case"eot":case"woff":case"woff2":!function(t,i,o){function a(){var a='<div class="ogx_font_loader" style="font-family:'+t.file.split(".")[0]+';" data-ogx-id="font-loader-'+e+'"><b>ogx</b> <i>font</i> init</div>';$("body").append(a),n(t,i,o),function(t){setTimeout((function(){$('.ogx_font_loader[data-ogx-id="font-loader-'+t+'"]').remove()}),150)}(e),e++}a()}(l,a,r);break;case"pak":!function(t,e,i){function a(o){for(var a,r=/<!--\[([a-zA-Z0-9_\-]+)\]-->/gi,s=[];a=r.exec(o);)s.push(a[1]);r=/<!--\[[a-zA-Z0-9_\-]+\]-->/gi;var l,c,d,u=o.split(r);u.shift();for(var f=0;f<s.length;f++){switch(t.path){case"/html":c="template."+s[f]+".html",d=u[f];break;default:c=s[f]+"."+t.path.substr(1),d=JSON.parse(u[f])}l={ext:t.path.substr(1),data:d,path:t.path,id:s[f],file:c},OGX.Cache.add(l)}n(t,e,i)}o(t,a,i)}(l,a,r)}}},OGX.Net.LOAD_SUCCESS="NET_LOAD_SUCCESS",OGX.OSE=function(){"use strict";var charcode,to="__thread_object",lo="__local_object",ro="__route_object",oo="__object";function convertValue(t){if(-1===t.indexOf(":"))return t;var e=t.split(":");switch(e[1]){case"Boolean":return"true"===e[0];case"Number":var i=Number(e[0]);return!isNaN(i)&&i}}function convertKeywords(t,e){for(var i=["echo","scope","method","screen","mongogx","uxi","loop","json","ose","template","oml","crumb","result"],n=["eko","sco","met","scr","mgx","ixu","loo","jsn","eso","tpl","lmo","crb","rst"],o=["$","@","#","&"],a=0;a<i.length;a++)for(var r=0;r<o.length;r++)t=e?t.replaceAll(o[r]+i[a],o[r]+"___"+n[a]):t.replaceAll(o[r]+"___"+n[a],o[r]+i[a]);return t}function convertToJS(t,e,i,n,o){var a,r,s,l,c,d=0,u="";if(t=convertKeywords(t=(t=t.replace(/^[ \n\r]*{{|}}[\r\n ]*$/g,"")).replace(/(\/\*+((?!\*+\/)[\S\s])*\*+\/)/g,""),!0),(r=/(screen ?([<>=!+]+ ?\d+) ?\? ?([\S\s]+) ?\: ?([\S\s]+);?)/gi.exec(t))&&(l=(l=(l="var a;"+r[0]).replace("screen","screen.width")).replace(r[3],'a="'+r[3].trim()+'"'),l="null"!==r[4]?l.replace(r[4],'a="'+r[4].trim()+'"'):l.replace(r[4],"a=false;"),l+=";if(a){return a;}",c=new Function(l),t=t.replace(r[0],c())),(r=/(scope ([\S ]+) ?\? ?([\S ]+)\: ?([\S ]+);?)/gi.exec(t))&&(l=r[0],t="null"===(l=(s=OGX.Scope.eval(r[2]))?r[3]:r[4])?t.replace(r[0],""):t.replace(r[0],l)),(r=/(uxi *(?:#|\$|&|@|%)*([a-z0-9_\-]+)):(([a-z0-9]+))/gi.exec(t))&&(s='OGX.Object.get({_NAME_:{eq:"'+r[3]+'"}, id:{eq:"'+r[2]+'"}}, null, 1);')===(t=t.replace(r[0],s)))return"return "+t;if((r=/method *([a-zA-Z0-9_\-]+) ([a-zA-Z0-9_\-]+):([a-zA-Z0-9_\-]+)/gi.exec(t))&&(s='OGX.Object.get({_NAME_:{eq:"'+r[3]+'"}, id:{eq:"'+r[2]+'"}}, null, 1).'+r[1])===(t=t.replace(r[0],s)))return"return "+t;if((r=/mongogx ([a-z0-9_\-]+)\.([a-z0-9_\-]+)\.([a-z]+)\(([\S ]+)\)/gi.exec(t))&&(s="mongogx.setDatabase('"+r[1]+"');",s+="mongogx.setCollection('"+r[2]+"');",(s+="return mongogx."+r[3]+"("+r[4]+")[0];")===(t=t.replace(r[0],s))))return s;if(isSingleVar(t))return"return "+replaceVars(t=convertKeywords(t,!1),e,i,n,o)+";";for(t=convertKeywords(t+="\r\n",!1);a=/[\S ]+(\r\n|\n)?/gi.exec(t);){if(l=replaceLoop(l=a[0].replace(/(\r\n|\n)/gi,"").trim(),e,i,n,o),charcode++,l=replaceVars(l,e,i,n,o),/^(app|OGX)\.\S+;?/g.test(l))return"return "+l+";";if(t=t.replace(a[0],""),u+=l+"\n",++d>100)return}return u="var __echo=[];\n"+u+'\nif(!__echo.length){return;}else{return __echo.join("");}'}function runJS(t,e,i,n,o,a){var r;try{r=new Function(oo,to,ro,lo,t)(e,i,n,o)}catch(t){return}if(void 0!==r)return r}function isSingleVar(t){return/^[ ]*\S+( \S+)?[ ]*$/g.test(t)}function getTrueVal(__string,__object,__thread_object,__route_object,__local_object,__as_string){void 0===__as_string&&(__as_string=!0);var e=!1,err=!1,str=__string.trim();if(["$","%","@"].includes(str))switch(str){case"&":return to;case"@":return lo;case"$":return oo;case"%":return ro}try{e=eval(__string)}catch(t){err=!0}return err||!e||"function"==typeof e||e&&e instanceof HTMLElement?'"'+__string+'"':e?"string"!=typeof e?__string:__as_string?'"'+e+'"':e:__string}function replaceLoop(t,e,i,n,o){var a,r,s,l;return(a=/loop (\S+) ?(as (\S+) ?(\S+ )?)?{/gi.exec(t))&&(r="__"+String.fromCharCode(charcode).toLowerCase()+"__",s=(s=a[0]).replace(a[0],"for(var "+r+" in JSON.parse(JSON.stringify("+a[1]+"))){"),a[2]&&(l=a[4]?"&"+a[3]+"="+r+"; &"+a[4]+"="+a[1]+"["+r+"]; ":"&"+a[3]+"="+a[1]+"["+r+"]; "),s+=l,t=t.replace(a[0],s)),t}function replaceVars(t,e,i,n,o){for(var a,r,s,l=0;r=/((&|#|@|\$|%)([a-zA-Z_]{1}[a-zA-Z0-9\-_]*))(\.[a-z0-9\-_\.\[\]\$]+|\.\$|\.)?(;)?/gi.exec(t);){switch(s=!1,r[2]){case"&":s=to+"."+r[3];break;case"@":s=lo+"."+r[3];break;case"$":s=oo+"."+r[3];break;case"#":s=r[3];break;case"%":s=ro+"."+r[3]}if(a=r[0].replace(r[1],s),t=t.replace(r[0],a),++l>300)return t}for(;r=/([a-z_\-]+)\( *(\$|@|&|%) *\)/gi.exec(t);)s=getTrueVal(r[2]),a=r[1]+"("+s+")",t=t.replace(r[0],a);for(;/^(json|ose|template|oml|crumb|result) (\S+)/g.test(t);)if((r=/crumb (\S+)?/gi.exec(t))&&(a=n.hasOwnProperty(r[1])?"__route_object."+r[1]:"{}",t=t.replace(r[0],a)),(r=/json (\S+)(;)?/gi.exec(t))&&(r[1]=getTrueVal(r[1],e,i,n,o),t=t.replace(r[0],"app.getJSON("+r[1]+")")),(r=/^template (\S+)( \S+)?[ ;]?/gi.exec(t))&&(r[1]=getTrueVal(r[1],e,i,n,o),void 0===r[2]?r[2]="__object":r[2]=getTrueVal(r[2].trim(),e,i,n,o),t=t.replace(r[0],"OGX.Templater.make(OGX.Templater.get("+r[1]+"), "+r[2]+", "+to+","+ro+","+lo+")")),(r=/^ose (\S+)(;)?/gi.exec(t))&&(r[1]=getTrueVal(r[1],e,i,n,o),script=that.get(r[1]),script&&(t=exp.replace(r[0],script.replace(/({{|}})/g,"")))),(r=/^oml (\S+)(;)?/gi.exec(t))&&(r[1]=getTrueVal(r[1],e,i,n,o),t=t.replace(r[0],"app.getOML("+r[1]+")")),(r=/^result (\S+)(;)?$/gi.exec(t))&&(t=t.replace(r[0],'OGX.OML.result("'+r[1]+'")')),++l>300)return t;if(["$","@","%","&"].includes(t.trim())){switch(t.trim()){case"$":t=oo;break;case"@":t=lo;break;case"%":t=ro;break;case"&":t=to}return t}for(;r=/echo ('|")?(((?![;}\r\n]+|$)([\S\s]))*)(?:'|")?/gi.exec(t);){var c="+$1+",d="'";if(void 0!==r[1]&&(d="\\"+r[1]),c=d+c+d,r[2]=r[2].replace(/(__(?!;\n\r)[a-z0-9_\-\.]+)/gi,c),a="__echo.push("+d+r[2]+d+");",t=t.replace(r[0],a),++l>300)return t}return t}this.get=function(t){return OGX.Cache.read("ose",t)},this.fork=function(t,e){var i,n;if(i=t.split(":")[0],void 0===e.data&&(e.data={}),void 0!==(n=OGX.OSE.exec(i,e.data)))for(var o in e.values)if(convertValue(o)===n)return e.values[o];return!1},this.execScript=function(t,e,i,n){var o=this.get(t);return o&&this.exec(o,e,i,n),!1},this.exec=function(t,e,i,n,o){void 0===e&&(e={}),void 0===i&&(i={}),void 0===n&&(n={}),void 0===o&&(o={}),charcode=65;var a=runJS(convertToJS(t,e,i,n,o),e,i,n,o,t);if(void 0!==a)return a}},OGX.OSE=new OGX.OSE,OGX.OSE.SCRIPT_LOADED="OSE_SCRIPT_LOADED",OGX.OSE.SCRIPTS_LOADED="OSE_SCRIPTS_LOADED",OGX.Overlay=function(t){"use strict";var e=this,i=!1,n=!1,o={anim:OGX.Overlay.FADE,display:{css:"",html:" "},index:!1,close_on_click:!1},a=!1,r="mousedown";function s(t){i&&(t?i.on(r,l):i.off(r,l))}function l(){"function"==typeof a.close_on_click&&a.close_on_click.apply(null,e),s(!1),e.removeOverlay()}t.hasOwnProperty("overlay")&&t.overlay&&setTimeout((function(){e.addOverlay(t.overlay)}),0),this.hasOverlay=function(){return!!i},this.addOverlay=function(t){if("object"!=typeof t&&(t={}),OGX.Data.merge(t,o),t.display.hasOwnProperty("_NAME_")||(t.display=new OGX.Display(t.display)),a=t,!this.hasOverlay()){var e=this.el;a.hasOwnProperty("el")&&(e=$(a.el));var n="z-index:"+(a.zindex?a.zindex:this.topIndex(e))+";",r='<div class="ogx_overlay '+a.display.css()+'" style="'+n+'">'+a.display.html()+"</div>";if(e.prepend(r),(i=e.children(".ogx_overlay").first()).off("transitionend"),a.anim)switch(a.anim){case OGX.Overlay.FADE:setTimeout((function(){i&&i.removeClass("ogx_overlay_fade_out").addClass("ogx_overlay_fade_in")}),50)}else i.css("opacity",1)}return t.close_on_click&&s(!0),this},this.removeOverlay=function(t){s(!1);var e=!1;if(void 0===t||!0===t?a.anim&&(e=a.anim):e=t,i){if(e){switch(e){case OGX.Overlay.FADE:i.removeClass("ogx_overlay_fade_in").addClass("ogx_overlay_fade_out"),i.css("opacity")>0?i.on("transitionend",(function(){i&&(i.off("transitionend"),i.remove(),i=!1)})):i&&(i.removeClass("ogx_overlay_fade_in").removeClass("ogx_overlay_fade_out"),i.off("transitionend"),i.remove(),i=!1)}return}return i.remove(),void(i=!1)}return this},this.addGroupOverlay=function(){return n||(this.el.prepend('<div class="ogx_group_overlay" style="z-index:'+(this.topIndex()+1e3)+'"></div>'),n=!0),this},this.removeGroupOverlay=function(){return n&&(this.el.children(".ogx_group_overlay").remove(),n=!1),this}},OGX.Overlay.FADE="fade",OGX.Overlay.REMOVE="OverlayRemove",OGX.Placeholder=function(t){"use strict";this.pholder=null,t.hasOwnProperty("placeholder")&&(this.pholder=t.placeholder),this.pholder&&this.pholder.length&&"default"!==this.pholder||(this.pholder=""),this.placeholder(t)},OGX.Placeholder.prototype.placeholder=function(t){var e;if("object"==typeof t["node:OML"]&&!Array.isArray(t["node:OML"])){var i=this.selector;for(var n in this.pholder&&(i+=" "+this.pholder),t["node:OML"])0===n.indexOf("default")&&(e=n.replace("default",i),t["node:OML"][e]=t["node:OML"][n],delete t["node:OML"][n])}},OGX.Placeholder.prototype.placeholders=function(t,e){var i=0;function n(t){var n;for(var o in t)0===o.indexOf("default")&&(n=o.replace("default",e[i]),i++,t[n]=t[o],delete t[o])}if(void 0!==t&&void 0!==e){t.hasOwnProperty("node:OML")||(t["node:OML"]=[]);var o,a=t["node:OML"];a&&"string"==typeof a&&(0===a.indexOf("{{")?t["node:OML"]=OGX.OSE.exec(a):t["node:OML"]=OGX.Cache.read("oml",t["node:OML"]));for(var r=0;r<t["node:OML"].length;r++)if("string"==typeof(o=t["node:OML"][r])&&(o=0===o.indexOf("{{")?OGX.OSE.exec(o):OGX.Cache.read("oml",o)),"object"==typeof o&&Array.isArray(o))for(var s=0;s<o.length;s++)n(o[s]);else n(o);return t}return!1},require("Point","Uxi","Placeholder"),OGX.Point=function(t){construct(this,"Point");var e,i=this,n=OGX.Data.merge(t,{live:[],mode:0}),o=new OGX.List,a=0;function r(){var t=function(){var t=i.el.width();if(t&&t!==a&&(a=t),a)for(var e=0;e<i.points.length;e++)if(a>=i.points[e].min&&a<i.points[e].max)return{id:e,oml:i.points[e].oml};return!1}();return!(!t||t.id===i.point)&&(i.point=t.id,!0)}this.points=[],this.point=null,this.construct=function(t,e){},this.resize=function(){r()&&(!function(t){for(var e,a=0;a<n.live.length;a++)(e=i.find(!1,n.live[a]))&&(e.sleep(),t&&o.push(e),e.parent.nodes.findDelete("id",e.id,1))}(n.live.length&&!o.length),this.nodes.length&&(this.clear(),n.mode||this.el.empty()),OGX.OML.render(this,this.points[this.point].oml,n.data,n.route_data,o),this.el.trigger(OGX.Point.CHANGE,{min:this.points[this.point].min,max:this.points[this.point].max}))},this.oml=function(){return this.point||r(),this.points[this.point].oml},e=!0,n.el||(n.el=n.parent.el,e=!1),i.el=$(n.el),i.el.addClass("ogx_point"),e&&i.el.addClass("ogx_point_uxi"),function(){var t,e=i.id;for(var o in n.mode&&(e=n.parent.id),n)if(/^\d+\-\d+$/gi.test(o)){t=o.split("-");var a=JSON.parse(JSON.stringify(n[o]));for(var r in a)0===r.indexOf("default:")&&(a['.ogx_point[data-ogx-id="'+e+'"]:'+r.split(":")[1]]=a[r],delete a[r]);i.points.push({min:parseInt(t[0],10),max:parseInt(t[1],10),oml:a})}}(),r()},OGX.Point.CHANGE="PointChange",require("Popup","Uxi","Placeholder","Touch","Resize"),OGX.Popup=function(t){construct(this,"Popup");var e,i,n=this,o={el:!1,width:"80%",height:"80%",html:!1,template:!1,title:!1,icon:!1,icons:!1,view:!1,drag:!1,resize:!1,maximize:!0,center:!0,x:null,y:null,show:!0,group:!1,data:{},buttons:[],buttons_enabled:!0,anim:OGX.Popup.FADE,anim_param:{scale:.7},responsive:!0,overlay:!1,zindex:!1,chromeos:!1,parent:null},a={label:"",callback:null,params:null,enabled:!0},r=t,s=null,l=null,c=null,d="ogx_popup",u=[],f=[],h={w:0,h:0},g=!1,_=!1,p=!1,m=null,v=!1,O=null,b=!1;function w(){n.el.addClass("ogx_popup_notrans"),_=!0,X(!0)}function G(t,e){for(var i,o={},a={},r=0;r<t.length;r++)a[t[r]]=n.el[t[r]]();var s=setInterval((()=>{i=!1;for(var r=0;r<t.length;r++)o[t[r]]=n.el[t[r]](),o[t[r]]!==a[t[r]]&&(i=!0),a[t[r]]=o[t[r]];i?setTimeout(w,0):(clearInterval(s),setTimeout(w,100),e&&e())}),50)}function X(t){void 0===t&&(t=!1),r.anim&&n.el.removeClass(d+"_"+r.anim),t&&(r.width=n.el.width(),r.height=n.el.height(),r.center=n.centered=!1),n.resizeNodes()}function T(){r.anim&&n.el.removeClass(d+"_notrans");var t={};C(r.width)?t.width=OGX.Data.getBestSize(c.width(),n.el.width()):t.width=r.width,C(r.height)?t.height=OGX.Data.getBestSize(c.height(),n.el.height()):t.height=r.height;var e=M();u[0]="translate3d("+e.x+"px, "+e.y+"px, 0px)",n.x=e.x,n.y=e.y,t.transform=u.join(" "),s.on("transitionend",(function(){s.off("transitionend"),n.resizeNodes()})),n.el.css(t),n.resizeNodes()}function C(t){return"string"==typeof t&&-1!==t.indexOf("|")}function D(){n.blurNodes(),n.front()}function E(){n.focusNodes(),n.el.removeClass("ogx_popup_notrans"),r.anim&&n.el.addClass(d+"_"+r.anim)}function S(){s.addClass(d+"_drag"),n.front()}function L(t){if(s.removeClass(d+"_drag"),p=!0,g){for(var e=0;e<f.length;e++)f[e].removeGroupOverlay();return f=[],void app.groupPopups(n,g,{drag:r.drag,resize:r.resize,anim:r.anim})}"function"==typeof r.drag&&r.drag(n,!1)}function k(t){if(e=n.el.position(),n.x=e.left,n.y=e.top,u[0]="translate3d("+n.x+"px, "+n.y+"px, 0)",r.group&&n.parent&&(f=n.parent.nodes.get({_NAME_:{eq:"Popup"},group:{eq:n.group},blured:{eq:!1}},{z:-1})).length){g=!1;for(var o=0;o<f.length;o++)n.id!==f[o].id&&f[o].group===n.group&&(i={left:f[o].x,top:f[o].y},h.w=f[o].el.width(),h.h=f[o].el.height(),e.left>i.left&&e.left<i.left+h.w&&e.top>i.top&&e.top<i.top+h.h&&(g||(g=f[o],f[o].addGroupOverlay())),g||f[o].removeGroupOverlay())}g||"function"==typeof r.drag&&r.drag(n,t)}function M(){var t=c.width(),e=c.height();t>screen.width&&(t=screen.width),e>screen.height&&(e=screen.height);var i=r.width,o=r.height,a=0,s=0;return _||(i=OGX.Data.getBestSize(t,i),o=OGX.Data.getBestSize(e,o)),r.center?("string"==typeof i&&(i=-1!==i.indexOf("%")?Math.round(t*Number(i.substr(0,i.length-1))/100):Number(i)),"string"==typeof o&&(o=-1!==o.indexOf("%")?Math.round(e*Number(o.substr(0,o.length-1))/100):Number(o)),x=Math.round(t/2-i/2),y=Math.round(e/2-o/2),r.center&&p&&(r.center=!1)):(p?(x=n.x,y=n.y):r.x&&r.y?(-1!==String(r.x).indexOf("%")?(a=i/2,x=t*Number(r.x.slice(0,-1))/100-a):x=r.x,-1!==String(r.y).indexOf("%")?(s=o/2,y=e*Number(r.y.slice(0,-1))/100-s):y=r.y):(x=Math.round(t/2-i/2),y=Math.round(e/2-o/2)),x>t&&(x=t-x),x<-i&&(x=0),y>e&&(y=e-o),y<0&&(y=0)),{x:x,y:y,w:i,h:o}}function N(t,e,i,o,a,l){var c=!1,f=null;if(void 0===l&&(l=!1),void 0!==e&&!0!==e||(e=r.anim),e&&(c=e),!e&&m&&(c=m),e?n.el.removeClass(d+"_notrans"):n.el.addClass(d+"_notrans"),t?(n.front(),l||n.el.trigger(OGX.Popup.SHOW,n)):l||n.el.trigger(OGX.Popup.HIDE,n),c){var h={};switch(f=d+"_"+c,c){case OGX.Popup.SCALE:u[1]=t?"scale(1,1)":"scale("+r.anim_param.scale+", "+r.anim_param.scale+")",h.transform=u.join(" ");break;case OGX.Popup.FADE:h.opacity=t?1:0}t&&(s.css("display","flex"),h.visibility="visible",h.display="flex"),e||t||(h.visibility="hidden",h.display="none"),setTimeout((function(){s.css(h)}),50),e?(m=c,s.on("transitionend",(function(){s.off("transitionend"),b=!0,t?n.resizeNodes():s.css({display:"none",visibility:"hidden"}),f&&s.removeClass(f),I(i,o,a)})),f&&s.addClass(f)):(s.removeClass(f),I(i,o,a))}else t?s.css({opacity:t,display:"flex",visibility:"visible"}):s.css({display:"none",visibility:"hidden"}),I(i,o,a)}function I(t,e,i){void 0!==t&&t&&t(e),void 0!==i&&i&&i(n.id)}function A(t){t?s.on(n.touch.down,"."+d+"_button",P):s.off(n.touch.down,"."+d+"_button",P)}function P(t){t.preventDefault(),t.stopImmediatePropagation();var e=$(this);if(!e.hasClass(d+"_button_disabled")){var i=e.index();s.trigger(OGX.Popup.CLICK_BUTTON,{index:i,value:r.buttons[i].label}),r.buttons[i].hasOwnProperty("callback")&&r.buttons[i].callback&&(r.buttons[i].hasOwnProperty("params")?r.buttons[i].callback.apply(null,[r.buttons[i].params]):r.buttons[i].callback())}}function Y(){for(var t,e="",i=0;i<r.buttons.length;i++)r.buttons.length>0&&(t=r.buttons[i].enabled?"":d+"_button_disabled",e+='<span class="'+d+"_button "+t+'">'+r.buttons[i].label+"</span>");return e}function R(t,e){void 0===e&&(e=!0),r.buttons=new OGX.List(t);for(var i=0;i<t.length;i++)r.buttons[i]=OGX.Data.merge(r.buttons[i],a);if(e){var n=Y();l.html(n)}}function W(t){t?n.el.on(n.touch.down,"."+d+"_icons_icon",(function(t){t.preventDefault(),t.stopImmediatePropagation();var e,i=$(this).index(),n=r.icons[i];"object"==typeof n&&n.hasOwnProperty("callback")&&(n.hasOwnProperty("params")&&(e=n.params),n.callback.call(null,e))})):n.el.off(n.touch.down,"."+d+"_icons_icon")}function H(){for(var t,e="",i=0;i<r.icons.length;i++)t="string"==typeof r.icons[i]?r.icons[i]:r.icons[i].icon,e+='<div class="'+d+'_icons_icon" style="background-image:url(\''+t+"')\"></div>";return e}this.anim=null,this.group=r.group,this.x=0,this.y=0,this.z=0,this.construct=function(){},this.onFocus=function(){this.enableResize(),r.icons&&r.icons.length&&W(!0),r.buttons&&r.buttons.length&&r.buttons_enabled&&A(!0)},this.onBlur=function(){this.disableResize(),r.icons&&r.icons.length&&W(!1),r.buttons&&r.buttons.length&&r.buttons_enabled&&A(!1),this.enabled=!1},this.show=function(t,e,i){if(!this.visible){if(this._show(),!r.anim||t||b||(t=!0),!t&&r.anim&&"scale"==r.anim){var o=u.join(" ").replace(/scale\([0-9,\. ]+\)/,"");n.el.css({transform:o}),u=o.split(" ")}N(1,t,e,i),this.focus(1)}return this},this.hide=function(t,e,i,n,o){return this.visible&&(this._hide(),N(0,t,e,i,n,o),this.blur(1)),this},this.resize=function(){return X(),this},this.maximize=function(){return r.maximize&&!v&&(v=!0,O={width:r.width,height:r.height,x:this.x,y:this.y},r.width=r.height="100%",T(),this.move(0,0)),this},this.normalize=function(){return r.maximize&&v&&(v=!1,r.width=O.width,r.height=O.height,T(),this.move(O.x,O.y),O=null),this},this.width=function(t,e,i){return void 0===t?r.width:(void 0===i&&(i=!1),void 0===e&&(e=!1),e&&n.el.removeClass("ogx_popup_notrans"),r.width=t,G(["width"],i),T(),this)},this.height=function(t,e,i){return void 0===t?r.height:(void 0===i&&(i=!1),void 0===e&&(e=!1),e&&n.el.removeClass("ogx_popup_notrans"),r.height=t,G(["height"],i),T(),this)},this.destroy=function(){s.off("transitionend"),this.touch.wipe()},this.buttons=function(t){if(void 0===t)return r.buttons;R(t)},this.enableButton=function(t){return r.buttons[t].enabled=!0,l.children("."+d+"_button:eq("+t+")").removeClass(d+"_button_disabled"),r.buttons_enabled||(r.buttons_enabled=!0),this},this.disableButton=function(t){return r.buttons[t].enabled=!1,l.children("."+d+"_button:eq("+t+")").addClass(d+"_button_disabled"),this},this.enableButtons=function(){if(r.buttons.length)for(var t=0;t<r.buttons.length;t++)this.enableButton(t);return r.buttons_enabled=!0,this},this.disableButtons=function(){if(r.buttons.length)for(var t=0;t<r.buttons.length;t++)this.disableButton(t);return r.buttons_enabled=!1,this},this.center=function(){var t=M();return p||(u[0]="translate3d("+t.x+"px, "+t.y+"px, 0px)",this.x=t.x,this.y=t.y,n.el.css({transform:u.join(" ")})),_||(n.el.width(t.w),n.el.height(t.h)),this},this.move=function(t,e){return null===t&&(t=n.el.position().left),null===e&&(e=n.el.position().top),u[0]="translate3d("+t+"px, "+e+"px, 0px)",this.x=t,this.y=e,n.el.css({transform:u.join(" ")}),this},this.front=function(){return this.z=r.parent.topIndex(),this.el.css("z-index",this.z),this},this.icon=function(t){if(void 0===t)return r.icon;r.icon=t,this.el.children("."+d+"_head").children("."+d+"_icon").first().css("background-image","url("+t+")")},this.title=function(t){if(void 0===t)return r.title;r.title=t,this.el.find("."+d+"_title").first().html(t)},this.icons=function(t){if(void 0===t)return r.icons;r.icons&&r.icons.length&&W(!1),r.icons=t,this.el.find("."+d+"_icons").first().html(H()),W(!0)},function(){if(OGX.Data.merge(r,app.getDefaults("popups"),!1),OGX.Data.merge(r,o,!1),R(r.buttons,!1),(s=n.el).addClass(d),c=s.parent(),n.anim=r.anim,n.centered=r.center,function(){r.index?n.z=r.index:n.z=r.parent.topIndex(),null===r.x&&null===r.y||(r.center=!1);var t=M();n.x=t.x,n.y=t.y;var e=t.w,i=t.h;-1===String(e).indexOf("%")&&(e+="px"),-1===String(i).indexOf("%")&&(i+="px");var o="";(r.icon||r.title||r.icons||r.drag)&&(o+='<div class="'+d+'_head">',r.icon&&(o+='<div class="'+d+'_icon" style="background-image:url(\''+r.icon+"')\"></div>"),r.title&&(o+='<div class="'+d+'_title">'+r.title+"</div>"),o+='<div class="'+d+'_icons">',r.icons&&(o+=H()),o+="</div></div>");var a,c=1;if(u=["translate3d("+t.x+"px, "+t.y+"px, 0)"],r.anim)switch(r.anim){case OGX.Popup.FADE:c=0,a=d+"_fade";break;case OGX.Popup.SCALE:a=d+"_scale",u[1]="scale("+r.anim_param.scale+", "+r.anim_param.scale+")"}o+='<div class="'+d+'_body ogx_view">',r.html?o+=r.html:r.template&&(o+=OGX.Templater.make(OGX.Templater.get(r.template),r.data)),o+="</div>",r.buttons&&r.buttons.length&&(o+='<div class="'+d+'_buttons">',o+=Y(),o+="</div>"),s.html(o),s.css({width:e,height:i,opacity:c,transform:u.join(" "),"z-index":n.z}),r.anim&&s.addClass(a),n.el=s,l=s.children("."+d+"_buttons").first()}(),r.drag){var t={x:!0,y:!0,cb_down:S,cb_up:L,cb_drag:k,target:"."+d+"_head"};r.group||"function"==typeof r.drag&&(t.cb_drag=function(t){r.drag(n,t)}),n.touch.add("Drag",t),n.dragable=!0}if(r.resize&&n.setResize({top:!1,cb_resize:w,cb_down:D,cb_up:E}),r.hasOwnProperty("html")&&r.html)r["node:OML"]=[{"default:Html":{html:r.html}}];else if(r.hasOwnProperty("view")&&r.view){var e={};e["default:Views."+r.view.id]=r,r["node:OML"].push(e)}n.placeholders(r,["."+d+'[data-ogx-id="'+r.id+'"] > .'+d+"_body"]),r.overlay&&n.addOverlay(),n.observe(!0,undefined,(function(){n.resizeNodes(),n.observe(!1),r.show&&n.show()}))}()},OGX.Popup.FADE="fade",OGX.Popup.SCALE="scale",OGX.Popup.HIDE="PopupHide",OGX.Popup.SHOW="PopupShow",OGX.Popup.CLOSE="PopupClose",OGX.Popup.DRAG="PopupDrag",OGX.Popup.GROUP="PopupGroup",OGX.Popup.UNGROUP="PopupUngroup",OGX.Popup.CLICK_BUTTON="PopupClickButton",OGX.Popup.FLOAT=!0,OGX.Resize=function(t){"use strict";var e,i,n,o,a,r,s,l,c=this,d=t,u={enabled:!0,top:!0,left:!0,right:!0,bottom:!0,min_width:100,min_height:100,max_width:0,max_height:0,border:10,cb_up:!1,cb_down:!1,cb_resize:!1},f=!1,h="mousedown",g="mouseup",_="mousemove",p=(d=!1,!1),m=!1,v={w:0,h:0},y=null;function x(t){d&&(t?c.el.on(h,O):c.el.off(h,O))}function O(t){var u=C(t);n=u.pageX,o=u.pageY;var f=c.el.position();e=f.left,i=f.top;var h=c.el.offset(),g=n-h.left,_=o-h.top;v.w=c.el.width(),v.h=c.el.height(),a=0,r=0,s=0,l=0,d.top&&_<d.border&&(l=-1),d.bottom&&_>c.el.height()-d.border&&(l=1),d.left&&g<d.border&&(s=-1),d.right&&g>c.el.width()-d.border&&(s=1),p=-1!==window.getComputedStyle(c.el[0],"width"),m=-1!==window.getComputedStyle(c.el[0],"height"),(s||l)&&(t.preventDefault(),y&&y.disable(),b(!0),G(!0),d.cb_down&&d.cb_down())}function b(t){t?f||(f=setInterval(w,5)):f&&(clearInterval(f),f=!1)}function w(){if(-1===s||-1===l){var t=e,n=i;a&&s&&(t+=a),r&&l&&(n+=r),a&&-1===s&&r&&1===l&&(n=i),c.el.css("transform","translate3d("+t+"px, "+n+"px, 0)")}s&&v.w+a*s>d.min_width&&(p?c.el.width(Math.round(100*(v.w+a*s)/c.el.parent().width()*100)/100+"%"):c.el.width(v.w+a*s)),l&&v.h+r*l>d.min_height&&(m?c.el.height(Math.round(100*(v.h+r*l)/c.el.parent().height()*100)/100+"%"):c.el.height(v.h+r*l)),(a||r)&&(d.cb_resize?d.cb_resize():c.el.trigger(OGX.Resize.RESIZING))}function G(t){t?($("body").on(_,X),$("body").on(g,T)):($("body").off(_,X),$("body").off(g,T))}function X(t){t.preventDefault(),t.stopImmediatePropagation(),t=C(t),a=t.pageX-n,r=t.pageY-o}function T(t){b(!1),G(!1),t=C(t),a=t.pageX-n,r=t.pageY-o,d.cb_up&&d.cb_up(),y&&(x(!1),y.enable(),setTimeout((function(){x(!0)}),0))}function C(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}this.resizable=!0,this.setResize=function(t){OGX.Data.merge(t,u,!1),d=t},this.enableResize=function(){return x(!0),this},this.disableResize=function(){return x(!1),this},this.destroy=function(){this.touch.wipe()},OGX.Data.merge(d,u,!1),void 0===window.ontouchstart||d.chromeos||(h="touchstart",_="touchmove",g="touchend"),c.hasOwnProperty("dragable")&&c.dragable&&(y=c.touch.add("Drag",{state:"manual"}))},OGX.Resize.RESIZING="resizeResizing",require("Roulette","Uxi","Bind","Touch"),OGX.Roulette=function(t){construct(this,"Roulette");var e,i,n,o,a,r,s,l=this,c=t,d={force_coef:10,time_coef:.1,min_force_pitch:2,value:null,name:!1,required:!1,display:!1,key:"value",mode:OGX.Roulette.MODE_REWIND,icon:!1,list:new OGX.List,capture:!1,callbacks:{change:null}},u={template:!1,html:'<span class="ogx_roulette_block_label">{{$label}}</span>',css:!1},f="object",h=0,g=0,_=null,p="ogx_roulette";function m(t,e){void 0===e&&(e=!0),l.el.children('input[name="'+c.name+'"]').val(t),e&&l.el.children('input[name="'+c.name+'"]').trigger("change")}function v(t){t?e.on(l.touch.down,"."+p+"_icon",(function(t){t.preventDefault(),t.stopImmediatePropagation(),l.next(!0)})):e.off(l.touch.down,"."+p+"_icon")}function y(t){t?e.on("change","input[type=hidden]",x):e.off("change","input[type=hidden]",x)}function x(t){t.preventDefault(),t.stopImmediatePropagation(),l.loopval(0,OGX.Data.stringToVal(t.target.value),!1)}function O(t){return g+t>c.list.length-1?c.list[0]:g+t<0?c.list[c.list.length-1]:c.list[g+t]}function b(t){o=t.y,X(!0)}function w(t){var e;t.dirY!==a?(e=0,o=t.pt1.y):(e=t.pt1.y-o,o=t.pt1.y),a=t.dirY,i.css({transition:"none",transform:"translate3D(0px, "+(E(i)+e)+"px, 0px)"})}function G(t){X(!1),trans=E(i);var e=Math.round(trans/n)*n,o=Math.round(e/n%c.list.length);if(o=o<=0?Math.abs(o):c.list.length-o,g!==o){switch(g=o,f){case"string":c.value=c.list[g];break;case"object":c.value=c.list[g][c.key]}c.name&&l.el.children('input[name="'+c.name+'"]').val(c.value).trigger("input"),l.el.trigger(OGX.Roulette.CHANGE,c.value)}i.css({transition:"all 0.2s ease-out",transform:"translate3D(0px, "+e+"px, 0px)"})}function X(t){t?r=setInterval(T,10):clearInterval(r)}function T(){var t,e,o;(t=Math.floor((i.position().top+n*a)/(n*c.list.length)*-1))!==h&&(0===i.children("."+p+'_stripe[data-id="'+t+'"]').length&&((e=s.clone()).css("top",t*(n*c.list.length)+"px"),e.attr("data-id",t),i.append(e)),i.children("."+p+"_stripe").each((function(t,e){o=i.position().top+$(e).position().top,(Math.ceil(o+n*c.list.length)<-n||o>n)&&$(e).remove()})),h=t)}function C(){X(!1),i.off("transitionend",C)}function D(){var t="",o='<div class="'+p+'_container">';o+='<div class="'+p+'_stripes">';for(var a=0;a<2;a++){o+='<div class="'+p+'_stripe" style="top:'+a*(c.list.length*n)+'px;" data-id="'+a+'">';for(var r=0;r<c.list.length;r++){switch(f){case"string":t=OGX.Templater.make(c.display.html(),{label:c.list[r]});break;case"object":t=c.display.html(c.list[r])}o+='<div class="'+p+"_block "+c.display.css(c.list[r])+'" style="height:'+n+"px; line-height:"+n+'px;" data-ogx-id="'+r+'">'+t+"</div>"}o+="</div>"}if(o+="</div></div>",c.icon&&(o+='<div class="'+p+'_icon"></div>'),void 0===g&&(g=0),c.name){var l="";switch(c.required&&(l=" required"),f){case"string":o+='<input type="hidden" name="'+c.name+'" value="'+c.list[g]+'" '+l+">";break;case"object":o+='<input type="hidden" name="'+c.name+'" value="'+c.list[g][c.key]+'" '+l+">"}}e.html(o),i=e.children("."+p+"_container").children("."+p+"_stripes").first(),s=(s=i.children("."+p+"_stripe:last")).detach();var d=g*n*-1;i.css({transition:"none",transform:"translate3D(0px, "+d+"px, 0px)"})}function E(t){var e=0;return"none"!==t.css("transform")&&(e=Number(t.css("transform").split(",")[5].split(")")[0])),e}function S(t){switch(f){case"string":return{index:c.list.indexOf(t)};case"object":return c.list.findIndex(c.key,t)}}function L(){c.list.length>0&&!c.list.hasOwnProperty("insert")&&(c.list=new OGX.List(c.list)),"string"==typeof c.list[0]&&(f="string"),1===c.list.length&&(c.list[1]=c.list[0])}this.construct=function(){c.name&&y(!0)},this.onFocus=function(){return e.removeClass(p+"_disabled"),c.icon&&v(!0),_&&_.enable(),this},this.onBlur=function(){e.addClass(p+"_disabled"),c.icon&&v(!1),_&&_.disable(),X(!1)},this.bindFilter=function(t,e,i){return c.list.removeFilter(t),c.list.addFilter(t,e,i),c.list.filter(),setTimeout(D,0),this},this.destroy=function(){c.name&&y(!1),this.touch.wipe()},this.bindRender=function(t,e){},this.onSelect=function(){},this.val=function(t,e){if(void 0!==t){var o=S(t).index;return o>-1&&(!function(t,e){void 0===e&&(e=!0);i.off("transitionend",C),X(!1),a=-1;var o=E(i),r=Math.round(o/n)*n,s=o-r,l=Math.round(r/n%c.list.length);l=l<=0?Math.abs(l):c.list.length-l;var d=l-t;c.mode===OGX.Roulette.MODE_CLOSEST&&d>c.list.length/2&&(d=-1*(c.list.length-l+t));var u=o+d*n-s,f=20*Math.round(Math.abs(d*n)*c.time_coef);X(!0),i.on("transitionend",C),i.css({transition:"all "+f+"ms ease-out",transform:"translate3D(0px, "+u+"px, 0px)"}),g=t}(o),c.name&&m(t,!1)),this}switch(f){case"string":return c.list[g];case"object":return c.list[g][c.key]}},this.item=function(){return c.list[g]},this.loopval=function(t,e,o){var a=g,r=S(e).index;r>-1&&(g=r);var s=a-r,l=c.time_coef*Math.abs(s+t*c.list.length);return X(!0),i.css({transition:"all "+l+"s ease-out",transform:"translate3D(0px, "+(E(i)+(s*n-c.list.length*n*t))+"px, 0px)"}),i.on("transitionend",C),c.name&&m(e,o),void 0!==o&&o&&(this.onSelect(val),this.el.trigger(OGX.Roulette.CHANGE,val)),this},this.next=function(t){var e,i=O(1);switch(a=1,f){case"string":e=i;break;case"object":e=i[c.key]}return this.val(e),void 0!==t&&t&&(this.onSelect(e),this.el.trigger(OGX.Roulette.CHANGE,e),c.name&&this.el.children('input[name="'+c.name+'"]').trigger("input")),this},this.prev=function(t){var e,i=O(-1);switch(f){case"string":e=i;break;case"object":e=i[c.key]}return this.val(e),void 0!==t&&t&&(this.onSelect(e),this.el.trigger(OGX.Roulette.CHANGE,e),c.name&&this.el.children('input[name="'+c.name+'"]').trigger("change")),this},this.setData=function(t,e){return c.value=e,c.list=t,L(),g=void 0===e?0:S(e).index,setTimeout(D,0),this},function(){if(OGX.Data.merge(c,d),c.callbacks.change||(c.callbacks.change=l.onChange),L(),c.display?c.display=new OGX.Display(c.display):c.display=new OGX.Display(u),(e=l.el=$(c.el)).addClass(p),e.width(),n=e.height(),c.list.length){var t=e.parent();t[0].hasAttribute("data-value")&&(c.value=OGX.Data.stringToVal(t.data("value")),t.removeAttr("data-value")),null===c.value&&(c.value=c.list[0],"object"==typeof c.value&&(c.value=c.value.value)),g=S(c.value).index}}(),l.observeOnce({childList:!0},(function(){_=l.touch.add("Swipe",{x:!1,y:!0,cb_down:b,cb_swipe:w,cb_up:G,state:"manual",target:'.ogx_roulette[data-ogx-id="'+l.id+'"] .ogx_roulette_container',capture:c.capture}),c.enabled&&_.enable()}),null),D()},OGX.Roulette.CHANGE="RouletteChange",OGX.Roulette.MODE_REWIND="RouletteModeRewind",OGX.Roulette.MODE_CLOSEST="RouetteModeClosest",OGX.Roulette.BIND=OGX.Roulette.CHANGE,require("RouletteTree","Uxi"),OGX.RouletteTree=function(t){construct(this,"RouletteTree");var e,n,o=this,a=t,r={groups:!1,data:!1,value:!1,required:!1},s=!1;function l(t){t?e.on(OGX.Roulette.CHANGE,d):e.off(OGX.Roulette.CHANGE,d)}function c(){for(var t,e=0;e<s.length;e++)e>0&&(t=s[e-1].roulette.val()),0===e||e-1>=0&&null!==t&&String(t).length>0?s[e].roulette.enable():e>0&&s[e].roulette.disable()}function d(t,o){t.stopImmediatePropagation();var a,r=$(t.target).data("ogx-id"),l=s.findIndex("id",String(r)),c=s[l.index].roulette.item().hasOwnProperty("head");if(n=l.index,l.index+1<s.length)for(i=l.index+1;i<s.length;i++)c?(s[i].roulette.val(""),s[i].roulette.disable()):(a=u(i-1,s[i-1].roulette.val()),s[i].roulette.setData(a,a[0].value),i===l.index+1?s[i].roulette.enable():s[i].roulette.disable());var d=f(n);e.trigger(OGX.RouletteTree.CHANGE,d),c&&!n&&(n=-1)}function u(t,e){for(var i=[],n=0;n<t+1;n++)i.push(s[n].roulette.val());return g(i)}function f(t){if(void 0===t&&(t=s.length),t<0)return!1;for(var e={},i=0;i<t+1;i++)e[a.groups[i]]=s[i].roulette.val();return e}function h(t){for(var e,i=[],o=0;o<a.groups.length;o++)t.hasOwnProperty(a.groups[o])&&(e=t[a.groups[o]],String(e).length&&(!isNaN(e)&&(e=String(e)),s[o].roulette.val(e),n=o,o>0&&s[o].roulette.setData(g(i),e),i.push(e)));setTimeout(c,0)}function g(t){for(var e=a.data,i=0;i<t.length;i++)t[i].length&&(e=e[t[i]]);var n=[{label:a.groups[t.length],value:""}];for(var o in e)n.push({label:o,value:o});return n}this.onFocus=function(){return s&&(c(),l(!0)),this},this.disable=function(){return s&&l(!1),this},this.val=function(t){if(void 0===t)return n>-1?f(n):{};h(t)},a=OGX.Data.merge(a,r),(e=o.el).addClass("ogx_roulette_tree"),o.observeOnce({childList:!0},(function(){setTimeout((()=>{a.value?h(a.value):c()}),10)})),function(){s=new OGX.List;var t,i,n=0;!function r(l,c){var d;if(!Array.isArray(l)&&"object"==typeof l){if(c>n){for(var u in n=c,e.append('<div class="ogx_roulette_tree_roulette" data-ogx-roulette="'+c+'"></div>'),i=a.groups[c-1],t=[{label:i,value:"",head:!0}],l)t.push({label:u,value:u});d=o.create("Roulette",{el:'.ogx_roulette_tree[data-ogx-id="'+o.id+'"] .ogx_roulette_tree_roulette[data-ogx-roulette="'+c+'"]',list:t,icon:a.icon,value:null,name:i,enabled:!1,required:a.required}),s.push({roulette:d,group:i,id:d.id})}if(c<a.groups.length)for(var u in l)r(l[u],c+1)}}(a.data,1)}(),n=-1},OGX.RouletteTree.CHANGE="RouletteTreeChange",OGX.RouletteTree.BIND=OGX.RouletteTree.CHANGE,OGX.Router=function(__config){"use strict";var that=this,config_default={options:{bookmark:!0,jail:!0,cache:!1,eval:!1,idle:!1},cache:!1,errors:{403:!1,404:!1},routes:{}},options_default={history:!0,reload:!1,data:null},config=__config;OGX.Data.merge(config,config_default,!1),OGX.Data.merge(config.options,config_default.options,!1),OGX.Data.merge(config.errors,config_default.errors,!1);var page=window.location.pathname.split("/").slice(-1)[0],locked=!1,pattern=!1,global_url=null,route=null,request=null,cache=new OGX.List,gate=null,blured=!1,time=0;function isCachable(t){return!(!config.options.cache||!t.route.hasOwnProperty("cache")||!1===t.route.cache)}function cacheExpired(t){var e=getCache(t);if(!e)return!0;var i=0;return"once"===config.options.cache||(!0!==config.options.cache||!0!==t.route.cache&&0!==t.route.cache)&&(!t.route.hasOwnProperty("cache")||!1===t.route.cache||(!0===t.route.cache&&"boolean"!=typeof config.cache&&(i=config.options.cache),"boolean"!=typeof t.route.cache&&(i=t.route.cache),Math.round((new Date).getTime()/1e3)>e.time+i))}function doCache(t){var e=getStageDefault(app.getStage());if(e){e.uxi.detach();var i={url:t.url,uxi:e.uxi,time:Math.round((new Date).getTime()/1e3)};cache.insert(i)}}function unCache(t){var e=getCache(t);e&&(e.uxi.kill(),cache.findDelete("url",t.url,1))}function useCache(t){var e=getCache(t);if(e){var i=app.getStage();e.uxi.attach(i,$(i.pholder)),cache.delete("url",t.url,1),route=t}}function getCache(t){return cache.get({url:{eq:t.url}},null,1)}function findRoute(t){var e,i,n,o,a,r=[],s=OGX.Data.clone(config.routes);for(var l in s){for(r=[],a=s[l],n=l;i=/(?!\/)([a-z0-9_\-]+)\:([^\/]+)/gi.exec(n);)n=n.replace(i[0],i[2]),r.push(i[1]);if((e=t.match("^"+n+"$"))&&e.length){e.shift(),"string"==typeof a.oml&&(a.oml=OGX.Data.clone(OGX.Cache.read("oml",a.oml))),o={};for(var c=0;c<e.length;c++)o[r[c]]=e[c];return{stage:t.split("/").shift(),route:a,data:o,pattern:l}}}return!1}function clearStage(t){var e=getStageDefault(t);e&&(e.uxi.kill(),e.pl.empty())}function getStageDefault(t){var e=t.selector+" "+t.pholder,i=$(e),n=app.cfind(null,String(i.find(".ogx_uxi").first().data("ogx-id")));return!!n&&("Scroller"===n._NAME_&&(n=n.parent),{uxi:n,pl:i})}function onBackButton(t){t.preventDefault(),t.stopImmediatePropagation(),locked||navigator.app.backHistory()}function onPopState(t){if(locked)return t.preventDefault(),t.stopImmediatePropagation(),!1;null!==t.originalEvent.state?app.goto(t.originalEvent.state.url,{history:!1}):-1!==window.location.href.indexOf("#")&&app.goto(window.location.href.split("#").pop(),{history:!1})}function captureLink(t){var e=t.originalEvent,i=$(this),n=i.attr("href");if(0===n.indexOf("/")){if(t.preventDefault(),t.stopImmediatePropagation(),n=n.slice(1),e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1==e.button)return config.options.jail?($(document).trigger(OGX.Router.GOTO,n),void setTimeout((function(){that.goto(n)}),0)):(n=window.location.protocol+"//"+window.location.host+"/app#"+n,window.open(n,"_blank").focus());$(document).trigger(OGX.Router.GOTO,n);var o=!1,a=!0;i[0].hasAttribute("data-reload")&&(o=i.data("reload")),i[0].hasAttribute("data-history")&&(a=i.data("history")),setTimeout((function(){that.goto(n,{reload:o,history:a})}),0)}}function onFocus(){blured=!1;var t=0;config.options.idle&&"boolean"!=typeof config.options.idle&&(t=config.options.idle),route.route.hasOwnProperty("idle")&&route.route.idle&&(t=route.route.idle),route&&time&&t&&(new Date).getTime()-time>1e3*t&&that.goto(route.url,{reload:!0,history:!1})}function onBlur(){blured=!0,time=(new Date).getTime()}function handleVisibilityChange(){"visible"===document.visibilityState?onFocus():onBlur()}function init(){request={route:null,url:global_url,origin:global_url};var t=null;if(-1!==window.location.href.indexOf("#")){t=window.location.href.split("#").pop(),request.url=t;var e=findRoute(t);e?request.route=e:config.errors[404]?(e=findRoute(config.errors[404]),request.route=e):$(document).trigger(OGX.Router.NOT_FOUND,{url:t})}$(document).on("click touchstart mousedown","a",captureLink),config.options.idle&&$(document).on("visibilitychange",handleVisibilityChange)}this.url=function(){return url},this.start=function(){$(document).on("backbutton",onBackButton),$(window).on("popstate",onPopState)},this.stop=function(){$(document).off("backbutton",onBackButton),$(window).off("popstate",onPopState)},this.lock=function(){locked=!0},this.unlock=function(){locked=!1},this.gate=function(t){gate=t},this.isLocked=function(){return locked},this.addToHist=function(t){var e={url:t};history.pushState(e,"title"+(new Date).getTime(),page+"#"+t)},this.request=function(){return request},this.expire=function(t){var e=getCache({url:t});e&&unCache(e)},this.goto=function(__url,__options){if(!locked){void 0!==__options&&__options||(__options={}),OGX.Data.merge(__options,options_default);var r=findRoute(__url);if(request.url=__url,request.origin=global_url,r){request.route=r,r.route.hasOwnProperty("reload")&&(__options.reload=r.route.reload),r.route.hasOwnProperty("scope")||(r.route.scope="public");var access=!0;if(OGX.Scope.eval(r.route.scope)||(access=!1),config.options.eval){var fnc=eval(config.options.eval);if(fnc){var res=fnc(r);res||(access=!1)}}if(!access)return config.errors.hasOwnProperty("403")?setTimeout((function(){app.goto(config.errors[403],{history:!0})}),0):$(document).trigger(OGX.Router.FORBIDDEN,{url:__url,scope:r.route.scope}),!1;if(delete r.route.scope,r.route.hasOwnProperty("origin")){for(var valid=!1,origins=r.route.origin.split(","),reg,i=0;i<origins.length;i++){if("null"===origins[i]&&!global_url){valid=!0;break}if("self"===origins[i]){if(reg=r.pattern.replace(/([a-z]+:)/,""),RegExp(reg).test(global_url)){valid=!0;break}}else if(0===global_url.indexOf(origins[i])){valid=!0;break}}if(!valid)return void app.goto(global_url);delete r.route.origin}if(gate){if(!gate(__url,__options))return;gate=null}route&&isCachable(route)&&doCache(route),r.url=__url,pattern=r.pattern;var stage=app.getStage(),render=!0,same=!0;if(r.stage!==stage.id&&(stage=app.cfind("Stage",r.stage),same=!1),stage.url===r.url?__options.reload?clearStage(stage):render=!1:same&&clearStage(stage),same||(app.showStage(r.stage),stage=app.getStage()),stage.pattern=pattern,stage.url=r.url,__options.history&&this.addToHist(__url),config.options.cache&&cache.length&&isCachable(r)){var c=getCache(r);if(c){var cache_valid=!cacheExpired(r);if(cache_valid)return useCache(r),!0;unCache(r)}}return route=r,global_url=__url,render&&OGX.OML.render(stage,r.route.oml,__options.data,r.data),time=(new Date).getTime(),!0}return config.errors[404]?setTimeout((function(){app.goto(config.errors[404],{history:!0})}),0):$(document).trigger(OGX.Router.NOT_FOUND,{url:__url}),!1}return!1},init()},OGX.Router.BACK="RouterBack",OGX.Router.EXIT="RouterExit",OGX.Router.GOTO="RouterGoto",OGX.Router.FORBIDDEN="403",OGX.Router.NOT_FOUND="404",OGX.Scope=function(t){"use strict";var e="public",i=!1,n=t;this.CHANGE="ScopeChange",this.scope=function(t){return void 0===t?e:n?($(document).trigger(OGX.Scope.CHANGE),!1):(e=t,!0)},this.token=function(t,n){if(void 0===t)return!!i;var o=function(t){var e=JSON.parse(atob(t.split(".")[1]));if(e)return e;return!1}(t);return!(!o||o.iss!==n)&&(i=t,e=o.scope,$(document).trigger(OGX.Scope.CHANGE),!0)},this.eval=function(t,i){void 0===i&&(i=e),Array.isArray(t)&&(t=t.join(" ")),t=function(t){if(!t.match(/^\/\^?/))return t;for(var i,n=t.split(" "),o=0;o<n.length;o++)n[o].match(/^\/\^?/)&&(i=(i=(i=n[o].trim()).replace(/^\/\^?/,"")).replace(/\$?\/$/,""),i=new RegExp(i,"g"),t=e.match(i)?t.replace(n[o],"1"):t.replace(n[o],"0"));return t}(t);var n=i;"string"==typeof n&&(n=n.split(" "));var o=t.match(/(?!0|1)([a-z0-9_]+)/gi);if(o&&o.length)for(var a=0;a<o.length;a++)t=n.includes(o[a])?t.replace(o[a],"1"):t.replace(o[a],"0");t=t.replace(/ /g,"|");try{var r=new Function("return "+t+";")();return"number"==typeof r&&r>0}catch(t){}return!1},this.fork=function(t){for(var e in t)if(this.eval(e))return t[e];return!1}},require("Scroller","Uxi","Touch"),OGX.Scroller=function(t){construct(this,"Scroller");var e,i,n,o,a,r,s,l,c,d,u,f=this,h=t,g={check_delay:30,fade_delay:300,css:!1,zindex:9999,observe:!0,auto_scroll:!1,scroll_callback:!1,trigger:!0,content:!1,overflow:!0},_=0,p="init",m=!1,v=!1,y=null;function x(t){t?i.on(f.touch.down,O):i.off(f.touch.down,O)}function O(t){t=f.event(t),S(!1),G(!0),b(!0),x(!1),L("in"),D(!0)}function b(t){t?(d=setInterval(C,10),i.on(f.touch.move,w)):(clearInterval(d),i.off(f.touch.move,w))}function w(t){t=f.event(t)}function G(t){t?$(document).on(f.touch.up,X):$(document).off(f.touch.up,X)}function X(){b(!1),G(!1),x(!0),D(!1),L("out")}function T(t){t?(window.addEventListener("resize",N),i.on("scroll",(function(t){t.stopImmediatePropagation(),C()})),i.on("wheel",(function(t){D(!0)})),void 0!==OGX.NestedList&&$(document).on(OGX.NestedList.OPENED+" "+OGX.NestedList.CLOSED,(function(){f.update()}))):(window.removeEventListener("resize",N),i.off("scroll"),i.off("wheel"),void 0!==OGX.NestedList&&$(document).off(OGX.NestedList.OPENED+" "+OGX.NestedList.CLOSED))}function C(){var t,o=(t=i.scrollTop())/s,r=Math.round(a.position().top);a.css("top",o+"px"),h.trigger&&!m&&(f.el.trigger(OGX.Scroller.SCROLL,{top:t,percent:100*t/n}),-1*t==i.outerHeight(!0)-e.outerHeight(!0)?r!==Math.ceil(o)&&f.el.trigger(OGX.Scroller.BOTTOM):0===t&&(r&&r!==Math.round(o)||!r)&&f.el.trigger(OGX.Scroller.TOP)),h.scroll_callback&&h.scroll_callback()}function D(t){t?(c&&D(!1),l=e.position().top,c=setInterval(E,h.check_delay-10)):(c&&(clearInterval(c),c=null),v=!1,f.el.trigger(OGX.Scroller.END))}function E(){var t=e.position().top;t!==l?(v||(v=!0,f.el.trigger(OGX.Scroller.START)),L("in")):L("out"),l=t}function S(t){t?u=setInterval(C,h.check_delay):clearInterval(u)}function L(t){a.hasClass("ogx_scroller_track_anim")||a.addClass("ogx_scroller_track_anim"),"in"===t?(clearTimeout(y),y=null,a.addClass("ogx_scroller_track_anim_fade_in").removeClass("ogx_scroller_track_anim_fade_out")):y||(y=setTimeout((function(){a.addClass("ogx_scroller_track_anim_fade_out").removeClass("ogx_scroller_track_anim_fade_in")}),h.fade_delay))}function k(t){t?f.observe(!0,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","src","width","height"]},M):f.observe(!1)}function M(){_!==e.height()&&(_=e.height(),N(),h.auto_scroll&&f.bottom())}function N(){if(o=i.innerHeight(),n=e.height(),s=n/o,n>o){var t=Math.round(o/s);a.css("height",t+"px"),r.css("display","block")}else r.css("display","none");"init"===p&&(p=OGX.Scroller.READY,f.el.trigger(OGX.Scroller.READY))}this.onFocus=function(){return N(),T(!0),h.observe&&setTimeout((function(){k(!0)}),0),x(!0),this},this.onBlur=function(){return T(!1),h.observe&&k(!1),G(!1),b(!1),x(!1),D(!1),S(!1),a.removeClass("ogx_scroller_track_anim_fade_in"),a.removeClass("ogx_scroller_track_anim_fade_out"),this},this.resize=function(){return N(),this},this.destroy=function(){f.el.removeClass("ogx_scroller_outer"),e.remove(),r.remove()},this.overflow=function(t){if(void 0===t)return h.overflow;h.overflow!==t&&(h.overflow=t,t?(this.onFocus(),this.el.removeClass("ogx_scroller_no_overflow")):(this.onBlur(),this.el.addClass("ogx_scroller_no_overflow")))},this.top=function(){return n>o&&(i[0].scrollTop=0,N()),this},this.bottom=function(){return n>o&&(i.scrollTop(n),N()),this},this.max=function(){return e.height()-i.height()},this.scroll=function(t){return void 0===t?i[0].scrollTop:(i[0].scrollTop=t,N(),this)},this.mute=function(){return m=!0,this},this.vocal=function(){return m=!1,this},this.container=function(){return e},this.inner=function(){return e[0]},this.outer=function(){return i[0]},this.state=function(){return p},OGX.Data.merge(h,g),function(){f.el=$(h.el),f.el.addClass("ogx_scroller_outer ogx_hw"),(i=f.el).html('<div class="ogx_scroller_inner ogx_hw"></div>'),e=i.children(".ogx_scroller_inner"),h.content&&e.append(h.content);var t='<div class=ogx_scroller_track ogx_hw" style="z-index:'+h.zindex+';" data-ogx-scroller="'+f.id+'"><div class="ogx_scroller_track_button" data-ogx-scroller="'+f.id+'"></div></div>';i.parent().append(t),r=i.parent().find(".ogx_scroller_track"),a=r.find(".ogx_scroller_track_button")}(),N()},OGX.Scroller.READY="ScrollerReady",OGX.Scroller.TOP="ScrollerTop",OGX.Scroller.BOTTOM="ScrollerBottom",OGX.Scroller.SCROLL="ScrollerScroll",OGX.Scroller.START="ScrollerStart",OGX.Scroller.END="ScrollerEnd",require("StackedTree","Uxi","Touch"),OGX.StackedTree=function(t){construct(this,"StackedTree");var e,i,n,o,a=this,r={scope:["public"],speed:200,list:[],display:{html:"{{$label}}"},displays:!1,chromeos:!1},s=t,l=[],c=[0],d=0,u=!1,f="ogx_stacked_tree";function h(t){t?(e.on(a.touch.down,".ogx_stacked_tree_level .ogx_stacked_tree_level_prev",g),e.on(a.touch.down,".ogx_stacked_tree_level_list .ogx_dynamic_list_item",(function(t){var e=$(this).data("ogx-id");e--,function(t,e){u=e;var i=l[d].findIndex("__id__",e.__id__);e.hasOwnProperty("items")&&e.items.length&&function(t){if(!t.hasOwnProperty("scope"))return!0;for(var e=0;e<s.scope.length;e++)if(-1!==t.scope.indexOf(s.scope[e]))return!0;return!1}(e)?(c.push(i),m(d+1,e.items),a.el.trigger(OGX.StackedTree.ENTER,e),setTimeout((function(){v(d+1)}),0)):a.el.trigger(OGX.StackedTree.SELECT,e)}(0,l[d].val()[e])}))):(e.off(a.touch.down,".ogx_stacked_tree_level .ogx_stacked_tree_level_prev",g),e.off(a.touch.down,".ogx_stacked_tree_level_list .ogx_dynamic_list_item"))}function g(t){t.preventDefault(),t.stopImmediatePropagation(),v(d-1,!0),c.pop(),a.el.trigger(OGX.StackedTree.BACK)}function _(t){t?$(window).on("resize",p):$(window).off("resize",p)}function p(){i.removeClass(f+"_anim"),n=i.width(),i.css("transform","translateX("+d*Math.round(n/c.length)*-1+"px)")}function m(t,e){i.removeClass(f+"_anim").css("width",100*(t+1)+"%"),n=i.width();var r,c='<div class="'+f+'_level" data-level="'+t+'">';t>0&&(r=(r=o.css(u)).replace(f+"_door",""),c+='<div class="'+f+"_item ogx_stacked_tree_level_prev "+r+'">'+o.html(u)+"</div>"),c+='<div class="'+f+'_level_list"></div></div>',i.append(c);var d=i.children("."+f+'_level[data-level="'+t+'"]').children("."+f+"_level_list");i.children("."+f+"_level").css("flex-basis",Math.floor(100/(t+1)*100)/100+"%"),function(t,e,i){l[t]&&a.remove(l[t].id,"DynamicList");var n=a.create("DynamicList",{el:e,mode:"static",scroll:!0,display:s.display,displays:s.displays,list:i});l[t]=n}(t,d[0],e)}function v(t,e){h(!1),i.addClass(f+"_anim"),void 0!==e&&e?i.on("transitionend",(function(){i.off("transitionend"),i.removeClass(f+"_anim").css("width",100*(t+1)+"%"),a.remove(l[t+1].id,OGX.DynamicList.NAME),l.splice(t+1,1),i.children("."+f+'_level[data-level="'+(t+1)+'"]').remove(),i.children("."+f+"_level").css("flex-basis",Math.floor(100/(t+1)*100)/100+"%"),n=i.width(),u=!1,d=t,h(!0)})):(d=t,h(!0)),n=i.width(),i.css("transform","translateX("+t*Math.round(n/c.length)*-1+"px)")}this.onFocus=function(){h(!0),_(!0)},this.onBlur=function(){h(!1),_(!1)},this.resize=function(){return p(),this},this.destroy=function(){},this.val=function(t){if(t.length){var e=t.slice();return s.list={items:e},!0}return!1},this.scope=function(t){return void 0!==t?(s.scope=t,c=[0],d=0,u=!1,!0):s.scope},function(){s=OGX.Data.merge(s,r,!1,!0);var t=(o=new OGX.Display(s)).val();if(t=function(t){if(t.display&&"object"==typeof t.display&&!t.display.hasOwnProperty("bind")&&(t.display=i(t.display)),t.displays)for(var e in t.displays)t.displays[e]=i(t.displays[e]);function i(t){var e=['{{return typeof($items) !== "undefined" && $items.length > 0}}',{add:"ogx_stacked_tree_door"}];if(t.hasOwnProperty("css"))if("object"==typeof t.css)t.css.hasOwnProperty("add")&&t.css.add?t.css.add+=" ogx_stacked_tree_item":t.css.add="ogx_stacked_tree_item",t.css.hasOwnProperty("conditions")?t.css.conditions.push(e):t.css.conditions=[e];else{var i="";t.css&&(i=t.css),i+=" ogx_stacked_tree_item",t.css={add:i,conditions:[e]}}else t.css={add:"ogx_stacked_tree_item",conditions:[e]};return t}return t}(t),o.val(t),s.display=t.display,s.displays=t.displays,(e=a.el).addClass(f),s.list.length){var i=s.list.slice();s.list={items:i}}}(),e.html('<div class="'+f+'_container" style="width:100%"></div>'),i=e.children("."+f+"_container").first(),s.list.items.length&&m(c[0],s.list.items)},OGX.StackedTree.BACK="StackedTreeBack",OGX.StackedTree.ENTER="StackedTreeEnter",OGX.StackedTree.SELECT="StackedTreeSelect",require("Stage","Uxi","Touch","Placeholder"),OGX.Stage=function(t){construct(this,"Stage");var e=this,i=OGX.Data.merge({id:"stage",anim:null,group_watch:!1},t,!0,!0);function n(t){t?e.el.on(e.touch.down,".ogx_stage_exit",(function(){app.theater.show()})):e.el.off(e.touch.down,".ogx_stage_exit")}this.id=i.id,this.anim=i.anim,this.theater=!1,this.home=null,this.url=null,this.route=null,this.__proto__.onFocus=function(){return i.closeable&&n(!0),this},this.__proto__.onBlur=function(){return i.closeable&&n(!1),this},function(){i.hasOwnProperty("theater")&&(e.theater=i.theater),e.home=i.home;var t=new OGX.Display(i),n="block";i.hasOwnProperty("use")&&i.use||(n="none");var o="";i.closeable&&(o='<div class="ogx_stage_exit"></div>');var a=t.html();i.hasOwnProperty("data")&&(a=OGX.Templater.make(a,i.data)),o+=a,container=e.el,container.html(o),container.addClass("ogx_stage").css("display",n)}()},OGX.Stage.SWAP="swap",OGX.Stage.FLIP="flip",require("Switch","Uxi","Bind","Touch"),OGX.Switch=function(t){construct(this,"Switch");var e,i=this,n=t,o={el:"document",bind:!1,labels:!0,data:[{label:"OFF",value:!1},{label:"ON",value:!0}],value:!1,name:!1,callbacks:{change:null}},a="ogx_switch";function r(t){n.value===n.data[0].value?n.value=n.data[1].value:n.value=n.data[0].value,s(t)}function s(t){t=void 0!==t;var i=e.find("."+a+"_dot").first(),o=e.find("."+a+"_label").first(),r=e.find("."+a+"_label").last();n.value==n.data[0].value?(i.removeClass(a+"_dot_right").addClass(a+"_dot_left"),o.removeClass(a+"_label_off").addClass(a+"_label_on").addClass(a+"_selected"),r.removeClass(a+"_label_on").addClass(a+"_label_off").removeClass(a+"_selected")):(i.removeClass(a+"_dot_left").addClass(a+"_dot_right"),r.removeClass(a+"_label_off").addClass(a+"_label_on").addClass(a+"_selected"),o.removeClass(a+"_label_on").addClass(a+"_label_off").removeClass(a+"_selected")),n.name&&e.find('input[type="hidden"]').attr("value",n.value),t&&e.children("."+a+"_val").trigger("input")}function l(t){t?e.on(i.touch.down,c):e.off(i.touch.down,c)}function c(t){t.preventDefault(),t.stopImmediatePropagation(),r(),d(!1),i.onChange(n.value),e.trigger(OGX.Switch.CHANGE,n.value),e.children("."+a+"_val").trigger("input"),d(!0)}function d(t){t?e.on("change","input[type=hidden]",u):e.off("change","input[type=hidden]",u)}function u(t){t.preventDefault(),t.stopImmediatePropagation(),n.value=OGX.Data.stringToVal(t.target.value),s()}this.construct=function(){n.name&&d(!0)},this.onFocus=function(){return l(!0),e.removeClass(a+"_disabled"),this},this.onBlur=function(){return l(!1),e.addClass(a+"_disabled"),this},this.destroy=function(){n.name&&d(!1)},this.bindRender=function(t,e){},this.val=function(t,i){return void 0===i&&(i=!0),void 0!==t&&n.value!==t&&(r(),i&&e.children("."+a+"_val").first().trigger("input")),n.value},this.onChange=function(){},this.toggle=function(t){return r(t=void 0===t),this},function(){var t;void 0===n&&(n={}),n.hasOwnProperty("data")&&!n.hasOwnProperty("value")&&(t=n.data[0].value),OGX.Data.merge(n,o),void 0!==t&&(n.value=t),(e=i.el).addClass(a+"_disabled");var r=e.parent();r[0].hasAttribute("data-value")&&(n.value=OGX.Data.stringToVal(r.data("value")),r.removeAttr("data-value"))}(),function(){var t="";n.labels&&(t+='<span class="'+a+'_label_on ogx_switch_label">'+n.data[0].label+"</span>");var i="";n.value===n.data[1].value&&(i=a+"_dot_right"),t+='<div class="'+a+'_track"><div class="'+a+'_track_bg"></div><div class="'+a+"_dot "+i+'"></div></div>',n.labels&&(t+='<span class="'+a+'_label_off ogx_switch_label">'+n.data[1].label+"</span>"),n.name&&(t+='<input class="'+a+'_val" type="hidden" name="'+n.name+'" value="'+n.value+'"></div>'),e.html(t),e.addClass(a)}(),setTimeout(s,0)},OGX.Switch.CHANGE="SwitchChange",OGX.Switch.BIND=OGX.Switch.CHANGE,require("Tabs","Uxi","Touch"),OGX.Tabs=function(t){construct(this,"Tabs");var e,i=this,n=t,o={editable:!1,detach:!1,detach_min:-4,add:!0,remove:!0,reorder:!0,icons:!1,index:0,list:new OGX.List,display:{html:"",css:""},callbacks:{select:null,close:null,add:null,remove:null}},a=!1,r=0,s=!1,l=!1,c=!1,d=!1,u=!1,f={x:0,y:0},h="ogx_tabs";function g(){r>0?r--:r=0,i.index(r)}function _(){for(var t,i,o='<div class="'+h+'_container">',s=0;s<n.list.length;s++)i=n.display.css(n.list[s]),s===r&&(i+=" ogx_tabs_tab_active"),t=!1,"string"==typeof n.list[s]?t=n.list[s]:(n.list[s].hasOwnProperty("label")&&(t=n.list[s].label),n.list[s].hasOwnProperty("enabled")&&n.list[s].enabled&&(i+=" "+h+"_tab_disabled")),o+='<div class="'+h+"_tab "+i+'">',n.icons&&(o+='<span class="'+h+'_tab_icon" style="background-image:url('+n.icon_path+"/"+n.list[s].icon+')"></span>'),t&&(o+='<span class="'+h+'_tab_label">'+t+"</span>"),n.remove&&(o+='<span class="'+h+'_tab_close"></span>'),o+="</div>",i="";o+="</div>",n.add&&(o+='<div class="'+h+'_tab_add"></div>',e.addClass(h+"_editable")),e.html(o),a=e.children("."+h+"_container").children("."+h+"_tab:eq("+r+")")}function p(t){s||(u=!1,l=$(t),r=l.index(),c={from:r},e.children("."+h+"_container").children("."+h+"_tab_active").first().removeClass(h+"_tab_active"),f.x=l.position().left,f.y=l.position().top,(s={el:$(t).clone(),x:f.x,y:l.position().top}).w=l.width(),s.el.width(s.w),l.addClass(h+"_tab_active").addClass(h+"_frozen"),a=l,s.el.addClass(h+"_tab_active").addClass(h+"_float").css("transform","translate3d("+f.x+"px, "+s.y+"px, 0px)"),e.children("."+h+"_container").prepend(s.el),e.trigger(OGX.Tabs.SELECT,n.list[r]),d=setInterval(v,5))}function m(t){if(s)if(u=t,Math.abs(u.distX)>Math.abs(u.distY)){var o=s.x+u.distX;s.el.css("transform","translate3d("+o+"px, "+s.y+"px, 0px)")}else{var a=s.y+u.distY;s.el.css("transform","translate3d("+s.x+"px, "+a+"px, 0px)");var r=s.el.offset();if(u.distY<n.detach_min){c.to=l.index(),y();var d=n.list[c.from],f={};"string"==typeof d?f.label=d:f=OGX.Data.clone(d),OGX.Data.merge(f,{index:c.to,x:r.left,y:r.top}),i.removeAt(c.to),i.onRemove(f),e.trigger(OGX.Tabs.REMOVE,f)}}}function v(){var t,i,n;s&&u&&(idx=l.index(),Math.abs(u.distX)>Math.abs(u.distY)&&e.children("."+h+"_container").children("."+h+"_tab").each((function(e,o){(t=$(o)).hasClass(h+"_tab_active")||(i=t.position(),n=t.width(),idx!==e&&(s.x+u.distX>i.left+n/2&&s.x+u.distX<i.left+n?(l.detach(),t.after(l)):s.x+u.distX>i.left&&s.x+u.distX<i.left+n/2&&(l.detach(),t.before(l))))})))}function y(){if(s&&(clearInterval(d),d=!1,u=!1,s.el.remove(),s=!1,l.removeClass(h+"_frozen"),c.to=l.index(),c.to!==c.from)){var t=n.list.splice(c.from,1);n.list.insert(t[0],c.to),r=c.to,i.el.trigger(OGX.Tabs.REORDER,c)}}function x(t){t?(e.on("click","."+h+"_tab",(function(){var t=$(this);t.hasClass(h+"_tab_disabled")||(a&&a.removeClass(h+"_tab_active"),t.addClass(h+"_tab_active"),r!==(a=t).index()&&(r=a.index(),i.onSelect(n.list[r]),e.trigger(OGX.Tabs.SELECT,n.list[r])))})),n.add&&e.on("click",".ogx_tabs_tab_add",(function(){i.addTab({label:"New tab"}),e.trigger(OGX.Tabs.ADD)})),n.remove&&e.on("click","."+h+"_tab_close",(function(t){t.preventDefault(),t.stopImmediatePropagation(),i.onClose(n.list[r]);var o=OGX.Data.clone(n.list[r]);return o.index=r,e.trigger(OGX.Tabs.REMOVE,o),i.removeCurrent(),!1}))):(e.off("click","."+h+"_tab"),n.add&&e.off("click","."+h+"_tab_add"),n.remove&&e.off("click","."+h+"_tab_close"))}this.onFocus=function(){return x(!0),n.reorder&&this.touch.get("tabs_hold").enable(),this},this.onBlur=function(){return x(!1),n.reorder&&this.touch.get("tabs_hold").disable(),this},this.empty=function(){return this.clear(),r=0,a=null,n.list=new OGX.List,e.empty(),this},this.destroy=function(){this.touch.wipe()},this.val=function(t){if(void 0===t)return a;var e;"string"==typeof t?e=n.list.indexOf(t):t.hasOwnProperty("label")&&(e=(e=n.list.findIndex("label",t.label)).index),this.index(e)},this.set=function(t){return void 0===t?n.list:(t.hasOwnProperty("insert")||(t=new OGX.List(t)),n.list=t,setTimeout(_,0),this)},this.onSelect=function(){},this.onClose=function(){},this.onAdd=function(){},this.onRemove=function(){},this.add=function(t){return n.icons&&(t.hasOwnProperty("icon")||(t.icon=n.icon_default)),n.list.push(t),r=n.list.length-1,setTimeout((function(){var t,i,n;_(),t=e.width(),i=e.children("."+h+"_container").first(),(n=i.width())>t&&i.css("transform","translateX("+-1*(n-t)+"px)")}),0),this},this.addAt=function(t,e){return n.icons&&(t.hasOwnProperty("icon")||(t.icon=n.icon_default)),n.list.insert(t,e),r=e,setTimeout(_,0),this},this.remove=function(t,i){void 0===i&&(i=t,t="label");var o=n.list.findIndex(t,i);n.list.findDelete(t,i,1)&&(e.children("."+h+"_container").first().children("."+h+"_tab:eq("+o.index+")").remove(),g())},this.removeCurrent=function(){return a&&this.removeAt(r),this},this.removeAt=function(t){return n.list.delete(t)&&(e.children("."+h+"_container").first().children("."+h+"_tab:eq("+t+")").remove(),g()),this},this.enableTab=function(t){return e.children("."+h+"_container").first().children("."+h+"_tab:eq("+t+")").removeClass(h+"_tab_disabled"),this},this.disableTab=function(t){return e.children("."+h+"_container").first().children("."+h+"_tab:eq("+t+")").addClass(h+"_tab_disabled"),this},this.index=function(t){return void 0!==t?(a&&(a.removeClass(h+"_tab_active"),a=null),(a=e.children("."+h+"_container").first().children("."+h+"_tab:eq("+t+")")).addClass(h+"_tab_active"),r=t,!0):a?r:-1},this.select=function(t){a&&a.removeClass(h+"_tab_active");var e=n.list.findIndex("label",t);return this.index(e.index),this},n||(n={}),OGX.Data.merge(n,o),n.list.hasOwnProperty("insert")||(n.list=new OGX.List(n.list)),n.display.hasOwnProperty("_NAME_")||(n.display=new OGX.Display(n.display)),n.callbacks.select||(n.callbacks.select=i.onSelect),n.callbacks.close||(n.callbacks.close=i.onClose),n.callbacks.add||(n.callbacks.add=i.onAdd),n.callbacks.remove||(n.callbacks.remove=i.onRemove),(e=i.el).addClass(h),n.editable&&e.addClass(h+"_editable"),r=n.index,setTimeout(_,0),n.reorder&&i.touch.add("Hold",{id:"tabs_hold",cb_hold:p,cb_move:m,cb_up:y,state:"manual",time:1e3,target:".ogx_tabs_tab",capture:!1})},OGX.Tabs.SELECT="TabsSelect",OGX.Tabs.REORDER="TabsReorder",OGX.Tabs.ADD="TabsAdded",OGX.Tabs.REMOVE="TabsRemoved",require("Tags","Uxi","Touch"),OGX.Tags=function(__config){construct(this,"Tags");var that=this,config_default={remove:!0,add:!0,name:!1,tags:[],current_tags:[],tags_ascii:[],mode:OGX.Tags.MODE_STRING,keycode:13,placeholder:"keywords",restrict:!1,strict:!1,required:!1,max:0,display_max:0,display_more:!1,click_more:!1,hide_input_on_disable:!0,more_word:"other",callbacks:{select:null,add:null,remove:null}},container,input,sliced={org:[],rem:[]},config=OGX.Data.merge(__config,config_default,!1);function updateHidden(t){var e;e=1===config.max&&config.current_tags.length?config.current_tags[0]:JSON.stringify(config.current_tags),container.find("input[type=hidden]").val(e),t&&container.find("input[type=hidden]").trigger("change")}function addTag(t){var e=!1;switch(config.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:-1===config.current_tags.indexOf(t)&&(config.current_tags.push(t),e=!0);break;case OGX.Tags.MODE_OBJECT:var i=config.current_tags.find("label",t,1);i||((i=config.tags.find("label",t,1))?config.current_tags.push(i):config.current_tags.push({label:t}),e=!0)}if(e){var n="";!0===config.remove&&(n='<span class="ogx_tags_remove"></span>');var o='<span class="ogx_tags_tag"><span>'+t+"</span>"+n+"</span>";container.find(".ogx_tags_tags").first().append(o),listenHidden(!1),updateHidden(!0),listenHidden(!0),that.onAdd(t),container.trigger(OGX.Tags.TAG_ADDED,t),container.trigger(OGX.Tags.CHANGE,[config.current_tags])}container.find(".ogx_tags_input").trigger("focus")}function removeTag(t){var e=!1;switch(config.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:var i=config.current_tags.indexOf(t);i>-1&&(e=config.current_tags.splice(i,1));break;case OGX.Tags.MODE_OBJECT:e=config.current_tags.findDelete("label",t)}return e&&container.find(".ogx_tags_tags").first().find(".ogx_tags_tag").each((function(e,i){if($(i).find("span").first().text()===t)return $(i).remove(),listenHidden(!1),updateHidden(!0),void listenHidden(!0)})),e}function displayTags(t,e){if(t){container.find(".ogx_tags_container").length>0&&(displayTags(!1),listenTagAdd(!1));for(var i='<div class="ogx_tags_container">',n=!1,o=0;o<e.length;o++)if("object"==typeof e[o]&&e[o].hasOwnProperty("__m__"))n=e[o].__m__;else switch(config.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:i+='<span class="ogx_tags_tag ogx_tags_container_tag">'+e[o]+"</span>";break;case OGX.Tags.MODE_OBJECT:i+='<span class="ogx_tags_tag ogx_tags_container_tag">'+e[o].label+"</span>"}n&&(i+='<span class="ogx_tags_tag ogx_tags_more">+'+n+" "+config.more_word+"</span>"),i+="</div>",container.append(i),listenTagAdd(!0)}else container.find(".ogx_tags_container").remove(),listenTagAdd(!1)}function renderTags(t){for(var e="",i="",n=0;n<t.length;n++)switch(i=!0===config.remove?'<span class="ogx_tags_remove"></span>':"",config.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:e+='<span class="ogx_tags_tag"><span>'+t[n]+"</span>"+i+"</span>";break;case OGX.Tags.MODE_OBJECT:e+='<span class="ogx_tags_tag"><span>'+t[n].label+"</span>"+i+"</span>"}return config.current_tags=t,container.find(".ogx_tags_tags").first().html(e),updateHidden(!1),!0}function trimTags(t){return t=OGX.Data.clone(t),sliced={org:OGX.Data.clone(t),rem:[]},Array.isArray(t)&&config.display_max&&t.length>config.display_max&&(sliced.rem=t.slice(config.display_max),t=t.slice(0,config.display_max)),config.display_more&&sliced.rem.length&&t.push({__m__:sliced.rem.length}),new OGX.List(t)}function findTags(t){for(var e,i=[],n=0;n<config.tags.length;n++)if(e=!1,0===config.tags[n].toLowerCase().indexOf(t.toLowerCase())&&-1===config.current_tags.indexOf(config.tags[n])){if(config.display_max){if(!(i.length+1<=config.display_max))return i;e=!0}else e=!0;e&&i.push(config.tags[n])}return trimTags(i)}function findTagsObj(t){var e=new RegExp(t,"gi"),i=config.tags.find("label",e);if(i&&i.length)for(var n=0;n<config.current_tags.length;n++)i.findDelete("label",config.current_tags[n].label);return i&&i.length?trimTags(i):[]}function findTagsAscii(t){var e,i=stringToAscii(t.substr(0,3)),n=[];if(config.tags_ascii[i])for(var o=0;o<config.tags_ascii[i].length;o++)if(e=!1,-1!==config.tags_ascii[i][o].toLowerCase().indexOf(t.toLowerCase())&&-1===config.current_tags.indexOf(config.tags[o])){if(config.display_max){if(!(n.length+1<=config.display_max))return n;e=!0}else e=!0;e&&n.push(config.tags_ascii[i][o])}return n&&n.length?trimTags(n):[]}function stringToAscii(t){for(var e="",i=0;i<t.length;i++)e+=t.toLowerCase().charCodeAt(i).toString();return e}function listenInput(t){t?input.on("keyup",(function(t){var e=$(this).val();if(e.length>=3)if(!config.strict&&t.which===config.keycode&&config.add)addTag(e),input.val(""),displayTags(!1);else{var i;switch(config.mode){case OGX.Tags.MODE_STRING:i=findTags(e);break;case OGX.Tags.MODE_OBJECT:i=findTagsObj(e);break;case OGX.Tags.MODE_ASCII:i=findTagsAscii(e)}i.length>0?displayTags(!0,i):displayTags(!1)}else displayTags(!1)})):input.off("keyup")}function listenSelect(t){t?container.on(that.touch.down,".ogx_tags_tag",onSelect):container.off(that.touch.down,".ogx_tags_tag",onSelect)}function onSelect(t){var e=$(this).text();switch(config.mode){case OGX.Tags.MODE_OBJECT:e=config.current_tags.get({label:{eq:e}},null,1)}config.callbacks.select(e),that.el.trigger(OGX.Tags.SELECT,e)}function listenMore(t){t?container.on(that.touch.down,".ogx_tags_more",onMore):container.off(that.touch.down,".ogx_tags_more",onMore)}function onMore(t){t.preventDefault(),t.stopImmediatePropagation(),sliced.rem.length&&($(this).remove(),displayTags(!0,sliced.org))}function listenTagAdd(t){t?container.on(that.touch.down,".ogx_tags_container_tag",onAdd):container.off(that.touch.down,".ogx_tags_container_tag",onAdd)}function onAdd(t){addTag($(this).text()),input.val(""),displayTags(!1),config.max&&config.current_tags.length===config.max&&(listenInput(!1),input.css("display","none"))}function listenTagRemove(t){t?container.on(that.touch.down,".ogx_tags_remove",onRemove):container.off(that.touch.down,".ogx_tags_remove",onRemove)}function onRemove(t){t.preventDefault(),t.stopImmediatePropagation();var e=removeTag($(this).parent("span").first().find("span").first().text());that.onRemove(e),container.trigger(OGX.Tags.TAG_REMOVED,e),container.trigger(OGX.Tags.CHANGE,[config.current_tags]),config.max&&config.current_tags.length<config.max&&(listenInput(!0),input.css("display","block")),input.trigger("focus")}function listenHidden(t){t?container.on("change","input[type=hidden]",onHiddenChange):container.off("change","input[type=hidden]",onHiddenChange)}function onHiddenChange(t){t.preventDefault(),t.stopImmediatePropagation(),t.target.value.length?config.current_tags=JSON.parse(t.target.value):config.current_tags=[],renderTags(config.current_tags)}function initInput(){var t='<span class="ogx_tags_tags"></span>';if(config.add&&(t+='<input type="text" class="ogx_tags_input" placeholder="'+config.placeholder+'">'),config.name){var e="";config.required&&(e="required"),t+='<input type="hidden" name="'+config.name+'" '+e+">"}if(container.html(t),input=container.find(".ogx_tags_input").first(),config.restrict){var i={multiline:!1,max:30};"object"==typeof config.restrict&&(i=config.restrict),i.el=input[0],OGX.Form.restrictField(i)}}function initDefaults(){config.tags.hasOwnProperty("insert")||(config.tags=new OGX.List(config.tags)),config.current_tags.hasOwnProperty("insert")||(config.current_tags=new OGX.List(config.current_tags)),config.restrict&&("string"==typeof config.restrict.allowed&&(config.restrict.allowed=eval(config.restrict.allowed)),"string"==typeof config.restrict.forbidden&&(config.restrict.forbidden=eval(config.restrict.forbidden))),config.callbacks.select||(config.callbacks.select=that.onSelect),config.callbacks.add||(config.callbacks.add=that.onAdd),config.callbacks.remove||(config.callbacks.remove=that.onRemove),container=that.el,container.addClass("ogx_tags")}function init(){initDefaults(),initInput(),config.current_tags.length>0&&renderTags(config.current_tags)}this.onFocus=function(){if(config.remove&&(listenInput(!0),listenTagAdd(!0),listenTagRemove(!0)),config.display_more&&config.click_more&&listenMore(!0),config.name&&listenHidden(!0),listenSelect(!0),config.add){var t=container.find(".ogx_tags_input").first();t.prop("placeholder",config.placeholder),t.prop("disabled",!1),config.hide_input_on_disable&&t.removeClass("ogx_tags_hidden")}return this},this.onBlur=function(){if(config.remove&&(listenInput(!1),listenTagAdd(!1),listenTagRemove(!1)),config.display_more&&config.click_more&&listenMore(!1),config.name&&listenHidden(!1),listenSelect(!1),config.add){var t=container.find(".ogx_tags_input").first();t.prop("placeholder",""),t.prop("disabled",!0),config.hide_input_on_disable&&t.addClass("ogx_tags_hidden")}return this},this.destroy=function(){config.restrict&&OGX.Form.unrestrictField(container.find(".ogx_tags_input").first()[0])},this.tags=function(t){return void 0!==t?(t.hasOwnProperty("insert")||(t=new OGX.List(t)),config.tags=t,!0):config.tags},this.val=function(t,e){if(displayTags(!1),listenTagAdd(!1),void 0!==t){if(void 0!==e){var i=t,n=config.tags.find(i,e,1);n&&(t=[n])}return t.hasOwnProperty("insert")||(t=new OGX.List(t)),config.current_tags=t,config.max&&config.current_tags.length>=config.max&&container.find(".ogx_tags_input").first().css("display","none"),renderTags(config.current_tags)}return config.current_tags},this.wipe=function(){return config.max&&config.current_tags.length===config.max&&(container.find(".ogx_tags_input").first().css("display","block"),listenInput(!0)),config.current_tags=new OGX.List,container.find(".ogx_tags_tags").first().empty(),container.find("input[type=hidden]").first().val(""),this},this.render=function(t){return renderTags(trimTags(t))},this.onSelect=function(){},this.onAdd=function(){},this.onRemove=function(){},this.add=function(t){return addTag(t)},this.remove=function(t){return removeTag(t)},init()},OGX.Tags.prototype.tagDataset=function(t,e,i){"use strict";void 0===i&&(i=!1);for(var n,o=[],a=0;a<t.length;a++)for(var r=0;r<e.length;r++)if(t[a].hasOwnProperty(e[r])){n=t[a][e[r]].split(" ");for(var s=0;s<n.length;s++)i&&-1!==i.indexOf(n[s])||o.includes(n[s])||o.push(n[s])}return o},OGX.Tags.prototype.tagDatatree=function(t,e){"use strict";!function(t,e){var i=[];if(function t(n){if(n.hasOwnProperty("items"))for(var o=0;o<n.items.length;o++){for(var a in n.items[o])e.indexOf(a)>-1&&(i.includes(n.items[o][a])||i.push(n.items[o][a]));return t(n.items[o]),!0}}(t));}(t,e)},OGX.Tags.CHANGE="TagsChange",OGX.Tags.SELECT="TagsSelect",OGX.Tags.TAG_ADDED="TagsTagAdded",OGX.Tags.TAG_REMOVED="TagsTagRemoved",OGX.Tags.MODE_STRING="string",OGX.Tags.MODE_OBJECT="object",OGX.Tags.MODE_ASCII="ascii",OGX.Tags.BIND=OGX.Tags.CHANGE,require("Template"),OGX.Template=function(t){construct(this,"Template");var e=new OGX.Display(t),i=e.html(t.data),n=e.css(t.data);i&&this.el.html(i),n&&this.el.addClass(n)},OGX.Templater=function(){"use strict";var t;this.jmake=function(t,e){for(var i,n,o=JSON.stringify(t);m=/({{(\$|#)[a-z0-9_\.]*}})|("{{(\$)}}")/gi.exec(o);)m[0].match(/"{{(\$)}}"/)?(i="<-"+(i=JSON.stringify(e)).substring(1).slice(0,-1)+"->",o=(o=(o=o.replace(m[0],i)).replace(/<\-/,"{")).replace(/\->/,"}")):("object"==typeof(n=OGX.OSE.exec(m[0],e))&&(n=JSON.stringify(n),m[0]='"'+m[0]+'"'),o=o.replace(m[0],n));return JSON.parse(o)},this.make=function(e,i,n,o,a){var r,s;for(t={},void 0===a&&(a={}),OGX.Data.merge(t,a);r=/{{[^{]+(({[^{]+)+)?}}/gi.exec(e);)void 0===(s=OGX.OSE.exec(r[0],i,n,o,t))&&(s=""),e=e.replace(r[0],s);return e},this.amake=function(t,e,i,n,o){for(var a="",r=0;r<e.length;r++)a+=this.make(t,e[r],i,n,o);return a},this.get=function(t){var e=OGX.Cache.read("html",t);return e||!1}},OGX.Templater=new OGX.Templater,require("Theater","Uxi","Touch"),OGX.Theater=function(t){construct(this,"Theater");var e,i,n,o=this,a=t,r={anim:!1,display:!0,icon_size:50,timeout:30},s={template:!1,html:'<span class="ogx_theater_stage_icon" style="background-image:url(\'{{$icon}}\')"></span><span class="ogx_theater_stage_label">{{$label}}</span>'},l='<div class="list"></div>',c=!0;function d(t){t?($(document).on("backbutton",u),$(window).on("popstate",u),list.el.on(OGX.DynamicList.SELECT,(function(t,e){!function(t){o.el.trigger(OGX.Theater.HIDE);var e=app.find("Stage",t);e.wake(),e.resizeNodes();var n,r=list.el.find('.ogx_theater_stage[data-ogx-id="'+e.id+'"]').position();o.observe(!0,{childList:!0},(function(){o.observe(!1),(n=i.children(".ogx_theater_trans")).on("transitionend",(function(){n.off("transitionend"),o.hide(),n.remove(),e.url?(app.showStage(e.id,!1),app.router.addToHist(e.url)):app.goto(e.id+"/"+e.home)})),n.removeClass("ogx_theater_trans_hide"),setTimeout((function(){n.addClass("ogx_theater_trans_grow").css({opacity:1,width:"100%",height:"100%",transform:"translate3d(0px, 0px, 0px)"})}),a.timeout)}),null,i),i.append('<div class="ogx_theater_trans ogx_theater_trans_hide" style="width:'+a.icon_size+"px; height:"+a.icon_size+"px; transform:translate3d("+r.left+"px,"+r.top+'px, 0px);" data-ogx-id="'+e.id+'"><div class="icon" style="background-image:url(\'/img/'+e.theater.icon+"')\"></div></div>")}(e.id)}))):($(document).off("backbutton",u),$(window).off("popstate",u),list.el.off(OGX.DynamicList.SELECT))}function u(){o.hide()}function f(){e.prepend(l);for(var t,i=[],r=0;r<n.length;r++)t={id:n[r].id,name:"",icon:""},"object"==typeof n[r].theater&&n[r].theater.hasOwnProperty("icon")&&(t.icon="./img/"+n[r].theater.icon,t.label=n[r].theater.label),i.push(t);$(".ogx_theater > .list").on(OGX.DynamicList.RENDER,(function(t){$(".ogx_theater > .list").off(OGX.DynamicList.RENDER),setTimeout((function(){l=$(".ogx_theater").detach()}),0)})),list=o.create("DynamicList",{el:".ogx_theater > .list",display:{html:a.display.html,css:"ogx_theater_stage"},key:"id",scroll:!0,mode:"hit",list:i,trigger:!0})}function h(){var t=app.gather(OGX.Stage.NAME);n=[];for(var e=0;e<t.length;e++)t[e].theater&&n.push(t[e])}this.update=function(){h()},this.show=function(){return c&&(i.prepend(l),function(){o.el.trigger(OGX.Theater.SHOW);var t,n=app.getStage();o.observe(!0,{childList:!0},(function(e){o.observe(!1),n.sleep(),t=i.children(".ogx_theater_trans");var r=list.el.find('.ogx_theater_stage[data-ogx-id="'+n.id+'"]').position();t.removeClass("ogx_theater_trans_hide"),setTimeout((function(){t.on("transitionend",(function(){t.off("transitionend"),setTimeout((function(){t.remove()}),0)})),t.addClass("ogx_theater_trans_show").addClass("ogx_theater_trans_shrink").css({opacity:0,width:a.icon_size+"px",height:a.icon_size+"px",transform:"translate3d("+r.left+"px, "+r.top+"px, 0px)"})}),a.timeout)}),null,i),i.append('<div class="ogx_theater_trans ogx_theater_trans_hide" data-ogx-id="'+n.id+'"><div class="icon" style="background-image:url(\'/img/'+n.theater.icon+"')\"></div></div>"),e.css("visibility","visible")}(),this.focusNodes(),d(!0),c=!1),this},this.hide=function(){return c||(this.blurNodes(),l=e.detach(),d(!1),c=!0),this},this.tile=function(t,e){void 0===e&&(e="x")},OGX.Data.merge(a,r),a.display&&("object"!=typeof a.display&&(a.display={}),OGX.Data.merge(a.display,s),a.display.template&&(a.display.html=OGX.Templater.get(a.display.template))),(e=o.el).addClass("ogx_theater").css("visibility","hidden"),i=$("body"),h(),$(document).on(OGX.App.READY,f)},OGX.Theater.ZOOM="TheaterZoom",OGX.Theater.SHOW="TheaterShow",OGX.Theater.HIDE="TheaterHide",OGX.Touch=function(t){"use strict";var e=this,i=0;this.touch=!1,this.touch||this.initTouch(t.chromeos);var n=new OGX.List;this.touch.add=function(t,o){var a=new OGX.Touches[t](e),r=a.set(o);return!r.hasOwnProperty("id")&&(r.id=i++),a.id=r.id,"auto"===r.state&&!e.blured&&e.enabled&&a.enable(),n.insert(a),a},this.touch.remove=function(t){"object"==typeof t&&(t=t.id),n.findDelete("id",__id,1).disable()},this.touch.get=function(t){return n.get({id:{eq:t}},null,1)},this.touch.wipe=function(){for(var t=0;t<n.length;t++)n[t].disable();n.clear()},this.touch.isRightClick=function(t){var i=e.event(t),n=!1;return i.which?n=3===i.which:i.button&&(n=2===i.button),n},this.touch.enable=function(){for(var t=n.get({state:{eq:"manual"}}),e=0;e<t.length;e++)t[e].enable()},this.touch.disable=function(){for(var t=n.get({state:{eq:"manual"}}),e=0;e<t.length;e++)t[e].disable()}},OGX.Touch.prototype.initTouch=function(t){void 0===t&&(t=!1),this.touch={hold:{}},this.touch.click="click",this.touch.down="mousedown",this.touch.up="mouseup",this.touch.move="mousemove",void 0===window.ontouchstart||t||(this.touch.down="touchstart",this.touch.up="touchend",this.touch.move="touchmove")},OGX.Touch.prototype.touchable=function(){return void 0!==window.ontouchstart},OGX.Touch.prototype.event=function(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t},OGX.Touches={},OGX.Touches.Swipe=function(t){"use strict";var e,i=t,n={speed:10,x:!0,y:!1,min_x:100,min_y:100,cb_down:!1,cb_swipe:!1,cb_up:!1,target:!1,capture:!1,state:"auto"},o=!1,a={x:0,y:0},r={x:0,y:0},s=0,l=0,c=0,d=0,u=0,f=!1,h=!1,g=!1,_=$("body");function p(t){g||(g=!0,t=i.event(t),a.x=t.pageX,a.y=t.pageY,c=d=0,s=l=u=0,m(!0),o.cb_down&&o.cb_down(a))}function m(t){t?(v(!0),f=setInterval(b,o.speed)):(v(!1),f&&(clearInterval(f),f=!1))}function v(t){t?$(e).on(i.touch.move,O):$(e).off(i.touch.move,O)}function y(t){t?(_.on(i.touch.up,x),_.on(i.touch.down,e,p)):(_.off(i.touch.up,x),_.off(i.touch.down,e,p))}function x(t,e){h&&(void 0===e&&(e=!1),m(!1),g&&o.cb_up&&o.cb_up({pt0:a,pt1:r,distX:c,distY:d,dist:u,dirX:s,dirY:l,swipe:e}),g=!1)}function O(t){o.capture&&(t.preventDefault(),t.stopImmediatePropagation()),t=i.event(t),r.x=t.pageX,r.y=t.pageY,s=r.x>a.x?1:-1,l=r.y>a.y?1:-1,c=Math.abs(r.x-a.x),d=Math.abs(r.y-a.y),u=Math.sqrt(Math.abs(Math.pow(r.x-a.x,2)-Math.pow(r.y-a.y,2)))}function b(){o.cb_swipe&&(o.x&&o.min_x&&c>=o.min_x||o.y&&o.min_y&&d>=o.min_y?x(0,!0):o.cb_swipe({pt0:a,pt1:r,dirX:s,dirY:l,distX:c,distY:d,dist:u}))}this.set=function(t){return o=t,OGX.Data.merge(o,n),e=i.selector,this.state=o.state,"auto"===o.state&&(i.enable,i.disable),o.target&&(e=o.target),o},this.enable=function(){!h&&o&&(h=!0,y(!0))},this.disable=function(){h&&(h=!1,y(!1),m(!1))}},OGX.Touches.Hold=function(t){"use strict";var e={cb_hold:!1,cb_up:!1,cb_move:!1,time:1e3,el:this.el,target:!1,capture:!1,state:"auto"},i=!1,n=!1,o=!1,a=!1,r=!1,s=!1,l=t,c={x:0,y:0},d={x:0,y:0},u={x:0,y:0},f={x:0,y:0},h=null,g=$("body");function _(t){var e=[];e=i.target?[l.touch.down,i.target,p]:[l.touch.down,p],t?l.el.on.apply(l.el,e):l.el.off.apply(l.el,e)}function p(t){t=l.event(t),h=t.currentTarget,a||(a=!0,n=(new Date).getTime(),f.x=c.x=t.pageX,f.y=c.y=t.pageY,o=setInterval(v,1))}function m(t){i.capture&&(t.preventDefault(),t.stopImmediatePropagation()),t=l.event(t),d.x=t.pageX,d.y=t.pageY,d.x<f.x?u.x=-1:u.x=1,d.y<f.y?u.y=-1:u.y=1,0===d.x&&(u.x=0),0===d.y&&(u.y=0),f.x=d.x,f.y=d.y,r?i.cb_move&&i.cb_move({x:d.x,y:d.y,distX:d.x-c.x,distY:d.y-c.y,dirX:u.x,dirY:u.y}):(Math.abs(c.x-d.x)>5||Math.abs(c.y-d.y)>5)&&(clearInterval(o),o=!1)}function v(){a&&(new Date).getTime()-n>i.time&&(r||(r=!0,g.on(l.touch.move,m),i.cb_hold?i.cb_hold(h,c):l.el.trigger(OGX.Touch.HOLD_START)))}function y(e){e=t.event(e),a=!1,clearInterval(o),o=!1,r&&(r=!1,g.off(l.touch.move,m),i.cb_up?i.cb_up({x:e.pageX,y:e.pageY}):l.el.trigger(OGX.Touch.HOLD_END,{x:e.pageX,y:e.pageY}))}this.set=function(t){return i=t,OGX.Data.merge(i,e),l.selector,this.state=i.state,"auto"===i.state&&(l.enable,l.disable),i.target&&i.target,i},this.enable=function(){!s&&i&&(s=!0,_(!0),g.on(l.touch.up,y))},this.disable=function(){s&&(s=!1,(a||o)&&(r=!1,a=!1,clearInterval(o),o=!1),_(!1),g.off(l.touch.up,y),g.off(l.touch.move,m))}},OGX.Touches.Drag=function(t){"use strict";var e,i,n,o,a,r,s=!1,l={min:10,x:!0,y:!0,limit_x:null,limit_y:null,target:!1,cb_down:!1,cb_drag:!1,cb_up:!1,border:10,capture:!1,state:"auto"},c=t,d=!1,u=!1,f=$("body");function h(t){var e=[];e=s.target?[c.touch.down,s.target,g]:[c.touch.down,g],t?c.el.on.apply(c.el,e):c.el.off.apply(c.el,e)}function g(l){s.capture&&(l.preventDefault(),l.stopImmediatePropagation()),l=t.event(l),n=l.pageX,o=l.pageY;var d=c.el.position();e=d.left,i=d.top;var u=c.el.offset(),f=n-u.left,h=o-u.top;if(s.border){if(f<s.border||f>c.el.width()-s.border)return;if(h<s.border||h>c.el.height()-s.border)return}a=0,r=0,_(!0),p(!0),s.cb_down&&s.cb_down()}function _(t){t?d||(d=setInterval(y,10)):d&&(clearInterval(d),d=null)}function p(t){t?(f.on(c.touch.move,v),f.on(c.touch.up,m)):(f.off(c.touch.move,v),f.off(c.touch.up,m))}function m(e){_(!1),p(!1),e=t.event(e),s.x&&(a=e.pageX-n),s.y&&(r=e.pageY-o),s.cb_up&&s.cb_up({distX:a,distY:r})}function v(e){s.capture&&(e.preventDefault(),e.stopImmediatePropagation()),e=t.event(e);var i,l=!1;s.x&&(i=e.pageX-n,null!==s.limit_x?i>=s.limit_x.min&&i<=s.limit_x.max&&(s.min?Math.abs(i)>s.min&&(a=i,l=!0):(a=i,l=!0)):s.min?Math.abs(i)>s.min&&(a=i,l=!0):a=i),s.y&&(i=e.pageY-o,null!==s.limit_y?i>=s.limit_y.min&&i<=s.limit_y.max&&(s.min?Math.abs(i)>s.min&&(r=i,l=!0):(r=i,l=!0)):r=i),l&&s.cb_drag&&s.cb_drag({distX:a,distY:r,x:e.pageX,y:e.pageY})}function y(){c.el.css({transform:"translate3d("+(e+a)+"px, "+(i+r)+"px, 0px)"})}this.dragable=!0,this.set=function(t){return s=t,OGX.Data.merge(s,l),"auto"===s.state&&(c.enable,c.disable,this.enable()),this.state=s.state,s},this.enable=function(){!u&&s&&(u=!0,h(!0))},this.disable=function(){u&&(u=!1,h(!1),p(!1),_(!1))}},OGX.Touches.Move=function(t){"use strict";var e,i,n,o,a,r,s,l,c=!1,d={min:0,x:!0,y:!0,limit_x:null,limit_y:null,target:null,cb_down:null,cb_move:null,cb_up:null,cb_click:null,capture:!1,state:"auto"},u=t,f=!1,h=$("body");function g(t){var e=[];e=c.target?[u.touch.down,c.target,_]:[u.touch.down,_],t?u.el.on.apply(u.el,e):u.el.off.apply(u.el,e)}function _(d){c.capture&&(d.preventDefault(),d.stopImmediatePropagation()),d=t.event(d),e=d.pageX,i=d.pageY,n=0,o=0,a=0,r=0,s=0,l=0,p(!0),c.cb_down&&c.cb_down({x:e,y:i})}function p(t){t?(h.on(u.touch.move,v),h.on(u.touch.up,m)):(h.off(u.touch.move,v),h.off(u.touch.up,m))}function m(s){if(p(!1),s=t.event(s),c.x&&(n=s.pageX-e),c.y&&(o=s.pageY-i),c.cb_up&&c.cb_up({x:s.pageX,y:s.pageY,distX:n,distY:o,dirX:a,dirY:r}),c.cb_click){var l=!1;c.x&&Math.abs(n)<2&&(l=!0),c.y&&Math.abs(o)<2&&(l=!0),l&&c.cb_click(s)}}function v(d){c.capture&&(d.preventDefault(),d.stopImmediatePropagation()),d=t.event(d);var u,f=!1;c.x&&(a=0,s<d.pageX?a=1:s>d.pageX&&(a=-1),s=d.pageX,u=d.pageX-e,null!==c.limit_x?u>=c.limit_x.min&&u<=c.limit_x.max&&(c.min?Math.abs(u)>c.min&&(n=u,f=!0):(n=u,f=!0)):c.min?Math.abs(u)>c.min&&(n=u,f=!0):(n=u,f=!0)),c.y&&(r=0,l<d.pageY?r=1:l>d.pageY&&(r=-1),l=d.pageY,u=d.pageY-i,null!==c.limit_y?u>=c.limit_y.min&&u<=c.limit_y.max&&(c.min?Math.abs(u)>c.min&&(o=u,f=!0):(o=u,f=!0)):(o=u,f=!0)),f&&c.cb_move&&c.cb_move({distX:n,distY:o,dirX:a,dirY:r,x:d.pageX,y:d.pageY})}this.set=function(t){return c=t,OGX.Data.merge(c,d),"auto"===c.state&&(u.enable,u.disable,this.enable()),this.state=c.state,c},this.enable=function(){!f&&c&&(f=!0,g(!0))},this.disable=function(){f&&(f=!1,g(!1),p(!1))}},OGX.Touch.HOLD_START="TouchHoldStart",OGX.Touch.HOLD_END="TouchHoldEnd",require("Tree","Uxi","Touch"),OGX.Tree=function(t){construct(this,"Tree");var e,i,n,o,a,r,s,l,c=this,d='<span class="ogx_tree_item_icon"></span><span class="ogx_tree_item_label">{{$label}}</span>',u=t,f={show_root:!0,root_label:"root",editable:!1,sort:{enabled:!0,property:"label",way:1},type:"type",toggle:!0,drag_after:1e3,key:null,scope:["public"],chromeos:!1,types:{root:{mode:"folder",display:{html:d}},file:{mode:"file",display:{html:d}},folder:{mode:"folder",display:{html:d}}},data:{_id:0,type:"root",state:"closed",label:null,items:[]},display:null,callbacks:{select:null,unselect:null,open:null,close:null,move:null}},h="_id",g=0;function _(t,e,i,n,o){return t[h]===o[h]&&e}function p(t,e){var i={container_display:"",container_css:"",arrow_display:"",arrow_style:"ogx_tree_item_arrow_open",state:"open",type:e.type};return i[h]=e[h],OGX.Data.merge(i,t,!0),OGX.Templater.make('<div class="ogx_tree_item" data-id="{{$_id}}" data-state="{{$state}}" data-type="{{$type}}" data-compound="{{$type}}-{{$state}}" data-children="{{!$empty}}"><div class="ogx_tree_item_arrow {{$arrow_style}} {{$arrow_display}}"><span></span></div><div class="ogx_tree_item_content"></div><div class="ogx_tree_item_container {{$container_display}} {{$container_css}}"></div></div>',i)}function m(){var t=p({},u.data);e.html(t),u.data.element=e.children(".ogx_tree_item").first(),u.data.uxi=c,O(u.data,c),u.show_root||u.data.element.addClass("ogx_tree_root_hidden")}function v(){m(),y(u.data,c)}function y(t,e){if(t.parent=e,t.hasOwnProperty("items")){var i,n;!t.items.hasOwnProperty("insert")&&(t.items=new OGX.List(t.items)),u.sort.enabled&&t.items.order(u.sort.property,u.sort.way);for(var o=0;o<t.items.length;o++)n=e,i=k(t.items[o]),x(t.element.children(".ogx_tree_item_container").first(),t.items[o]),O(t.items[o],e),i.display.hasOML()&&(n=e.nodes.last()),y(t.items[o],n)}}function x(t,e){var i=k(e),n={_id:e[h],container_display:"",arrow_display:"",arrow_style:"",state:"open"};e.hasOwnProperty("state")&&(n.state=e.state),e.state=n.state,"folder"===i.mode?(e.hasOwnProperty("items")&&e.items.length?n.empty=!!e.items.length:(n.state="closed",n.arrow_style="ogx_tree_item_arrow_disabled",n.empty=!0),"open"===n.state?n.arrow_style="ogx_tree_item_arrow_open":(n.arrow_style+=" ogx_tree_item_arrow_close",n.container_display="ogx_tree_item_container_hidden",n.state="closed")):n.arrow_display="ogx_tree_item_arrow_hidden";var o=p(n,e);t.append(o),e.element=t.children().last()}function O(t,e){var i=k(t),n='.ogx_tree[data-ogx-id="'+c.id+'"] .ogx_tree_item[data-id="'+t[h]+'"] > .ogx_tree_item_content';if(i.display.hasOML()){var o=i.display.oml(n,t,!1);OGX.OML.render(e,o,t),t.uxi=e.nodes.last()}else{var a=i.display.html(t);a=OGX.Templater.make(a,t),$(n).html(a)}}function b(t){return delete t.element,delete t.parent,delete t.uxi,delete t.state,l||delete t[h],!1}function w(t){"folder"===k(t).mode&&(t.items.length?t.element.attr("data-empty",!1):(t.element.attr("data-state","closed").attr("data-compound",t.type+"-closed").attr("data-empty",!0),t.element.children(".ogx_tree_item_arrow").addClass("ogx_tree_item_arrow_disabled")),"open"===t.state?(t.element.attr("data-state","open").attr("data-compound",t.type+"-open"),t.element.children(".ogx_tree_item_arrow").removeClass("ogx_tree_item_arrow_close").removeClass("ogx_tree_item_arrow_disabled").addClass("ogx_tree_item_arrow_open"),t.element.children(".ogx_tree_item_container").removeClass("ogx_tree_item_container_hidden")):(t.element.attr("data-state","open").attr("data-compound",t.type+"-closed"),t.element.children(".ogx_tree_item_arrow").removeClass("ogx_tree_item_arrow_open").addClass("ogx_tree_item_arrow_close"),t.element.children(".ogx_tree_item_container").addClass("ogx_tree_item_container_hidden")))}function G(){if(s){var t=E(s);t&&t.children(".ogx_tree_item_content").removeClass("ogx_tree_selected_item"),s=null}}function X(){return!!s&&D(s)}function T(t){var e=E(t);e&&(s=t,e.children(".ogx_tree_item_content").addClass("ogx_tree_selected_item"))}function C(t,e){return L((function(i){return i[h]===e&&(i.hasOwnProperty("items")||(i.items=new OGX.List),!i.items.hasOwnProperty("insert")&&(i.items=new OGX.List(i.items)),i.items.push(t),i.state="open",w(i),!0)}))}function D(t){if(!t||"root"===t)return u.data;return L((function(e,i){return e[h]===t&&e}))}function E(t){var e=D(t);return!!e&&e.element}function S(){g=1,L((function(t){return t[h]=g++,t.hasOwnProperty("type")||(t.hasOwnProperty("items")?t.type="folder":t.type="file"),!1}))}function L(t,e,i){var n;return void 0===e&&(e=null),void 0===i&&(i=u.data),(n=function i(o,a,r,s){if(n=t(o,a,r,s,e))return n;if(o.hasOwnProperty("items")&&o.items.length)for(var l=0;l<o.items.length;l++)if(n=i(o.items[l],a+"/"+o.label,o,l))return n;return!1}(i,""))||i}function k(t){return!!u.types.hasOwnProperty(t.type)&&u.types[t.type]}function M(t){var i,n,o;i=D(g=t.data("id")),n="root"===(o=i).type?"":L(_,o),u.toggle?t.children(".ogx_tree_item_content").hasClass("ogx_tree_selected_item")?G():(G(),t.children(".ogx_tree_item_content").addClass("ogx_tree_selected_item"),s=g):(G(),s=g,t.children(".ogx_tree_item_content").addClass("ogx_tree_selected_item")),c.onSelect({path:n,item:i}),e.trigger(OGX.Tree.SELECT,{path:n,item:i})}function N(t){t?(u.editable?(e.on(c.touch.down,".ogx_tree_item > .ogx_tree_item_content",(function(t){t.preventDefault(),M($(this).parent(0)),1!==$(this).parent(0).data("id")&&function(){a&&clearInterval(a);r=(new Date).getTime(),a=setInterval(I,50)}()})),$(document).on(c.touch.up,(function(){P(),n&&(A(!1),function(){var t=n.offset().left,a=n.offset().top,r=(l=t,d=a,L((function(t,e){return u=t.element.offset(),f=t.element.children(".ogx_tree_item_content").children(".ogx_tree_item_icon"),l>=u.left&&l<=u.left+f.width()&&d>=u.top&&d<=u.top+f.height()&&t}))),s=k(r);var l,d,u,f;!r||r&&(r[h]===i[h]||"folder"!==s.mode)?(o.css("opacity",1),n.remove(),n=null,i=null):(_=r,function(t){L((function(e,i,n,o){return e[h]===t&&(n.items.splice(o,1),n.items.length||(n.state="closed"),w(n),!0)}))}((g=i)[h]),C(g,_[h]),_.element.children(".ogx_tree_item_container").empty(),_.state="open",y(_,_.element),w(_),o.remove(),n.remove(),n=null,c.onMove(i),e.trigger(OGX.Tree.DROP,i),i=null);var g,_}())}))):e.on("click",".ogx_tree_item > .ogx_tree_item_content",(function(t){M($(this).parent(0))})),e.on(c.touch.down,".ogx_tree_item_arrow",(function(t){t.preventDefault(),P();var i=D($(this).parent(0).data("id"));i&&i.hasOwnProperty("items")&&i.items.length&&("open"===i.state?(c.onClose(i),e.trigger(OGX.Tree.CLOSE,i)):(c.onOpen(i),e.trigger(OGX.Tree.OPEN,i)),"open"===i.state?i.state="closed":i.state="open",w(i))}))):(u.editable?e.off(c.touch.down,".ogx_tree_item > .ogx_tree_item_content"):e.off("click",".ogx_tree_item > .ogx_tree_item_content"),e.off(c.touch.down,".ogx_tree_item_arrow"))}function I(){var t;(new Date).getTime()-r>=u.drag_after&&(s&&(i=D(s))&&(t=i.element,o=t,(n=t.clone()).children(".ogx_tree_item_arrow").css("display","none"),t.css("opacity",.3),n.addClass("ogx_tree_item_drag"),n.css({top:t.offset().top,left:t.offset().left}),e.prepend(n),A(!0),e.trigger(OGX.Tree.DRAG,i)),P())}function A(t){t?$(document).on(c.touch.move,(function(t){t=function(t){if(t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches)return t.originalEvent.changedTouches[0];return t}(t),n.css({top:t.pageY+"px",left:t.pageX+"px"})})):$(document).off(c.touch.move)}function P(){a&&(clearInterval(a),a=null)}this.onFocus=function(){return N(!0),this},this.onBlur=function(){return N(!1),this},this.onSelect=function(){},this.onUnselect=function(){},this.onOpen=function(){},this.onClose=function(){},this.onMove=function(){},this.addItem=function(t,e){if(void 0===e&&(e=s),e){var i=D(e);if("folder"===k(i).mode){l||(t[h]=++g),C(t,e);var n=k(t);x(i.element.children(".ogx_tree_item_container").first(),t),O(t,i.parent);var o=i.uxi;return n.display.hasOML()&&(o=i.uxi.nodes.last()),y(t,o),i.element.data("state","open"),i.element.data("compound",t.type+"-close"),i.element.children(".ogx_tree_item_container").removeClass("ogx_tree_item_container_hidden"),i.element.children(".ogx_tree_item_arrow").removeClass("ogx_tree_item_arrow_disabled ogx_tree_item_arrow_close").addClass("ogx_tree_item_arrow_open"),!0}}return!1},this.getItem=function(t){var e,i,n=D(t);return!!n&&(e=n,i={},OGX.Data.merge(i,e),b(i),i)},this.selectItem=function(t){return T(t),X()},this.selectItemByPropVal=function(t,e){var i=function(t,e){function i(i,n){return!(!i.data.hasOwnProperty(t)||i.data[t]!==e)&&n+"/"+i.label}return L(i)}(t,e);return!!i&&(G(),T(i[h]),X())},this.selectItemByPath=function(t){var e=function(t){var e=function(t){function e(e,i){return t===i+"/"+e.label&&e}return L(e)}(t);if(e)return e.element;return!1}(t);return!!e&&(G(),e.children(".ogx_tree_item_content").addClass("ogx_tree_selected_item"),s=e.data("id"),X())},this.updateItem=function(t,e,i){void 0===i&&(i=!0);var n=D(t);if(n){if(n.uxi){var o=n.uxi.el;n.uxi.kill(),o.empty()}else i&&n.element.children(".ogx_tree_item_container").empty();OGX.Data.merge(n,e,!0),O(n,n.parent),i&&n.hasOwnProperty("items")&&n.items.length&&(y(n,n.parent),n.element.children(".ogx_tree_item_arrow").removeClass("ogx_tree_item_arrow_disabled ogx_tree_item_arrow_close").addClass("ogx_tree_item_arrow_open"),n.element.attr("state","open").attr("state",n.type+"-open"))}},this.replaceItem=function(t){var e=D(t[h]);e&&(e.uxi&&e.uxi.kill(),OGX.Data.merge(t,e,!1),O(e,e.parent),e.hasOwnProperty("items")&&e.items.length&&y(e,e.parent))},this.deleteItem=function(t){var e=D(t);if(e){var i=function(t){function e(e){return!(!e.hasOwnProperty("items")||!e.items.get({_id:{eq:t}},null,1))&&e}return L(e)}(t);return e.uxi&&e.uxi.kill(),i.items.findDelete("_id",t,1),e.element.remove(),i.items.length||(i.state="closed"),w(i),e}},this.deleteSelectedItem=function(){return function(){function t(t,e,i,n){if(t[h]===s)return t.element.remove(),i.items.splice(n,1),w(i),!0}if(s)return L(t);return!1}()},this.getSelectedItem=function(){return X()},this.getTree=function(){var t=L(b,null,OGX.Data.clone(u.data));return t||!1},this.setData=function(t){t.hasOwnProperty("types")&&this.setTypes(t.types),t.hasOwnProperty("tree")&&this.setTree(t.tree)},this.setTypes=function(t){u.types=t},this.setTree=function(t){this.scroll?this.clear([this.scroller.id]):this.clear(),u.data=t,u.data.hasOwnProperty("state")||(u.data.state="open"),l||S(),v()},this.newTree=function(){c.scroll?c.clear([c.scroller.id]):c.clear();g=0,m()},this.filterTree=function(t){!function(t){var e=[];function i(n,o,a,r){if(-1!==(o+n.label).indexOf(t)&&e.push(o+"/"+n.label),n.hasOwnProperty("items")&&n.items.length)for(var s=0;s<n.items.length;s++)i(n.items[s],o+"/"+n.label,n,s)}i(u.data,"")}(t)},function(){if(OGX.Data.merge(u,f),(e=c.el).addClass("ogx_tree"),Array.isArray(u.data)){var t=new OGX.List(OGX.Data.clone(u.data));u.data={_id:0,type:"root",data:{label:u.root_label},display:null,items:t}}u.callbacks.select||(u.callbacks.select=c.onSelect),u.callbacks.unselect||(u.callbacks.unselect=c.onUnselect),u.callbacks.open||(u.callbacks.open=c.onOpen),u.callbacks.close||(u.callbacks.close=c.onClose),u.callbacks.move||(u.callbacks.move=c.onMove)}(),function(){for(var t in u.types.hasOwnProperty("root")||(u.types.root=f.types.root),u.types)u.types[t].hasOwnProperty("display")||(u.types[t].display={html:d}),u.types[t].display.hasOwnProperty("html")&&u.types[t].display.html||(u.types[t].display.html=d),u.types[t].display=new OGX.Display(u.types[t].display)}(),u.key?(h=u.key,l=!0):(l=!1,S()),u.data&&v()},OGX.Tree.SELECT="TreeSelect",OGX.Tree.UNSELECT="TreeUnselect",OGX.Tree.OPEN="TreeOpen",OGX.Tree.CLOSE="TreeClose",OGX.Tree.DRAG="TreeDrag",OGX.Tree.DROP="TreeDrop",require("TreedList","Uxi"),OGX.TreedList=function(t){construct(this,"TreedList");var e=this,i={renderer:"Tree",list:new OGX.List,types:null,display:null,displays:null,group_by:null,group_mode:null,group_param:null},n=t,o=null,a=null;function r(){switch(s(n.list),n.renderer){case"Tree":i={el:n.el,data:undefined},n.types&&(i.types=n.types),i.tree=function(){var t={type:"root",label:"root",state:"open",items:[]};function e(t,i){if(Array.isArray(t)){for(var n=0;n<t.length;n++)t[n].type="file";i.items=t}else for(var o in t)i.items.push({type:"folder",label:o,state:"open",items:[]}),e(t[o],i.items[i.items.length-1])}return e(o,t),t}(),a=e.create(n.renderer,i);break;case"StackedTree":(i=function(){var t={display:!1,displays:!1};n.display&&n.display.hasOwnProperty("bind")?(t.display=OGX.Data.clone(n.display),t.displays=OGX.Data.clone(n.displays)):(t.display={bind:"__type"},t.displays={__default:OGX.Data.clone(n.display)},"object"==typeof t.displays.__default.css?t.displays.__default.css.hasOwnProperty("add")?t.displays.__default.css.add+=" ogx_stacked_tree_item":t.displays.__default.css.add="ogx_stacked_tree_item":t.displays.__default.css={add:t.displays.__default.css+" ogx_stacked_tree_item"});for(var e=0;e<n.group_by.length;e++)grp=n.group_by[e],t.displays[grp]={html:"{{$label}}",css:"ogx_stacked_tree_item"};return t}()).el=n.el;var t=function(){var t={data:[]};function e(t,i,o,a){var r;if(Array.isArray(t)){for(var s=0;s<t.length;s++)t[s].hasOwnProperty("scope")||(t[s].scope=["public"]);i.items=t}else for(var l in t)r={label:l,__type:n.group_by[a],scope:["public"],items:[]},o?(i.data.push(r),e(t[l],i.data[i.data.length-1],!1,a+1)):(i.items.push(r),e(t[l],i.items[i.items.length-1],!1,a+1))}return e(o,t,!0,0),t}();i.list=t.data,n.hasOwnProperty("id")&&(i.id=n.id+"_stacked"),a=e.create(n.renderer,i);break;case"RouletteTree":var i;(i=OGX.Data.clone(n)).hasOwnProperty("id")&&(i.id=i.id+"_roultree"),i.data=o;for(var r=[],l=0;l<n.group_by.length;l++)r.push(n.group_by[l].split(".").pop());i.groups=r,a=e.create(n.renderer,i)}}function s(t,e,i,a){n.list=t,void 0!==e&&(n.group_by=e),void 0!==i&&(n.group_mode=i),void 0!==a&&(n.group_param=a),o=n.list.group(n.group_by,n.group_mode,n.group_param)}this.val=function(t,e,i,n){return void 0!==t?(s(t),o):o},this.getRenderer=function(){return a},this.getTree=function(){return o},n&&void 0!==n||(n={}),OGX.Data.merge(n,i),n.list.hasOwnProperty("insert")||(n.list=new OGX.List(n.list)),e.el.addClass("ogx_treedlist"),r()},require("Uxi","Overlay","Loading"),OGX.Uxi=function(t){construct(this,"Uxi"),this.el=null,this.id=null,this.name=null,this.sleeping=!1,this.blured=!0,this.floating=!1,this.scroll=!1,this.scroller=null,this.enabled=!0,this.always_on=!1,this.visible=!1,this.nodes=new OGX.List,this.points={},this.observer=!1,this.parent=null,this.floats=null,this.group=null,this.always_on=null,this.selector=null,this.title=null,this.data=null,config_default={id:(new Date).getTime()+""+Math.round(1e3*Math.random()),title:"",el:!1,css:""},void 0===t&&(t={}),OGX.Data.merge(t,config_default,!1),OGX.Data.merge(this,t,!0,!1,!0);var e="#"===this.id.substr(0,1);if(e&&(this.id=this.id.substr(1)),this.selector='.ogx_uxi[data-ogx-id="'+this.id+'"]',t.el){var i=$(t.el),n="ogx_uxi "+t.css,o='<div class="'+n+'" data-ogx-id="'+this.id+'"';if(e&&(o+=' id="'+this.id+'"'),o+="></div>",t.scroll){this.scroller=this.create("Scroller",{id:this.id+"_scroller",el:t.el}),t.el='.ogx_uxi[data-ogx-id="'+this.id+'_scroller"] > .ogx_scroller_inner',(i=$(t.el)).addClass(n).attr("data-ogx-id",this.id),e&&i.attr("id",this.id);var a=this;setTimeout((function(){a.scroller.resize()}),0)}else i.append(o),t.el='.ogx_uxi[data-ogx-id="'+this.id+'"]';this.el=$(t.el)}},OGX.Uxi.prototype.enable=function(t){return this.enabled||(this.enabled=!0,this.focus(t)),this},OGX.Uxi.prototype.disable=function(t){return this.enabled&&(this.enabled=!1,this.blur(t)),this},OGX.Uxi.prototype.ux=function(){},OGX.Uxi.prototype.onFocus=function(){},OGX.Uxi.prototype.onBlur=function(){},OGX.Uxi.onFocus=function(){},OGX.Uxi.onBlur=function(){},OGX.Uxi.prototype.construct=function(){},OGX.Uxi.prototype.destroy=function(){},OGX.Uxi.prototype.resize=function(t){return void 0===t&&(t=!1),t&&this.resizeNodes(),this},OGX.Uxi.prototype.show=function(){return this._show()},OGX.Uxi.prototype.hide=function(){return this._hide()},OGX.Uxi.prototype._show=function(){return this.el&&(this.visible=!0,this.el.removeClass("ogx_uxi_hidden")),this},OGX.Uxi.prototype._hide=function(){return this.el&&(this.visible=!1,this.el.addClass("ogx_uxi_hidden")),this},OGX.Uxi.prototype.empty=function(){return this.clear(),this},OGX.Uxi.prototype.observe=function(t,e,i,n,o){var a=this,r=this.el,s=null;if(void 0!==o&&(r=o),t){if(!this.observer)return void 0!==e&&e||(e={childList:!0,subtree:!0}),this.observer=new MutationObserver((function(t,e){t.forEach((function(t){s&&clearTimeout(s),s=setTimeout((()=>{void 0!==i?i(t,n):a.el.trigger(OGX.View.CHANGED,t)}),10)}))})),this.observer.observe(r[0],e),!0}else if(this.observer)return this.observer.disconnect(),this.observer=null,!0;return!1},OGX.Uxi.prototype.observeOnce=function(t,e,i,n){var o=this;this.observe(!0,t,(function(){o.observe(!1),void 0!==e&&e(i)}),null,n)},OGX.Uxi.prototype.sleep=function(){return this.sleeping||(this.blur(2),this.sleeping=!0,this.scroll?(this.__parent=this.el.parents(".ogx_scroller_outer").first().parent(0),this.el=this.__parent.children(".ogx_scroller_outer").first().detach()):(this.__parent=this.el.parent(0),this.el=this.el.detach())),this},OGX.Uxi.prototype.wake=function(t){return t=void 0===t?this.__parent:$(t),this.sleeping&&(this.sleeping=!1,t.prepend(this.el),this.el=t.find('.ogx_uxi[data-ogx-id="'+this.id+'"]').first(),this.focus(2),delete this.__parent),this},OGX.Uxi.prototype.detach=function(){return this.sleep(),this.parent.nodes.findDelete("id",this.id,1),this},OGX.Uxi.prototype.attach=function(t,e){return this.parent=t,this.parent.nodes.insert(this),this.selector=e,this.wake(e),setTimeout((()=>this.resize),0),this},OGX.Uxi.prototype.resizeNodes=function(){for(var t=this.gather(),e=0;e<t.length;e++)t[e].hasOwnProperty("resize")&&t[e].resize();return this},OGX.Uxi.prototype.kill=function(){OGX.Object.destroy(this)},OGX.Uxi.prototype.reveal=function(t){var e=this.path();if(e){for(var i=0;i<e.length;i++)i>0&&"Carousel"===e[i]._NAME_&&"Container"===e[i-1]._NAME_||(e[i].floating?e[i].show(t):e[i].show(this._NAME_,this.id));return this}},OGX.Uxi.prototype.focus=function(t){if(void 0===t&&(t=1),this.blured)switch(this.blured=!1,this.ux(!0),this.__proto__.onFocus(),this.onFocus(),t){case 1:this.focusNodes();break;case 2:this.focusTree()}return this},OGX.Uxi.prototype.focusTree=function(){for(var t=this.gather(),e=0;e<t.length;e++)"function"==typeof t[e].focus&&t[e].focus(0);return this},OGX.Uxi.prototype.focusNodes=function(){for(var t=0;t<this.nodes.length;t++)"function"==typeof this.nodes[t].focus&&this.nodes[t].enabled&&this.nodes[t].focus(1);return this},OGX.Uxi.prototype.blur=function(t){if(void 0===t&&(t=1),!this.always_on&&!this.blured)switch(this.blured=!0,this.ux(!1),this.__proto__.onBlur(),this.onBlur(),t){case 1:this.blurNodes();break;case 2:this.blurTree()}return this},OGX.Uxi.prototype.blurTree=function(){for(var t=this.gather(),e=0;e<t.length;e++)"function"==typeof t[e].blur&&t[e].blur(0);return this},OGX.Uxi.prototype.blurNodes=function(){for(var t=0;t<this.nodes.length;t++)"function"==typeof this.nodes[t].blur&&this.nodes[t].blur(1);return this},OGX.Uxi.prototype.path=function(){for(var t=new OGX.List,e=this;e&&e.hasOwnProperty("parent");)t.insert(e,0),e=e.parent;return t.shift(),t},OGX.Uxi.prototype.gather=function(t){var e=[],i={_NAME_:{eq:""}};return void 0!==t&&(Array.isArray(t)?i={_NAME_:{regex:new RegExp(t.join("|"))}}:-1!==t.indexOf(".")?(comp=t.split("."),i={_NAME_:{regex:new RegExp(comp[0].slice(0,-1))},_CLASS_:{eq:comp[1]}}):i={_NAME_:{regex:new RegExp(t)}}),function t(n){if(void 0!==n&&void 0!==n.nodes&&n.nodes.length){var o=n.nodes.get(i);o&&(e=e.concat(o));for(var a=0;a<n.nodes.length;a++)void 0!==n.nodes[a]&&void 0!==n.nodes[a].nodes&&n.nodes[a].nodes.length&&(o=t(n.nodes[a]))&&o.length&&(e=e.concat(o[0]))}}(this),new OGX.List(e)},OGX.Uxi.prototype.gatherByName=function(t){var e=[],i={name:{eq:t}};return function t(n){if(void 0!==n&&void 0!==n.nodes&&n.nodes.length){var o=n.nodes.get(i);o&&(e=e.concat(o));for(var a=0;a<n.nodes.length;a++)void 0!==n.nodes[a]&&void 0!==n.nodes[a].nodes&&n.nodes[a].nodes.length&&(o=t(n.nodes[a]))&&o.length&&(e=e.concat(o[0]))}}(this),new OGX.List(e)},OGX.Uxi.prototype.cfind=function(t,e,i){var n={};void 0!==e&&e&&(e instanceof RegExp?n.id={regex:e}:n.id={eq:e}),void 0!==t&&t&&(n._NAME_={eq:t}),void 0===i&&(i=1);var o=OGX.Object.get(n,null,i);return(1===i||!!o.length)&&o},OGX.Uxi.prototype.find=function(t,e,i){void 0===i&&(i=!1);var n={};if(typeof e==typeof t==="undefined")return!1;return void 0!==e&&e&&(e instanceof RegExp?n.id={regex:e}:n.id={eq:e}),void 0!==t&&t&&(n._NAME_={eq:t}),function t(e){var o;if(void 0!==e.nodes&&e.nodes.length){if(o=e.nodes.get(n,null,1)){if(i)switch(i){case"remove":return o.kill(),o}return o}for(var a=0;a<e.nodes.length;a++)if(o=t(e.nodes[a]))return o}return!1}(this)},OGX.Uxi.prototype.children=function(t,e){isNaN(t)||void 0!==e||(e=t,t=null),void 0===e&&(e=0);var i={};return void 0!==t&&t&&(i._NAME_={eq:t}),this.nodes.get(i,null,e)},OGX.Uxi.prototype.parents=function(t,e){isNaN(t)||void 0!==e||(e=t,t=null),void 0===e&&(e=0);var i=function i(n){var o=[];if("App"!==n._NAME_&&n.parent){if(n.parent._NAME_===t&&(o.push(n.parent),e&&o.length===e&&1===e))return o;var a=i(n.parent);return a.length&&(o=o.concat(a)),o}return[]}(this);return 1===e&&i.length?i[0]:new OGX.List(i)},OGX.Uxi.prototype.clear=function(t){void 0===t&&(t=null);for(var e=this.gather(),i=0;i<e.length;i++)t&&t.includes(e[i].id)||OGX.Object.destroy(e[i],!1);return t||(this.nodes=new OGX.List),this},OGX.Uxi.prototype.add=function(t){t.parent=this,this.nodes.insert(t)},OGX.Uxi.prototype.remove=function(t,e){return this.find(t,e,"remove")},OGX.Uxi.prototype.create=function(t,e){"undefined"==typeof __construct&&(__construct=!0);var i=Array.prototype.slice.call(arguments),n=[];e.hasOwnProperty("data")&&n.push(e.data),n=n.concat(i.splice(0,3)),void 0!==OGX[t]&&OGX[t].hasOwnProperty("FLOAT")&&OGX[t].FLOAT&&(e.parent=this,e.el=this.el[0]);var o=OGX.Object.create(t,e);this.add(o),"function"==typeof o.construct&&o.construct.apply(o,n),e.hasOwnProperty("node:OML")&&OGX.OML.render(o,e["node:OML"]);var a=this.enabled&&o.hasOwnProperty("onFocus");return(!this.enabled||this.parent&&this.parent.blured)&&(a=!1),a&&o.onFocus(),o},OGX.Uxi.prototype.parse=function(t){t=OGX.OML.parse(t),OGX.OML.render(this,t)},OGX.Uxi.prototype.topIndex=function(){var t,e=0;return this.el.find("*").each((function(i,n){t=$(n).css("z-index"),t=Number(t),isNaN(t)||t>e&&(e=t)})),e+1},OGX.Uxi.prototype.stage=function(){return function t(e){if(e.parent)return"Stage"!==e.parent._NAME_?t(e.parent):e.parent}(this)},OGX.Uxi.prototype.on=function(){this.el&&this.el.on.apply(this.el,arguments)},OGX.Uxi.prototype.off=function(){this.el&&this.el.off.apply(this.el,arguments)},OGX.Uxi.prototype.toJSON=function(){return{type:this._NAME_,id:this.id,selector:this.selector,data:this.data}},OGX.Uxi.prototype.toOML=function(){var t={},e=this.selector+":"+this._NAME_;if(t[e]={id:this.id,data:this.data,"node:OML":[]},this.nodes.length)for(var i=0;i<this.nodes.length;i++)t[e]["node:OML"].push(this.nodes[i].toOML());return t},OGX.Uxi.prototype.filter=function(t){if(!this.data)return!1;var e=this.data;return Array.isArray(e)||(e=new OGX.List(e)),e.get(t)},require("View","Uxi","Template","Placeholder","Touch"),OGX.View=function(t){construct(this,"View");var e=this,i=!1,n=t;this.__proto__.onFocus=function(){return n.observe&&this.observe(!0),this},this.__proto__.onBlur=function(){return n.observe&&this.observe(!1),this},this.container=function(){return i},this.render=function(t){return void 0===t?n.hasOwnProperty("html")&&n.html&&i.html(n.html):i.html(t),i.trigger(OGX.View.RENDER),this},(i=e.el).addClass("ogx_view ogx_hw"),e.render()},OGX.View.prototype.toOML=function(){var t={};return t[this.selector+":Views."+this._CLASS_]={data:this.data},t},OGX.View.CHANGED="ViewChanged",OGX.View.RENDER="ViewRender",require("Window","Uxi","Placeholder","Touch","Resize"),OGX.Window=function(__config){construct(this,"Window");var that=this,container=!1,config_default={anim:!1,resize:!1,drag:!0,show:!1,width:"100%",height:"100%",min_width:100,min_height:100,max_width:0,max_height:0,head:OGX.Window.HEAD_BACK,icons:[],title:"",win_html:'<div class="ogx_window_head ogx_window_head_{{$head}} ogx_window_head_{{$side}}">$INNER</div><div class="ogx_window_body">{{$html}}</div>',win_inner:['<span class="ogx_window_main_{{$head}} ogx_window_main_icon"></span>','<span class="ogx_window_title">{{$title}}</span>','<span class="ogx_window_icons">$ICONS</span>'],zindex:!1,close_on_click_out:!1,close_dist:100,parent:null},config=__config,pt={x:null,y:null},dir={x:0,y:0},showto=50,user_resized=!1,zd,touch_drag;function genIcons(){for(var t="",e=0;e<config.icons.length;e++)t+='<div class="ogx_window_icon" style="background-image:url(\''+("string"==typeof config.icons[e]?config.icons[e]:config.icons[e].icon)+"')\"></div>";return t}function listenBackIcon(t){t?that.el.on(that.touch.down,".ogx_window_main_back",onBack):that.el.off(that.touch.down,".ogx_window_main_back",onBack)}function onBack(t){t.preventDefault(),t.stopImmediatePropagation(),that.el.trigger(OGX.Window.HIT_BACK,that),that.hide()}function listenIcons(t){t?that.el.on(that.touch.down,".ogx_window_icon",onIcon):that.el.off(that.touch.down,".ogx_window_icon",onIcon)}function onIcon(t){t.preventDefault(),t.stopImmediatePropagation();var e=$(this).index();if("string"==typeof config.icons[e])that.el.trigger(OGX.Window.HIT_ICON,{index:e,id:config.id});else{var i=e;config.icons[e].hasOwnProperty("callback")&&config.icons[e].callback&&(config.icons[e].hasOwnProperty("params")&&(i=config.icons[e].params),config.icons[e].callback.call(null,i))}}function onDrag(t){(t.distX*dir.x>config.close_dist||t.distY*dir.y>config.close_dist)&&that.hide()}function onRelease(t){t.distX*dir.x>config.close_dist||t.distY*dir.y>config.close_dist?that.hide():(t.distX||t.distY)&&(config.anim&&(that.el.addClass("ogx_window_anim_in"),that.el.on("transitionend",(function(){that.el.off("transitionend"),that.el.removeClass("ogx_window_anim_in")}))),that.el.css("transform","translate3d("+pt.x+"px, "+pt.y+"px, 0px)"))}function render(){var t=prepWindow();container.html(t),zd=config.zindex?config.zindex:config.parent.topIndex();var e=getLimitedSize();container.css({width:e.width,height:e.height,"z-index":zd})}function getLimitedSize(){var t,e,i,n=config.parent.el.width(),o=config.parent.el.height();user_resized?(n=config.width,o=config.height):(t=OGX.Data.getBestSize(n,config.width),e=OGX.Data.getBestSize(o,config.height));var a={width:t,height:e};return(config.min_width||config.max_width)&&(-1!==config.width.indexOf("%")?(n=config.parent.el.width(),i=Number(config.width.split("%")[0])*n/100,config.min_width&&i<config.min_width?a.width=config.min_width+"px":config.max_width&&i>config.max_width&&(a.width=config.max_width+"px")):(-1!==(i=config.width).indexOf("px")&&(i=Number(i.split("px")[0])),config.min_width&&i<config.min_width?a.width=config.min_width+"px":config.max_width&&i>config.max_width&&(a.width=config.max_width+"px"))),(config.min_height||config.max_height)&&(-1!==config.height.indexOf("%")?(o=config.parent.el.height(),i=Number(config.height.split("%")[0])*o/100,config.min_height&&i<config.min_height?a.height=config.min_height+"px":config.max_height&&i>config.max_height&&(a.height=config.max_height+"px")):(-1!==(i=config.height).indexOf("px")&&(i=Number(i.split("px")[0])),config.min_height&&i<config.min_height?a.height=config.min_height+"px":config.max_height&&i>config.max_height&&(a.height=config.max_height+"px"))),a}function listenBody(t){t?that.parent.el.on(that.touch.down,".ogx_overlay",onBody):that.parent.el.off(that.touch.down,".ogx_overlay",onBody)}function onBody(t){that.status===OGX.Window.OPEN&&(that.hide(),that.parent.removeOverlay(OGX.Overlay.Fade))}function animWindow(t,e,i,n){void 0!==e&&!0!==e||(e=config.anim);var o={opac:1,tX:0,tY:0},a=container.parent().width(),r=container.parent().height(),s=that.el.outerWidth(),l=that.el.outerHeight(),c=that.el.find(".ogx_window_main_icon").first();switch(t&&(placeWindow(!0),c.removeClass("ogx_window_main_icon_left ogx_window_main_icon_right ogx_window_main_icon_top")),e){case OGX.Window.ANIM_NONE:break;case OGX.Window.ANIM_TOP:t?(o.tY=0,c.addClass("ogx_window_main_icon_top")):o.tY=-l-10;break;case OGX.Window.ANIM_BOTTOM:t?(o.tY=0,c.addClass("ogx_window_main_icon_bottom")):o.tY=r+10;break;case OGX.Window.ANIM_RIGHT:t?(o.tX=a-s,c.addClass("ogx_window_main_icon_right")):o.tX=a+10;break;case OGX.Window.ANIM_LEFT:t?(o.tX=0,c.addClass("ogx_window_main_icon_left")):o.tX=-s-10}var d=100;t?(pt.x=o.tX,pt.y=o.tY):d=0,setTimeout((function(){dir.x,that.el.on("transitionend",(function(){that.el.off("transitionend"),t?that.el.removeClass("ogx_window_anim_in").addClass("ogx_window_open"):that.el.removeClass("ogx_window_anim_out ogx_window_open"),"function"==typeof i&&i(n),t?(that.status=OGX.Window.OPEN,that.el.trigger(OGX.Window.OPEN,that)):(that.status=OGX.Window.CLOSED,that.el.trigger(OGX.Window.CLOSED,that))})),t?(that.status=OGX.Window.OPENING,that.el.trigger(OGX.Window.OPENING,that)):(that.status=OGX.Window.CLOSING,that.el.trigger(OGX.Window.CLOSING,that)),config.anim!==OGX.Window.ANIM_NONE&&(t?that.el.addClass("ogx_window_anim_in"):that.el.addClass("ogx_window_anim_out")),that.el.css({transform:"translate3d("+o.tX+"px, "+o.tY+"px, 0px)",opacity:o.opac,visibility:"visible"})}),d)}function placeWindow(t){var e=container.parent().width(),i=container.parent().height(),n=that.el.outerHeight(),o=that.el.outerWidth();that.el.removeClass("ogx_window_anim_in").removeClass("ogx_window_anim_out");var a={x:0,y:0};switch(config.anim){case OGX.Window.ANIM_TOP:a.y=t?-n:n,dir.y=-1;break;case OGX.Window.ANIM_BOTTOM:a.y=t?i:i-n,dir.y=1;break;case OGX.Window.ANIM_RIGHT:a.x=t?e:e-o,dir.x=1;break;case OGX.Window.ANIM_LEFT:t&&(a.x=-o),dir.x=-1}that.el.css({transform:"translate3d("+a.x+"px, "+a.y+"px, 0px)"})}function prepWindow(){var t=new OGX.Display(config),e={};e.head=config.head,e.title=config.title,e.icons=config.icons,e.html=t.html();var i=config.win_html,n="";switch(config.anim){case OGX.Window.ANIM_RIGHT:case OGX.Window.ANIM_TOP:case OGX.Window.ANIM_BOTTOM:n=config.win_inner,e.side="right";break;case OGX.Window.ANIM_LEFT:n=config.win_inner.reverse(),e.side="left"}n=n.toString().replace(/>,</g,"><"),i=i.replace("$INNER",n);var o="";return config.icons&&config.icons.length&&(o=genIcons()),i=i.replace("$ICONS",o),OGX.Templater.make(i,e)}function onResize(){user_resized=!0,that.resizeNodes()}function listenScroll(t){t?(that.el.on(OGX.Scroller.START,(function(){that.onBlur()})),that.el.on(OGX.Scroller.END,(function(){that.onFocus()}))):(that.el.off(OGX.Scroller.START),that.el.off(OGX.Scroller.END))}function initPlaceholders(){that.placeholders(config,['.ogx_window[data-ogx-id="'+that.id+'"] > .ogx_window_body'])}function initDefaults(){OGX.Data.merge(config,app.getDefaults("windows")),OGX.Data.merge(config,config_default),-1!==config.head.indexOf(".")&&(config.head=eval(config.head)),-1!==config.anim.indexOf(".")&&(config.anim=eval(config.anim)),container=that.el,container.addClass("ogx_window"),that.dragable=config.drag,that.resizable=config.resize}function init(){if(initDefaults(),render(),initPlaceholders(),placeWindow(!0),config.drag){var t={state:"manual"},e={top:!1,bottom:!1,left:!1,right:!1,cb_resize:onResize};switch(e.min_width=config.min_width,e.min_height=config.min_width,e.max_width=config.max_width,e.max_height=config.max_height,t.cb_drag=onDrag,t.cb_up=onRelease,config.anim){case OGX.Window.ANIM_LEFT:t.x=!0,t.y=!1,t.limit_x={min:-300,max:0},e.right=!0;break;case OGX.Window.ANIM_RIGHT:t.x=!0,t.y=!1,t.limit_x={min:0,max:300},e.left=!0;break;case OGX.Window.ANIM_TOP:t.x=!1,t.y=!0,t.limit_y={min:-300,max:0},e.bottom=!0;break;case OGX.Window.ANIM_BOTTOM:t.x=!1,t.y=!0,t.limit_y={min:0,max:300},e.top=!0}touch_drag=that.touch.add("Drag",t)}config.resize&&that.setResize(e),config.show&&that.show(),config.scroll&&listenScroll(!0)}this.id=config.id,this.dragable=null,this.resizeable=null,this.status=OGX.Window.CLOSED,this.onFocus=function(){return config.close_on_click_out&&listenBody(!0),config.head&&listenBackIcon(!0),config.icons&&listenIcons(!0),config.drag&&touch_drag.enable(),config.resize&&this.enableResize(),this},this.onBlur=function(){return config.close_on_click_out&&listenBody(!1),config.head&&listenBackIcon(!1),config.icons&&listenIcons(!1),config.drag&&touch_drag.disable(),config.resize&&this.disableResize(),this},this.show=function(t,e,i){return this.visible||(this._show(),config.drag&&touch_drag.enable(),config.resize&&this.enableResize(),listenScroll(!0),-1===[OGX.Window.OPEN,OGX.Window.OPENING].indexOf(this.status)&&(this.focus(1),this.front(),null==t&&(t=config.anim),setTimeout((function(){animWindow(!0,t,e,i)}),showto),showto&&(showto=0))),this},this.hide=function(t,e,i){return this.visible&&(this._hide(),config.drag&&touch_drag.disable(),config.resize&&this.disableResize(),listenScroll(!1),-1===[OGX.Window.CLOSED,OGX.Window.CLOSING].indexOf(this.status)&&(this.blur(1),void 0!==t&&!0!==t||(t=config.anim),animWindow(!1,t,e,i))),this},this.resize=function(){var t=getLimitedSize();return container.css({width:t.width,height:t.height}),this.place(),this},this.destroy=function(){config.scroll&&listenScroll(!1),this.touch.wipe()},this.icons=function(t){if(void 0===t)return config.icons;config.icons&&config.icons.length&&listenIcons(!1),config.icons=t,this.el.find(".ogx_window_icons").first().html(genIcons()),listenIcons(!0)},this.front=function(){return zd=config.parent.topIndex(),this.el.css("z-index",zd),this},this.place=function(){placeWindow(this.status===OGX.Window.CLOSED)},this.drag=function(t){t?config.drag||(config.drag=this.dragable=!0):config.drag&&(config.drag=this.dragable=!1)},init()},OGX.Window.READY="WindowReady",OGX.Window.ANIM_LEFT="left",OGX.Window.ANIM_RIGHT="right",OGX.Window.ANIM_TOP="top",OGX.Window.ANIM_BOTTOM="bottom",OGX.Window.ANIM_NONE="none",OGX.Window.HEAD_BACK="back",OGX.Window.HEAD_CLOSE="close",OGX.Window.HEAD_NONE="none",OGX.Window.CLOSING="WindowClosing",OGX.Window.CLOSED="WindowClosed",OGX.Window.OPENING="WindowOpening",OGX.Window.OPEN="WindowOpen",OGX.Window.HIT_ICON="WindowHitIcon",OGX.Window.HIT_BACK="WindowHitBack",OGX.Window.FLOAT=!0,OGX.Workers=function(){"use strict";var t=0,e=new OGX.List;function i(t,e,i,n){var o;if(void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=null),"string"==typeof t)o=new Worker(t);else{var a="";if(e){for(var r=0;r<e.length;r++)e[r]=window.location.origin+"/"+e[r];a+="importScripts('"+e.join("','")+"');"}var s="onmessage = function(__e) {";i&&(s+='if(__e.data === "__stop__"){__stop(); return;}',s+='if(__e.data === "__start__"){__start(); return;}'),s+="postMessage(__work.call(null, __e.data));",s+="};",i&&(s+="const __stop = () => {clearInterval(intv);};",s+="const __start = () => {intv = setInterval(() => { postMessage(__work.call(null, "+JSON.stringify(n)+"));}, "+i+"); return;};",s+="__start();");var l=t.toString(),c=/^function ?([\w]+)?/.exec(l);l=c&&void 0!==c[1]?l.replace(c[1],"__work"):l.replace("function","function __work");var d=new Blob([a+l+";"+s],{type:"text/javascript"});o=new Worker(window.URL.createObjectURL(d))}return o}this.get=function(){return e},this.add=function(n,o,a){void 0===o&&(o=++t);var r=i(n,a);return r.id=o,e.insert(r),o},this.remove=function(t){var i=e.get({id:{eq:t}},null,1);if(!i)return!1;i.terminate(),e.findDelete("id",t,1)},this.call=function(t,i,n,o){void 0===n&&(n=null);var a=e.get({id:{eq:t}},null,1);return!!a&&(a.onmessage=function(t){n&&(void 0===o?n(t.data):n(t.data,o))},a.postMessage(i),a)},this.run=function(n,o,a,r,s,l,c){if((void 0===o||!o)&&(o=++t),void 0===a&&(a=null),void 0===r&&(r=null),void 0===l&&(l=null),r){var d=i(n,a,r,s);return d.id=o,e.insert(d),d.onmessage=function(t){l&&(void 0===c?l(t.data):l(t.data,c))},o}},this.stop=function(t){var i=e.get({id:{eq:t}},null,1);if(!i)return!1;i.postMessage("__stop__")},this.start=function(t){var i=e.get({id:{eq:t}},null,1);if(!i)return!1;i.postMessage("__start__")}},OGX.Workers=new OGX.Workers,String.prototype.hasOwnProperty("substr")||(String.prototype.substr=function(t,e){return t<0&&(t=this.length-t),this.slice(t,t+e)});